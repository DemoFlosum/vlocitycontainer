const a23_0x3de3aa=a23_0x2367;(function(_0x4aeb77,_0x483d98){const _0x879edd=a23_0x2367,_0x2ef821=_0x4aeb77();while(!![]){try{const _0x35d905=parseInt(_0x879edd(0x15f))/0x1*(-parseInt(_0x879edd(0x1b5))/0x2)+parseInt(_0x879edd(0x1a0))/0x3*(parseInt(_0x879edd(0x19e))/0x4)+-parseInt(_0x879edd(0x17b))/0x5*(parseInt(_0x879edd(0x1a9))/0x6)+parseInt(_0x879edd(0x163))/0x7+parseInt(_0x879edd(0x144))/0x8+-parseInt(_0x879edd(0x188))/0x9+-parseInt(_0x879edd(0x173))/0xa*(-parseInt(_0x879edd(0x17c))/0xb);if(_0x35d905===_0x483d98)break;else _0x2ef821['push'](_0x2ef821['shift']());}catch(_0x46570e){_0x2ef821['push'](_0x2ef821['shift']());}}}(a23_0x3bd3,0xf0737));function a23_0x2367(_0x444200,_0x299bbe){const _0x3bd309=a23_0x3bd3();return a23_0x2367=function(_0x2367ba,_0x3c9c6c){_0x2367ba=_0x2367ba-0x13c;let _0x53fc4a=_0x3bd309[_0x2367ba];return _0x53fc4a;},a23_0x2367(_0x444200,_0x299bbe);}function a23_0x3bd3(){const _0x3a2bad=['\x20Chunks\x20From\x20','Error\x20\x20Retrieve\x20Vlocity\x20Attachments\x20','Start\x20Deploy\x20Data','log','getFolderSize','../../../services/child-process','flosumToken','Vlocity\x20Temp','post','1549412ztSkoa','projectPath','Retrieved:\x20','base64','Error\x20Create\x20Vlocity\x20Temp\x20Zip\x20','vlocityToken','lastComponentId','Start\x20Backup\x20Data','logger','/services/apexrest/','Error\x20Deploy\x20Data\x20','\x20Deployed.','existsSync','nameSpacePrefix','SOURCE_FOLDER','result','METHOD_ADD_DEPLOYMENT_STATUS_ATTACHMENTS','split','Error\x20Create\x20Vlocity\x20Temp\x20Zip,\x20Vlocity\x20Temp\x20not\x20found','parse','\x20\x20-\x20','then','-apex','apexCode','attachmentPackage','sendVlocityTemp','8033944mceudX','Error\x20Add\x20Deployment\x20Status\x20Attachments\x20','End\x20Add\x20Deployment\x20Status\x20Attachments','Start\x20Create\x20Vlocity\x20Temp\x20Zip','-autoRetryErrors','toBuffer','isDirectory','Error\x20Backup\x20Data\x20','length','METHOD_VLOCITY_BACKUP','callUpdateLog','Start\x20Create\x20Backup\x20Chunks','manifest:\x0a','resolvePromise','addLocalFolder','toFixed','addDeploymentStatusAttachments','readdirSync','includes','logId','deployBackup','vlocity','runApex','Start\x20Add\x20Deployment\x20Status\x20Attachments','Attachment','updateAttachmentLog','-sf.accessToken','2xhIXBk','End\x20\x20Retrieve\x20Vlocity\x20Attachments','End\x20Deploy\x20Data','jsforce','3458588QkcqeW','/logs','stringify','CalculationProcedureVersion','../../../services/http','componentsCount','catch','createVlocityTempZip','MAX_SIZE_UNZIP_ATTACHMENT','Success','retrieveBranchComponents','timestamp','attachLogId','createBackupChunks','vlocityUrl','resolve','11750VNeoOs','push','currentStatus','retrieveData','job-yaml-','-job','BACKUP_FOLDER','projectPath:\x20./','20crhGCH','4389hqppUQ','readFile','toString','Backup\x20Chunk\x20prepared,\x20size\x20=\x20','FlosumErrors:\x20','replace','createBackupJobYamlFile','VLOCITY_JOB_INFO','parseFloat','appendFileSync','errors','End\x20Deploy\x20Backup\x20Chunks','3325689wWvylM','filter','createProjectDirectory','JOB_FILE_NAME','forEach','VLOCITY_TEMP_CATALOG','idList','branchId','Start\x20Deploy\x20Backup\x20Chunks','flosumUrl','isSeparateMatrixVersions','-separateMatrixVersions','adm-zip','callBranchComponentList','callComponentList','jsForceConnection','-Export.yaml','CREATED','Connection','isSeparateCalculationProcedureVersions','sobject','isEnabledApexPostDeploy','2176yrqHtP','End\x20Send\x20Vlocity\x20Temp','7014yGmuto','Error\x20Deploy\x20Backup\x20Chunks\x20','isLWCActivation','unlocked-packages','Error\x20Send\x20Vlocity\x20Temp\x20Zip\x20','End\x20Backup\x20Data','recordList','componentIdListJson','METHOD_TYPE_GET_BRANCH_ATTACHMENTS','502806CnIzzp','-sf.instanceUrl','Error\x20update\x20metadata\x20log\x20'];a23_0x3bd3=function(){return _0x3a2bad;};return a23_0x3bd3();}const fs=require('fs'),AdmZip=require(a23_0x3de3aa(0x194)),jsForce=require(a23_0x3de3aa(0x162)),childProcess=require(a23_0x3de3aa(0x1b1)),constants=require('../../../constants'),http=require(a23_0x3de3aa(0x167)),storage=require('../../../services/storage'),{RetrieveHelper}=require('../retrieve/helper');class DeployHelper{constructor(_0x103b47,_0x5f1e64,_0x479709){const _0x13c31e=a23_0x3de3aa;this[_0x13c31e(0x1b6)]=_0x103b47,this[_0x13c31e(0x191)]=_0x5f1e64[_0x13c31e(0x191)],this[_0x13c31e(0x1b2)]=_0x5f1e64['flosumToken'],this['branchId']=_0x5f1e64['branchId'],this['nameSpacePrefix']=_0x5f1e64['nameSpacePrefix'],this[_0x13c31e(0x171)]=_0x5f1e64[_0x13c31e(0x171)],this[_0x13c31e(0x1ba)]=_0x5f1e64[_0x13c31e(0x1ba)],this[_0x13c31e(0x157)]=_0x5f1e64[_0x13c31e(0x157)],this[_0x13c31e(0x192)]=_0x5f1e64[_0x13c31e(0x192)],this[_0x13c31e(0x19b)]=_0x5f1e64['isSeparateCalculationProcedureVersions'],this[_0x13c31e(0x1a2)]=_0x5f1e64[_0x13c31e(0x1a2)],this[_0x13c31e(0x168)]=_0x5f1e64['componentsCount'],this[_0x13c31e(0x1a7)]=_0x5f1e64['componentIdListJson'],this[_0x13c31e(0x16f)]=_0x5f1e64['attachLogId'],this[_0x13c31e(0x19d)]=!!_0x5f1e64[_0x13c31e(0x19d)],this[_0x13c31e(0x141)]=_0x5f1e64['apexCode'],this['timestamp']=_0x5f1e64[_0x13c31e(0x16e)],this['logger']=_0x479709,this[_0x13c31e(0x197)]=new jsForce[(_0x13c31e(0x19a))]({'instanceUrl':this['flosumUrl'],'accessToken':this[_0x13c31e(0x1b2)]});}[a23_0x3de3aa(0x16d)](){return new Promise((_0x116719,_0xae9966)=>{const _0x1a7eab=a23_0x2367;try{this[_0x1a7eab(0x1bd)][_0x1a7eab(0x1af)]('Start\x20Retrieve\x20Vlocity\x20Attachments'),this[_0x1a7eab(0x195)]()['then'](_0x11c734=>{const _0x30b3c5=_0x1a7eab;this[_0x30b3c5(0x1bd)][_0x30b3c5(0x1af)](_0x30b3c5(0x160)),_0x116719(_0x11c734);})[_0x1a7eab(0x169)](_0x1474e3=>{const _0x2e6fc8=_0x1a7eab;this[_0x2e6fc8(0x1bd)][_0x2e6fc8(0x1af)](_0x2e6fc8(0x1ad)+_0x1474e3),_0xae9966(_0x1474e3);});}catch(_0x486014){this[_0x1a7eab(0x1bd)][_0x1a7eab(0x1af)](_0x1a7eab(0x1ad)+_0x486014),_0xae9966(_0x486014);}});}[a23_0x3de3aa(0x195)](_0x5cef53='',_0x40d91d=[]){return new Promise((_0x5b9eb9,_0x22a282)=>{const _0x578e39=a23_0x2367;try{const _0x2e7790=this[_0x578e39(0x1c2)]?this[_0x578e39(0x1c2)][_0x578e39(0x181)]('__','')+'/':'',_0x3b17b9=this[_0x578e39(0x191)]+_0x578e39(0x1be)+_0x2e7790+'unlocked-packages',_0x11c987={'branchId':this[_0x578e39(0x18f)],'lastComponentId':_0x5cef53,'componentIdListJson':this[_0x578e39(0x1a7)]},_0x10f7fb={'methodType':constants[_0x578e39(0x1a8)],'body':JSON['stringify'](_0x11c987)};http['post'](_0x3b17b9,this[_0x578e39(0x1b2)],this[_0x578e39(0x1c2)],_0x10f7fb)[_0x578e39(0x13f)](_0x1273dd=>{const _0x58966b=_0x578e39;let {data:_0xad075e}=_0x1273dd;_0xad075e=JSON[_0x58966b(0x13d)](_0xad075e),this['logger'][_0x58966b(0x1af)](_0x58966b(0x1b7)+Number[_0x58966b(0x184)](''+_0x40d91d['length']/this['componentsCount']*0x64)[_0x58966b(0x153)](0x2)+'%'),_0x40d91d[_0x58966b(0x174)](..._0xad075e[_0x58966b(0x142)][_0x58966b(0x1a6)]),_0xad075e[_0x58966b(0x1bb)]!=='-1'?_0xad075e[_0x58966b(0x142)]['idList']&&_0xad075e['attachmentPackage']['idList'][_0x58966b(0x14c)]?http[_0x58966b(0x196)](this['flosumUrl'],this[_0x58966b(0x1b2)],_0xad075e[_0x58966b(0x142)][_0x58966b(0x18e)],this[_0x58966b(0x1c2)],this[_0x58966b(0x168)],this[_0x58966b(0x1bd)],_0x40d91d)['then'](_0x4497e9=>this[_0x58966b(0x195)](_0xad075e['lastComponentId'],_0x4497e9))[_0x58966b(0x13f)](_0x40cab5=>_0x5b9eb9(_0x40cab5))['catch'](_0x49c8ec=>_0x22a282(_0x49c8ec)):this[_0x58966b(0x195)](_0xad075e[_0x58966b(0x1bb)],_0x40d91d)[_0x58966b(0x13f)](_0x565841=>_0x5b9eb9(_0x565841))[_0x58966b(0x169)](_0x4781f8=>{_0x22a282(_0x4781f8);}):_0x5b9eb9(_0x40d91d);})[_0x578e39(0x169)](_0xf98ee2=>{_0x22a282(_0xf98ee2);});}catch(_0x1d6394){_0x22a282(_0x1d6394);}});}async['backupData'](){const _0xb0d057=a23_0x3de3aa;try{this['logger'][_0xb0d057(0x1af)](_0xb0d057(0x1bc)),await storage[_0xb0d057(0x18a)](this['projectPath']+'/'+constants[_0xb0d057(0x179)]),this[_0xb0d057(0x182)]();const _0x2f66dd=fs['readdirSync'](this[_0xb0d057(0x1b6)]+'/'+constants[_0xb0d057(0x1c3)]),_0x39b79a=new RetrieveHelper(this[_0xb0d057(0x1b6)]+'/'+constants[_0xb0d057(0x179)],{'isNotIncludeDependencies':!![],'isSeparateMatrixVersions':_0x2f66dd['includes']('CalculationMatrixVersion'),'isSeparateCalculationProcedureVersions':_0x2f66dd[_0xb0d057(0x156)](_0xb0d057(0x166)),'authFlosum':{'instanceUrl':this['flosumUrl'],'accessToken':this['flosumToken']},'authVlosityOrg':{'instanceUrl':this[_0xb0d057(0x171)],'accessToken':this['vlocityToken']},'attachLogId':this[_0xb0d057(0x16f)],'selectedDataPackTypes':'[]'},this[_0xb0d057(0x1bd)]);await _0x39b79a[_0xb0d057(0x176)]();const _0x5a8970=await this[_0xb0d057(0x170)]();await this[_0xb0d057(0x158)](_0x5a8970),this['logger'][_0xb0d057(0x1af)](_0xb0d057(0x1a5));}catch(_0x11f984){this[_0xb0d057(0x1bd)][_0xb0d057(0x1af)](_0xb0d057(0x14b)+_0x11f984);throw _0x11f984;}}[a23_0x3de3aa(0x182)](){const _0x5b9dbf=a23_0x3de3aa;try{let _0x8ba09e=_0x5b9dbf(0x17a)+constants['UNZIP_CATALOG_NAME']+'\x0a';_0x8ba09e+=_0x5b9dbf(0x150);const _0x36141a=fs['readdirSync'](this[_0x5b9dbf(0x1b6)]+'/'+constants['SOURCE_FOLDER']);for(const _0x3a0ed3 of _0x36141a){const _0x890388=fs[_0x5b9dbf(0x155)](this[_0x5b9dbf(0x1b6)]+'/'+constants['SOURCE_FOLDER']+'/'+_0x3a0ed3);for(const _0x2f735c of _0x890388){_0x8ba09e+=_0x5b9dbf(0x13e)+_0x3a0ed3+'/'+_0x2f735c+'\x0a';}}fs[_0x5b9dbf(0x185)](this[_0x5b9dbf(0x1b6)]+'/'+constants[_0x5b9dbf(0x179)]+'/'+constants['JOB_FILE_NAME'],_0x8ba09e);}catch(_0x5c75ff){this['logger'][_0x5b9dbf(0x1af)](_0x5b9dbf(0x14b)+_0x5c75ff);throw _0x5c75ff;}}[a23_0x3de3aa(0x1b0)](_0x5560fd){const _0x535161=a23_0x3de3aa;let _0x673287=0x0;const _0x36b443=fs[_0x535161(0x155)](_0x5560fd);return _0x36b443[_0x535161(0x18c)](_0xc9444a=>{const _0x25f63b=_0x535161,_0x1dd2bf=fs['lstatSync'](_0x5560fd+'/'+_0xc9444a);_0x1dd2bf[_0x25f63b(0x14a)]()?_0x673287+=this['getFolderSize'](_0x5560fd+'/'+_0xc9444a):_0x673287+=_0x1dd2bf['size'];}),_0x673287;}[a23_0x3de3aa(0x170)](){return new Promise((_0x277f01,_0x18b13e)=>{const _0x2ea24c=a23_0x2367;try{this[_0x2ea24c(0x1bd)][_0x2ea24c(0x1af)](_0x2ea24c(0x14f));const _0x51d216=[],_0x5e7884=this[_0x2ea24c(0x1b6)]+'/'+constants[_0x2ea24c(0x179)]+'/'+constants[_0x2ea24c(0x1c3)];!fs[_0x2ea24c(0x1c1)](_0x5e7884)&&_0x277f01([]);let _0x144963=new AdmZip(),_0x45c2d8=0x0;const _0x4bbe27=fs[_0x2ea24c(0x155)](_0x5e7884);_0x4bbe27[_0x2ea24c(0x18c)](_0x16473b=>{const _0x54cce5=_0x2ea24c,_0x3ff772=fs[_0x54cce5(0x155)](_0x5e7884+'/'+_0x16473b);_0x3ff772['forEach'](_0xb4bb3e=>{const _0x366bb0=_0x54cce5,_0x327c01=_0x5e7884+'/'+_0x16473b+'/'+_0xb4bb3e,_0x3027dc=this[_0x366bb0(0x1b0)](_0x327c01);_0x45c2d8+_0x3027dc>constants[_0x366bb0(0x16b)]?(_0x51d216[_0x366bb0(0x174)](_0x144963[_0x366bb0(0x149)]()[_0x366bb0(0x17e)]('base64')),_0x144963=new AdmZip(),_0x144963[_0x366bb0(0x152)](_0x327c01,_0x16473b+'/'+_0xb4bb3e),this[_0x366bb0(0x1bd)][_0x366bb0(0x1af)](_0x366bb0(0x17f)+_0x45c2d8),_0x45c2d8=_0x3027dc):(_0x45c2d8+=_0x3027dc,_0x144963['addLocalFolder'](_0x327c01,_0x16473b+'/'+_0xb4bb3e));});}),_0x51d216['push'](_0x144963[_0x2ea24c(0x149)]()[_0x2ea24c(0x17e)](_0x2ea24c(0x1b8))),this['logger']['log']('End\x20Create\x20Backup\x20Chunks,\x20size\x20=\x20'+_0x51d216[_0x2ea24c(0x14c)]),_0x277f01(_0x51d216);}catch(_0x53e288){this[_0x2ea24c(0x1bd)]['log']('Error\x20Create\x20Backup\x20Chunks\x20'+_0x53e288),_0x18b13e(_0x53e288);}});}['deployBackup'](_0x11ec1a){return new Promise((_0x3dd6a8,_0x463a18)=>{const _0xf29688=a23_0x2367;try{this[_0xf29688(0x1bd)][_0xf29688(0x1af)](_0xf29688(0x190));const _0x1e25fa=this[_0xf29688(0x1c2)]?.[_0xf29688(0x14c)]?this[_0xf29688(0x1c2)][_0xf29688(0x181)]('__','')+'/':'',_0x1b4bfe=this[_0xf29688(0x191)]+_0xf29688(0x1be)+_0x1e25fa+_0xf29688(0x1a3);let _0x2bf52b=Promise[_0xf29688(0x172)]();_0x11ec1a['forEach']((_0x46087d,_0x430153)=>{const _0x5ac49f=_0xf29688;_0x2bf52b=_0x2bf52b[_0x5ac49f(0x13f)](()=>{const _0x528e4d=_0x5ac49f,_0x46c359={'vlocityBackupZip':_0x46087d,'metadataLogId':this[_0x528e4d(0x157)]},_0x1f3979={'methodType':constants[_0x528e4d(0x14d)],'body':JSON['stringify'](_0x46c359)};return http[_0x528e4d(0x1b4)](_0x1b4bfe,this['flosumToken'],this[_0x528e4d(0x1c2)],_0x1f3979)[_0x528e4d(0x13f)](()=>this[_0x528e4d(0x1bd)][_0x528e4d(0x1af)](_0x430153+0x1+_0x528e4d(0x1ac)+_0x11ec1a[_0x528e4d(0x14c)]+_0x528e4d(0x1c0)));});}),_0x2bf52b[_0xf29688(0x13f)](()=>{const _0x20fcdd=_0xf29688;this[_0x20fcdd(0x1bd)][_0x20fcdd(0x1af)](_0x20fcdd(0x187)),_0x3dd6a8();})[_0xf29688(0x169)](_0x551d5c=>{const _0x5eb3eb=_0xf29688;this[_0x5eb3eb(0x1bd)][_0x5eb3eb(0x1af)](_0x5eb3eb(0x1a1)+_0x551d5c),_0x463a18(_0x551d5c);});}catch(_0x2d4b93){this['logger'][_0xf29688(0x1af)](_0xf29688(0x1a1)+_0x2d4b93),_0x463a18(_0x2d4b93);}});}['deployData'](_0x4b7502,_0x31a938){return new Promise((_0x4d4baa,_0x5c85d5)=>{const _0x34ee3c=a23_0x2367;try{this[_0x34ee3c(0x1bd)][_0x34ee3c(0x1af)](_0x34ee3c(0x1ae));const _0xf8b37d=_0x34ee3c(0x159),_0x56fe59=[_0x34ee3c(0x15e),this[_0x34ee3c(0x1ba)],_0x34ee3c(0x1aa),this[_0x34ee3c(0x171)],_0x34ee3c(0x178),constants[_0x34ee3c(0x18b)],_0x34ee3c(0x148)];this['isSeparateMatrixVersions']&&_0x56fe59[_0x34ee3c(0x174)](_0x34ee3c(0x193));this[_0x34ee3c(0x19b)]&&_0x56fe59[_0x34ee3c(0x174)]('-separateCalculationProcedureVersions');_0x56fe59[_0x34ee3c(0x174)]('packDeploy');this['isEnabledApexPostDeploy']&&(_0x56fe59[_0x34ee3c(0x174)](_0x34ee3c(0x15a)),_0x56fe59[_0x34ee3c(0x174)](_0x34ee3c(0x140)),_0x56fe59[_0x34ee3c(0x174)](_0x4b7502));this[_0x34ee3c(0x1bd)][_0x34ee3c(0x1af)](_0x56fe59['slice'](0x2)['join']('\x20'));const _0x457d0e=()=>{const _0x2b41f3=_0x34ee3c;http[_0x2b41f3(0x15d)](this[_0x2b41f3(0x1b6)],this[_0x2b41f3(0x197)],this[_0x2b41f3(0x16f)],this[_0x2b41f3(0x1bd)],![]);},_0x4ba6bd={'cwd':this[_0x34ee3c(0x1b6)],'maxBuffer':0x400*0x1f4};childProcess['callChildProcess'](_0xf8b37d,_0x56fe59,this[_0x34ee3c(0x1bd)],_0x4ba6bd,_0x31a938,_0x457d0e)[_0x34ee3c(0x13f)](_0x23eea0=>{const _0x278e14=_0x34ee3c;this[_0x278e14(0x1bd)]['log'](_0x278e14(0x161)),_0x4d4baa(_0x23eea0);})[_0x34ee3c(0x169)](_0x8ab105=>{const _0x237857=_0x34ee3c;this[_0x237857(0x1bd)][_0x237857(0x1af)](_0x237857(0x1bf)+_0x8ab105),_0x5c85d5(_0x8ab105);});}catch(_0x5f2b2a){this['logger']['log'](_0x34ee3c(0x1bf)+_0x5f2b2a),_0x5c85d5(_0x5f2b2a);}});}async[a23_0x3de3aa(0x154)](_0x42ab8b){const _0x5cfc76=a23_0x3de3aa;try{if(!_0x42ab8b)return 0x0;_0x42ab8b=JSON[_0x5cfc76(0x13d)](_0x42ab8b),this['logger'][_0x5cfc76(0x1af)](_0x5cfc76(0x15b));const _0x269464=[];for(const _0x10ffc5 in _0x42ab8b[_0x5cfc76(0x175)]){const _0x43668c=_0x10ffc5[_0x5cfc76(0x1c6)]('/');if(_0x43668c[_0x5cfc76(0x14c)]!==0x2)continue;const [_0x529f36,_0x1398ed]=_0x43668c,_0x49d14f={'componentType':_0x529f36,'componentName':_0x1398ed},_0xd64e5e=_0x42ab8b['currentStatus'][_0x10ffc5];_0xd64e5e===_0x5cfc76(0x16c)?(_0x49d14f['status']=_0x5cfc76(0x16c),_0x49d14f[_0x5cfc76(0x1c4)]=_0x5cfc76(0x199)):(_0x49d14f['status']='Failure',_0x49d14f['errorMessage']=_0xd64e5e),_0x269464['push'](_0x49d14f);}const _0x5b46d9={'deploymentResultList':_0x269464,'metadataLogId':this[_0x5cfc76(0x157)]},_0x2b7375={'methodType':constants[_0x5cfc76(0x1c5)],'body':JSON['stringify'](_0x5b46d9)},_0x3e49d8=this['nameSpacePrefix']?.[_0x5cfc76(0x14c)]?this[_0x5cfc76(0x1c2)][_0x5cfc76(0x181)]('__','')+'/':'',_0xb947ea=this[_0x5cfc76(0x191)]+'/services/apexrest/'+_0x3e49d8+_0x5cfc76(0x1a3);return await http['post'](_0xb947ea,this[_0x5cfc76(0x1b2)],this[_0x5cfc76(0x1c2)],_0x2b7375),this['logger'][_0x5cfc76(0x1af)](_0x5cfc76(0x146)),_0x269464[_0x5cfc76(0x189)](_0x713384=>!_0x713384['errorMessage'])[_0x5cfc76(0x14c)];}catch(_0x3dcbb7){this[_0x5cfc76(0x1bd)][_0x5cfc76(0x1af)](_0x5cfc76(0x145)+_0x3dcbb7);throw _0x3dcbb7;}}[a23_0x3de3aa(0x151)](_0x2e4832){return new Promise((_0xf263ab,_0x4b8d66)=>{const _0x1d94e2=a23_0x2367;try{_0x2e4832[_0x1d94e2(0x13f)](_0xf263ab)['catch'](_0xf263ab);}catch(_0x1b5673){_0x4b8d66(_0x1b5673);}});}[a23_0x3de3aa(0x16a)](){return new Promise((_0x28d4ed,_0x187cb2)=>{const _0x469948=a23_0x2367;try{this['logger'][_0x469948(0x1af)](_0x469948(0x147));const _0x45c5a2=this[_0x469948(0x1b6)]+'/'+constants[_0x469948(0x18d)];if(fs[_0x469948(0x1c1)](_0x45c5a2)){const _0x497a29=_0x45c5a2+_0x469948(0x164);if(this['logger'][_0x469948(0x186)][_0x469948(0x14c)]&&fs[_0x469948(0x1c1)](_0x497a29)){const _0x3e5fd7=fs[_0x469948(0x155)](_0x497a29);if(_0x3e5fd7&&_0x3e5fd7[_0x469948(0x14c)]){const _0x1a490d=_0x3e5fd7[0x0];if(_0x1a490d[_0x469948(0x156)](_0x469948(0x177))&&_0x1a490d[_0x469948(0x156)](_0x469948(0x198))){const _0x5646b6=_0x469948(0x180)+JSON[_0x469948(0x165)](this[_0x469948(0x1bd)]['errors']);fs[_0x469948(0x185)]('./'+_0x497a29+'/'+_0x1a490d,_0x5646b6);}}}const _0x4f67fb=new AdmZip();_0x4f67fb['addLocalFolder'](_0x45c5a2,constants[_0x469948(0x18d)]),this[_0x469948(0x1bd)][_0x469948(0x1af)]('End\x20Create\x20Vlocity\x20Temp\x20Zip'),_0x28d4ed(_0x4f67fb[_0x469948(0x149)]()[_0x469948(0x17e)](_0x469948(0x1b8)));}else this[_0x469948(0x1bd)][_0x469948(0x1af)](_0x469948(0x13c)),_0x28d4ed();}catch(_0x4c3598){this[_0x469948(0x1bd)][_0x469948(0x1af)](_0x469948(0x1b9)+_0x4c3598),_0x28d4ed();}});}[a23_0x3de3aa(0x143)](_0x1a6fd5){return new Promise((_0x4932f1,_0x2aff5e)=>{const _0x5c2926=a23_0x2367;try{this['logger'][_0x5c2926(0x1af)]('Start\x20Send\x20Vlocity\x20Temp');const _0x18715a={'Name':_0x5c2926(0x1b3),'ContentType':'application/zip','Description':'Vlocity\x20Temp','ParentId':this[_0x5c2926(0x157)],'Body':_0x1a6fd5};this[_0x5c2926(0x197)][_0x5c2926(0x19c)](_0x5c2926(0x15c))['create'](_0x18715a)[_0x5c2926(0x13f)](()=>{const _0x5e1516=_0x5c2926;this['logger'][_0x5e1516(0x1af)](_0x5e1516(0x19f)),_0x4932f1();})['catch'](_0x31fe53=>{const _0x27ccfc=_0x5c2926;this[_0x27ccfc(0x1bd)][_0x27ccfc(0x1af)](_0x27ccfc(0x1a4)+_0x31fe53),_0x2aff5e(_0x31fe53);});}catch(_0x520457){this[_0x5c2926(0x1bd)][_0x5c2926(0x1af)](_0x5c2926(0x1a4)+_0x520457),_0x2aff5e(_0x520457);}});}async['completeDeployment'](_0x3b2a50,_0x56f21e=![]){const _0x1799c4=a23_0x3de3aa,_0x1a8d90=await this[_0x1799c4(0x16a)]();_0x1a8d90&&await this['sendVlocityTemp'](_0x1a8d90);let _0x185b02=this[_0x1799c4(0x168)];try{const _0x442511=await storage[_0x1799c4(0x17d)](this[_0x1799c4(0x1b6)],constants[_0x1799c4(0x18d)]+'/'+constants[_0x1799c4(0x183)],this['logger']);_0x185b02=await this[_0x1799c4(0x154)](_0x442511);}catch(_0x37802c){this[_0x1799c4(0x1bd)][_0x1799c4(0x1af)]('Error\x20add\x20deployment\x20status\x20'+_0x37802c);}const _0x1e8bee=await http[_0x1799c4(0x15d)](this[_0x1799c4(0x1b6)],this['jsForceConnection'],this[_0x1799c4(0x16f)],this[_0x1799c4(0x1bd)],_0x56f21e,!![]);try{await http[_0x1799c4(0x14e)](this[_0x1799c4(0x197)],this[_0x1799c4(0x157)],this[_0x1799c4(0x1c2)],_0x3b2a50&&_0x185b02>0x0,this[_0x1799c4(0x1bd)],_0x1e8bee||_0x185b02!==this['componentsCount']);}catch(_0x2b6b04){this['logger']['log'](_0x1799c4(0x1ab)+_0x2b6b04);}}}module['exports']={'DeployHelper':DeployHelper};