const a16_0x4f1c3a=a16_0x3452;(function(_0x35cb8b,_0x437a1d){const _0x554184=a16_0x3452,_0x2313af=_0x35cb8b();while(!![]){try{const _0x4f1e86=parseInt(_0x554184(0x1b7))/0x1*(parseInt(_0x554184(0x188))/0x2)+-parseInt(_0x554184(0x1f6))/0x3*(parseInt(_0x554184(0x1ae))/0x4)+-parseInt(_0x554184(0x186))/0x5+-parseInt(_0x554184(0x1ca))/0x6*(-parseInt(_0x554184(0x1f5))/0x7)+-parseInt(_0x554184(0x1a7))/0x8*(-parseInt(_0x554184(0x17d))/0x9)+parseInt(_0x554184(0x1ec))/0xa+-parseInt(_0x554184(0x177))/0xb;if(_0x4f1e86===_0x437a1d)break;else _0x2313af['push'](_0x2313af['shift']());}catch(_0x1dbef4){_0x2313af['push'](_0x2313af['shift']());}}}(a16_0x40f0,0x3f422));const fs=require('fs'),AdmZip=require(a16_0x4f1c3a(0x1cf)),childProcess=require('../../../services/child-process'),constants=require(a16_0x4f1c3a(0x19b)),http=require('../../../services/http'),storage=require(a16_0x4f1c3a(0x17c)),jsForce=require(a16_0x4f1c3a(0x179)),{RetrieveHelper}=require(a16_0x4f1c3a(0x1d3));function a16_0x40f0(){const _0x2e5f0=['backupData','callBranchComponentList','88AkjOiK','nameSpacePrefix','createBackupJobYamlFile','idList','-job','base64','includes','20fARVPl','-Export.yaml','\x20Deployed.','existsSync','-sf.instanceUrl','status','End\x20Send\x20Vlocity\x20Temp','Failure','result','1upcdbh','createProjectDirectory','catch','isEnabledApexPostDeploy','\x20Chunks\x20From\x20','Error\x20Send\x20Vlocity\x20Temp\x20Zip\x20','Start\x20Create\x20Vlocity\x20Temp\x20Zip','create','errorMessage','/logs','logger','MAX_SIZE_UNZIP_ATTACHMENT','forEach','readdirSync','componentsCount','flosumUrl','METHOD_ADD_DEPLOYMENT_STATUS_ATTACHMENTS','Start\x20Add\x20Deployment\x20Status\x20Attachments','METHOD_VLOCITY_BACKUP','18nnUWMX','Error\x20update\x20metadata\x20log\x20','addDeploymentStatusAttachments','Error\x20\x20Retrieve\x20Vlocity\x20Attachments\x20','Error\x20Deploy\x20Data\x20','adm-zip','Start\x20Retrieve\x20Vlocity\x20Attachments','apexCode','Start\x20Backup\x20Data','../retrieve/helper','-sf.accessToken','End\x20Deploy\x20Data','post','toFixed','split','createVlocityTempZip','isLWCActivation','callComponentList','Error\x20Create\x20Backup\x20Chunks\x20','Error\x20Create\x20Vlocity\x20Temp\x20Zip,\x20Vlocity\x20Temp\x20not\x20found','FlosumErrors:\x20','callUpdateLog','push','End\x20Create\x20Backup\x20Chunks,\x20size\x20=\x20','componentIdListJson','unlocked-packages','VLOCITY_TEMP_CATALOG','End\x20Add\x20Deployment\x20Status\x20Attachments','Error\x20add\x20deployment\x20status\x20','parse','stringify','End\x20Create\x20Vlocity\x20Temp\x20Zip','Start\x20Create\x20Backup\x20Chunks','jsForceConnection','2114310hQKkQQ','createBackupChunks','UNZIP_CATALOG_NAME','-apex','BACKUP_FOLDER','isSeparateMatrixVersions','length','application/zip','retrieveBranchComponents','168847yvIuJG','2217ZAIvap','sendVlocityTemp','join','appendFileSync','manifest:\x0a','addLocalFolder','resolvePromise','projectPath','JOB_FILE_NAME','VLOCITY_JOB_INFO','Error\x20Add\x20Deployment\x20Status\x20Attachments\x20','toBuffer','/services/apexrest/','job-yaml-','deployBackup','currentStatus','3963630HvnSze','Attachment','jsforce','SOURCE_FOLDER','toString','../../../services/storage','396531ycDghV','-autoRetryErrors','vlocityUrl','CREATED','End\x20Deploy\x20Backup\x20Chunks','size','updateAttachmentLog','sobject','parseFloat','2397650xJDSyG','Vlocity\x20Temp','668436QLCKiP','log','Error\x20Deploy\x20Backup\x20Chunks\x20','projectPath:\x20./','attachmentPackage','flosumToken','\x20\x20-\x20','End\x20\x20Retrieve\x20Vlocity\x20Attachments','replace','Success','Error\x20Backup\x20Data\x20','attachLogId','isDirectory','Connection','lastComponentId','vlocityToken','getFolderSize','then','runApex','../../../constants','branchId','timestamp','Backup\x20Chunk\x20prepared,\x20size\x20=\x20','errors','deployData','Start\x20Send\x20Vlocity\x20Temp','logId','callChildProcess','isSeparateCalculationProcedureVersions'];a16_0x40f0=function(){return _0x2e5f0;};return a16_0x40f0();}function a16_0x3452(_0x131270,_0x17fe77){const _0x40f01c=a16_0x40f0();return a16_0x3452=function(_0x34526f,_0x244ba2){_0x34526f=_0x34526f-0x16d;let _0xc0ce60=_0x40f01c[_0x34526f];return _0xc0ce60;},a16_0x3452(_0x131270,_0x17fe77);}class DeployHelper{constructor(_0x29cd92,_0x818d8a,_0x59b74f){const _0x2ad72b=a16_0x4f1c3a;this['projectPath']=_0x29cd92,this[_0x2ad72b(0x1c6)]=_0x818d8a[_0x2ad72b(0x1c6)],this[_0x2ad72b(0x18d)]=_0x818d8a['flosumToken'],this['branchId']=_0x818d8a[_0x2ad72b(0x19c)],this[_0x2ad72b(0x1a8)]=_0x818d8a['nameSpacePrefix'],this[_0x2ad72b(0x17f)]=_0x818d8a[_0x2ad72b(0x17f)],this['vlocityToken']=_0x818d8a[_0x2ad72b(0x197)],this['logId']=_0x818d8a['logId'],this['isSeparateMatrixVersions']=_0x818d8a['isSeparateMatrixVersions'],this[_0x2ad72b(0x1a4)]=_0x818d8a[_0x2ad72b(0x1a4)],this[_0x2ad72b(0x1da)]=_0x818d8a[_0x2ad72b(0x1da)],this[_0x2ad72b(0x1c5)]=_0x818d8a[_0x2ad72b(0x1c5)],this[_0x2ad72b(0x1e2)]=_0x818d8a['componentIdListJson'],this['attachLogId']=_0x818d8a[_0x2ad72b(0x193)],this[_0x2ad72b(0x1ba)]=!!_0x818d8a[_0x2ad72b(0x1ba)],this[_0x2ad72b(0x1d1)]=_0x818d8a[_0x2ad72b(0x1d1)],this['timestamp']=_0x818d8a[_0x2ad72b(0x19d)],this[_0x2ad72b(0x1c1)]=_0x59b74f,this['jsForceConnection']=new jsForce[(_0x2ad72b(0x195))]({'instanceUrl':this['flosumUrl'],'accessToken':this[_0x2ad72b(0x18d)]});}[a16_0x4f1c3a(0x1f4)](){return new Promise((_0x396456,_0xfa8e2e)=>{const _0x5042ce=a16_0x3452;try{this[_0x5042ce(0x1c1)][_0x5042ce(0x189)](_0x5042ce(0x1d0)),this[_0x5042ce(0x1a6)]()[_0x5042ce(0x199)](_0x270d43=>{const _0xd5b64d=_0x5042ce;this[_0xd5b64d(0x1c1)]['log'](_0xd5b64d(0x18f)),_0x396456(_0x270d43);})['catch'](_0x538ad4=>{const _0x30b412=_0x5042ce;this['logger']['log'](_0x30b412(0x1cd)+_0x538ad4),_0xfa8e2e(_0x538ad4);});}catch(_0x269dae){this['logger']['log']('Error\x20\x20Retrieve\x20Vlocity\x20Attachments\x20'+_0x269dae),_0xfa8e2e(_0x269dae);}});}[a16_0x4f1c3a(0x1a6)](_0x52d048='',_0x63ff57=[]){return new Promise((_0x18e1d4,_0xa0c458)=>{const _0x2423ed=a16_0x3452;try{const _0x3f7a30=this[_0x2423ed(0x1a8)]?this[_0x2423ed(0x1a8)]['replace']('__','')+'/':'',_0x49bdc0=this[_0x2423ed(0x1c6)]+_0x2423ed(0x173)+_0x3f7a30+_0x2423ed(0x1e3),_0x388c9c={'branchId':this[_0x2423ed(0x19c)],'lastComponentId':_0x52d048,'componentIdListJson':this['componentIdListJson']},_0x50f73f={'methodType':constants['METHOD_TYPE_GET_BRANCH_ATTACHMENTS'],'body':JSON['stringify'](_0x388c9c)};http['post'](_0x49bdc0,this[_0x2423ed(0x18d)],this[_0x2423ed(0x1a8)],_0x50f73f)['then'](_0x3742ab=>{const _0x4ca9f5=_0x2423ed;let {data:_0xc91748}=_0x3742ab;_0xc91748=JSON[_0x4ca9f5(0x1e7)](_0xc91748),this[_0x4ca9f5(0x1c1)][_0x4ca9f5(0x189)]('Retrieved:\x20'+Number[_0x4ca9f5(0x185)](''+_0x63ff57[_0x4ca9f5(0x1f2)]/this[_0x4ca9f5(0x1c5)]*0x64)[_0x4ca9f5(0x1d7)](0x2)+'%'),_0x63ff57[_0x4ca9f5(0x1e0)](..._0xc91748[_0x4ca9f5(0x18c)]['recordList']),_0xc91748[_0x4ca9f5(0x196)]!=='-1'?_0xc91748[_0x4ca9f5(0x18c)][_0x4ca9f5(0x1aa)]&&_0xc91748['attachmentPackage'][_0x4ca9f5(0x1aa)][_0x4ca9f5(0x1f2)]?http[_0x4ca9f5(0x1db)](this[_0x4ca9f5(0x1c6)],this[_0x4ca9f5(0x18d)],_0xc91748['attachmentPackage']['idList'],this[_0x4ca9f5(0x1a8)],this['componentsCount'],this[_0x4ca9f5(0x1c1)],_0x63ff57)[_0x4ca9f5(0x199)](_0x4b87b8=>this['callBranchComponentList'](_0xc91748[_0x4ca9f5(0x196)],_0x4b87b8))[_0x4ca9f5(0x199)](_0x6373e2=>_0x18e1d4(_0x6373e2))[_0x4ca9f5(0x1b9)](_0x527922=>_0xa0c458(_0x527922)):this[_0x4ca9f5(0x1a6)](_0xc91748['lastComponentId'],_0x63ff57)[_0x4ca9f5(0x199)](_0x5c3680=>_0x18e1d4(_0x5c3680))[_0x4ca9f5(0x1b9)](_0x2f0b68=>{_0xa0c458(_0x2f0b68);}):_0x18e1d4(_0x63ff57);})[_0x2423ed(0x1b9)](_0x24702b=>{_0xa0c458(_0x24702b);});}catch(_0x5521bc){_0xa0c458(_0x5521bc);}});}async[a16_0x4f1c3a(0x1a5)](){const _0x4b0f89=a16_0x4f1c3a;try{this[_0x4b0f89(0x1c1)][_0x4b0f89(0x189)](_0x4b0f89(0x1d2)),await storage[_0x4b0f89(0x1b8)](this[_0x4b0f89(0x16e)]+'/'+constants[_0x4b0f89(0x1f0)]),this['createBackupJobYamlFile']();const _0x40732c=fs['readdirSync'](this[_0x4b0f89(0x16e)]+'/'+constants[_0x4b0f89(0x17a)]),_0x49939b=new RetrieveHelper(this['projectPath']+'/'+constants[_0x4b0f89(0x1f0)],{'isNotIncludeDependencies':!![],'isSeparateMatrixVersions':_0x40732c[_0x4b0f89(0x1ad)]('CalculationMatrixVersion'),'isSeparateCalculationProcedureVersions':_0x40732c[_0x4b0f89(0x1ad)]('CalculationProcedureVersion'),'authFlosum':{'instanceUrl':this['flosumUrl'],'accessToken':this[_0x4b0f89(0x18d)]},'authVlosityOrg':{'instanceUrl':this[_0x4b0f89(0x17f)],'accessToken':this[_0x4b0f89(0x197)]},'attachLogId':this[_0x4b0f89(0x193)],'selectedDataPackTypes':'[]'},this[_0x4b0f89(0x1c1)]);await _0x49939b['retrieveData']();const _0x55d886=await this[_0x4b0f89(0x1ed)]();await this[_0x4b0f89(0x175)](_0x55d886),this[_0x4b0f89(0x1c1)]['log']('End\x20Backup\x20Data');}catch(_0x141dd8){this[_0x4b0f89(0x1c1)][_0x4b0f89(0x189)](_0x4b0f89(0x192)+_0x141dd8);throw _0x141dd8;}}[a16_0x4f1c3a(0x1a9)](){const _0x42c3ae=a16_0x4f1c3a;try{let _0x470927=_0x42c3ae(0x18b)+constants[_0x42c3ae(0x1ee)]+'\x0a';_0x470927+=_0x42c3ae(0x1fa);const _0x4a565=fs['readdirSync'](this[_0x42c3ae(0x16e)]+'/'+constants[_0x42c3ae(0x17a)]);for(const _0x32780a of _0x4a565){const _0xbe276f=fs['readdirSync'](this['projectPath']+'/'+constants['SOURCE_FOLDER']+'/'+_0x32780a);for(const _0x46cabb of _0xbe276f){_0x470927+=_0x42c3ae(0x18e)+_0x32780a+'/'+_0x46cabb+'\x0a';}}fs[_0x42c3ae(0x1f9)](this[_0x42c3ae(0x16e)]+'/'+constants['BACKUP_FOLDER']+'/'+constants['JOB_FILE_NAME'],_0x470927);}catch(_0x4b51e7){this['logger'][_0x42c3ae(0x189)](_0x42c3ae(0x192)+_0x4b51e7);throw _0x4b51e7;}}[a16_0x4f1c3a(0x198)](_0x2f68aa){const _0x540612=a16_0x4f1c3a;let _0x25c2de=0x0;const _0x153fb4=fs[_0x540612(0x1c4)](_0x2f68aa);return _0x153fb4[_0x540612(0x1c3)](_0x20a00f=>{const _0xc73772=_0x540612,_0x1c744a=fs['lstatSync'](_0x2f68aa+'/'+_0x20a00f);_0x1c744a[_0xc73772(0x194)]()?_0x25c2de+=this['getFolderSize'](_0x2f68aa+'/'+_0x20a00f):_0x25c2de+=_0x1c744a[_0xc73772(0x182)];}),_0x25c2de;}['createBackupChunks'](){return new Promise((_0xf06e3f,_0x364a25)=>{const _0x53b31b=a16_0x3452;try{this[_0x53b31b(0x1c1)][_0x53b31b(0x189)](_0x53b31b(0x1ea));const _0xc8b96b=[],_0x482aaf=this[_0x53b31b(0x16e)]+'/'+constants[_0x53b31b(0x1f0)]+'/'+constants[_0x53b31b(0x17a)];!fs['existsSync'](_0x482aaf)&&_0xf06e3f([]);let _0x3a5bb5=new AdmZip(),_0x188780=0x0;const _0x4739f0=fs['readdirSync'](_0x482aaf);_0x4739f0[_0x53b31b(0x1c3)](_0x357da2=>{const _0x31d605=_0x53b31b,_0x2d0409=fs[_0x31d605(0x1c4)](_0x482aaf+'/'+_0x357da2);_0x2d0409['forEach'](_0x584c2c=>{const _0x214079=_0x31d605,_0x217f88=_0x482aaf+'/'+_0x357da2+'/'+_0x584c2c,_0x189b3e=this[_0x214079(0x198)](_0x217f88);_0x188780+_0x189b3e>constants[_0x214079(0x1c2)]?(_0xc8b96b[_0x214079(0x1e0)](_0x3a5bb5[_0x214079(0x172)]()[_0x214079(0x17b)](_0x214079(0x1ac))),_0x3a5bb5=new AdmZip(),_0x3a5bb5['addLocalFolder'](_0x217f88,_0x357da2+'/'+_0x584c2c),this[_0x214079(0x1c1)]['log'](_0x214079(0x19e)+_0x188780),_0x188780=_0x189b3e):(_0x188780+=_0x189b3e,_0x3a5bb5[_0x214079(0x1fb)](_0x217f88,_0x357da2+'/'+_0x584c2c));});}),_0xc8b96b[_0x53b31b(0x1e0)](_0x3a5bb5[_0x53b31b(0x172)]()[_0x53b31b(0x17b)](_0x53b31b(0x1ac))),this[_0x53b31b(0x1c1)][_0x53b31b(0x189)](_0x53b31b(0x1e1)+_0xc8b96b[_0x53b31b(0x1f2)]),_0xf06e3f(_0xc8b96b);}catch(_0x30c17a){this['logger'][_0x53b31b(0x189)](_0x53b31b(0x1dc)+_0x30c17a),_0x364a25(_0x30c17a);}});}[a16_0x4f1c3a(0x175)](_0x475166){return new Promise((_0x33d8b6,_0x488825)=>{const _0xbc28ff=a16_0x3452;try{this['logger'][_0xbc28ff(0x189)]('Start\x20Deploy\x20Backup\x20Chunks');const _0x400b40=this[_0xbc28ff(0x1a8)]?.[_0xbc28ff(0x1f2)]?this[_0xbc28ff(0x1a8)][_0xbc28ff(0x190)]('__','')+'/':'',_0xd7072f=this['flosumUrl']+_0xbc28ff(0x173)+_0x400b40+_0xbc28ff(0x1e3);let _0x3baa0d=Promise['resolve']();_0x475166[_0xbc28ff(0x1c3)]((_0x2be9ab,_0x15c520)=>{const _0x2ba651=_0xbc28ff;_0x3baa0d=_0x3baa0d[_0x2ba651(0x199)](()=>{const _0x1ed521=_0x2ba651,_0x19b886={'vlocityBackupZip':_0x2be9ab,'metadataLogId':this[_0x1ed521(0x1a2)]},_0x9be946={'methodType':constants[_0x1ed521(0x1c9)],'body':JSON['stringify'](_0x19b886)};return http[_0x1ed521(0x1d6)](_0xd7072f,this[_0x1ed521(0x18d)],this[_0x1ed521(0x1a8)],_0x9be946)[_0x1ed521(0x199)](()=>this[_0x1ed521(0x1c1)][_0x1ed521(0x189)](_0x15c520+0x1+_0x1ed521(0x1bb)+_0x475166[_0x1ed521(0x1f2)]+_0x1ed521(0x1b0)));});}),_0x3baa0d[_0xbc28ff(0x199)](()=>{const _0x2cb86b=_0xbc28ff;this[_0x2cb86b(0x1c1)]['log'](_0x2cb86b(0x181)),_0x33d8b6();})[_0xbc28ff(0x1b9)](_0x3a2ca8=>{const _0x27d091=_0xbc28ff;this[_0x27d091(0x1c1)][_0x27d091(0x189)](_0x27d091(0x18a)+_0x3a2ca8),_0x488825(_0x3a2ca8);});}catch(_0x15d390){this[_0xbc28ff(0x1c1)]['log']('Error\x20Deploy\x20Backup\x20Chunks\x20'+_0x15d390),_0x488825(_0x15d390);}});}[a16_0x4f1c3a(0x1a0)](_0x30f879,_0x28c8ab){return new Promise((_0x5f0e7e,_0x358a5d)=>{const _0x3b2c24=a16_0x3452;try{this[_0x3b2c24(0x1c1)][_0x3b2c24(0x189)]('Start\x20Deploy\x20Data');const _0x33095e='vlocity',_0x5d90fe=[_0x3b2c24(0x1d4),this['vlocityToken'],_0x3b2c24(0x1b2),this['vlocityUrl'],_0x3b2c24(0x1ab),constants[_0x3b2c24(0x16f)],_0x3b2c24(0x17e)];this[_0x3b2c24(0x1f1)]&&_0x5d90fe[_0x3b2c24(0x1e0)]('-separateMatrixVersions');this[_0x3b2c24(0x1a4)]&&_0x5d90fe[_0x3b2c24(0x1e0)]('-separateCalculationProcedureVersions');_0x5d90fe['push']('packDeploy');this[_0x3b2c24(0x1ba)]&&(_0x5d90fe['push'](_0x3b2c24(0x19a)),_0x5d90fe[_0x3b2c24(0x1e0)](_0x3b2c24(0x1ef)),_0x5d90fe[_0x3b2c24(0x1e0)](_0x30f879));this[_0x3b2c24(0x1c1)][_0x3b2c24(0x189)](_0x5d90fe['slice'](0x2)[_0x3b2c24(0x1f8)]('\x20'));const _0x31beb1=()=>{const _0x218be4=_0x3b2c24;http[_0x218be4(0x183)](this[_0x218be4(0x16e)],this[_0x218be4(0x1eb)],this['attachLogId'],this['logger'],![]);},_0x53519c={'cwd':this[_0x3b2c24(0x16e)],'maxBuffer':0x400*0x1f4};childProcess[_0x3b2c24(0x1a3)](_0x33095e,_0x5d90fe,this[_0x3b2c24(0x1c1)],_0x53519c,_0x28c8ab,_0x31beb1)[_0x3b2c24(0x199)](_0x5f2246=>{const _0x3f4327=_0x3b2c24;this[_0x3f4327(0x1c1)][_0x3f4327(0x189)](_0x3f4327(0x1d5)),_0x5f0e7e(_0x5f2246);})['catch'](_0x127661=>{const _0x1ba39d=_0x3b2c24;this[_0x1ba39d(0x1c1)][_0x1ba39d(0x189)](_0x1ba39d(0x1ce)+_0x127661),_0x358a5d(_0x127661);});}catch(_0x525f14){this[_0x3b2c24(0x1c1)]['log'](_0x3b2c24(0x1ce)+_0x525f14),_0x358a5d(_0x525f14);}});}async[a16_0x4f1c3a(0x1cc)](_0x221a73){const _0x2850c4=a16_0x4f1c3a;try{if(!_0x221a73)return 0x0;_0x221a73=JSON['parse'](_0x221a73),this[_0x2850c4(0x1c1)][_0x2850c4(0x189)](_0x2850c4(0x1c8));const _0x1170ed=[];for(const _0x53aaa4 in _0x221a73['currentStatus']){const _0x208645=_0x53aaa4[_0x2850c4(0x1d8)]('/');if(_0x208645[_0x2850c4(0x1f2)]!==0x2)continue;const [_0x121635,_0x4844a0]=_0x208645,_0x4c1530={'componentType':_0x121635,'componentName':_0x4844a0},_0x4260e6=_0x221a73[_0x2850c4(0x176)][_0x53aaa4];_0x4260e6===_0x2850c4(0x191)?(_0x4c1530['status']=_0x2850c4(0x191),_0x4c1530[_0x2850c4(0x1b6)]=_0x2850c4(0x180)):(_0x4c1530[_0x2850c4(0x1b3)]=_0x2850c4(0x1b5),_0x4c1530[_0x2850c4(0x1bf)]=_0x4260e6),_0x1170ed[_0x2850c4(0x1e0)](_0x4c1530);}const _0x4756a4={'deploymentResultList':_0x1170ed,'metadataLogId':this[_0x2850c4(0x1a2)]},_0xd6b194={'methodType':constants[_0x2850c4(0x1c7)],'body':JSON[_0x2850c4(0x1e8)](_0x4756a4)},_0x34e067=this['nameSpacePrefix']?.[_0x2850c4(0x1f2)]?this[_0x2850c4(0x1a8)][_0x2850c4(0x190)]('__','')+'/':'',_0x5dcd46=this[_0x2850c4(0x1c6)]+'/services/apexrest/'+_0x34e067+'unlocked-packages';return await http[_0x2850c4(0x1d6)](_0x5dcd46,this[_0x2850c4(0x18d)],this[_0x2850c4(0x1a8)],_0xd6b194),this[_0x2850c4(0x1c1)][_0x2850c4(0x189)](_0x2850c4(0x1e5)),_0x1170ed['filter'](_0x576c11=>!_0x576c11[_0x2850c4(0x1bf)])['length'];}catch(_0x47d545){this['logger'][_0x2850c4(0x189)](_0x2850c4(0x171)+_0x47d545);throw _0x47d545;}}[a16_0x4f1c3a(0x16d)](_0x3aee24){return new Promise((_0x2f811e,_0x11cbcb)=>{const _0x58dc66=a16_0x3452;try{_0x3aee24[_0x58dc66(0x199)](_0x2f811e)[_0x58dc66(0x1b9)](_0x2f811e);}catch(_0x1bffeb){_0x11cbcb(_0x1bffeb);}});}[a16_0x4f1c3a(0x1d9)](){return new Promise((_0x43551c,_0x112009)=>{const _0x2e5f74=a16_0x3452;try{this[_0x2e5f74(0x1c1)][_0x2e5f74(0x189)](_0x2e5f74(0x1bd));const _0x1e896d=this[_0x2e5f74(0x16e)]+'/'+constants[_0x2e5f74(0x1e4)];if(fs[_0x2e5f74(0x1b1)](_0x1e896d)){const _0x15723d=_0x1e896d+_0x2e5f74(0x1c0);if(this[_0x2e5f74(0x1c1)][_0x2e5f74(0x19f)][_0x2e5f74(0x1f2)]&&fs[_0x2e5f74(0x1b1)](_0x15723d)){const _0x2f72ce=fs[_0x2e5f74(0x1c4)](_0x15723d);if(_0x2f72ce&&_0x2f72ce[_0x2e5f74(0x1f2)]){const _0x1e6505=_0x2f72ce[0x0];if(_0x1e6505[_0x2e5f74(0x1ad)](_0x2e5f74(0x174))&&_0x1e6505['includes'](_0x2e5f74(0x1af))){const _0x91b9b6=_0x2e5f74(0x1de)+JSON[_0x2e5f74(0x1e8)](this['logger'][_0x2e5f74(0x19f)]);fs[_0x2e5f74(0x1f9)]('./'+_0x15723d+'/'+_0x1e6505,_0x91b9b6);}}}const _0x1233bc=new AdmZip();_0x1233bc[_0x2e5f74(0x1fb)](_0x1e896d,constants[_0x2e5f74(0x1e4)]),this[_0x2e5f74(0x1c1)]['log'](_0x2e5f74(0x1e9)),_0x43551c(_0x1233bc[_0x2e5f74(0x172)]()['toString'](_0x2e5f74(0x1ac)));}else this[_0x2e5f74(0x1c1)][_0x2e5f74(0x189)](_0x2e5f74(0x1dd)),_0x43551c();}catch(_0x21f44a){this[_0x2e5f74(0x1c1)]['log']('Error\x20Create\x20Vlocity\x20Temp\x20Zip\x20'+_0x21f44a),_0x43551c();}});}['sendVlocityTemp'](_0x339860){return new Promise((_0x113bcd,_0x36dc43)=>{const _0x3a8e61=a16_0x3452;try{this['logger'][_0x3a8e61(0x189)](_0x3a8e61(0x1a1));const _0x251b94={'Name':_0x3a8e61(0x187),'ContentType':_0x3a8e61(0x1f3),'Description':_0x3a8e61(0x187),'ParentId':this[_0x3a8e61(0x1a2)],'Body':_0x339860};this['jsForceConnection'][_0x3a8e61(0x184)](_0x3a8e61(0x178))[_0x3a8e61(0x1be)](_0x251b94)[_0x3a8e61(0x199)](()=>{const _0x52b3a7=_0x3a8e61;this[_0x52b3a7(0x1c1)][_0x52b3a7(0x189)](_0x52b3a7(0x1b4)),_0x113bcd();})['catch'](_0x131410=>{const _0x23170d=_0x3a8e61;this[_0x23170d(0x1c1)]['log'](_0x23170d(0x1bc)+_0x131410),_0x36dc43(_0x131410);});}catch(_0x35943a){this['logger'][_0x3a8e61(0x189)](_0x3a8e61(0x1bc)+_0x35943a),_0x36dc43(_0x35943a);}});}async['completeDeployment'](_0x10edd9,_0x49b6aa=![]){const _0x5ada5f=a16_0x4f1c3a,_0x33910d=await this['createVlocityTempZip']();_0x33910d&&await this[_0x5ada5f(0x1f7)](_0x33910d);let _0xd69cc6=this[_0x5ada5f(0x1c5)];try{const _0x3a75f9=await storage['readFile'](this[_0x5ada5f(0x16e)],constants[_0x5ada5f(0x1e4)]+'/'+constants[_0x5ada5f(0x170)],this['logger']);_0xd69cc6=await this[_0x5ada5f(0x1cc)](_0x3a75f9);}catch(_0x43db77){this['logger'][_0x5ada5f(0x189)](_0x5ada5f(0x1e6)+_0x43db77);}const _0x2eefd2=await http[_0x5ada5f(0x183)](this[_0x5ada5f(0x16e)],this[_0x5ada5f(0x1eb)],this[_0x5ada5f(0x193)],this[_0x5ada5f(0x1c1)],_0x49b6aa,!![]);try{await http[_0x5ada5f(0x1df)](this['jsForceConnection'],this[_0x5ada5f(0x1a2)],this[_0x5ada5f(0x1a8)],_0x10edd9&&_0xd69cc6>0x0,this[_0x5ada5f(0x1c1)],_0x2eefd2||_0xd69cc6!==this[_0x5ada5f(0x1c5)]);}catch(_0x55ef7f){this['logger'][_0x5ada5f(0x189)](_0x5ada5f(0x1cb)+_0x55ef7f);}}}module['exports']={'DeployHelper':DeployHelper};