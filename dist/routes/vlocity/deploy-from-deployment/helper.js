const a27_0x10b33a=a27_0x461c;(function(_0x310865,_0x2e28e4){const _0x23894f=a27_0x461c,_0x395b89=_0x310865();while(!![]){try{const _0x306c4f=parseInt(_0x23894f(0xb4))/0x1+parseInt(_0x23894f(0xa8))/0x2+parseInt(_0x23894f(0xad))/0x3*(parseInt(_0x23894f(0x80))/0x4)+parseInt(_0x23894f(0xb0))/0x5+parseInt(_0x23894f(0xaf))/0x6+parseInt(_0x23894f(0xac))/0x7+-parseInt(_0x23894f(0x99))/0x8;if(_0x306c4f===_0x2e28e4)break;else _0x395b89['push'](_0x395b89['shift']());}catch(_0xf7de8e){_0x395b89['push'](_0x395b89['shift']());}}}(a27_0xe7df,0x30ddd));const AdmZip=require(a27_0x10b33a(0xb6)),childProcess=require(a27_0x10b33a(0x8d)),constants=require('../../../constants'),http=require(a27_0x10b33a(0x92));async function retrieveSourceComponents(_0x2343e0,_0x2b708d,_0x409bb7,_0x6876d0){const _0x2c211d=a27_0x10b33a;_0x6876d0[_0x2c211d(0x84)](_0x2c211d(0x9a));const _0x125c75=[];let _0x1917ef=![];const _0x48748d=_0x2c211d(0x85)+_0x2b708d+_0x2c211d(0x9c)+_0x2b708d+_0x2c211d(0x78)+_0x409bb7+'\x27';let _0x42e62e=await _0x2343e0['query'](_0x48748d);_0x125c75['push'](..._0x42e62e[_0x2c211d(0x8b)]['map'](({Id:_0x37541f})=>_0x37541f)),_0x6876d0['log'](_0x2c211d(0xa0)+_0x42e62e[_0x2c211d(0xa7)]);do{_0x42e62e=await _0x2343e0[_0x2c211d(0x7a)](_0x42e62e[_0x2c211d(0x91)]),_0x125c75[_0x2c211d(0x9f)](..._0x42e62e[_0x2c211d(0x8b)][_0x2c211d(0xa2)](({Id:_0x23028c})=>_0x23028c)),_0x6876d0[_0x2c211d(0x84)](_0x2c211d(0xa0)+_0x42e62e[_0x2c211d(0xa7)]),_0x1917ef=!_0x42e62e[_0x2c211d(0x86)];}while(_0x1917ef);return _0x6876d0['log'](_0x2c211d(0x87)),_0x125c75;}function a27_0x461c(_0x41bf53,_0x500584){const _0xe7df=a27_0xe7df();return a27_0x461c=function(_0x461c26,_0x50ba15){_0x461c26=_0x461c26-0x78;let _0x116044=_0xe7df[_0x461c26];return _0x116044;},a27_0x461c(_0x41bf53,_0x500584);}function retrieveVlocityAttachments(_0x2aed27,_0x26292d,_0x58354f,_0x4bc1a6,_0x5a2450=[]){return new Promise((_0x38c12c,_0x24b5b)=>{const _0x6312fb=a27_0x461c;try{_0x4bc1a6[_0x6312fb(0x84)](_0x6312fb(0x82)),callRetrieveVlocityAttachments(_0x2aed27,_0x26292d,_0x58354f,_0x58354f[_0x6312fb(0xa7)],_0x4bc1a6,_0x5a2450=[])[_0x6312fb(0x95)](_0x3e716a=>{const _0x15cad0=_0x6312fb;_0x4bc1a6[_0x15cad0(0x84)](_0x15cad0(0x89)),_0x38c12c(_0x3e716a);})[_0x6312fb(0x8f)](_0x2a44fe=>{const _0x366935=_0x6312fb;_0x4bc1a6[_0x366935(0x84)](_0x366935(0x9d)),_0x24b5b(_0x2a44fe);});}catch(_0x112457){_0x4bc1a6['log'](_0x6312fb(0x9d)),_0x24b5b(_0x112457);}});}async function callRetrieveVlocityAttachments(_0x55beb7,_0x193c14,_0x131078,_0x1e1b80,_0xf07bdd,_0x61ba0=[]){const _0x295d78=a27_0x10b33a,_0xe58bbf={'parentIds':_0x131078},_0x351571=await http[_0x295d78(0x93)](_0x55beb7,_0x193c14,_0xe58bbf,'GetVlocityComponents/');_0x61ba0[_0x295d78(0x9f)](..._0x351571[_0x295d78(0x8b)]),_0xf07bdd[_0x295d78(0x84)](_0x295d78(0x88)+Number[_0x295d78(0xa9)](_0x61ba0[_0x295d78(0xa7)]/_0x1e1b80*0x64)[_0x295d78(0xa5)](0x2)+'%');if(_0x351571[_0x295d78(0xaa)][_0x295d78(0xa7)]&&_0x131078[_0x295d78(0xa7)]!==_0x61ba0[_0x295d78(0xa7)])return await callRetrieveVlocityAttachments(_0x55beb7,_0x193c14,_0x351571[_0x295d78(0xaa)],_0x1e1b80,_0xf07bdd,_0x61ba0);return _0x61ba0;}function unzipComponentList(_0xe7894a,_0x503ca4,_0x2f1bee){return new Promise((_0xb8a48,_0x5659e3)=>{const _0x3836ce=a27_0x461c;try{_0x2f1bee[_0x3836ce(0x84)](_0x3836ce(0x9b));let _0x1cd659=Promise[_0x3836ce(0x7d)]();_0xe7894a['forEach'](_0x3d79e0=>{_0x1cd659=_0x1cd659['then'](()=>unzipBuffer(_0x3d79e0,_0x503ca4));}),_0x1cd659['then'](()=>{const _0x40c3c2=_0x3836ce;_0x2f1bee[_0x40c3c2(0x84)]('End\x20Unzip\x20Component\x20List'),_0xb8a48();})['catch'](_0x536586=>{const _0x1b97ec=_0x3836ce;_0x2f1bee[_0x1b97ec(0x84)](_0x1b97ec(0x97)+_0x536586),_0x5659e3(_0x536586);});}catch(_0x20d711){_0x2f1bee[_0x3836ce(0x84)](_0x3836ce(0x97)+_0x20d711),_0x5659e3(_0x20d711);}});}function unzipBuffer(_0x36ee08,_0x44c126){return new Promise((_0x269396,_0x4ddacd)=>{const _0x5ef3e7=a27_0x461c;try{const _0x501650=new AdmZip(Buffer[_0x5ef3e7(0x98)](_0x36ee08,_0x5ef3e7(0x96))),_0x48c40=_0x44c126+'/'+constants['UNZIP_CATALOG_NAME'];_0x501650[_0x5ef3e7(0xa1)](_0x48c40,![]),_0x269396();}catch(_0x4fdeef){_0x4ddacd(_0x4fdeef);}});}function deployData(_0x467fd7,_0x389651,_0x1c3a49,_0x4a4016,_0x1bf531,_0x588db9,_0x31febd,_0x5889f8){return new Promise((_0x4b6a72,_0x3be324)=>{const _0x2d012b=a27_0x461c;try{_0x5889f8[_0x2d012b(0x84)](_0x2d012b(0xa6));const _0x2a2357=_0x2d012b(0x94),_0x12cbc8=[_0x2d012b(0x7c),''+_0x1c3a49,_0x2d012b(0xab),''+_0x389651,_0x2d012b(0x7e),''+constants[_0x2d012b(0x7f)],'-autoRetryErrors'];_0x4a4016&&_0x12cbc8['push']('-separateMatrixVersions');_0x1bf531&&_0x12cbc8[_0x2d012b(0x9f)](_0x2d012b(0xa4));_0x12cbc8[_0x2d012b(0x9f)](_0x2d012b(0xb3));_0x588db9&&(_0x12cbc8[_0x2d012b(0x9f)]('runApex'),_0x12cbc8[_0x2d012b(0x9f)](_0x2d012b(0xa3)),_0x12cbc8['push'](_0x31febd));_0x5889f8[_0x2d012b(0x84)](_0x12cbc8[_0x2d012b(0x8c)](0x2)['join']('\x20'));const _0x7391ee={'cwd':_0x467fd7,'maxBuffer':0x400*0x1f4};childProcess[_0x2d012b(0x90)](_0x2a2357,_0x12cbc8,_0x5889f8,_0x7391ee)[_0x2d012b(0x95)](_0x401f28=>{const _0x3d5c80=_0x2d012b;_0x5889f8[_0x3d5c80(0x84)](_0x3d5c80(0x79)),_0x4b6a72(_0x401f28);})[_0x2d012b(0x8f)](_0x5773c4=>{const _0x5b8099=_0x2d012b;_0x5889f8[_0x5b8099(0x84)](_0x5b8099(0xb2)+_0x5773c4),_0x3be324(_0x5773c4);});}catch(_0x5dbb8e){_0x3be324(_0x5dbb8e);}});}function getTime(){const _0x2a530f=a27_0x10b33a,_0x2152d9=new Date(),_0x40e3db=[_0x2152d9['getDate'](),_0x2152d9[_0x2a530f(0xb5)]()+0x1,_0x2152d9[_0x2a530f(0x9e)](),_0x2152d9[_0x2a530f(0x8a)](),_0x2152d9['getMinutes'](),_0x2152d9[_0x2a530f(0xae)]()];return _0x40e3db[_0x2a530f(0x8e)](_0x5c518e=>_0x5c518e=_0x5c518e[_0x2a530f(0x7b)]()[_0x2a530f(0xb1)](/^([0-9])$/,_0x2a530f(0x81))),_0x40e3db[0x2]+'-'+_0x40e3db[0x1]+'-'+_0x40e3db[0x0]+'\x20'+_0x40e3db[0x3]+':'+_0x40e3db[0x4]+':'+_0x40e3db[0x5];}function a27_0xe7df(){const _0x19ae55=['SELECT\x20Id\x20FROM\x20','done','End\x20Retrieve\x20Components\x20Ids','Retrieved:\x20','End\x20Retrieve\x20Vlocity\x20Attachments','getHours','records','slice','../../../services/child-process','forEach','catch','callChildProcess','nextRecordsUrl','../../../services/http','post','vlocity','then','base64','Error\x20Unzip\x20Component\x20List\x20','from','4290720WSOvmy','Start\x20Retrieve\x20Components\x20Ids','Start\x20Unzip\x20Component\x20List','Patch_Manifest__c\x20WHERE\x20','Error\x20Retrieve\x20Vlocity\x20Attachments','getFullYear','push','Component\x20Id\x20List\x20Length,\x20','extractAllTo','map','-apex','-separateCalculationProcedureVersions','toFixed','Start\x20Deploy\x20Data','length','541062zCuJxA','parseFloat','ids','-sf.instanceUrl','300727KIrdez','3xklOrK','getSeconds','673110bqKkLn','631900ktrCca','replace','Error\x20Deploy\x20Data\x20','packDeploy','42109iAgEhn','getMonth','adm-zip','Patch__c\x20=\x20\x27','End\x20Deploy\x20Data','queryMore','toString','-sf.accessToken','resolve','-job','JOB_FILE_NAME','569324kInmZM','0$1','Start\x20Retrieve\x20Vlocity\x20Attachments','exports','log'];a27_0xe7df=function(){return _0x19ae55;};return a27_0xe7df();}module[a27_0x10b33a(0x83)]={'retrieveSourceComponents':retrieveSourceComponents,'retrieveVlocityAttachments':retrieveVlocityAttachments,'unzipComponentList':unzipComponentList,'deployData':deployData,'getTime':getTime};