const a27_0x484953=a27_0xf6d9;(function(_0x237a53,_0x4c227e){const _0x5f23c4=a27_0xf6d9,_0x117076=_0x237a53();while(!![]){try{const _0x5e9662=-parseInt(_0x5f23c4(0x189))/0x1+parseInt(_0x5f23c4(0x15b))/0x2*(-parseInt(_0x5f23c4(0x181))/0x3)+parseInt(_0x5f23c4(0x171))/0x4*(-parseInt(_0x5f23c4(0x17c))/0x5)+parseInt(_0x5f23c4(0x153))/0x6*(parseInt(_0x5f23c4(0x157))/0x7)+-parseInt(_0x5f23c4(0x180))/0x8*(-parseInt(_0x5f23c4(0x16c))/0x9)+parseInt(_0x5f23c4(0x15c))/0xa+-parseInt(_0x5f23c4(0x174))/0xb;if(_0x5e9662===_0x4c227e)break;else _0x117076['push'](_0x117076['shift']());}catch(_0x1eb980){_0x117076['push'](_0x117076['shift']());}}}(a27_0x5031,0x8fe97));const AdmZip=require('adm-zip'),childProcess=require('../../../services/child-process'),constants=require('../../../constants'),http=require(a27_0x484953(0x167));async function retrieveSourceComponents(_0x505bd2,_0x15093e,_0x86bb7f,_0x183c13){const _0x33046e=a27_0x484953;_0x183c13[_0x33046e(0x178)]('Start\x20Retrieve\x20Components\x20Ids');const _0x40cfd8=[];let _0x4a0dcc=![];const _0x20fee4=_0x33046e(0x166)+_0x15093e+'Patch_Manifest__c\x20WHERE\x20'+_0x15093e+_0x33046e(0x16a)+_0x86bb7f+'\x27';let _0x568c9c=await _0x505bd2['query'](_0x20fee4);_0x40cfd8[_0x33046e(0x16b)](..._0x568c9c[_0x33046e(0x175)]['map'](({Id:_0x5a404e})=>_0x5a404e)),_0x183c13[_0x33046e(0x178)](_0x33046e(0x169)+_0x568c9c[_0x33046e(0x164)]);do{_0x568c9c=await _0x505bd2[_0x33046e(0x160)](_0x568c9c[_0x33046e(0x173)]),_0x40cfd8[_0x33046e(0x16b)](..._0x568c9c[_0x33046e(0x175)][_0x33046e(0x172)](({Id:_0x539086})=>_0x539086)),_0x183c13[_0x33046e(0x178)](_0x33046e(0x169)+_0x568c9c[_0x33046e(0x164)]),_0x4a0dcc=!_0x568c9c[_0x33046e(0x163)];}while(_0x4a0dcc);return _0x183c13[_0x33046e(0x178)]('End\x20Retrieve\x20Components\x20Ids'),_0x40cfd8;}function retrieveVlocityAttachments(_0x2e88d4,_0x4f0fbc,_0x411c94,_0x478bef,_0x586c82=[]){return new Promise((_0x598b51,_0x3f93cd)=>{const _0x2954e7=a27_0xf6d9;try{_0x478bef['log'](_0x2954e7(0x168)),callRetrieveVlocityAttachments(_0x2e88d4,_0x4f0fbc,_0x411c94,_0x411c94['length'],_0x478bef,_0x586c82=[])[_0x2954e7(0x176)](_0x219f3b=>{const _0x198326=_0x2954e7;_0x478bef[_0x198326(0x178)]('End\x20Retrieve\x20Vlocity\x20Attachments'),_0x598b51(_0x219f3b);})['catch'](_0x68ddce=>{const _0x3859b2=_0x2954e7;_0x478bef[_0x3859b2(0x178)](_0x3859b2(0x182)),_0x3f93cd(_0x68ddce);});}catch(_0x5e30e1){_0x478bef[_0x2954e7(0x178)](_0x2954e7(0x182)),_0x3f93cd(_0x5e30e1);}});}function a27_0x5031(){const _0x27f602=['packDeploy','toString','150tDKwSx','0$1','post','toFixed','292019vhGzWe','getFullYear','join','exports','163946uMESpX','3064790PzEWdj','UNZIP_CATALOG_NAME','Retrieved:\x20','GetVlocityComponents/','queryMore','replace','forEach','done','length','ids','SELECT\x20Id\x20FROM\x20','../../../services/http','Start\x20Retrieve\x20Vlocity\x20Attachments','Component\x20Id\x20List\x20Length,\x20','Patch__c\x20=\x20\x27','push','9olNACm','End\x20Deploy\x20Data','getDate','extractAllTo','resolve','162708vxTkqb','map','nextRecordsUrl','11773399uumDFe','records','then','-sf.instanceUrl','log','-autoRetryErrors','getSeconds','-apex','45jaFznX','base64','-separateCalculationProcedureVersions','runApex','7903976HcbOXW','9IGnRcl','Error\x20Retrieve\x20Vlocity\x20Attachments','catch','callChildProcess','from','vlocity','Start\x20Unzip\x20Component\x20List','Error\x20Unzip\x20Component\x20List\x20','65617popApg','getHours','-separateMatrixVersions','Start\x20Deploy\x20Data'];a27_0x5031=function(){return _0x27f602;};return a27_0x5031();}async function callRetrieveVlocityAttachments(_0x3b6b06,_0x591139,_0x14a4de,_0x1ce1e4,_0x4ea707,_0x47dd45=[]){const _0x4a4147=a27_0x484953,_0xfd8d94={'parentIds':_0x14a4de},_0x19c63d=await http[_0x4a4147(0x155)](_0x3b6b06,_0x591139,_0xfd8d94,_0x4a4147(0x15f));_0x47dd45[_0x4a4147(0x16b)](..._0x19c63d[_0x4a4147(0x175)]),_0x4ea707[_0x4a4147(0x178)](_0x4a4147(0x15e)+Number['parseFloat'](_0x47dd45[_0x4a4147(0x164)]/_0x1ce1e4*0x64)[_0x4a4147(0x156)](0x2)+'%');if(_0x19c63d[_0x4a4147(0x165)]['length']&&_0x14a4de[_0x4a4147(0x164)]!==_0x47dd45[_0x4a4147(0x164)])return await callRetrieveVlocityAttachments(_0x3b6b06,_0x591139,_0x19c63d[_0x4a4147(0x165)],_0x1ce1e4,_0x4ea707,_0x47dd45);return _0x47dd45;}function unzipComponentList(_0x419d63,_0x15ba0e,_0x5eb23c){return new Promise((_0xb8125,_0x2111af)=>{const _0x534d51=a27_0xf6d9;try{_0x5eb23c['log'](_0x534d51(0x187));let _0x15c40a=Promise[_0x534d51(0x170)]();_0x419d63[_0x534d51(0x162)](_0x5970c1=>{_0x15c40a=_0x15c40a['then'](()=>unzipBuffer(_0x5970c1,_0x15ba0e));}),_0x15c40a['then'](()=>{const _0xeb3306=_0x534d51;_0x5eb23c[_0xeb3306(0x178)]('End\x20Unzip\x20Component\x20List'),_0xb8125();})['catch'](_0x286406=>{const _0x1c3804=_0x534d51;_0x5eb23c[_0x1c3804(0x178)](_0x1c3804(0x188)+_0x286406),_0x2111af(_0x286406);});}catch(_0x23f2aa){_0x5eb23c[_0x534d51(0x178)]('Error\x20Unzip\x20Component\x20List\x20'+_0x23f2aa),_0x2111af(_0x23f2aa);}});}function unzipBuffer(_0x31a88c,_0x23880d){return new Promise((_0x266664,_0x40f30c)=>{const _0x491524=a27_0xf6d9;try{const _0x3b6fb5=new AdmZip(Buffer[_0x491524(0x185)](_0x31a88c,_0x491524(0x17d))),_0x4fda5c=_0x23880d+'/'+constants[_0x491524(0x15d)];_0x3b6fb5[_0x491524(0x16f)](_0x4fda5c,![]),_0x266664();}catch(_0x2976b7){_0x40f30c(_0x2976b7);}});}function deployData(_0x5f0609,_0x5953e9,_0x10429f,_0x11f233,_0x3d277f,_0x313053,_0xe10426,_0x2f1ee3){return new Promise((_0x549fc3,_0x451e8b)=>{const _0x6f7fea=a27_0xf6d9;try{_0x2f1ee3[_0x6f7fea(0x178)](_0x6f7fea(0x18c));const _0x488a5f=_0x6f7fea(0x186),_0x51cb73=['-sf.accessToken',''+_0x10429f,_0x6f7fea(0x177),''+_0x5953e9,'-job',''+constants['JOB_FILE_NAME'],_0x6f7fea(0x179)];_0x11f233&&_0x51cb73[_0x6f7fea(0x16b)](_0x6f7fea(0x18b));_0x3d277f&&_0x51cb73[_0x6f7fea(0x16b)](_0x6f7fea(0x17e));_0x51cb73[_0x6f7fea(0x16b)](_0x6f7fea(0x151));_0x313053&&(_0x51cb73[_0x6f7fea(0x16b)](_0x6f7fea(0x17f)),_0x51cb73[_0x6f7fea(0x16b)](_0x6f7fea(0x17b)),_0x51cb73[_0x6f7fea(0x16b)](_0xe10426));_0x2f1ee3['log'](_0x51cb73['slice'](0x2)[_0x6f7fea(0x159)]('\x20'));const _0x5f5cf6={'cwd':_0x5f0609,'maxBuffer':0x400*0x1f4};childProcess[_0x6f7fea(0x184)](_0x488a5f,_0x51cb73,_0x2f1ee3,_0x5f5cf6)[_0x6f7fea(0x176)](_0x13434b=>{const _0x195722=_0x6f7fea;_0x2f1ee3[_0x195722(0x178)](_0x195722(0x16d)),_0x549fc3(_0x13434b);})[_0x6f7fea(0x183)](_0x45580c=>{_0x2f1ee3['log']('Error\x20Deploy\x20Data\x20'+_0x45580c),_0x451e8b(_0x45580c);});}catch(_0x1706f2){_0x451e8b(_0x1706f2);}});}function getTime(){const _0x101802=a27_0x484953,_0x3f70dd=new Date(),_0x4b91a7=[_0x3f70dd[_0x101802(0x16e)](),_0x3f70dd['getMonth']()+0x1,_0x3f70dd[_0x101802(0x158)](),_0x3f70dd[_0x101802(0x18a)](),_0x3f70dd['getMinutes'](),_0x3f70dd[_0x101802(0x17a)]()];return _0x4b91a7['forEach'](_0x32c9d1=>_0x32c9d1=_0x32c9d1[_0x101802(0x152)]()[_0x101802(0x161)](/^([0-9])$/,_0x101802(0x154))),_0x4b91a7[0x2]+'-'+_0x4b91a7[0x1]+'-'+_0x4b91a7[0x0]+'\x20'+_0x4b91a7[0x3]+':'+_0x4b91a7[0x4]+':'+_0x4b91a7[0x5];}function a27_0xf6d9(_0x36b534,_0x16b91d){const _0x50312d=a27_0x5031();return a27_0xf6d9=function(_0xf6d9ca,_0x59503e){_0xf6d9ca=_0xf6d9ca-0x151;let _0x520864=_0x50312d[_0xf6d9ca];return _0x520864;},a27_0xf6d9(_0x36b534,_0x16b91d);}module[a27_0x484953(0x15a)]={'retrieveSourceComponents':retrieveSourceComponents,'retrieveVlocityAttachments':retrieveVlocityAttachments,'unzipComponentList':unzipComponentList,'deployData':deployData,'getTime':getTime};