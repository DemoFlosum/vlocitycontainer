const a19_0x484153=a19_0x2132;function a19_0x1c01(){const _0xd62170=['3736WhOjoA','toFixed','post','runApex','records','-separateCalculationProcedureVersions','push','-sf.instanceUrl','278754AONsRp','Retrieved:\x20','Start\x20Deploy\x20Data','Patch__c\x20=\x20\x27','1191qyDmyv','slice','Start\x20Unzip\x20Component\x20List','base64','JOB_FILE_NAME','2054152AmWQCF','ids','query','packDeploy','27310ffbXhs','End\x20Retrieve\x20Components\x20Ids','forEach','Error\x20Retrieve\x20Vlocity\x20Attachments','getMinutes','log','then','from','getMonth','../../../constants','-sf.accessToken','3096600eAoNyB','End\x20Unzip\x20Component\x20List','parseFloat','extractAllTo','Error\x20Retrieve\x20Components\x20Ids','0$1','replace','Error\x20Unzip\x20Component\x20List\x20','2090961xhgeGp','adm-zip','-autoRetryErrors','getDate','exports','vlocity','length','-job','getHours','78gfwqIc','Start\x20Retrieve\x20Vlocity\x20Attachments','callChildProcess','End\x20Retrieve\x20Vlocity\x20Attachments','UNZIP_CATALOG_NAME','queryMore','9874phqnZF','14LvdOxJ','nextRecordsUrl','Component\x20Id\x20List\x20Length,\x20','catch'];a19_0x1c01=function(){return _0xd62170;};return a19_0x1c01();}(function(_0x466f0f,_0x16ef19){const _0x2aae01=a19_0x2132,_0x1ed22b=_0x466f0f();while(!![]){try{const _0x113e47=-parseInt(_0x2aae01(0x16d))/0x1*(-parseInt(_0x2aae01(0x16c))/0x2)+-parseInt(_0x2aae01(0x17d))/0x3*(-parseInt(_0x2aae01(0x171))/0x4)+parseInt(_0x2aae01(0x186))/0x5*(parseInt(_0x2aae01(0x166))/0x6)+-parseInt(_0x2aae01(0x179))/0x7+parseInt(_0x2aae01(0x182))/0x8+-parseInt(_0x2aae01(0x15d))/0x9+-parseInt(_0x2aae01(0x155))/0xa;if(_0x113e47===_0x16ef19)break;else _0x1ed22b['push'](_0x1ed22b['shift']());}catch(_0x574738){_0x1ed22b['push'](_0x1ed22b['shift']());}}}(a19_0x1c01,0x2d618));const fs=require('fs'),AdmZip=require(a19_0x484153(0x15e)),path=require('path'),childProcess=require('../../../services/child-process'),constants=require(a19_0x484153(0x153));function retrieveSourceComponents(_0x4a2463,_0x560dde,_0x5a207f,_0x2319a9){return new Promise((_0x57cfe3,_0xc1839e)=>{const _0x3c1616=a19_0x2132;try{_0x2319a9[_0x3c1616(0x14f)]('Start\x20Retrieve\x20Components\x20Ids');const _0x220d4d=[];_0x4a2463[_0x3c1616(0x184)]('SELECT\x20Id\x20FROM\x20'+_0x560dde+'Patch_Manifest__c\x20WHERE\x20'+_0x560dde+_0x3c1616(0x17c)+_0x5a207f+'\x27',(_0x382dc4,_0x26c23e)=>{const _0x58bb39=_0x3c1616;_0x382dc4&&_0xc1839e(_0x382dc4),_0x26c23e[_0x58bb39(0x175)][_0x58bb39(0x14c)](_0x3abc50=>_0x220d4d['push'](_0x3abc50['Id'])),!_0x26c23e['done']?retrieveSourceComponentsMore(_0x4a2463,_0x26c23e[_0x58bb39(0x16e)],_0x220d4d)[_0x58bb39(0x150)](_0x3ed9be=>{const _0x58be42=_0x58bb39;_0x2319a9['log'](_0x58be42(0x16f)+_0x3ed9be['length']),_0x2319a9[_0x58be42(0x14f)](_0x58be42(0x14b)),_0x57cfe3(_0x3ed9be);})[_0x58bb39(0x170)](_0x39bc54=>{const _0x4e67e8=_0x58bb39;_0x2319a9[_0x4e67e8(0x14f)](_0x4e67e8(0x159)),_0xc1839e(_0x39bc54);}):(_0x2319a9[_0x58bb39(0x14f)](_0x58bb39(0x16f)+_0x220d4d['length']),_0x2319a9[_0x58bb39(0x14f)]('End\x20Retrieve\x20Components\x20Ids'),_0x57cfe3(_0x220d4d));});}catch(_0xfa931f){_0x2319a9[_0x3c1616(0x14f)](_0x3c1616(0x159)),_0xc1839e(_0xfa931f);}});}function retrieveSourceComponentsMore(_0x5ba09d,_0x33547d,_0x4415d4){return new Promise((_0x5aaa70,_0x3c881a)=>{const _0x55fc25=a19_0x2132;try{_0x5ba09d[_0x55fc25(0x16b)](_0x33547d)[_0x55fc25(0x150)](_0x72eaa9=>{const _0x37a908=_0x55fc25;!_0x72eaa9['done']?retrieveSourceComponentsMore(_0x5ba09d,_0x33547d,_0x4415d4)[_0x37a908(0x150)](_0x3407a7=>_0x5aaa70(_0x3407a7))[_0x37a908(0x170)](_0x38abf2=>_0x3c881a(_0x38abf2)):_0x5aaa70(_0x4415d4);});}catch(_0x537f64){_0x3c881a(_0x537f64);}});}function retrieveVlocityAttachments(_0x5bdeb4,_0x1fcac4,_0x131037,_0x2ddce9,_0xcfb5ff=[]){return new Promise((_0x1fa1e0,_0x387608)=>{const _0x1de1be=a19_0x2132;try{_0x2ddce9[_0x1de1be(0x14f)](_0x1de1be(0x167)),callRetrieveVlocityAttachments(_0x5bdeb4,_0x1fcac4,_0x131037,_0x131037[_0x1de1be(0x163)],_0x2ddce9,_0xcfb5ff=[])[_0x1de1be(0x150)](_0x38e629=>{const _0x38be3d=_0x1de1be;_0x2ddce9[_0x38be3d(0x14f)](_0x38be3d(0x169)),_0x1fa1e0(_0x38e629);})[_0x1de1be(0x170)](_0x54857f=>{const _0x193739=_0x1de1be;_0x2ddce9[_0x193739(0x14f)](_0x193739(0x14d)),_0x387608(_0x54857f);});}catch(_0x526de8){_0x2ddce9[_0x1de1be(0x14f)](_0x1de1be(0x14d)),_0x387608(_0x526de8);}});}function callRetrieveVlocityAttachments(_0x38e994,_0x48bf30,_0xb89a37,_0x1c00fc,_0x36752c,_0x475217=[]){return new Promise((_0x1f80dc,_0x354d61)=>{const _0x208a06=a19_0x2132;try{const _0x55be97={'parentIds':_0xb89a37};_0x38e994['apex'][_0x208a06(0x173)](_0x48bf30,_0x55be97)[_0x208a06(0x150)](_0x211779=>{const _0x4b4dac=_0x208a06;_0x475217[_0x4b4dac(0x177)](..._0x211779[_0x4b4dac(0x175)]),_0x36752c[_0x4b4dac(0x14f)](_0x4b4dac(0x17a)+Number[_0x4b4dac(0x157)](_0x475217['length']/_0x1c00fc*0x64)[_0x4b4dac(0x172)](0x2)+'%'),_0x211779['ids'][_0x4b4dac(0x163)]&&_0xb89a37[_0x4b4dac(0x163)]!==_0x475217['length']?callRetrieveVlocityAttachments(_0x38e994,_0x48bf30,_0x211779[_0x4b4dac(0x183)],_0x1c00fc,_0x36752c,_0x475217)[_0x4b4dac(0x150)](()=>_0x1f80dc(_0x475217))[_0x4b4dac(0x170)](_0xb8cb93=>{_0x354d61(_0xb8cb93);}):_0x1f80dc(_0x475217);})[_0x208a06(0x170)](_0x548086=>{_0x354d61(_0x548086);});}catch(_0x10a389){_0x354d61(_0x10a389);}});}function a19_0x2132(_0x24e882,_0x35a3ab){const _0x1c012d=a19_0x1c01();return a19_0x2132=function(_0x213259,_0x23f917){_0x213259=_0x213259-0x14b;let _0x38e21a=_0x1c012d[_0x213259];return _0x38e21a;},a19_0x2132(_0x24e882,_0x35a3ab);}function unzipComponentList(_0x4539ed,_0x1b04a0,_0x4aa754){return new Promise((_0x10908a,_0x5c408c)=>{const _0x150e3f=a19_0x2132;try{_0x4aa754['log'](_0x150e3f(0x17f));let _0x1cbe77=Promise['resolve']();_0x4539ed['forEach'](_0x3033b3=>{_0x1cbe77=_0x1cbe77['then'](()=>unzipBuffer(_0x3033b3,_0x1b04a0));}),_0x1cbe77[_0x150e3f(0x150)](()=>{const _0x4f1caf=_0x150e3f;_0x4aa754['log'](_0x4f1caf(0x156)),_0x10908a();})['catch'](_0x17ce5b=>{const _0x322a02=_0x150e3f;_0x4aa754[_0x322a02(0x14f)]('Error\x20Unzip\x20Component\x20List\x20'+_0x17ce5b),_0x5c408c(_0x17ce5b);});}catch(_0x513cde){_0x4aa754[_0x150e3f(0x14f)](_0x150e3f(0x15c)+_0x513cde),_0x5c408c(_0x513cde);}});}function unzipBuffer(_0xaa2d9d,_0x348f77){return new Promise((_0x586b88,_0x30f46f)=>{const _0x29031d=a19_0x2132;try{const _0x42de2d=new AdmZip(Buffer[_0x29031d(0x151)](_0xaa2d9d,_0x29031d(0x180))),_0x10b838=_0x348f77+'/'+constants[_0x29031d(0x16a)];_0x42de2d[_0x29031d(0x158)](_0x10b838,![]),_0x586b88();}catch(_0x32ec50){_0x30f46f(_0x32ec50);}});}function deployData(_0x579f19,_0x4965b2,_0x59534a,_0x3dca27,_0x341fbc,_0x456cab,_0x5999c4,_0x2d7a09){return new Promise((_0x1f328f,_0x4b2d5b)=>{const _0x2ddb4e=a19_0x2132;try{_0x2d7a09[_0x2ddb4e(0x14f)](_0x2ddb4e(0x17b));const _0x122d8c=_0x2ddb4e(0x162),_0x427c8e=[_0x2ddb4e(0x154),''+_0x59534a,_0x2ddb4e(0x178),''+_0x4965b2,_0x2ddb4e(0x164),''+constants[_0x2ddb4e(0x181)],_0x2ddb4e(0x15f)];!!_0x3dca27&&_0x427c8e[_0x2ddb4e(0x177)]('-separateMatrixVersions');!!_0x341fbc&&_0x427c8e[_0x2ddb4e(0x177)](_0x2ddb4e(0x176));_0x427c8e['push'](_0x2ddb4e(0x185));_0x456cab&&(_0x427c8e[_0x2ddb4e(0x177)](_0x2ddb4e(0x174)),_0x427c8e[_0x2ddb4e(0x177)]('-apex'),_0x427c8e[_0x2ddb4e(0x177)](_0x5999c4));_0x2d7a09[_0x2ddb4e(0x14f)](_0x427c8e[_0x2ddb4e(0x17e)](0x2)['join']('\x20'));const _0x275093={'cwd':_0x579f19,'maxBuffer':0x400*0x1f4};childProcess[_0x2ddb4e(0x168)](_0x122d8c,_0x427c8e,_0x2d7a09,_0x275093)[_0x2ddb4e(0x150)](_0x58fe55=>{const _0x1421cf=_0x2ddb4e;_0x2d7a09[_0x1421cf(0x14f)]('End\x20Deploy\x20Data'),_0x1f328f(_0x58fe55);})[_0x2ddb4e(0x170)](_0x5dde42=>{const _0x248eb1=_0x2ddb4e;_0x2d7a09[_0x248eb1(0x14f)]('Error\x20Deploy\x20Data\x20'+_0x5dde42),_0x4b2d5b(_0x5dde42);});}catch(_0x78e844){_0x4b2d5b(_0x78e844);}});}function getTime(){const _0x1efa44=a19_0x484153,_0x61718b=new Date(),_0x3cfda9=[_0x61718b[_0x1efa44(0x160)](),_0x61718b[_0x1efa44(0x152)]()+0x1,_0x61718b['getFullYear'](),_0x61718b[_0x1efa44(0x165)](),_0x61718b[_0x1efa44(0x14e)](),_0x61718b['getSeconds']()];return _0x3cfda9[_0x1efa44(0x14c)](_0x15ce34=>_0x15ce34=_0x15ce34['toString']()[_0x1efa44(0x15b)](/^([0-9])$/,_0x1efa44(0x15a))),_0x3cfda9[0x2]+'-'+_0x3cfda9[0x1]+'-'+_0x3cfda9[0x0]+'\x20'+_0x3cfda9[0x3]+':'+_0x3cfda9[0x4]+':'+_0x3cfda9[0x5];}module[a19_0x484153(0x161)]={'retrieveSourceComponents':retrieveSourceComponents,'retrieveVlocityAttachments':retrieveVlocityAttachments,'unzipComponentList':unzipComponentList,'deployData':deployData,'getTime':getTime};