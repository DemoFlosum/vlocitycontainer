const a26_0x10b0bf=a26_0x1d97;(function(_0xcc4c1d,_0x4b4632){const _0x4a15d6=a26_0x1d97,_0xf63c19=_0xcc4c1d();while(!![]){try{const _0x3c557c=-parseInt(_0x4a15d6(0xfc))/0x1+-parseInt(_0x4a15d6(0x11e))/0x2*(-parseInt(_0x4a15d6(0x102))/0x3)+-parseInt(_0x4a15d6(0x101))/0x4+-parseInt(_0x4a15d6(0x10a))/0x5+-parseInt(_0x4a15d6(0x10d))/0x6+parseInt(_0x4a15d6(0xeb))/0x7*(parseInt(_0x4a15d6(0xf5))/0x8)+-parseInt(_0x4a15d6(0xf4))/0x9*(-parseInt(_0x4a15d6(0xf7))/0xa);if(_0x3c557c===_0x4b4632)break;else _0xf63c19['push'](_0xf63c19['shift']());}catch(_0xed265c){_0xf63c19['push'](_0xf63c19['shift']());}}}(a26_0x1281,0xb8323));function a26_0x1281(){const _0x13418d=['records','getMinutes','2ZvQiGH','queryMore','getSeconds','End\x20Retrieve\x20Components\x20Ids','forEach','Start\x20Deploy\x20Data','nextRecordsUrl','Retrieved:\x20','resolve','-separateMatrixVersions','path','done','2545172KphTYm','push','Start\x20Retrieve\x20Vlocity\x20Attachments','query','join','apex','Error\x20Unzip\x20Component\x20List\x20','End\x20Retrieve\x20Vlocity\x20Attachments','0$1','296136ugaXJu','24BmCtfl','Component\x20Id\x20List\x20Length,\x20','410lHuxAV','length','End\x20Unzip\x20Component\x20List','Patch_Manifest__c\x20WHERE\x20','exports','656829qWkMLt','callChildProcess','-separateCalculationProcedureVersions','vlocity','log','924452TURTAC','1500486vaLTtc','getMonth','slice','-sf.accessToken','post','JOB_FILE_NAME','getDate','parseFloat','3133995AEYAqR','-autoRetryErrors','getHours','4024836knwJfr','Patch__c\x20=\x20\x27','../../../services/child-process','catch','then','ids','replace','Error\x20Retrieve\x20Components\x20Ids','-job','toString','SELECT\x20Id\x20FROM\x20','Error\x20Retrieve\x20Vlocity\x20Attachments','toFixed','extractAllTo','packDeploy'];a26_0x1281=function(){return _0x13418d;};return a26_0x1281();}const fs=require('fs'),AdmZip=require('adm-zip'),path=require(a26_0x10b0bf(0x128)),childProcess=require(a26_0x10b0bf(0x10f)),constants=require('../../../constants');function retrieveSourceComponents(_0x3e65ba,_0x10cc44,_0xe95d84,_0x1ff689){return new Promise((_0x4404f5,_0x23f95e)=>{const _0x26af88=a26_0x1d97;try{_0x1ff689[_0x26af88(0x100)]('Start\x20Retrieve\x20Components\x20Ids');const _0x411384=[];_0x3e65ba[_0x26af88(0xee)](_0x26af88(0x117)+_0x10cc44+_0x26af88(0xfa)+_0x10cc44+_0x26af88(0x10e)+_0xe95d84+'\x27',(_0x43dd8d,_0x50315f)=>{const _0x24f3c1=_0x26af88;_0x43dd8d&&_0x23f95e(_0x43dd8d),_0x50315f[_0x24f3c1(0x11c)]['forEach'](_0x4b6655=>_0x411384[_0x24f3c1(0xec)](_0x4b6655['Id'])),!_0x50315f[_0x24f3c1(0x129)]?retrieveSourceComponentsMore(_0x3e65ba,_0x50315f[_0x24f3c1(0x124)],_0x411384)['then'](_0x109e6c=>{const _0x487b85=_0x24f3c1;_0x1ff689[_0x487b85(0x100)](_0x487b85(0xf6)+_0x109e6c[_0x487b85(0xf8)]),_0x1ff689[_0x487b85(0x100)](_0x487b85(0x121)),_0x4404f5(_0x109e6c);})[_0x24f3c1(0x110)](_0x3812a9=>{const _0x1c297e=_0x24f3c1;_0x1ff689[_0x1c297e(0x100)]('Error\x20Retrieve\x20Components\x20Ids'),_0x23f95e(_0x3812a9);}):(_0x1ff689[_0x24f3c1(0x100)](_0x24f3c1(0xf6)+_0x411384[_0x24f3c1(0xf8)]),_0x1ff689['log'](_0x24f3c1(0x121)),_0x4404f5(_0x411384));});}catch(_0x2d8047){_0x1ff689[_0x26af88(0x100)](_0x26af88(0x114)),_0x23f95e(_0x2d8047);}});}function retrieveSourceComponentsMore(_0xd8dddc,_0x35f964,_0x2ed3d5){return new Promise((_0x247c3f,_0xf58a8f)=>{const _0x4259c4=a26_0x1d97;try{_0xd8dddc[_0x4259c4(0x11f)](_0x35f964)[_0x4259c4(0x111)](_0x4b5998=>{const _0x2d536d=_0x4259c4;!_0x4b5998[_0x2d536d(0x129)]?retrieveSourceComponentsMore(_0xd8dddc,_0x35f964,_0x2ed3d5)[_0x2d536d(0x111)](_0x1cdbb4=>_0x247c3f(_0x1cdbb4))[_0x2d536d(0x110)](_0x3c8ad6=>_0xf58a8f(_0x3c8ad6)):_0x247c3f(_0x2ed3d5);});}catch(_0x488a2a){_0xf58a8f(_0x488a2a);}});}function retrieveVlocityAttachments(_0xc3b5c2,_0x279f28,_0x2657a1,_0x2a8bc0,_0x366750=[]){return new Promise((_0x18ab03,_0x324753)=>{const _0x3b52a8=a26_0x1d97;try{_0x2a8bc0[_0x3b52a8(0x100)](_0x3b52a8(0xed)),callRetrieveVlocityAttachments(_0xc3b5c2,_0x279f28,_0x2657a1,_0x2657a1[_0x3b52a8(0xf8)],_0x2a8bc0,_0x366750=[])['then'](_0x6402d6=>{const _0x1bce2b=_0x3b52a8;_0x2a8bc0['log'](_0x1bce2b(0xf2)),_0x18ab03(_0x6402d6);})[_0x3b52a8(0x110)](_0x300034=>{const _0x366f94=_0x3b52a8;_0x2a8bc0['log'](_0x366f94(0x118)),_0x324753(_0x300034);});}catch(_0x241af7){_0x2a8bc0[_0x3b52a8(0x100)](_0x3b52a8(0x118)),_0x324753(_0x241af7);}});}function callRetrieveVlocityAttachments(_0x2545f8,_0xe864c9,_0x3ad000,_0x2b342c,_0x2e2ea8,_0x36162f=[]){return new Promise((_0x2fd9b6,_0x20e483)=>{const _0x3aa454=a26_0x1d97;try{const _0x3811cf={'parentIds':_0x3ad000};_0x2545f8[_0x3aa454(0xf0)][_0x3aa454(0x106)](_0xe864c9,_0x3811cf)[_0x3aa454(0x111)](_0x47e58c=>{const _0x56c9fb=_0x3aa454;_0x36162f[_0x56c9fb(0xec)](..._0x47e58c['records']),_0x2e2ea8[_0x56c9fb(0x100)](_0x56c9fb(0x125)+Number[_0x56c9fb(0x109)](_0x36162f['length']/_0x2b342c*0x64)[_0x56c9fb(0x119)](0x2)+'%'),_0x47e58c[_0x56c9fb(0x112)][_0x56c9fb(0xf8)]&&_0x3ad000[_0x56c9fb(0xf8)]!==_0x36162f[_0x56c9fb(0xf8)]?callRetrieveVlocityAttachments(_0x2545f8,_0xe864c9,_0x47e58c[_0x56c9fb(0x112)],_0x2b342c,_0x2e2ea8,_0x36162f)[_0x56c9fb(0x111)](()=>_0x2fd9b6(_0x36162f))['catch'](_0x429587=>{_0x20e483(_0x429587);}):_0x2fd9b6(_0x36162f);})[_0x3aa454(0x110)](_0x205c22=>{_0x20e483(_0x205c22);});}catch(_0x5cab47){_0x20e483(_0x5cab47);}});}function unzipComponentList(_0x1328ae,_0x314b24,_0x51ff65){return new Promise((_0x60aee5,_0x4d3d97)=>{const _0x101285=a26_0x1d97;try{_0x51ff65[_0x101285(0x100)]('Start\x20Unzip\x20Component\x20List');let _0x3c8990=Promise[_0x101285(0x126)]();_0x1328ae['forEach'](_0x33ea49=>{_0x3c8990=_0x3c8990['then'](()=>unzipBuffer(_0x33ea49,_0x314b24));}),_0x3c8990[_0x101285(0x111)](()=>{const _0x2f4df7=_0x101285;_0x51ff65['log'](_0x2f4df7(0xf9)),_0x60aee5();})[_0x101285(0x110)](_0x5906f5=>{const _0x1505d7=_0x101285;_0x51ff65['log'](_0x1505d7(0xf1)+_0x5906f5),_0x4d3d97(_0x5906f5);});}catch(_0x59274e){_0x51ff65[_0x101285(0x100)](_0x101285(0xf1)+_0x59274e),_0x4d3d97(_0x59274e);}});}function unzipBuffer(_0x466967,_0x3098b4){return new Promise((_0x4224b6,_0x5c78cc)=>{const _0x3471bc=a26_0x1d97;try{const _0x18cfcc=new AdmZip(Buffer['from'](_0x466967,'base64')),_0xc9af0b=_0x3098b4+'/'+constants['UNZIP_CATALOG_NAME'];_0x18cfcc[_0x3471bc(0x11a)](_0xc9af0b,![]),_0x4224b6();}catch(_0x129314){_0x5c78cc(_0x129314);}});}function a26_0x1d97(_0x5a4038,_0x806709){const _0x12810c=a26_0x1281();return a26_0x1d97=function(_0x1d9766,_0x1229fa){_0x1d9766=_0x1d9766-0xeb;let _0x52d3c7=_0x12810c[_0x1d9766];return _0x52d3c7;},a26_0x1d97(_0x5a4038,_0x806709);}function deployData(_0x14683f,_0x566e5e,_0x57ba6c,_0x37d3c6,_0x4038c7,_0x483630,_0x1551e6,_0x1d505b){return new Promise((_0x3b09c4,_0x27483d)=>{const _0x22ff8a=a26_0x1d97;try{_0x1d505b[_0x22ff8a(0x100)](_0x22ff8a(0x123));const _0x5da0bf=_0x22ff8a(0xff),_0x4cfe6c=[_0x22ff8a(0x105),''+_0x57ba6c,'-sf.instanceUrl',''+_0x566e5e,_0x22ff8a(0x115),''+constants[_0x22ff8a(0x107)],_0x22ff8a(0x10b)];!!_0x37d3c6&&_0x4cfe6c[_0x22ff8a(0xec)](_0x22ff8a(0x127));!!_0x4038c7&&_0x4cfe6c[_0x22ff8a(0xec)](_0x22ff8a(0xfe));_0x4cfe6c[_0x22ff8a(0xec)](_0x22ff8a(0x11b));_0x483630&&(_0x4cfe6c[_0x22ff8a(0xec)]('runApex'),_0x4cfe6c[_0x22ff8a(0xec)]('-apex'),_0x4cfe6c[_0x22ff8a(0xec)](_0x1551e6));_0x1d505b[_0x22ff8a(0x100)](_0x4cfe6c[_0x22ff8a(0x104)](0x2)[_0x22ff8a(0xef)]('\x20'));const _0x1f9a9d={'cwd':_0x14683f,'maxBuffer':0x400*0x1f4};childProcess[_0x22ff8a(0xfd)](_0x5da0bf,_0x4cfe6c,_0x1d505b,_0x1f9a9d)[_0x22ff8a(0x111)](_0xf9942c=>{const _0xdb7f7=_0x22ff8a;_0x1d505b[_0xdb7f7(0x100)]('End\x20Deploy\x20Data'),_0x3b09c4(_0xf9942c);})[_0x22ff8a(0x110)](_0x107480=>{const _0x52e7ad=_0x22ff8a;_0x1d505b[_0x52e7ad(0x100)]('Error\x20Deploy\x20Data\x20'+_0x107480),_0x27483d(_0x107480);});}catch(_0x16b8fa){_0x27483d(_0x16b8fa);}});}function getTime(){const _0x58af27=a26_0x10b0bf,_0x30c71a=new Date(),_0x2610d9=[_0x30c71a[_0x58af27(0x108)](),_0x30c71a[_0x58af27(0x103)]()+0x1,_0x30c71a['getFullYear'](),_0x30c71a[_0x58af27(0x10c)](),_0x30c71a[_0x58af27(0x11d)](),_0x30c71a[_0x58af27(0x120)]()];return _0x2610d9[_0x58af27(0x122)](_0x19c350=>_0x19c350=_0x19c350[_0x58af27(0x116)]()[_0x58af27(0x113)](/^([0-9])$/,_0x58af27(0xf3))),_0x2610d9[0x2]+'-'+_0x2610d9[0x1]+'-'+_0x2610d9[0x0]+'\x20'+_0x2610d9[0x3]+':'+_0x2610d9[0x4]+':'+_0x2610d9[0x5];}module[a26_0x10b0bf(0xfb)]={'retrieveSourceComponents':retrieveSourceComponents,'retrieveVlocityAttachments':retrieveVlocityAttachments,'unzipComponentList':unzipComponentList,'deployData':deployData,'getTime':getTime};