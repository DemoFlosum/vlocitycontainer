const a21_0x565ee1=a21_0xc5b0;(function(_0x388255,_0x4685dd){const _0x168b30=a21_0xc5b0,_0x152679=_0x388255();while(!![]){try{const _0x5a3273=parseInt(_0x168b30(0xdb))/0x1*(-parseInt(_0x168b30(0x103))/0x2)+-parseInt(_0x168b30(0xe7))/0x3+parseInt(_0x168b30(0xf0))/0x4*(-parseInt(_0x168b30(0x110))/0x5)+parseInt(_0x168b30(0xd2))/0x6+-parseInt(_0x168b30(0x10e))/0x7+-parseInt(_0x168b30(0xda))/0x8*(parseInt(_0x168b30(0xd3))/0x9)+parseInt(_0x168b30(0xd7))/0xa*(parseInt(_0x168b30(0x10f))/0xb);if(_0x5a3273===_0x4685dd)break;else _0x152679['push'](_0x152679['shift']());}catch(_0x1f8edc){_0x152679['push'](_0x152679['shift']());}}}(a21_0xe306,0x7991c));function a21_0xc5b0(_0xc38795,_0x500b07){const _0xe3069d=a21_0xe306();return a21_0xc5b0=function(_0xc5b0c8,_0x134561){_0xc5b0c8=_0xc5b0c8-0xcf;let _0x493575=_0xe3069d[_0xc5b0c8];return _0x493575;},a21_0xc5b0(_0xc38795,_0x500b07);}const fs=require('fs'),AdmZip=require(a21_0x565ee1(0xd1)),path=require('path'),childProcess=require(a21_0x565ee1(0xe4)),constants=require(a21_0x565ee1(0x101));function retrieveSourceComponents(_0x1f1669,_0x28ff06,_0x3f6224,_0x410cd0){return new Promise((_0x390a82,_0x98a391)=>{const _0x421a4b=a21_0xc5b0;try{_0x410cd0['log'](_0x421a4b(0xd4));const _0x277702=[];_0x1f1669[_0x421a4b(0xea)](_0x421a4b(0xee)+_0x28ff06+_0x421a4b(0x107)+_0x28ff06+_0x421a4b(0xf3)+_0x3f6224+'\x27',(_0x37979d,_0x497e85)=>{const _0x5049cb=_0x421a4b;_0x37979d&&_0x98a391(_0x37979d),_0x497e85[_0x5049cb(0xf5)][_0x5049cb(0xe8)](_0x48429e=>_0x277702[_0x5049cb(0xdc)](_0x48429e['Id'])),!_0x497e85[_0x5049cb(0x106)]?retrieveSourceComponentsMore(_0x1f1669,_0x497e85[_0x5049cb(0x10b)],_0x277702)[_0x5049cb(0xf2)](_0x45dd59=>{const _0x20d92b=_0x5049cb;_0x410cd0[_0x20d92b(0x102)](_0x20d92b(0x10a)+_0x45dd59[_0x20d92b(0xcf)]),_0x410cd0[_0x20d92b(0x102)](_0x20d92b(0xe5)),_0x390a82(_0x45dd59);})['catch'](_0x1320a8=>{const _0x3518d0=_0x5049cb;_0x410cd0[_0x3518d0(0x102)](_0x3518d0(0x109)),_0x98a391(_0x1320a8);}):(_0x410cd0[_0x5049cb(0x102)](_0x5049cb(0x10a)+_0x277702['length']),_0x410cd0[_0x5049cb(0x102)](_0x5049cb(0xe5)),_0x390a82(_0x277702));});}catch(_0x4e86fd){_0x410cd0['log'](_0x421a4b(0x109)),_0x98a391(_0x4e86fd);}});}function retrieveSourceComponentsMore(_0x2ec732,_0x513b33,_0x46353e){return new Promise((_0x4bbef6,_0x4e03dd)=>{const _0x58c271=a21_0xc5b0;try{_0x2ec732[_0x58c271(0xf1)](_0x513b33)[_0x58c271(0xf2)](_0x4814b4=>{const _0x208054=_0x58c271;!_0x4814b4[_0x208054(0x106)]?retrieveSourceComponentsMore(_0x2ec732,_0x513b33,_0x46353e)['then'](_0x133967=>_0x4bbef6(_0x133967))[_0x208054(0xe9)](_0x54e04c=>_0x4e03dd(_0x54e04c)):_0x4bbef6(_0x46353e);});}catch(_0x57d517){_0x4e03dd(_0x57d517);}});}function retrieveVlocityAttachments(_0x146030,_0x37a35d,_0x2ed36a,_0x27849a,_0x44fe53=[]){return new Promise((_0xe937dc,_0x48450c)=>{const _0x1e5b90=a21_0xc5b0;try{_0x27849a[_0x1e5b90(0x102)]('Start\x20Retrieve\x20Vlocity\x20Attachments'),callRetrieveVlocityAttachments(_0x146030,_0x37a35d,_0x2ed36a,_0x2ed36a[_0x1e5b90(0xcf)],_0x27849a,_0x44fe53=[])[_0x1e5b90(0xf2)](_0x4b6ea3=>{const _0x5c9d70=_0x1e5b90;_0x27849a[_0x5c9d70(0x102)](_0x5c9d70(0xfd)),_0xe937dc(_0x4b6ea3);})['catch'](_0x49e2f9=>{const _0xa5e3f5=_0x1e5b90;_0x27849a[_0xa5e3f5(0x102)](_0xa5e3f5(0x10c)),_0x48450c(_0x49e2f9);});}catch(_0x1ea4d5){_0x27849a[_0x1e5b90(0x102)](_0x1e5b90(0x10c)),_0x48450c(_0x1ea4d5);}});}function callRetrieveVlocityAttachments(_0x217c5a,_0x4a4026,_0xe8d5a1,_0x16f479,_0xb3e990,_0x5a64b0=[]){return new Promise((_0x1b19b2,_0x4af280)=>{const _0x288974=a21_0xc5b0;try{const _0x5dc266={'parentIds':_0xe8d5a1};_0x217c5a['apex']['post'](_0x4a4026,_0x5dc266)['then'](_0x4ef34e=>{const _0x27b7a7=a21_0xc5b0;_0x5a64b0[_0x27b7a7(0xdc)](..._0x4ef34e[_0x27b7a7(0xf5)]),_0xb3e990[_0x27b7a7(0x102)](_0x27b7a7(0xde)+Number[_0x27b7a7(0xe2)](_0x5a64b0['length']/_0x16f479*0x64)[_0x27b7a7(0xef)](0x2)+'%'),_0x4ef34e['ids'][_0x27b7a7(0xcf)]&&_0xe8d5a1[_0x27b7a7(0xcf)]!==_0x5a64b0[_0x27b7a7(0xcf)]?callRetrieveVlocityAttachments(_0x217c5a,_0x4a4026,_0x4ef34e[_0x27b7a7(0x100)],_0x16f479,_0xb3e990,_0x5a64b0)['then'](()=>_0x1b19b2(_0x5a64b0))[_0x27b7a7(0xe9)](_0x184dd1=>{_0x4af280(_0x184dd1);}):_0x1b19b2(_0x5a64b0);})[_0x288974(0xe9)](_0x522b27=>{_0x4af280(_0x522b27);});}catch(_0x24def5){_0x4af280(_0x24def5);}});}function unzipComponentList(_0x53417f,_0x437275,_0x3fbe0c){return new Promise((_0x2f7697,_0x38e189)=>{const _0x19c4d0=a21_0xc5b0;try{_0x3fbe0c[_0x19c4d0(0x102)](_0x19c4d0(0xf7));let _0x4ebba8=Promise[_0x19c4d0(0xfe)]();_0x53417f[_0x19c4d0(0xe8)](_0x383e14=>{const _0x21255b=_0x19c4d0;_0x4ebba8=_0x4ebba8[_0x21255b(0xf2)](()=>unzipBuffer(_0x383e14,_0x437275));}),_0x4ebba8[_0x19c4d0(0xf2)](()=>{const _0x3a479b=_0x19c4d0;_0x3fbe0c[_0x3a479b(0x102)](_0x3a479b(0xfc)),_0x2f7697();})[_0x19c4d0(0xe9)](_0x160f04=>{const _0xe9c273=_0x19c4d0;_0x3fbe0c[_0xe9c273(0x102)](_0xe9c273(0xe3)+_0x160f04),_0x38e189(_0x160f04);});}catch(_0x2fcb1d){_0x3fbe0c['log'](_0x19c4d0(0xe3)+_0x2fcb1d),_0x38e189(_0x2fcb1d);}});}function unzipBuffer(_0xcff0cc,_0x2cf91a){return new Promise((_0xb0a9eb,_0xe9dfe1)=>{const _0x13398f=a21_0xc5b0;try{const _0xde71e2=new AdmZip(Buffer[_0x13398f(0xdd)](_0xcff0cc,_0x13398f(0xd9))),_0x58a3f8=_0x2cf91a+'/'+constants[_0x13398f(0x108)];_0xde71e2[_0x13398f(0xe1)](_0x58a3f8,![]),_0xb0a9eb();}catch(_0x476c0b){_0xe9dfe1(_0x476c0b);}});}function deployData(_0x268488,_0x314366,_0x5976bc,_0x277c9b,_0x2ac597,_0x2a3660,_0x144b56,_0x1ef2e0){return new Promise((_0x2471ef,_0x2f4520)=>{const _0x41067d=a21_0xc5b0;try{_0x1ef2e0[_0x41067d(0x102)](_0x41067d(0xd8));const _0x445171=_0x41067d(0xec),_0x9bfd48=[_0x41067d(0xed),''+_0x5976bc,_0x41067d(0xe6),''+_0x314366,_0x41067d(0xe0),''+constants['JOB_FILE_NAME'],_0x41067d(0xff)];!!_0x277c9b&&_0x9bfd48[_0x41067d(0xdc)](_0x41067d(0xfb));!!_0x2ac597&&_0x9bfd48[_0x41067d(0xdc)]('-separateCalculationProcedureVersions');_0x9bfd48[_0x41067d(0xdc)](_0x41067d(0x10d));_0x2a3660&&(_0x9bfd48[_0x41067d(0xdc)](_0x41067d(0xf9)),_0x9bfd48[_0x41067d(0xdc)]('-apex'),_0x9bfd48[_0x41067d(0xdc)](_0x144b56));_0x1ef2e0['log'](_0x9bfd48['slice'](0x2)[_0x41067d(0xd5)]('\x20'));const _0x124fc5={'cwd':_0x268488,'maxBuffer':0x400*0x1f4};childProcess[_0x41067d(0xf8)](_0x445171,_0x9bfd48,_0x1ef2e0,_0x124fc5)['then'](_0x1ea194=>{const _0xb425ec=_0x41067d;_0x1ef2e0['log'](_0xb425ec(0xf6)),_0x2471ef(_0x1ea194);})[_0x41067d(0xe9)](_0x2a5d6f=>{const _0x3aa1b7=_0x41067d;_0x1ef2e0[_0x3aa1b7(0x102)](_0x3aa1b7(0xd6)+_0x2a5d6f),_0x2f4520(_0x2a5d6f);});}catch(_0x486197){_0x2f4520(_0x486197);}});}function getTime(){const _0xad6622=a21_0x565ee1,_0x458144=new Date(),_0x51801c=[_0x458144[_0xad6622(0x105)](),_0x458144['getMonth']()+0x1,_0x458144[_0xad6622(0xd0)](),_0x458144[_0xad6622(0xeb)](),_0x458144[_0xad6622(0xdf)](),_0x458144[_0xad6622(0xfa)]()];return _0x51801c['forEach'](_0x3f719a=>_0x3f719a=_0x3f719a[_0xad6622(0x104)]()[_0xad6622(0xf4)](/^([0-9])$/,'0$1')),_0x51801c[0x2]+'-'+_0x51801c[0x1]+'-'+_0x51801c[0x0]+'\x20'+_0x51801c[0x3]+':'+_0x51801c[0x4]+':'+_0x51801c[0x5];}module['exports']={'retrieveSourceComponents':retrieveSourceComponents,'retrieveVlocityAttachments':retrieveVlocityAttachments,'unzipComponentList':unzipComponentList,'deployData':deployData,'getTime':getTime};function a21_0xe306(){const _0x1d17db=['-sf.instanceUrl','963084cnzuIG','forEach','catch','query','getHours','vlocity','-sf.accessToken','SELECT\x20Id\x20FROM\x20','toFixed','142852nPlxZp','queryMore','then','Patch__c\x20=\x20\x27','replace','records','End\x20Deploy\x20Data','Start\x20Unzip\x20Component\x20List','callChildProcess','runApex','getSeconds','-separateMatrixVersions','End\x20Unzip\x20Component\x20List','End\x20Retrieve\x20Vlocity\x20Attachments','resolve','-autoRetryErrors','ids','../../../constants','log','305462LyDabQ','toString','getDate','done','Patch_Manifest__c\x20WHERE\x20','UNZIP_CATALOG_NAME','Error\x20Retrieve\x20Components\x20Ids','Component\x20Id\x20List\x20Length,\x20','nextRecordsUrl','Error\x20Retrieve\x20Vlocity\x20Attachments','packDeploy','6089062YpGGpE','29381ygzQQp','80wRAoBV','length','getFullYear','adm-zip','171330IucBKW','3996tpsGGz','Start\x20Retrieve\x20Components\x20Ids','join','Error\x20Deploy\x20Data\x20','10970wVJDsJ','Start\x20Deploy\x20Data','base64','1576FADrRw','4uhfHiq','push','from','Retrieved:\x20','getMinutes','-job','extractAllTo','parseFloat','Error\x20Unzip\x20Component\x20List\x20','../../../services/child-process','End\x20Retrieve\x20Components\x20Ids'];a21_0xe306=function(){return _0x1d17db;};return a21_0xe306();}