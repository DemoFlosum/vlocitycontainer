const a27_0x38f66b=a27_0x1317;(function(_0x30dc1d,_0x3bddd8){const _0x1c1fa4=a27_0x1317,_0x483708=_0x30dc1d();while(!![]){try{const _0x4178e3=-parseInt(_0x1c1fa4(0x185))/0x1*(parseInt(_0x1c1fa4(0x17e))/0x2)+-parseInt(_0x1c1fa4(0x166))/0x3*(-parseInt(_0x1c1fa4(0x19d))/0x4)+-parseInt(_0x1c1fa4(0x187))/0x5+-parseInt(_0x1c1fa4(0x16d))/0x6*(-parseInt(_0x1c1fa4(0x177))/0x7)+parseInt(_0x1c1fa4(0x172))/0x8+parseInt(_0x1c1fa4(0x15f))/0x9+-parseInt(_0x1c1fa4(0x16c))/0xa*(parseInt(_0x1c1fa4(0x167))/0xb);if(_0x4178e3===_0x3bddd8)break;else _0x483708['push'](_0x483708['shift']());}catch(_0xab3f12){_0x483708['push'](_0x483708['shift']());}}}(a27_0x1092,0xb4c4d));const AdmZip=require(a27_0x38f66b(0x195)),childProcess=require(a27_0x38f66b(0x17a)),constants=require('../../../constants'),http=require(a27_0x38f66b(0x175));async function retrieveSourceComponents(_0x146453,_0x1406ef,_0x9aca9f,_0x27317c){const _0x4d8af8=a27_0x38f66b;_0x27317c[_0x4d8af8(0x186)](_0x4d8af8(0x19f));const _0x34ef3b=[];let _0x486b9a=![];const _0x4e38d7=_0x4d8af8(0x197)+_0x1406ef+_0x4d8af8(0x179)+_0x1406ef+'Patch__c\x20=\x20\x27'+_0x9aca9f+'\x27';let _0x225a7b=await _0x146453[_0x4d8af8(0x16b)](_0x4e38d7);_0x34ef3b[_0x4d8af8(0x182)](..._0x225a7b['records']['map'](({Id:_0x220b7a})=>_0x220b7a)),_0x27317c[_0x4d8af8(0x186)]('Component\x20Id\x20List\x20Length,\x20'+_0x225a7b['length']);do{_0x225a7b=await _0x146453['queryMore'](_0x225a7b[_0x4d8af8(0x169)]),_0x34ef3b[_0x4d8af8(0x182)](..._0x225a7b['records'][_0x4d8af8(0x16f)](({Id:_0x3cddbf})=>_0x3cddbf)),_0x27317c['log'](_0x4d8af8(0x196)+_0x225a7b['length']),_0x486b9a=!_0x225a7b['done'];}while(_0x486b9a);return _0x27317c['log'](_0x4d8af8(0x18f)),_0x34ef3b;}function a27_0x1317(_0x57fb7a,_0x2e14c6){const _0x109219=a27_0x1092();return a27_0x1317=function(_0x1317c5,_0x438feb){_0x1317c5=_0x1317c5-0x15e;let _0x38125e=_0x109219[_0x1317c5];return _0x38125e;},a27_0x1317(_0x57fb7a,_0x2e14c6);}function retrieveVlocityAttachments(_0x1ff29c,_0x50ffef,_0x17ddf6,_0x57c2e0,_0x2f4224=[]){return new Promise((_0x34a303,_0x92dff7)=>{const _0x5b1dfe=a27_0x1317;try{_0x57c2e0[_0x5b1dfe(0x186)](_0x5b1dfe(0x165)),callRetrieveVlocityAttachments(_0x1ff29c,_0x50ffef,_0x17ddf6,_0x17ddf6[_0x5b1dfe(0x16a)],_0x57c2e0,_0x2f4224=[])[_0x5b1dfe(0x18d)](_0x15caeb=>{const _0x409c18=_0x5b1dfe;_0x57c2e0[_0x409c18(0x186)](_0x409c18(0x19c)),_0x34a303(_0x15caeb);})[_0x5b1dfe(0x181)](_0x16071e=>{const _0xba98ca=_0x5b1dfe;_0x57c2e0[_0xba98ca(0x186)](_0xba98ca(0x19e)),_0x92dff7(_0x16071e);});}catch(_0x5c8fa0){_0x57c2e0['log'](_0x5b1dfe(0x19e)),_0x92dff7(_0x5c8fa0);}});}async function callRetrieveVlocityAttachments(_0x5a97b9,_0x49086d,_0x5d6f07,_0x285b5d,_0xd2d7ee,_0x4228b9=[]){const _0x2feb78=a27_0x38f66b,_0x31aa07={'parentIds':_0x5d6f07},_0x571da8=await http[_0x2feb78(0x168)](_0x5a97b9,_0x49086d,_0x31aa07,'GetVlocityComponents/');_0x4228b9['push'](..._0x571da8[_0x2feb78(0x164)]),_0xd2d7ee['log'](_0x2feb78(0x199)+Number[_0x2feb78(0x17f)](_0x4228b9['length']/_0x285b5d*0x64)['toFixed'](0x2)+'%');if(_0x571da8[_0x2feb78(0x16e)]['length']&&_0x5d6f07[_0x2feb78(0x16a)]!==_0x4228b9[_0x2feb78(0x16a)])return await callRetrieveVlocityAttachments(_0x5a97b9,_0x49086d,_0x571da8[_0x2feb78(0x16e)],_0x285b5d,_0xd2d7ee,_0x4228b9);return _0x4228b9;}function a27_0x1092(){const _0x2cb6d3=['Component\x20Id\x20List\x20Length,\x20','SELECT\x20Id\x20FROM\x20','toString','Retrieved:\x20','-sf.instanceUrl','runApex','End\x20Retrieve\x20Vlocity\x20Attachments','134452roZVCl','Error\x20Retrieve\x20Vlocity\x20Attachments','Start\x20Retrieve\x20Components\x20Ids','base64','6289038FMwHGT','forEach','join','-apex','0$1','records','Start\x20Retrieve\x20Vlocity\x20Attachments','99mCIecK','594CpqUXn','post','nextRecordsUrl','length','query','35750myUgJf','42CUMqLg','ids','map','getHours','-autoRetryErrors','9285712gEqNwQ','Start\x20Deploy\x20Data','replace','../../../services/http','JOB_FILE_NAME','177002aVcsUA','-separateCalculationProcedureVersions','Patch_Manifest__c\x20WHERE\x20','../../../services/child-process','-job','Error\x20Deploy\x20Data\x20','getMinutes','2oBMztK','parseFloat','getSeconds','catch','push','extractAllTo','from','1480542aAQRUQ','log','3658530wOtmfN','packDeploy','vlocity','End\x20Deploy\x20Data','callChildProcess','slice','then','UNZIP_CATALOG_NAME','End\x20Retrieve\x20Components\x20Ids','resolve','getMonth','Error\x20Unzip\x20Component\x20List\x20','Start\x20Unzip\x20Component\x20List','getDate','adm-zip'];a27_0x1092=function(){return _0x2cb6d3;};return a27_0x1092();}function unzipComponentList(_0x34f6fa,_0x462184,_0x1fe33f){return new Promise((_0x517586,_0x15415b)=>{const _0x5f039c=a27_0x1317;try{_0x1fe33f[_0x5f039c(0x186)](_0x5f039c(0x193));let _0x4a7622=Promise[_0x5f039c(0x190)]();_0x34f6fa[_0x5f039c(0x160)](_0x184b05=>{const _0x5971b1=_0x5f039c;_0x4a7622=_0x4a7622[_0x5971b1(0x18d)](()=>unzipBuffer(_0x184b05,_0x462184));}),_0x4a7622['then'](()=>{const _0x49b430=_0x5f039c;_0x1fe33f[_0x49b430(0x186)]('End\x20Unzip\x20Component\x20List'),_0x517586();})[_0x5f039c(0x181)](_0x5b9b6b=>{const _0x439b47=_0x5f039c;_0x1fe33f[_0x439b47(0x186)]('Error\x20Unzip\x20Component\x20List\x20'+_0x5b9b6b),_0x15415b(_0x5b9b6b);});}catch(_0x5ec70f){_0x1fe33f[_0x5f039c(0x186)](_0x5f039c(0x192)+_0x5ec70f),_0x15415b(_0x5ec70f);}});}function unzipBuffer(_0x1b2c36,_0x516fb4){return new Promise((_0x50ee17,_0x5444bd)=>{const _0x1302e6=a27_0x1317;try{const _0x56c1d7=new AdmZip(Buffer[_0x1302e6(0x184)](_0x1b2c36,_0x1302e6(0x15e))),_0x2a4cc3=_0x516fb4+'/'+constants[_0x1302e6(0x18e)];_0x56c1d7[_0x1302e6(0x183)](_0x2a4cc3,![]),_0x50ee17();}catch(_0xb9a863){_0x5444bd(_0xb9a863);}});}function deployData(_0x2c3f8e,_0x5f465a,_0x1da493,_0x1d6a06,_0x2a636c,_0x5045e0,_0x5b8d7a,_0x593f61){return new Promise((_0x38684f,_0x10b776)=>{const _0x19e954=a27_0x1317;try{_0x593f61[_0x19e954(0x186)](_0x19e954(0x173));const _0x591da2=_0x19e954(0x189),_0x2fd646=['-sf.accessToken',''+_0x1da493,_0x19e954(0x19a),''+_0x5f465a,_0x19e954(0x17b),''+constants[_0x19e954(0x176)],_0x19e954(0x171)];_0x1d6a06&&_0x2fd646[_0x19e954(0x182)]('-separateMatrixVersions');_0x2a636c&&_0x2fd646[_0x19e954(0x182)](_0x19e954(0x178));_0x2fd646['push'](_0x19e954(0x188));_0x5045e0&&(_0x2fd646[_0x19e954(0x182)](_0x19e954(0x19b)),_0x2fd646['push'](_0x19e954(0x162)),_0x2fd646[_0x19e954(0x182)](_0x5b8d7a));_0x593f61['log'](_0x2fd646[_0x19e954(0x18c)](0x2)[_0x19e954(0x161)]('\x20'));const _0x189953={'cwd':_0x2c3f8e,'maxBuffer':0x400*0x1f4};childProcess[_0x19e954(0x18b)](_0x591da2,_0x2fd646,_0x593f61,_0x189953)[_0x19e954(0x18d)](_0x3af51d=>{const _0x3e63a6=_0x19e954;_0x593f61[_0x3e63a6(0x186)](_0x3e63a6(0x18a)),_0x38684f(_0x3af51d);})[_0x19e954(0x181)](_0x542a5c=>{const _0x38714f=_0x19e954;_0x593f61['log'](_0x38714f(0x17c)+_0x542a5c),_0x10b776(_0x542a5c);});}catch(_0x1dc102){_0x10b776(_0x1dc102);}});}function getTime(){const _0x57b597=a27_0x38f66b,_0x4f25e5=new Date(),_0x2bcd5e=[_0x4f25e5[_0x57b597(0x194)](),_0x4f25e5[_0x57b597(0x191)]()+0x1,_0x4f25e5['getFullYear'](),_0x4f25e5[_0x57b597(0x170)](),_0x4f25e5[_0x57b597(0x17d)](),_0x4f25e5[_0x57b597(0x180)]()];return _0x2bcd5e[_0x57b597(0x160)](_0x35e845=>_0x35e845=_0x35e845[_0x57b597(0x198)]()[_0x57b597(0x174)](/^([0-9])$/,_0x57b597(0x163))),_0x2bcd5e[0x2]+'-'+_0x2bcd5e[0x1]+'-'+_0x2bcd5e[0x0]+'\x20'+_0x2bcd5e[0x3]+':'+_0x2bcd5e[0x4]+':'+_0x2bcd5e[0x5];}module['exports']={'retrieveSourceComponents':retrieveSourceComponents,'retrieveVlocityAttachments':retrieveVlocityAttachments,'unzipComponentList':unzipComponentList,'deployData':deployData,'getTime':getTime};