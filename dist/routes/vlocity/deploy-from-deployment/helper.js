function a27_0x6755(_0x583d95,_0x846a0b){const _0x39f1e9=a27_0x39f1();return a27_0x6755=function(_0x675566,_0x305d4a){_0x675566=_0x675566-0x192;let _0x23f61f=_0x39f1e9[_0x675566];return _0x23f61f;},a27_0x6755(_0x583d95,_0x846a0b);}const a27_0x4ddffc=a27_0x6755;(function(_0x338b93,_0x5b45e9){const _0x5628f9=a27_0x6755,_0x25323d=_0x338b93();while(!![]){try{const _0x476b88=-parseInt(_0x5628f9(0x1a2))/0x1+-parseInt(_0x5628f9(0x1c6))/0x2*(parseInt(_0x5628f9(0x1aa))/0x3)+parseInt(_0x5628f9(0x1c7))/0x4*(parseInt(_0x5628f9(0x19d))/0x5)+parseInt(_0x5628f9(0x19c))/0x6*(parseInt(_0x5628f9(0x1c1))/0x7)+-parseInt(_0x5628f9(0x1b8))/0x8*(parseInt(_0x5628f9(0x1b6))/0x9)+parseInt(_0x5628f9(0x198))/0xa*(-parseInt(_0x5628f9(0x196))/0xb)+parseInt(_0x5628f9(0x1c3))/0xc*(parseInt(_0x5628f9(0x1d2))/0xd);if(_0x476b88===_0x5b45e9)break;else _0x25323d['push'](_0x25323d['shift']());}catch(_0x222408){_0x25323d['push'](_0x25323d['shift']());}}}(a27_0x39f1,0xdbba6));const fs=require('fs'),AdmZip=require(a27_0x4ddffc(0x1bc)),path=require(a27_0x4ddffc(0x19f)),childProcess=require('../../../services/child-process'),constants=require('../../../constants');function retrieveSourceComponents(_0x4d0ab1,_0x3cb670,_0x321c0c,_0x109daa){return new Promise((_0x213ccd,_0x997e31)=>{const _0x26f8d2=a27_0x6755;try{_0x109daa[_0x26f8d2(0x1b4)](_0x26f8d2(0x1cc));const _0x18824b=[];_0x4d0ab1['query'](_0x26f8d2(0x1a0)+_0x3cb670+'Patch_Manifest__c\x20WHERE\x20'+_0x3cb670+_0x26f8d2(0x1a4)+_0x321c0c+'\x27',(_0x5e18b4,_0x2a56e8)=>{const _0x323ed3=_0x26f8d2;_0x5e18b4&&_0x997e31(_0x5e18b4),_0x2a56e8[_0x323ed3(0x1c9)][_0x323ed3(0x1bd)](_0x1d7f14=>_0x18824b[_0x323ed3(0x1b9)](_0x1d7f14['Id'])),!_0x2a56e8[_0x323ed3(0x1bf)]?retrieveSourceComponentsMore(_0x4d0ab1,_0x2a56e8[_0x323ed3(0x1c0)],_0x18824b)[_0x323ed3(0x1b7)](_0x50e6d8=>{const _0x4d8d8d=_0x323ed3;_0x109daa[_0x4d8d8d(0x1b4)](_0x4d8d8d(0x1a6)+_0x50e6d8['length']),_0x109daa[_0x4d8d8d(0x1b4)](_0x4d8d8d(0x197)),_0x213ccd(_0x50e6d8);})[_0x323ed3(0x1ae)](_0x5622cf=>{const _0x20e8ec=_0x323ed3;_0x109daa[_0x20e8ec(0x1b4)]('Error\x20Retrieve\x20Components\x20Ids'),_0x997e31(_0x5622cf);}):(_0x109daa[_0x323ed3(0x1b4)](_0x323ed3(0x1a6)+_0x18824b['length']),_0x109daa[_0x323ed3(0x1b4)](_0x323ed3(0x197)),_0x213ccd(_0x18824b));});}catch(_0x27f7aa){_0x109daa['log'](_0x26f8d2(0x1a5)),_0x997e31(_0x27f7aa);}});}function retrieveSourceComponentsMore(_0x202623,_0x5ad148,_0x14ddeb){return new Promise((_0x539cc3,_0x54f40a)=>{const _0x27e01b=a27_0x6755;try{_0x202623[_0x27e01b(0x199)](_0x5ad148)['then'](_0x2c5738=>{const _0x35144c=_0x27e01b;!_0x2c5738[_0x35144c(0x1bf)]?retrieveSourceComponentsMore(_0x202623,_0x5ad148,_0x14ddeb)['then'](_0x505598=>_0x539cc3(_0x505598))[_0x35144c(0x1ae)](_0x478f10=>_0x54f40a(_0x478f10)):_0x539cc3(_0x14ddeb);});}catch(_0x29baab){_0x54f40a(_0x29baab);}});}function retrieveVlocityAttachments(_0x3b6d67,_0x10b616,_0xf964f1,_0x548312,_0x30ccb7=[]){return new Promise((_0x2fb20f,_0x5b79c6)=>{const _0x1027af=a27_0x6755;try{_0x548312[_0x1027af(0x1b4)]('Start\x20Retrieve\x20Vlocity\x20Attachments'),callRetrieveVlocityAttachments(_0x3b6d67,_0x10b616,_0xf964f1,_0xf964f1[_0x1027af(0x1a9)],_0x548312,_0x30ccb7=[])[_0x1027af(0x1b7)](_0x24fb1f=>{const _0xe92c2c=_0x1027af;_0x548312[_0xe92c2c(0x1b4)]('End\x20Retrieve\x20Vlocity\x20Attachments'),_0x2fb20f(_0x24fb1f);})[_0x1027af(0x1ae)](_0x1728ab=>{_0x548312['log']('Error\x20Retrieve\x20Vlocity\x20Attachments'),_0x5b79c6(_0x1728ab);});}catch(_0x52593c){_0x548312[_0x1027af(0x1b4)](_0x1027af(0x192)),_0x5b79c6(_0x52593c);}});}function a27_0x39f1(){const _0x5f2c98=['Start\x20Unzip\x20Component\x20List','records','End\x20Unzip\x20Component\x20List','apex','Start\x20Retrieve\x20Components\x20Ids','join','resolve','-sf.accessToken','getSeconds','Start\x20Deploy\x20Data','13ctZxUy','extractAllTo','Error\x20Retrieve\x20Vlocity\x20Attachments','toFixed','runApex','JOB_FILE_NAME','14036LfyhRd','End\x20Retrieve\x20Components\x20Ids','12590votTzL','queryMore','ids','Retrieved:\x20','7770hDXDjG','3170FGBUXa','Error\x20Deploy\x20Data\x20','path','SELECT\x20Id\x20FROM\x20','vlocity','17371yPAoGE','-job','Patch__c\x20=\x20\x27','Error\x20Retrieve\x20Components\x20Ids','Component\x20Id\x20List\x20Length,\x20','packDeploy','replace','length','1374921VslLrF','toString','callChildProcess','getDate','catch','getHours','-apex','-autoRetryErrors','Error\x20Unzip\x20Component\x20List\x20','-sf.instanceUrl','log','parseFloat','3893931UHFzUt','then','32iVGfHu','push','-separateCalculationProcedureVersions','-separateMatrixVersions','adm-zip','forEach','0$1','done','nextRecordsUrl','4207vDHpih','exports','55535460UjAUqJ','UNZIP_CATALOG_NAME','slice','6DLFTId','1408whziWu'];a27_0x39f1=function(){return _0x5f2c98;};return a27_0x39f1();}function callRetrieveVlocityAttachments(_0x262181,_0x48ce88,_0x16cf21,_0x342b95,_0x10a09a,_0x41be26=[]){return new Promise((_0x4fe0c2,_0x572325)=>{const _0x2277ab=a27_0x6755;try{const _0x34730d={'parentIds':_0x16cf21};_0x262181[_0x2277ab(0x1cb)]['post'](_0x48ce88,_0x34730d)[_0x2277ab(0x1b7)](_0x4b829a=>{const _0x5d82c9=_0x2277ab;_0x41be26[_0x5d82c9(0x1b9)](..._0x4b829a['records']),_0x10a09a['log'](_0x5d82c9(0x19b)+Number[_0x5d82c9(0x1b5)](_0x41be26['length']/_0x342b95*0x64)[_0x5d82c9(0x193)](0x2)+'%'),_0x4b829a[_0x5d82c9(0x19a)][_0x5d82c9(0x1a9)]&&_0x16cf21[_0x5d82c9(0x1a9)]!==_0x41be26[_0x5d82c9(0x1a9)]?callRetrieveVlocityAttachments(_0x262181,_0x48ce88,_0x4b829a[_0x5d82c9(0x19a)],_0x342b95,_0x10a09a,_0x41be26)[_0x5d82c9(0x1b7)](()=>_0x4fe0c2(_0x41be26))[_0x5d82c9(0x1ae)](_0x1ce557=>{_0x572325(_0x1ce557);}):_0x4fe0c2(_0x41be26);})[_0x2277ab(0x1ae)](_0x1bd886=>{_0x572325(_0x1bd886);});}catch(_0x3db2fe){_0x572325(_0x3db2fe);}});}function unzipComponentList(_0x5ad6d3,_0x377af7,_0x50406d){return new Promise((_0x4052a7,_0x21b199)=>{const _0xe8da94=a27_0x6755;try{_0x50406d[_0xe8da94(0x1b4)](_0xe8da94(0x1c8));let _0x7abf9c=Promise[_0xe8da94(0x1ce)]();_0x5ad6d3[_0xe8da94(0x1bd)](_0xb4b621=>{const _0x173db6=_0xe8da94;_0x7abf9c=_0x7abf9c[_0x173db6(0x1b7)](()=>unzipBuffer(_0xb4b621,_0x377af7));}),_0x7abf9c[_0xe8da94(0x1b7)](()=>{const _0x148748=_0xe8da94;_0x50406d[_0x148748(0x1b4)](_0x148748(0x1ca)),_0x4052a7();})[_0xe8da94(0x1ae)](_0x4b9ac1=>{const _0x41788f=_0xe8da94;_0x50406d[_0x41788f(0x1b4)](_0x41788f(0x1b2)+_0x4b9ac1),_0x21b199(_0x4b9ac1);});}catch(_0x528714){_0x50406d['log'](_0xe8da94(0x1b2)+_0x528714),_0x21b199(_0x528714);}});}function unzipBuffer(_0x5db45f,_0x153dfe){return new Promise((_0x5b7791,_0x1799ab)=>{const _0x2967d1=a27_0x6755;try{const _0x5a4dba=new AdmZip(Buffer['from'](_0x5db45f,'base64')),_0x813450=_0x153dfe+'/'+constants[_0x2967d1(0x1c4)];_0x5a4dba[_0x2967d1(0x1d3)](_0x813450,![]),_0x5b7791();}catch(_0x18db71){_0x1799ab(_0x18db71);}});}function deployData(_0x571996,_0x3417df,_0x7aab8b,_0xebc738,_0x1d6931,_0xcd3b5d,_0x28f0c0,_0x37c46c){return new Promise((_0x58eb2c,_0x70f64a)=>{const _0x263c8a=a27_0x6755;try{_0x37c46c[_0x263c8a(0x1b4)](_0x263c8a(0x1d1));const _0x2225e2=_0x263c8a(0x1a1),_0x4a7369=[_0x263c8a(0x1cf),''+_0x7aab8b,_0x263c8a(0x1b3),''+_0x3417df,_0x263c8a(0x1a3),''+constants[_0x263c8a(0x195)],_0x263c8a(0x1b1)];!!_0xebc738&&_0x4a7369[_0x263c8a(0x1b9)](_0x263c8a(0x1bb));!!_0x1d6931&&_0x4a7369[_0x263c8a(0x1b9)](_0x263c8a(0x1ba));_0x4a7369['push'](_0x263c8a(0x1a7));_0xcd3b5d&&(_0x4a7369['push'](_0x263c8a(0x194)),_0x4a7369[_0x263c8a(0x1b9)](_0x263c8a(0x1b0)),_0x4a7369[_0x263c8a(0x1b9)](_0x28f0c0));_0x37c46c[_0x263c8a(0x1b4)](_0x4a7369[_0x263c8a(0x1c5)](0x2)[_0x263c8a(0x1cd)]('\x20'));const _0x291486={'cwd':_0x571996,'maxBuffer':0x400*0x1f4};childProcess[_0x263c8a(0x1ac)](_0x2225e2,_0x4a7369,_0x37c46c,_0x291486)['then'](_0x787ce1=>{const _0x4bf662=_0x263c8a;_0x37c46c[_0x4bf662(0x1b4)]('End\x20Deploy\x20Data'),_0x58eb2c(_0x787ce1);})['catch'](_0x2e69e7=>{const _0xa03b8c=_0x263c8a;_0x37c46c[_0xa03b8c(0x1b4)](_0xa03b8c(0x19e)+_0x2e69e7),_0x70f64a(_0x2e69e7);});}catch(_0x20e567){_0x70f64a(_0x20e567);}});}function getTime(){const _0x2b7560=a27_0x4ddffc,_0x268a41=new Date(),_0x58adbd=[_0x268a41[_0x2b7560(0x1ad)](),_0x268a41['getMonth']()+0x1,_0x268a41['getFullYear'](),_0x268a41[_0x2b7560(0x1af)](),_0x268a41['getMinutes'](),_0x268a41[_0x2b7560(0x1d0)]()];return _0x58adbd['forEach'](_0x52ccc1=>_0x52ccc1=_0x52ccc1[_0x2b7560(0x1ab)]()[_0x2b7560(0x1a8)](/^([0-9])$/,_0x2b7560(0x1be))),_0x58adbd[0x2]+'-'+_0x58adbd[0x1]+'-'+_0x58adbd[0x0]+'\x20'+_0x58adbd[0x3]+':'+_0x58adbd[0x4]+':'+_0x58adbd[0x5];}module[a27_0x4ddffc(0x1c2)]={'retrieveSourceComponents':retrieveSourceComponents,'retrieveVlocityAttachments':retrieveVlocityAttachments,'unzipComponentList':unzipComponentList,'deployData':deployData,'getTime':getTime};