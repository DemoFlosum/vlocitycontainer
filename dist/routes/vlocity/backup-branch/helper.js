const a10_0x2a3f8f=a10_0x335c;(function(_0x5a87d9,_0x4a6df4){const _0x11ae44=a10_0x335c,_0x35db5d=_0x5a87d9();while(!![]){try{const _0x3cc5bd=-parseInt(_0x11ae44(0xb7))/0x1+parseInt(_0x11ae44(0xb3))/0x2*(-parseInt(_0x11ae44(0xcd))/0x3)+parseInt(_0x11ae44(0xd5))/0x4*(-parseInt(_0x11ae44(0xbe))/0x5)+parseInt(_0x11ae44(0xa7))/0x6*(-parseInt(_0x11ae44(0xad))/0x7)+parseInt(_0x11ae44(0xa1))/0x8+parseInt(_0x11ae44(0xb4))/0x9+-parseInt(_0x11ae44(0xd1))/0xa*(-parseInt(_0x11ae44(0xa3))/0xb);if(_0x3cc5bd===_0x4a6df4)break;else _0x35db5d['push'](_0x35db5d['shift']());}catch(_0x422d93){_0x35db5d['push'](_0x35db5d['shift']());}}}(a10_0x16f9,0x3bac1));function a10_0x16f9(){const _0x45eac0=['Error\x20Prepare\x20Data\x20For\x20Deploy','/services/apexrest/','Components\x20not\x20found!','vlocity','METHOD_BACKUP_LOG_ERROR','\x20\x20\x20\x20query:\x20Select\x20Id\x20from\x20','appendFileSync','43971NtuQLf','SOURCE_FOLDER','METHOD_BACKUP_LOG','Start\x20Continue\x20Vlocity\x20Pipeline\x20Deploy','140MGBxXw','name','Error\x20Retrieve\x20Data\x20','Error\x20Continue\x20Vlocity\x20Pipeline\x20Deploy','174828uzgacN','../../../constants','push','End\x20Create\x20Job\x20File','then','length','End\x20Retrieve\x20Data','%\x27\x0a','\x20where\x20Name\x20LIKE\x20\x27%','End\x20Deploy\x20Data','toString','isDirectory','End\x20Update\x20Log.\x20No\x20Components\x20to\x20Backup.','477584Yjzvfe','Error\x20Deploy\x20Data','653444XVXmmZ','Start\x20Create\x20Job\x20File','replace','catch','12UcuYHe','-sf.instanceUrl','stringify','End\x20Prepare\x20Data\x20For\x20Deploy','base64','METHOD_NEXT_VLOCITY_CONTINUE_DEPLOY_STEP','19425AhQuOJ','post','JOB_FILE_NAME','isStartDeploy','projectPath:\x20./','Start\x20Retrieve\x20Data','38JFIGaF','403245FRVLcT','log','UNZIP_CATALOG_NAME','232881vQdppA','DATA_PACK_TYPES_QUERIES_MAP','toBuffer','unlocked-packages','\x0aqueries:\x0a','Start\x20Prepare\x20Data\x20For\x20Deploy','Error\x20Update\x20Log.\x20No\x20Components\x20to\x20Backup.\x0a','20fSPizq','Error\x20Update\x20Log.\x20No\x20Components\x20to\x20Backup.','addLocalFolder','Start\x20Deploy\x20Data','forEach','-autoRetryErrors','-sf.accessToken','zipBuffer'];a10_0x16f9=function(){return _0x45eac0;};return a10_0x16f9();}const fs=require('fs'),AdmZip=require('adm-zip'),childProcess=require('../../../services/child-process'),constants=require(a10_0x2a3f8f(0xd6)),http=require('../../../services/http');function a10_0x335c(_0xef21df,_0x34f7e4){const _0x16f90c=a10_0x16f9();return a10_0x335c=function(_0x335c9c,_0x53df1a){_0x335c9c=_0x335c9c-0x97;let _0x1e6fa6=_0x16f90c[_0x335c9c];return _0x1e6fa6;},a10_0x335c(_0xef21df,_0x34f7e4);}function createJobFileRollback(_0x16897e,_0xd0b56,_0x16c427,_0x24303a){return new Promise((_0x1780e8,_0x27148d)=>{const _0x4564be=a10_0x335c;try{_0x24303a[_0x4564be(0xb5)](_0x4564be(0xa4));let _0x5216f2=_0x4564be(0xb1)+constants[_0x4564be(0xb6)]+_0x4564be(0xbb);Object['keys'](_0xd0b56)[_0x4564be(0xc2)](_0x4cba2b=>{const _0x36f821=_0x4564be;_0xd0b56[_0x4cba2b][_0x36f821(0xc2)](_0x4ae69e=>{const _0xab63e5=_0x36f821;constants[_0xab63e5(0xb8)][_0x4cba2b][_0xab63e5(0xc2)](_0x126b63=>{const _0x254015=_0xab63e5;_0x5216f2+='\x20\x20-\x20VlocityDataPackType:\x20'+_0x4cba2b+'\x0a',_0x5216f2+=_0x254015(0xcb)+_0x126b63+_0x254015(0x9c)+_0x4ae69e+_0x254015(0x9b);});});}),fs[_0x4564be(0xcc)](_0x16897e+'/'+constants[_0x4564be(0xaf)],_0x5216f2),_0x24303a['log'](_0x4564be(0x97)),_0x1780e8();}catch(_0x261378){_0x24303a['log']('Error\x20Create\x20Job\x20File'),_0x27148d(_0x261378);}});}function retrieveData(_0x13a32b,_0x1eb5e3,_0x41da93,_0x1d6f5e){return new Promise((_0x16f13d,_0xe6c652)=>{const _0x3db654=a10_0x335c;try{_0x1d6f5e[_0x3db654(0xb5)](_0x3db654(0xb2));const _0x165cc0=_0x3db654(0xc9),_0xf198f7=[_0x3db654(0xc4),''+_0x41da93,_0x3db654(0xa8),''+_0x1eb5e3,'-job',''+constants[_0x3db654(0xaf)],_0x3db654(0xc3),'-maxDepth','0','packExport'];_0x1d6f5e['log'](_0xf198f7['slice'](0x2)['join']('\x20'));const _0x3f47f7={'cwd':''+_0x13a32b,'maxBuffer':0x400*0x1f4};childProcess['callChildProcess'](_0x165cc0,_0xf198f7,_0x1d6f5e,_0x3f47f7)[_0x3db654(0x98)](_0x2ce9d3=>{const _0x3ae016=_0x3db654;_0x1d6f5e[_0x3ae016(0xb5)](_0x3ae016(0x9a)),_0x16f13d(_0x2ce9d3);})['catch'](_0x51b7b0=>{const _0x432293=_0x3db654;_0x1d6f5e['log'](_0x432293(0xd3)+_0x51b7b0),_0xe6c652(_0x51b7b0);});}catch(_0x3a390a){_0xe6c652(_0x3a390a);}});}function prepareDataForDeploy(_0x3a840d,_0x1d1b1f){return new Promise((_0x1dd820,_0xbba499)=>{const _0x61af8e=a10_0x335c;try{_0x1d1b1f[_0x61af8e(0xb5)](_0x61af8e(0xbc));const _0x3b7aa4=_0x3a840d+'/'+constants[_0x61af8e(0xce)];let _0x5655a5=new AdmZip();const _0x4abb88=fs['readdirSync'](_0x3b7aa4,{'withFileTypes':!![]}),_0x548e6e=[];_0x4abb88['forEach'](_0x18f493=>{const _0x27b6e1=_0x61af8e;if(_0x18f493[_0x27b6e1(0x9f)]()){const _0x48a1d1=_0x5655a5[_0x27b6e1(0xb9)]()[_0x27b6e1(0x9e)](_0x27b6e1(0xab));_0x48a1d1[_0x27b6e1(0x99)]>0x1e8480&&(_0x548e6e['push'](_0x48a1d1),_0x5655a5=new AdmZip()),_0x5655a5[_0x27b6e1(0xc0)](_0x3b7aa4+'/'+_0x18f493[_0x27b6e1(0xd2)],_0x18f493['name']);}}),_0x548e6e[_0x61af8e(0xd7)](_0x5655a5[_0x61af8e(0xb9)]()[_0x61af8e(0x9e)]('base64')),_0x1d1b1f[_0x61af8e(0xb5)](_0x61af8e(0xaa)),_0x1dd820(_0x548e6e);}catch(_0x420fdc){_0x1d1b1f[_0x61af8e(0xb5)](_0x61af8e(0xc6)),_0xbba499(_0x420fdc);}});}function deployData(_0x533bf8,_0x16d42b,_0x72b3bc,_0xf18875,_0x434d53,_0x309b47,_0x59c463,_0x2543ba,_0x3f806a){return new Promise((_0x5537da,_0x302134)=>{const _0x280e6d=a10_0x335c;try{_0x3f806a[_0x280e6d(0xb5)](_0x280e6d(0xc1)),_0x72b3bc=_0x72b3bc&&_0x72b3bc[_0x280e6d(0x99)]?_0x72b3bc[_0x280e6d(0xa5)]('__','')+'/':'';let _0x101142={'zipBuffer':'','pipelineId':_0x309b47,'logId':_0xf18875,'branchId':_0x2543ba,'pipelineNumber':_0x59c463};const _0x279422=_0x533bf8+'/services/apexrest/'+_0x72b3bc+_0x280e6d(0xba);let _0x5736b2=Promise['resolve'](),_0x5a7b8a=0x1;_0x434d53[_0x280e6d(0xc2)](_0x3970d1=>{const _0x44535d=_0x280e6d;_0x101142[_0x44535d(0xc5)]=_0x3970d1,_0x101142[_0x44535d(0xb0)]=_0x5a7b8a===_0x434d53[_0x44535d(0x99)];const _0x5991d7={'methodType':constants[_0x44535d(0xcf)],'body':JSON[_0x44535d(0xa9)](_0x101142)};_0x5736b2=_0x5736b2[_0x44535d(0x98)](()=>postDeploy(_0x279422,_0x16d42b,_0x72b3bc,_0x5991d7)),_0x5a7b8a++;}),_0x5736b2[_0x280e6d(0x98)](()=>{const _0x1c9121=_0x280e6d;_0x3f806a[_0x1c9121(0xb5)](_0x1c9121(0x9d)),_0x5537da();})['catch'](_0x23c4a2=>{const _0x4a721e=_0x280e6d;_0x3f806a[_0x4a721e(0xb5)]('Error\x20Deploy\x20Data'),_0x302134(_0x23c4a2);});}catch(_0x174d6b){_0x3f806a['log'](_0x280e6d(0xa2)),_0x302134(_0x174d6b);}});}function handleNoComponents(_0x37ebab,_0x3b259f,_0x179c14,_0x3d58bc,_0x3b00ba,_0x5f43f6,_0x5e4a68,_0x1180e8){return new Promise((_0x4c53b0,_0x5b9556)=>{const _0x217ce1=a10_0x335c;try{_0x1180e8[_0x217ce1(0xb5)]('Start\x20Update\x20Log.\x20No\x20Components\x20to\x20Backup.'),_0x179c14=_0x179c14&&_0x179c14['length']?_0x179c14[_0x217ce1(0xa5)]('__','')+'/':'';let _0x23607f={'message':_0x217ce1(0xc8),'pipelineId':_0x3b00ba,'logId':_0x3d58bc,'branchId':_0x5e4a68,'pipelineNumber':_0x5f43f6,'isStartDeploy':!![]};const _0x59de06=_0x37ebab+_0x217ce1(0xc7)+_0x179c14+_0x217ce1(0xba),_0x45e0c0={'methodType':constants[_0x217ce1(0xca)],'body':JSON[_0x217ce1(0xa9)](_0x23607f)};postDeploy(_0x59de06,_0x3b259f,_0x179c14,_0x45e0c0)[_0x217ce1(0x98)](()=>{const _0x3c3a02=_0x217ce1;_0x1180e8['log'](_0x3c3a02(0xa0)),_0x4c53b0();})['catch'](_0x2a56e2=>{const _0x3f6b7f=_0x217ce1;_0x5b9556(_0x2a56e2),_0x1180e8[_0x3f6b7f(0xb5)](_0x3f6b7f(0xbd));});}catch(_0x5a0624){_0x1180e8[_0x217ce1(0xb5)](_0x217ce1(0xbf)),_0x5b9556(_0x5a0624);}});}function postDeploy(_0x4b9c07,_0xeaec71,_0x1a8c93,_0x1c51f2){return new Promise((_0x205bca,_0x10e62c)=>{const _0x43c30b=a10_0x335c;try{http[_0x43c30b(0xae)](_0x4b9c07,_0xeaec71,_0x1a8c93,_0x1c51f2)[_0x43c30b(0x98)](_0x570e25=>{_0x205bca(_0x570e25);})[_0x43c30b(0xa6)](_0x47fcec=>{const _0x54ce88=_0x43c30b;console[_0x54ce88(0xb5)](_0x47fcec),_0x10e62c(_0x47fcec);});}catch(_0x5e6f30){_0x10e62c(_0x5e6f30);}});}function callContinuePipelineVlocityDeploy(_0x29468f,_0x5e78b6,_0x471a29,_0xff346c,_0x282444,_0x363956,_0x24a22b,_0x136962,_0x2a8e9d){return new Promise((_0x137017,_0x110c8f)=>{const _0x18038f=a10_0x335c;try{_0x471a29=_0x471a29&&_0x471a29[_0x18038f(0x99)]?_0x471a29[_0x18038f(0xa5)]('__','')+'/':'',_0x2a8e9d[_0x18038f(0xb5)](_0x18038f(0xd0));const _0x496bf9={'pipelineId':_0xff346c,'pipelineNumber':_0x282444,'logId':_0x136962,'branchId':_0x24a22b,'pipelineKey':_0x363956},_0x2a0daa=_0x29468f+_0x18038f(0xc7)+_0x471a29+_0x18038f(0xba),_0x1526f8={'methodType':constants[_0x18038f(0xac)],'body':JSON[_0x18038f(0xa9)](_0x496bf9)};http[_0x18038f(0xae)](_0x2a0daa,_0x5e78b6,_0x471a29,_0x1526f8)[_0x18038f(0x98)](_0x3d6921=>{const _0x1a4ac2=_0x18038f;_0x2a8e9d[_0x1a4ac2(0xb5)]('End\x20Continue\x20Vlocity\x20Pipeline\x20Deploy'),_0x137017(_0x3d6921);})[_0x18038f(0xa6)](_0x53b017=>{const _0x493f18=_0x18038f;_0x2a8e9d[_0x493f18(0xb5)](_0x493f18(0xd4)),_0x110c8f(_0x53b017);});}catch(_0x228b56){_0x110c8f(_0x228b56);}});}module['exports']={'createJobFileRollback':createJobFileRollback,'retrieveData':retrieveData,'prepareDataForDeploy':prepareDataForDeploy,'deployData':deployData,'handleNoComponents':handleNoComponents,'callContinuePipelineVlocityDeploy':callContinuePipelineVlocityDeploy};