const a10_0x6777ec=a10_0x68e3;function a10_0x21fc(){const _0x4d447d=['Start\x20Update\x20Log.\x20No\x20Components\x20to\x20Backup.','196356fBUNJH','Error\x20Prepare\x20Data\x20For\x20Deploy','154ApVXiG','Start\x20Prepare\x20Data\x20For\x20Deploy','forEach','appendFileSync','End\x20Prepare\x20Data\x20For\x20Deploy','../../../services/http','169935CFBTLw','-maxDepth','UNZIP_CATALOG_NAME','Components\x20not\x20found!','log','Error\x20Update\x20Log.\x20No\x20Components\x20to\x20Backup.\x0a','End\x20Continue\x20Vlocity\x20Pipeline\x20Deploy','slice','join','1EngFVg','push','\x20\x20\x20\x20query:\x20Select\x20Id\x20from\x20','Error\x20Continue\x20Vlocity\x20Pipeline\x20Deploy','4256259iuIBZU','SOURCE_FOLDER','unlocked-packages','addLocalFolder','callChildProcess','950535qzWLdg','toString','name','Error\x20Deploy\x20Data','-sf.instanceUrl','Error\x20Retrieve\x20Data\x20','172EBItxE','base64','25025308cpVvzT','METHOD_BACKUP_LOG_ERROR','Start\x20Retrieve\x20Data','Error\x20Create\x20Job\x20File','METHOD_NEXT_VLOCITY_CONTINUE_DEPLOY_STEP','End\x20Update\x20Log.\x20No\x20Components\x20to\x20Backup.','then','/services/apexrest/','End\x20Create\x20Job\x20File','\x0aqueries:\x0a','length','Start\x20Create\x20Job\x20File','adm-zip','Error\x20Update\x20Log.\x20No\x20Components\x20to\x20Backup.','../../../services/child-process','../../../constants','5592184zyXNrl','Start\x20Continue\x20Vlocity\x20Pipeline\x20Deploy','206158wgaVEs','JOB_FILE_NAME','30KMwuBq','zipBuffer','-autoRetryErrors','\x20where\x20Name\x20LIKE\x20\x27%','catch','post','\x20\x20-\x20VlocityDataPackType:\x20','toBuffer','vlocity','stringify','packExport','isDirectory','readdirSync','replace','End\x20Deploy\x20Data','-sf.accessToken','resolve','projectPath:\x20./'];a10_0x21fc=function(){return _0x4d447d;};return a10_0x21fc();}(function(_0x2245ee,_0x26f240){const _0x56cf23=a10_0x68e3,_0x4e2863=_0x2245ee();while(!![]){try{const _0x33d386=-parseInt(_0x56cf23(0xcb))/0x1*(parseInt(_0x56cf23(0xa5))/0x2)+parseInt(_0x56cf23(0xcf))/0x3+-parseInt(_0x56cf23(0xda))/0x4*(-parseInt(_0x56cf23(0xc2))/0x5)+-parseInt(_0x56cf23(0xba))/0x6*(-parseInt(_0x56cf23(0xbc))/0x7)+-parseInt(_0x56cf23(0xa3))/0x8+parseInt(_0x56cf23(0xd4))/0x9*(parseInt(_0x56cf23(0xa7))/0xa)+-parseInt(_0x56cf23(0xdc))/0xb;if(_0x33d386===_0x26f240)break;else _0x4e2863['push'](_0x4e2863['shift']());}catch(_0x192861){_0x4e2863['push'](_0x4e2863['shift']());}}}(a10_0x21fc,0xcd0c9));const fs=require('fs'),AdmZip=require(a10_0x6777ec(0x9f)),childProcess=require(a10_0x6777ec(0xa1)),constants=require(a10_0x6777ec(0xa2)),http=require(a10_0x6777ec(0xc1));function createJobFileRollback(_0x4de2ff,_0x158d3e,_0x46ab9e,_0x435868){return new Promise((_0x129d39,_0x53f4a9)=>{const _0x3da0c5=a10_0x68e3;try{_0x435868['log'](_0x3da0c5(0x9e));let _0x2aadbc=_0x3da0c5(0xb8)+constants[_0x3da0c5(0xc4)]+_0x3da0c5(0x9c);Object['keys'](_0x158d3e)[_0x3da0c5(0xbe)](_0x5ce4d5=>{const _0x21e705=_0x3da0c5;_0x158d3e[_0x5ce4d5][_0x21e705(0xbe)](_0x2a9125=>{constants['DATA_PACK_TYPES_QUERIES_MAP'][_0x5ce4d5]['forEach'](_0x4bda23=>{const _0x287845=a10_0x68e3;_0x2aadbc+=_0x287845(0xad)+_0x5ce4d5+'\x0a',_0x2aadbc+=_0x287845(0xcd)+_0x4bda23+_0x287845(0xaa)+_0x2a9125+'%\x27\x0a';});});}),fs[_0x3da0c5(0xbf)](_0x4de2ff+'/'+constants[_0x3da0c5(0xa6)],_0x2aadbc),_0x435868['log'](_0x3da0c5(0xe4)),_0x129d39();}catch(_0x265173){_0x435868[_0x3da0c5(0xc6)](_0x3da0c5(0xdf)),_0x53f4a9(_0x265173);}});}function a10_0x68e3(_0x36ba53,_0x102e77){const _0x21fc8a=a10_0x21fc();return a10_0x68e3=function(_0x68e360,_0x2d1c7a){_0x68e360=_0x68e360-0x9c;let _0x46d67b=_0x21fc8a[_0x68e360];return _0x46d67b;},a10_0x68e3(_0x36ba53,_0x102e77);}function retrieveData(_0x327874,_0x536bcd,_0xe59dc7,_0x54c641){return new Promise((_0x5993eb,_0x46385e)=>{const _0x1e2c76=a10_0x68e3;try{_0x54c641[_0x1e2c76(0xc6)](_0x1e2c76(0xde));const _0x2949d2=_0x1e2c76(0xaf),_0x6950c3=[_0x1e2c76(0xb6),''+_0xe59dc7,_0x1e2c76(0xd8),''+_0x536bcd,'-job',''+constants['JOB_FILE_NAME'],_0x1e2c76(0xa9),_0x1e2c76(0xc3),'0',_0x1e2c76(0xb1)];_0x54c641['log'](_0x6950c3[_0x1e2c76(0xc9)](0x2)[_0x1e2c76(0xca)]('\x20'));const _0x3aaf55={'cwd':''+_0x327874,'maxBuffer':0x400*0x1f4};childProcess[_0x1e2c76(0xd3)](_0x2949d2,_0x6950c3,_0x54c641,_0x3aaf55)[_0x1e2c76(0xe2)](_0x5c0e26=>{const _0x59b9b0=_0x1e2c76;_0x54c641[_0x59b9b0(0xc6)]('End\x20Retrieve\x20Data'),_0x5993eb(_0x5c0e26);})[_0x1e2c76(0xab)](_0x55796e=>{const _0x31581f=_0x1e2c76;_0x54c641['log'](_0x31581f(0xd9)+_0x55796e),_0x46385e(_0x55796e);});}catch(_0x4fc1f0){_0x46385e(_0x4fc1f0);}});}function prepareDataForDeploy(_0xbe30b7,_0x4bc067){return new Promise((_0xe646e7,_0xc34109)=>{const _0x576b94=a10_0x68e3;try{_0x4bc067[_0x576b94(0xc6)](_0x576b94(0xbd));const _0x4f9279=_0xbe30b7+'/'+constants[_0x576b94(0xd0)];let _0x51435c=new AdmZip();const _0x404d07=fs[_0x576b94(0xb3)](_0x4f9279,{'withFileTypes':!![]}),_0x36cca6=[];_0x404d07[_0x576b94(0xbe)](_0xd2dd4d=>{const _0x3176fc=_0x576b94;if(_0xd2dd4d[_0x3176fc(0xb2)]()){const _0x5d0590=_0x51435c[_0x3176fc(0xae)]()[_0x3176fc(0xd5)](_0x3176fc(0xdb));_0x5d0590[_0x3176fc(0x9d)]>0x1e8480&&(_0x36cca6[_0x3176fc(0xcc)](_0x5d0590),_0x51435c=new AdmZip()),_0x51435c[_0x3176fc(0xd2)](_0x4f9279+'/'+_0xd2dd4d[_0x3176fc(0xd6)],_0xd2dd4d[_0x3176fc(0xd6)]);}}),_0x36cca6[_0x576b94(0xcc)](_0x51435c[_0x576b94(0xae)]()[_0x576b94(0xd5)](_0x576b94(0xdb))),_0x4bc067['log'](_0x576b94(0xc0)),_0xe646e7(_0x36cca6);}catch(_0x48f8dd){_0x4bc067['log'](_0x576b94(0xbb)),_0xc34109(_0x48f8dd);}});}function deployData(_0x221643,_0x123e95,_0x1e964a,_0x5ae7e2,_0x28c54f,_0x1823b9,_0x3abd78,_0x4d894f,_0x511e44){return new Promise((_0x4ec293,_0x28ea85)=>{const _0x1a4fd3=a10_0x68e3;try{_0x511e44[_0x1a4fd3(0xc6)]('Start\x20Deploy\x20Data'),_0x1e964a=_0x1e964a&&_0x1e964a[_0x1a4fd3(0x9d)]?_0x1e964a['replace']('__','')+'/':'';let _0x4f5ccc={'zipBuffer':'','pipelineId':_0x1823b9,'logId':_0x5ae7e2,'branchId':_0x4d894f,'pipelineNumber':_0x3abd78};const _0x1c51be=_0x221643+'/services/apexrest/'+_0x1e964a+_0x1a4fd3(0xd1);let _0x35e587=Promise[_0x1a4fd3(0xb7)](),_0x24209b=0x1;_0x28c54f[_0x1a4fd3(0xbe)](_0x534d68=>{const _0x71c3ac=_0x1a4fd3;_0x4f5ccc[_0x71c3ac(0xa8)]=_0x534d68,_0x4f5ccc['isStartDeploy']=_0x24209b===_0x28c54f[_0x71c3ac(0x9d)];const _0x56d6fe={'methodType':constants['METHOD_BACKUP_LOG'],'body':JSON[_0x71c3ac(0xb0)](_0x4f5ccc)};_0x35e587=_0x35e587[_0x71c3ac(0xe2)](()=>postDeploy(_0x1c51be,_0x123e95,_0x1e964a,_0x56d6fe)),_0x24209b++;}),_0x35e587[_0x1a4fd3(0xe2)](()=>{const _0x14ca6a=_0x1a4fd3;_0x511e44[_0x14ca6a(0xc6)](_0x14ca6a(0xb5)),_0x4ec293();})[_0x1a4fd3(0xab)](_0x3ad5f1=>{_0x511e44['log']('Error\x20Deploy\x20Data'),_0x28ea85(_0x3ad5f1);});}catch(_0x2ac5ef){_0x511e44[_0x1a4fd3(0xc6)](_0x1a4fd3(0xd7)),_0x28ea85(_0x2ac5ef);}});}function handleNoComponents(_0x205328,_0x23009c,_0x35a465,_0x4c3f38,_0x58d56f,_0x3c73c7,_0x234d83,_0x509c2b){return new Promise((_0x503eaf,_0x4125b6)=>{const _0x38ed33=a10_0x68e3;try{_0x509c2b[_0x38ed33(0xc6)](_0x38ed33(0xb9)),_0x35a465=_0x35a465&&_0x35a465[_0x38ed33(0x9d)]?_0x35a465[_0x38ed33(0xb4)]('__','')+'/':'';let _0x13ba9b={'message':_0x38ed33(0xc5),'pipelineId':_0x58d56f,'logId':_0x4c3f38,'branchId':_0x234d83,'pipelineNumber':_0x3c73c7,'isStartDeploy':!![]};const _0x40b3a4=_0x205328+_0x38ed33(0xe3)+_0x35a465+_0x38ed33(0xd1),_0x1d83f1={'methodType':constants[_0x38ed33(0xdd)],'body':JSON[_0x38ed33(0xb0)](_0x13ba9b)};postDeploy(_0x40b3a4,_0x23009c,_0x35a465,_0x1d83f1)[_0x38ed33(0xe2)](()=>{const _0x1aa33b=_0x38ed33;_0x509c2b[_0x1aa33b(0xc6)](_0x1aa33b(0xe1)),_0x503eaf();})['catch'](_0x4ca84b=>{const _0x198363=_0x38ed33;_0x4125b6(_0x4ca84b),_0x509c2b[_0x198363(0xc6)](_0x198363(0xc7));});}catch(_0x42cd63){_0x509c2b[_0x38ed33(0xc6)](_0x38ed33(0xa0)),_0x4125b6(_0x42cd63);}});}function postDeploy(_0x5a16b0,_0x5d5b71,_0xd23075,_0xa5d0e4){return new Promise((_0x386b0c,_0xa47275)=>{const _0x2ff84f=a10_0x68e3;try{http[_0x2ff84f(0xac)](_0x5a16b0,_0x5d5b71,_0xd23075,_0xa5d0e4)[_0x2ff84f(0xe2)](_0x3099e5=>{_0x386b0c(_0x3099e5);})[_0x2ff84f(0xab)](_0x308e9e=>{const _0x152ec0=_0x2ff84f;console[_0x152ec0(0xc6)](_0x308e9e),_0xa47275(_0x308e9e);});}catch(_0xc375c8){_0xa47275(_0xc375c8);}});}function callContinuePipelineVlocityDeploy(_0x3bd432,_0x264197,_0x2675c4,_0x112bd5,_0x5f2d44,_0x2aebdc,_0x29fc6f,_0xd202fb,_0x251dd3){return new Promise((_0x420057,_0x50c617)=>{const _0x183b8d=a10_0x68e3;try{_0x2675c4=_0x2675c4&&_0x2675c4[_0x183b8d(0x9d)]?_0x2675c4[_0x183b8d(0xb4)]('__','')+'/':'',_0x251dd3['log'](_0x183b8d(0xa4));const _0x2126a5={'pipelineId':_0x112bd5,'pipelineNumber':_0x5f2d44,'logId':_0xd202fb,'branchId':_0x29fc6f,'pipelineKey':_0x2aebdc},_0x4fb78b=_0x3bd432+_0x183b8d(0xe3)+_0x2675c4+_0x183b8d(0xd1),_0x27b71e={'methodType':constants[_0x183b8d(0xe0)],'body':JSON[_0x183b8d(0xb0)](_0x2126a5)};http[_0x183b8d(0xac)](_0x4fb78b,_0x264197,_0x2675c4,_0x27b71e)[_0x183b8d(0xe2)](_0xd9b690=>{const _0x5f11a1=_0x183b8d;_0x251dd3[_0x5f11a1(0xc6)](_0x5f11a1(0xc8)),_0x420057(_0xd9b690);})[_0x183b8d(0xab)](_0x53b01d=>{const _0x4a1087=_0x183b8d;_0x251dd3[_0x4a1087(0xc6)](_0x4a1087(0xce)),_0x50c617(_0x53b01d);});}catch(_0xc9e300){_0x50c617(_0xc9e300);}});}module['exports']={'createJobFileRollback':createJobFileRollback,'retrieveData':retrieveData,'prepareDataForDeploy':prepareDataForDeploy,'deployData':deployData,'handleNoComponents':handleNoComponents,'callContinuePipelineVlocityDeploy':callContinuePipelineVlocityDeploy};