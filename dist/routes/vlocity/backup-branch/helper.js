const a14_0x51df25=a14_0x3e15;(function(_0x1dc9bd,_0x14b829){const _0x33734e=a14_0x3e15,_0x186659=_0x1dc9bd();while(!![]){try{const _0x468665=-parseInt(_0x33734e(0x1b8))/0x1*(-parseInt(_0x33734e(0x1aa))/0x2)+-parseInt(_0x33734e(0x1da))/0x3*(-parseInt(_0x33734e(0x1ac))/0x4)+parseInt(_0x33734e(0x1bb))/0x5+-parseInt(_0x33734e(0x1df))/0x6+parseInt(_0x33734e(0x1c7))/0x7*(-parseInt(_0x33734e(0x1d6))/0x8)+-parseInt(_0x33734e(0x1e0))/0x9+parseInt(_0x33734e(0x1d4))/0xa;if(_0x468665===_0x14b829)break;else _0x186659['push'](_0x186659['shift']());}catch(_0x31bd95){_0x186659['push'](_0x186659['shift']());}}}(a14_0x5b98,0xe4eb6));const fs=require('fs'),AdmZip=require('adm-zip'),childProcess=require(a14_0x51df25(0x1e1)),constants=require(a14_0x51df25(0x1d9)),http=require(a14_0x51df25(0x1d0));function a14_0x3e15(_0x4f7715,_0x1632f9){const _0x5b9821=a14_0x5b98();return a14_0x3e15=function(_0x3e15ea,_0x299435){_0x3e15ea=_0x3e15ea-0x1a8;let _0x1b08ac=_0x5b9821[_0x3e15ea];return _0x1b08ac;},a14_0x3e15(_0x4f7715,_0x1632f9);}function createJobFileRollback(_0x136e51,_0x340969,_0x4006de,_0x22c8e9){return new Promise((_0x1b218c,_0x3c3127)=>{const _0x1c1357=a14_0x3e15;try{_0x22c8e9['log'](_0x1c1357(0x1a8));let _0x54e044=_0x1c1357(0x1de)+constants[_0x1c1357(0x1af)]+'\x0aqueries:\x0a';Object['keys'](_0x340969)[_0x1c1357(0x1be)](_0xdc321c=>{const _0xf43a97=_0x1c1357;_0x340969[_0xdc321c][_0xf43a97(0x1be)](_0x93460b=>{constants['DATA_PACK_TYPES_QUERIES_MAP'][_0xdc321c]['forEach'](_0x3a94c8=>{const _0x1b4708=a14_0x3e15;_0x54e044+=_0x1b4708(0x1c6)+_0xdc321c+'\x0a',_0x54e044+=_0x1b4708(0x1b5)+_0x3a94c8+_0x1b4708(0x1b0)+_0x93460b+_0x1b4708(0x1d2);});});}),fs['appendFileSync'](_0x136e51+'/'+constants[_0x1c1357(0x1ba)],_0x54e044),_0x22c8e9[_0x1c1357(0x1c0)]('End\x20Create\x20Job\x20File'),_0x1b218c();}catch(_0x37b0b7){_0x22c8e9['log']('Error\x20Create\x20Job\x20File'),_0x3c3127(_0x37b0b7);}});}function retrieveData(_0x10ebea,_0x4c5844,_0x483a16,_0x21644c){return new Promise((_0xe497c1,_0x216870)=>{const _0x1e0591=a14_0x3e15;try{_0x21644c['log'](_0x1e0591(0x1e3));const _0x5a6e46=_0x1e0591(0x1bd),_0x58ac75=[_0x1e0591(0x1dc),''+_0x483a16,'-sf.instanceUrl',''+_0x4c5844,_0x1e0591(0x1ae),''+constants[_0x1e0591(0x1ba)],_0x1e0591(0x1d1),_0x1e0591(0x1d5),'0',_0x1e0591(0x1cb)];_0x21644c[_0x1e0591(0x1c0)](_0x58ac75['slice'](0x2)['join']('\x20'));const _0x2fea80={'cwd':''+_0x10ebea,'maxBuffer':0x400*0x1f4};childProcess[_0x1e0591(0x1d3)](_0x5a6e46,_0x58ac75,_0x21644c,_0x2fea80)[_0x1e0591(0x1b9)](_0x4c5fa4=>{const _0x3855e6=_0x1e0591;_0x21644c[_0x3855e6(0x1c0)](_0x3855e6(0x1db)),_0xe497c1(_0x4c5fa4);})['catch'](_0x1af9ec=>{const _0x2a205c=_0x1e0591;_0x21644c[_0x2a205c(0x1c0)]('Error\x20Retrieve\x20Data\x20'+_0x1af9ec),_0x216870(_0x1af9ec);});}catch(_0x43af86){_0x216870(_0x43af86);}});}function prepareDataForDeploy(_0x5ac551,_0x4222aa){return new Promise((_0x48651e,_0x227c83)=>{const _0x277b9a=a14_0x3e15;try{_0x4222aa['log'](_0x277b9a(0x1bc));const _0x365264=_0x5ac551+'/'+constants[_0x277b9a(0x1ad)];let _0x53fb2f=new AdmZip();const _0x1d3bef=fs[_0x277b9a(0x1a9)](_0x365264,{'withFileTypes':!![]}),_0x3cb4f9=[];_0x1d3bef[_0x277b9a(0x1be)](_0x51e370=>{const _0x4122dd=_0x277b9a;if(_0x51e370[_0x4122dd(0x1b2)]()){const _0x4bbc94=_0x53fb2f[_0x4122dd(0x1c5)]()[_0x4122dd(0x1c4)](_0x4122dd(0x1d8));_0x4bbc94[_0x4122dd(0x1e4)]>0x1e8480&&(_0x3cb4f9[_0x4122dd(0x1b4)](_0x4bbc94),_0x53fb2f=new AdmZip()),_0x53fb2f[_0x4122dd(0x1dd)](_0x365264+'/'+_0x51e370['name'],_0x51e370[_0x4122dd(0x1e2)]);}}),_0x3cb4f9[_0x277b9a(0x1b4)](_0x53fb2f['toBuffer']()[_0x277b9a(0x1c4)](_0x277b9a(0x1d8))),_0x4222aa[_0x277b9a(0x1c0)](_0x277b9a(0x1cf)),_0x48651e(_0x3cb4f9);}catch(_0x45b7cc){_0x4222aa[_0x277b9a(0x1c0)]('Error\x20Prepare\x20Data\x20For\x20Deploy'),_0x227c83(_0x45b7cc);}});}function a14_0x5b98(){const _0x2e3262=['31122onXRqs','isStartDeploy','2637820TlQsgO','SOURCE_FOLDER','-job','UNZIP_CATALOG_NAME','\x20where\x20Name\x20LIKE\x20\x27%','post','isDirectory','Components\x20not\x20found!','push','\x20\x20\x20\x20query:\x20Select\x20Id\x20from\x20','Error\x20Update\x20Log.\x20No\x20Components\x20to\x20Backup.','catch','73reJAke','then','JOB_FILE_NAME','2504760VnVOFr','Start\x20Prepare\x20Data\x20For\x20Deploy','vlocity','forEach','stringify','log','End\x20Deploy\x20Data','Error\x20Update\x20Log.\x20No\x20Components\x20to\x20Backup.\x0a','End\x20Update\x20Log.\x20No\x20Components\x20to\x20Backup.','toString','toBuffer','\x20\x20-\x20VlocityDataPackType:\x20','3171hygtRn','resolve','Start\x20Deploy\x20Data','replace','packExport','Error\x20Deploy\x20Data','Error\x20Continue\x20Vlocity\x20Pipeline\x20Deploy','zipBuffer','End\x20Prepare\x20Data\x20For\x20Deploy','../../../services/http','-autoRetryErrors','%\x27\x0a','callChildProcess','19632430ZtBbQn','-maxDepth','30232ATLAZd','unlocked-packages','base64','../../../constants','3fBXSMT','End\x20Retrieve\x20Data','-sf.accessToken','addLocalFolder','projectPath:\x20./','4544970NzwrMU','7673103oysTSg','../../../services/child-process','name','Start\x20Retrieve\x20Data','length','METHOD_BACKUP_LOG','/services/apexrest/','Start\x20Create\x20Job\x20File','readdirSync'];a14_0x5b98=function(){return _0x2e3262;};return a14_0x5b98();}function deployData(_0x388075,_0x5ac5d9,_0x27f019,_0x48c26f,_0x4a2f9d,_0x54fad3,_0x1514ac,_0x1d814a){return new Promise((_0x3aec15,_0x57edbb)=>{const _0x4be074=a14_0x3e15;try{_0x1d814a[_0x4be074(0x1c0)](_0x4be074(0x1c9));const _0x4cec83={'zipBuffer':'','pipelineId':_0x4a2f9d,'logId':_0x27f019,'branchId':_0x1514ac,'pipelineNumber':_0x54fad3};let _0x3691fe=Promise[_0x4be074(0x1c8)](),_0x61b6bd=0x1;_0x48c26f[_0x4be074(0x1be)](_0xf715c3=>{const _0x229fb2=_0x4be074;_0x4cec83[_0x229fb2(0x1ce)]=_0xf715c3,_0x4cec83[_0x229fb2(0x1ab)]=_0x61b6bd===_0x48c26f[_0x229fb2(0x1e4)];const _0xc3605c={'methodType':constants[_0x229fb2(0x1e5)],'body':JSON[_0x229fb2(0x1bf)](_0x4cec83)};_0x3691fe=_0x3691fe[_0x229fb2(0x1b9)](()=>postDeploy(_0x388075,_0x5ac5d9,_0xc3605c)),_0x61b6bd++;}),_0x3691fe[_0x4be074(0x1b9)](()=>{const _0x34e8ea=_0x4be074;_0x1d814a[_0x34e8ea(0x1c0)](_0x34e8ea(0x1c1)),_0x3aec15();})['catch'](_0x1dee1d=>{const _0x41c014=_0x4be074;_0x1d814a[_0x41c014(0x1c0)](_0x41c014(0x1cc)),_0x57edbb(_0x1dee1d);});}catch(_0x44260d){_0x1d814a[_0x4be074(0x1c0)]('Error\x20Deploy\x20Data'),_0x57edbb(_0x44260d);}});}function handleNoComponents(_0x152d27,_0x52f7ef,_0x463ff9,_0x2955fd,_0xdf4558,_0x5afd3f,_0x1808d5,_0x531b57){return new Promise((_0x126265,_0x104ef0)=>{const _0x3db870=a14_0x3e15;try{_0x531b57[_0x3db870(0x1c0)]('Start\x20Update\x20Log.\x20No\x20Components\x20to\x20Backup.'),_0x463ff9=_0x463ff9&&_0x463ff9[_0x3db870(0x1e4)]?_0x463ff9[_0x3db870(0x1ca)]('__','')+'/':'';const _0x3a1b7f={'message':_0x3db870(0x1b3),'pipelineId':_0xdf4558,'logId':_0x2955fd,'branchId':_0x1808d5,'pipelineNumber':_0x5afd3f,'isStartDeploy':!![]},_0x31f6c=_0x152d27+_0x3db870(0x1e6)+_0x463ff9+_0x3db870(0x1d7),_0x52a67b={'methodType':constants['METHOD_BACKUP_LOG_ERROR'],'body':JSON[_0x3db870(0x1bf)](_0x3a1b7f)};postDeploy(_0x31f6c,_0x52f7ef,_0x463ff9,_0x52a67b)[_0x3db870(0x1b9)](()=>{const _0x483eb4=_0x3db870;_0x531b57[_0x483eb4(0x1c0)](_0x483eb4(0x1c3)),_0x126265();})['catch'](_0x8131a5=>{const _0x34c62c=_0x3db870;_0x104ef0(_0x8131a5),_0x531b57[_0x34c62c(0x1c0)](_0x34c62c(0x1c2));});}catch(_0x1f9eac){_0x531b57['log'](_0x3db870(0x1b6)),_0x104ef0(_0x1f9eac);}});}function postDeploy(_0x2f833d,_0x357774,_0x25432f){return new Promise((_0x5a0fc8,_0x38e78e)=>{const _0x22fe41=a14_0x3e15;try{http[_0x22fe41(0x1b1)](_0x2f833d,_0x357774,_0x25432f)[_0x22fe41(0x1b9)](_0x56b345=>{_0x5a0fc8(_0x56b345);})[_0x22fe41(0x1b7)](_0x3fe502=>{const _0x558737=_0x22fe41;console[_0x558737(0x1c0)](_0x3fe502),_0x38e78e(_0x3fe502);});}catch(_0x162f50){_0x38e78e(_0x162f50);}});}function callContinuePipelineVlocityDeploy(_0x131b8c,_0x3f5b1c,_0x319ea4,_0x4630b1,_0x14ec40,_0x3b6ad0,_0x2617d5,_0x2a5d0f){return new Promise((_0x44c5f9,_0x94199e)=>{const _0x19417c=a14_0x3e15;try{_0x3f5b1c=_0x3f5b1c&&_0x3f5b1c[_0x19417c(0x1e4)]?_0x3f5b1c[_0x19417c(0x1ca)]('__','')+'/':'',_0x2a5d0f[_0x19417c(0x1c0)]('Start\x20Continue\x20Vlocity\x20Pipeline\x20Deploy');const _0x385633={'pipelineId':_0x319ea4,'pipelineNumber':_0x4630b1,'logId':_0x2617d5,'branchId':_0x3b6ad0,'pipelineKey':_0x14ec40},_0x3f814e={'methodType':constants['METHOD_NEXT_VLOCITY_CONTINUE_DEPLOY_STEP'],'body':JSON[_0x19417c(0x1bf)](_0x385633)};http[_0x19417c(0x1b1)](_0x131b8c,_0x3f5b1c,_0x3f814e)[_0x19417c(0x1b9)](_0x4fe016=>{const _0x5e2ec0=_0x19417c;_0x2a5d0f[_0x5e2ec0(0x1c0)]('End\x20Continue\x20Vlocity\x20Pipeline\x20Deploy'),_0x44c5f9(_0x4fe016);})[_0x19417c(0x1b7)](_0x6fb7b1=>{const _0x14a3e2=_0x19417c;_0x2a5d0f[_0x14a3e2(0x1c0)](_0x14a3e2(0x1cd)),_0x94199e(_0x6fb7b1);});}catch(_0xf35a53){_0x94199e(_0xf35a53);}});}module['exports']={'createJobFileRollback':createJobFileRollback,'retrieveData':retrieveData,'prepareDataForDeploy':prepareDataForDeploy,'deployData':deployData,'handleNoComponents':handleNoComponents,'callContinuePipelineVlocityDeploy':callContinuePipelineVlocityDeploy};