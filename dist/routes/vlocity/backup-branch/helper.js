const a14_0x3f46e8=a14_0x1fcf;(function(_0x57312c,_0x23bc8a){const _0x4db971=a14_0x1fcf,_0x5b0f36=_0x57312c();while(!![]){try{const _0x31f5d9=-parseInt(_0x4db971(0xf9))/0x1+-parseInt(_0x4db971(0xfe))/0x2*(parseInt(_0x4db971(0xed))/0x3)+parseInt(_0x4db971(0x10a))/0x4+-parseInt(_0x4db971(0x103))/0x5*(parseInt(_0x4db971(0x108))/0x6)+parseInt(_0x4db971(0xff))/0x7*(-parseInt(_0x4db971(0xdf))/0x8)+parseInt(_0x4db971(0x109))/0x9*(-parseInt(_0x4db971(0x11e))/0xa)+parseInt(_0x4db971(0xe7))/0xb;if(_0x31f5d9===_0x23bc8a)break;else _0x5b0f36['push'](_0x5b0f36['shift']());}catch(_0x22a5d2){_0x5b0f36['push'](_0x5b0f36['shift']());}}}(a14_0x1db0,0xb5ed2));const fs=require('fs'),AdmZip=require(a14_0x3f46e8(0x115)),childProcess=require(a14_0x3f46e8(0x111)),constants=require(a14_0x3f46e8(0xe5)),http=require(a14_0x3f46e8(0xeb));function createJobFileRollback(_0x4bda14,_0x106205,_0x4c2d1b,_0x25f67c){return new Promise((_0x20f1e3,_0x4a2709)=>{const _0x5f4747=a14_0x1fcf;try{_0x25f67c[_0x5f4747(0xf2)](_0x5f4747(0x107));let _0x4c0263='projectPath:\x20./'+constants[_0x5f4747(0xe9)]+_0x5f4747(0xe8);Object['keys'](_0x106205)['forEach'](_0x6546e3=>{const _0x46c161=_0x5f4747;_0x106205[_0x6546e3][_0x46c161(0xf4)](_0x2a3f6c=>{constants['DATA_PACK_TYPES_QUERIES_MAP'][_0x6546e3]['forEach'](_0x17de5a=>{const _0x3d5942=a14_0x1fcf;_0x4c0263+=_0x3d5942(0xea)+_0x6546e3+'\x0a',_0x4c0263+=_0x3d5942(0xee)+_0x17de5a+'\x20where\x20Name\x20LIKE\x20\x27%'+_0x2a3f6c+_0x3d5942(0xec);});});}),fs[_0x5f4747(0xfc)](_0x4bda14+'/'+constants[_0x5f4747(0x101)],_0x4c0263),_0x25f67c[_0x5f4747(0xf2)](_0x5f4747(0xf5)),_0x20f1e3();}catch(_0x5d315d){_0x25f67c[_0x5f4747(0xf2)](_0x5f4747(0xf0)),_0x4a2709(_0x5d315d);}});}function retrieveData(_0x4cfaac,_0x2f0cd4,_0x2aabb8,_0x3eaf1f){return new Promise((_0x4cc14e,_0x24b32d)=>{const _0x2b033e=a14_0x1fcf;try{_0x3eaf1f[_0x2b033e(0xf2)]('Start\x20Retrieve\x20Data');const _0x48b20c=_0x2b033e(0xf6),_0x512571=[_0x2b033e(0x10d),''+_0x2aabb8,_0x2b033e(0x120),''+_0x2f0cd4,_0x2b033e(0x110),''+constants[_0x2b033e(0x101)],_0x2b033e(0x102),_0x2b033e(0x11a),'0',_0x2b033e(0xfb)];_0x3eaf1f['log'](_0x512571[_0x2b033e(0xe0)](0x2)[_0x2b033e(0x116)]('\x20'));const _0x13f693={'cwd':''+_0x4cfaac,'maxBuffer':0x400*0x1f4};childProcess['callChildProcess'](_0x48b20c,_0x512571,_0x3eaf1f,_0x13f693)[_0x2b033e(0x11b)](_0x11b389=>{const _0x4a59f5=_0x2b033e;_0x3eaf1f['log'](_0x4a59f5(0xfa)),_0x4cc14e(_0x11b389);})['catch'](_0x3fea1e=>{_0x3eaf1f['log']('Error\x20Retrieve\x20Data\x20'+_0x3fea1e),_0x24b32d(_0x3fea1e);});}catch(_0x3829f3){_0x24b32d(_0x3829f3);}});}function a14_0x1fcf(_0x4bab9c,_0x249986){const _0x1db06b=a14_0x1db0();return a14_0x1fcf=function(_0x1fcfce,_0x23ddec){_0x1fcfce=_0x1fcfce-0xdc;let _0x1b1790=_0x1db06b[_0x1fcfce];return _0x1b1790;},a14_0x1fcf(_0x4bab9c,_0x249986);}function prepareDataForDeploy(_0x5f5bf1,_0xc24f48){return new Promise((_0x1feedf,_0x4d1dbb)=>{const _0x291471=a14_0x1fcf;try{_0xc24f48['log'](_0x291471(0x112));const _0x49a815=_0x5f5bf1+'/'+constants[_0x291471(0x104)];let _0x4b7150=new AdmZip();const _0x12376e=fs['readdirSync'](_0x49a815,{'withFileTypes':!![]}),_0x603324=[];_0x12376e[_0x291471(0xf4)](_0x43de24=>{const _0x15c830=_0x291471;if(_0x43de24[_0x15c830(0xe2)]()){const _0x34cc3e=_0x4b7150['toBuffer']()[_0x15c830(0x11d)](_0x15c830(0xef));_0x34cc3e['length']>0x1e8480&&(_0x603324['push'](_0x34cc3e),_0x4b7150=new AdmZip()),_0x4b7150['addLocalFolder'](_0x49a815+'/'+_0x43de24[_0x15c830(0x11c)],_0x43de24[_0x15c830(0x11c)]);}}),_0x603324[_0x291471(0xde)](_0x4b7150[_0x291471(0x10e)]()['toString'](_0x291471(0xef))),_0xc24f48[_0x291471(0xf2)]('End\x20Prepare\x20Data\x20For\x20Deploy'),_0x1feedf(_0x603324);}catch(_0x2de546){_0xc24f48[_0x291471(0xf2)](_0x291471(0xe1)),_0x4d1dbb(_0x2de546);}});}function deployData(_0x238cf9,_0x281d16,_0x44d4b8,_0x3ee8d6,_0xdafe71,_0x5a2fb2,_0x5b7b7a,_0xf35c45,_0x2f0e66){return new Promise((_0x18dccf,_0x52d8b8)=>{const _0x1c60cc=a14_0x1fcf;try{_0x2f0e66[_0x1c60cc(0xf2)]('Start\x20Deploy\x20Data'),_0x44d4b8=_0x44d4b8&&_0x44d4b8[_0x1c60cc(0xdc)]?_0x44d4b8[_0x1c60cc(0xf8)]('__','')+'/':'';let _0x4e0db4={'zipBuffer':'','pipelineId':_0x5a2fb2,'logId':_0x3ee8d6,'branchId':_0xf35c45,'pipelineNumber':_0x5b7b7a};const _0x16cb94=_0x238cf9+_0x1c60cc(0x11f)+_0x44d4b8+_0x1c60cc(0xf3);let _0x7217ad=Promise[_0x1c60cc(0xf1)](),_0x4da6ba=0x1;_0xdafe71[_0x1c60cc(0xf4)](_0x207cd1=>{const _0x2bf596=_0x1c60cc;_0x4e0db4[_0x2bf596(0x118)]=_0x207cd1,_0x4e0db4[_0x2bf596(0x10b)]=_0x4da6ba===_0xdafe71[_0x2bf596(0xdc)];const _0x5e5b10={'methodType':constants[_0x2bf596(0x113)],'body':JSON[_0x2bf596(0xe6)](_0x4e0db4)};_0x7217ad=_0x7217ad[_0x2bf596(0x11b)](()=>postDeploy(_0x16cb94,_0x281d16,_0x44d4b8,_0x5e5b10)),_0x4da6ba++;}),_0x7217ad[_0x1c60cc(0x11b)](()=>{const _0x13b889=_0x1c60cc;_0x2f0e66[_0x13b889(0xf2)](_0x13b889(0x114)),_0x18dccf();})[_0x1c60cc(0x117)](_0x32ba73=>{const _0x719c7d=_0x1c60cc;_0x2f0e66[_0x719c7d(0xf2)](_0x719c7d(0x100)),_0x52d8b8(_0x32ba73);});}catch(_0x44a77a){_0x2f0e66[_0x1c60cc(0xf2)]('Error\x20Deploy\x20Data'),_0x52d8b8(_0x44a77a);}});}function handleNoComponents(_0x241e6d,_0x4dd8be,_0x359a16,_0x1af931,_0x258fd6,_0x128a87,_0x42b72c,_0x4eb52f){return new Promise((_0x341150,_0x286abd)=>{const _0x18620f=a14_0x1fcf;try{_0x4eb52f[_0x18620f(0xf2)](_0x18620f(0xf7)),_0x359a16=_0x359a16&&_0x359a16[_0x18620f(0xdc)]?_0x359a16['replace']('__','')+'/':'';let _0x3f315c={'message':_0x18620f(0x119),'pipelineId':_0x258fd6,'logId':_0x1af931,'branchId':_0x42b72c,'pipelineNumber':_0x128a87,'isStartDeploy':!![]};const _0x4de647=_0x241e6d+'/services/apexrest/'+_0x359a16+_0x18620f(0xf3),_0x586013={'methodType':constants[_0x18620f(0xdd)],'body':JSON[_0x18620f(0xe6)](_0x3f315c)};postDeploy(_0x4de647,_0x4dd8be,_0x359a16,_0x586013)[_0x18620f(0x11b)](()=>{const _0x1a983b=_0x18620f;_0x4eb52f[_0x1a983b(0xf2)](_0x1a983b(0x105)),_0x341150();})[_0x18620f(0x117)](_0x26ac97=>{const _0x17faa6=_0x18620f;_0x286abd(_0x26ac97),_0x4eb52f['log'](_0x17faa6(0x10f));});}catch(_0x151480){_0x4eb52f[_0x18620f(0xf2)](_0x18620f(0xe3)),_0x286abd(_0x151480);}});}function a14_0x1db0(){const _0x44d97a=['../../../constants','stringify','33446083aybKGw','\x0aqueries:\x0a','UNZIP_CATALOG_NAME','\x20\x20-\x20VlocityDataPackType:\x20','../../../services/http','%\x27\x0a','616881rhCcTU','\x20\x20\x20\x20query:\x20Select\x20Id\x20from\x20','base64','Error\x20Create\x20Job\x20File','resolve','log','unlocked-packages','forEach','End\x20Create\x20Job\x20File','vlocity','Start\x20Update\x20Log.\x20No\x20Components\x20to\x20Backup.','replace','235471BGZkrQ','End\x20Retrieve\x20Data','packExport','appendFileSync','Error\x20Continue\x20Vlocity\x20Pipeline\x20Deploy','4RMLaTC','3154291PqrGda','Error\x20Deploy\x20Data','JOB_FILE_NAME','-autoRetryErrors','177445vvyEwz','SOURCE_FOLDER','End\x20Update\x20Log.\x20No\x20Components\x20to\x20Backup.','Start\x20Continue\x20Vlocity\x20Pipeline\x20Deploy','Start\x20Create\x20Job\x20File','54fvoTxE','252423kbmrmV','2221900BdJfeB','isStartDeploy','METHOD_NEXT_VLOCITY_CONTINUE_DEPLOY_STEP','-sf.accessToken','toBuffer','Error\x20Update\x20Log.\x20No\x20Components\x20to\x20Backup.\x0a','-job','../../../services/child-process','Start\x20Prepare\x20Data\x20For\x20Deploy','METHOD_BACKUP_LOG','End\x20Deploy\x20Data','adm-zip','join','catch','zipBuffer','Components\x20not\x20found!','-maxDepth','then','name','toString','190oGVGps','/services/apexrest/','-sf.instanceUrl','length','METHOD_BACKUP_LOG_ERROR','push','24eFaWwR','slice','Error\x20Prepare\x20Data\x20For\x20Deploy','isDirectory','Error\x20Update\x20Log.\x20No\x20Components\x20to\x20Backup.','post'];a14_0x1db0=function(){return _0x44d97a;};return a14_0x1db0();}function postDeploy(_0x1cb987,_0x4315bb,_0x282ce4,_0x5848a7){return new Promise((_0xfc8937,_0x4f09bb)=>{const _0x512ecd=a14_0x1fcf;try{http[_0x512ecd(0xe4)](_0x1cb987,_0x4315bb,_0x282ce4,_0x5848a7)['then'](_0x4ca357=>{_0xfc8937(_0x4ca357);})[_0x512ecd(0x117)](_0x4469ab=>{console['log'](_0x4469ab),_0x4f09bb(_0x4469ab);});}catch(_0x2148f3){_0x4f09bb(_0x2148f3);}});}function callContinuePipelineVlocityDeploy(_0xa658e4,_0x343cdb,_0x5d2209,_0x22041d,_0x51d434,_0x19a1a7,_0x440e75,_0xf62a1e,_0x78f553){return new Promise((_0x2461f5,_0x593af6)=>{const _0xd68cd5=a14_0x1fcf;try{_0x5d2209=_0x5d2209&&_0x5d2209['length']?_0x5d2209[_0xd68cd5(0xf8)]('__','')+'/':'',_0x78f553[_0xd68cd5(0xf2)](_0xd68cd5(0x106));const _0x11bded={'pipelineId':_0x22041d,'pipelineNumber':_0x51d434,'logId':_0xf62a1e,'branchId':_0x440e75,'pipelineKey':_0x19a1a7},_0x4be13b=_0xa658e4+_0xd68cd5(0x11f)+_0x5d2209+_0xd68cd5(0xf3),_0x41fe87={'methodType':constants[_0xd68cd5(0x10c)],'body':JSON[_0xd68cd5(0xe6)](_0x11bded)};http[_0xd68cd5(0xe4)](_0x4be13b,_0x343cdb,_0x5d2209,_0x41fe87)[_0xd68cd5(0x11b)](_0x5e76c0=>{_0x78f553['log']('End\x20Continue\x20Vlocity\x20Pipeline\x20Deploy'),_0x2461f5(_0x5e76c0);})[_0xd68cd5(0x117)](_0x1502ef=>{const _0xc2f524=_0xd68cd5;_0x78f553[_0xc2f524(0xf2)](_0xc2f524(0xfd)),_0x593af6(_0x1502ef);});}catch(_0x469fa4){_0x593af6(_0x469fa4);}});}module['exports']={'createJobFileRollback':createJobFileRollback,'retrieveData':retrieveData,'prepareDataForDeploy':prepareDataForDeploy,'deployData':deployData,'handleNoComponents':handleNoComponents,'callContinuePipelineVlocityDeploy':callContinuePipelineVlocityDeploy};