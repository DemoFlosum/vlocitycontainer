const a14_0x426941=a14_0x297b;(function(_0xd987ed,_0xffd1da){const _0x26dffd=a14_0x297b,_0x1571b8=_0xd987ed();while(!![]){try{const _0x595018=parseInt(_0x26dffd(0xe9))/0x1*(parseInt(_0x26dffd(0xf0))/0x2)+parseInt(_0x26dffd(0xc6))/0x3*(-parseInt(_0x26dffd(0xe4))/0x4)+-parseInt(_0x26dffd(0x103))/0x5*(-parseInt(_0x26dffd(0xd3))/0x6)+parseInt(_0x26dffd(0xea))/0x7*(-parseInt(_0x26dffd(0xe6))/0x8)+-parseInt(_0x26dffd(0xee))/0x9*(parseInt(_0x26dffd(0xc8))/0xa)+parseInt(_0x26dffd(0xcf))/0xb*(parseInt(_0x26dffd(0xf9))/0xc)+parseInt(_0x26dffd(0xba))/0xd*(-parseInt(_0x26dffd(0xce))/0xe);if(_0x595018===_0xffd1da)break;else _0x1571b8['push'](_0x1571b8['shift']());}catch(_0x2a6382){_0x1571b8['push'](_0x1571b8['shift']());}}}(a14_0x21b2,0x7f03f));function a14_0x297b(_0x3f376e,_0x23f6ae){const _0x21b291=a14_0x21b2();return a14_0x297b=function(_0x297b99,_0x578eb7){_0x297b99=_0x297b99-0xba;let _0x363f95=_0x21b291[_0x297b99];return _0x363f95;},a14_0x297b(_0x3f376e,_0x23f6ae);}const fs=require('fs'),AdmZip=require(a14_0x426941(0xca)),childProcess=require(a14_0x426941(0xcd)),constants=require(a14_0x426941(0xe7)),http=require(a14_0x426941(0xf2));function a14_0x21b2(){const _0x231e67=['slice','length','JOB_FILE_NAME','Error\x20Create\x20Job\x20File','End\x20Continue\x20Vlocity\x20Pipeline\x20Deploy','/services/apexrest/','forEach','unlocked-packages','522040RspQpY','Start\x20Prepare\x20Data\x20For\x20Deploy','4528lnsaiZ','../../../constants','exports','18pPRyoa','1204WEZTea','join','push','Start\x20Continue\x20Vlocity\x20Pipeline\x20Deploy','9AtFgmB','%\x27\x0a','103978PBWZhk','-sf.instanceUrl','../../../services/http','keys','SOURCE_FOLDER','-maxDepth','readdirSync','then','log','120OnlIed','base64','\x20\x20-\x20VlocityDataPackType:\x20','Error\x20Deploy\x20Data','Components\x20not\x20found!','Start\x20Create\x20Job\x20File','appendFileSync','Error\x20Continue\x20Vlocity\x20Pipeline\x20Deploy','catch','packExport','95CDGVZM','3499639OLuPcK','callChildProcess','post','isDirectory','projectPath:\x20./','toString','zipBuffer','stringify','Start\x20Retrieve\x20Data','End\x20Retrieve\x20Data','toBuffer','resolve','3vJfNgL','End\x20Prepare\x20Data\x20For\x20Deploy','4347360qgEOYv','METHOD_BACKUP_LOG_ERROR','adm-zip','vlocity','End\x20Update\x20Log.\x20No\x20Components\x20to\x20Backup.','../../../services/child-process','28YHwmZo','666853XXdhgo','DATA_PACK_TYPES_QUERIES_MAP','UNZIP_CATALOG_NAME','name','56598QtsNiX','replace','-autoRetryErrors','-sf.accessToken','Error\x20Prepare\x20Data\x20For\x20Deploy','\x0aqueries:\x0a','\x20where\x20Name\x20LIKE\x20\x27%','METHOD_NEXT_VLOCITY_CONTINUE_DEPLOY_STEP','METHOD_BACKUP_LOG'];a14_0x21b2=function(){return _0x231e67;};return a14_0x21b2();}function createJobFileRollback(_0x571184,_0x3b32c6,_0x2266a5,_0x1e6ce0){return new Promise((_0x9c5fc0,_0x5cc25f)=>{const _0x3d09d6=a14_0x297b;try{_0x1e6ce0[_0x3d09d6(0xf8)](_0x3d09d6(0xfe));let _0x3f7bac=_0x3d09d6(0xbe)+constants[_0x3d09d6(0xd1)]+_0x3d09d6(0xd8);Object[_0x3d09d6(0xf3)](_0x3b32c6)[_0x3d09d6(0xe2)](_0x871248=>{_0x3b32c6[_0x871248]['forEach'](_0x540b06=>{const _0x3308ce=a14_0x297b;constants[_0x3308ce(0xd0)][_0x871248][_0x3308ce(0xe2)](_0x3b79a0=>{const _0x21c8bb=_0x3308ce;_0x3f7bac+=_0x21c8bb(0xfb)+_0x871248+'\x0a',_0x3f7bac+='\x20\x20\x20\x20query:\x20Select\x20Id\x20from\x20'+_0x3b79a0+_0x21c8bb(0xd9)+_0x540b06+_0x21c8bb(0xef);});});}),fs[_0x3d09d6(0xff)](_0x571184+'/'+constants[_0x3d09d6(0xde)],_0x3f7bac),_0x1e6ce0['log']('End\x20Create\x20Job\x20File'),_0x9c5fc0();}catch(_0x140f3e){_0x1e6ce0[_0x3d09d6(0xf8)](_0x3d09d6(0xdf)),_0x5cc25f(_0x140f3e);}});}function retrieveData(_0x28ef59,_0x582b25,_0x25f518,_0x5824ce){return new Promise((_0xb2879a,_0x4769cb)=>{const _0x581270=a14_0x297b;try{_0x5824ce[_0x581270(0xf8)](_0x581270(0xc2));const _0x4ea5e5=_0x581270(0xcb),_0x283d52=[_0x581270(0xd6),''+_0x25f518,_0x581270(0xf1),''+_0x582b25,'-job',''+constants[_0x581270(0xde)],_0x581270(0xd5),_0x581270(0xf5),'0',_0x581270(0x102)];_0x5824ce['log'](_0x283d52[_0x581270(0xdc)](0x2)[_0x581270(0xeb)]('\x20'));const _0x2cb5e3={'cwd':''+_0x28ef59,'maxBuffer':0x400*0x1f4};childProcess[_0x581270(0xbb)](_0x4ea5e5,_0x283d52,_0x5824ce,_0x2cb5e3)[_0x581270(0xf7)](_0x4004f0=>{const _0x20e070=_0x581270;_0x5824ce[_0x20e070(0xf8)](_0x20e070(0xc3)),_0xb2879a(_0x4004f0);})['catch'](_0x49d4c6=>{const _0x64d769=_0x581270;_0x5824ce[_0x64d769(0xf8)]('Error\x20Retrieve\x20Data\x20'+_0x49d4c6),_0x4769cb(_0x49d4c6);});}catch(_0x3469e9){_0x4769cb(_0x3469e9);}});}function prepareDataForDeploy(_0x15c2d8,_0x4bbcda){return new Promise((_0x11d0cc,_0x2bd778)=>{const _0x35219e=a14_0x297b;try{_0x4bbcda[_0x35219e(0xf8)](_0x35219e(0xe5));const _0x3eeb3a=_0x15c2d8+'/'+constants[_0x35219e(0xf4)];let _0x30016b=new AdmZip();const _0x59de9b=fs[_0x35219e(0xf6)](_0x3eeb3a,{'withFileTypes':!![]}),_0x1561c9=[];_0x59de9b[_0x35219e(0xe2)](_0x1063c0=>{const _0x474876=_0x35219e;if(_0x1063c0[_0x474876(0xbd)]()){const _0x1953e6=_0x30016b[_0x474876(0xc4)]()[_0x474876(0xbf)](_0x474876(0xfa));_0x1953e6[_0x474876(0xdd)]>0x1e8480&&(_0x1561c9[_0x474876(0xec)](_0x1953e6),_0x30016b=new AdmZip()),_0x30016b['addLocalFolder'](_0x3eeb3a+'/'+_0x1063c0[_0x474876(0xd2)],_0x1063c0[_0x474876(0xd2)]);}}),_0x1561c9['push'](_0x30016b[_0x35219e(0xc4)]()[_0x35219e(0xbf)](_0x35219e(0xfa))),_0x4bbcda[_0x35219e(0xf8)](_0x35219e(0xc7)),_0x11d0cc(_0x1561c9);}catch(_0x41707e){_0x4bbcda[_0x35219e(0xf8)](_0x35219e(0xd7)),_0x2bd778(_0x41707e);}});}function deployData(_0x16f356,_0x9bb0e3,_0xf997b5,_0x5a56ff,_0x9752a5,_0x54a44d,_0x50529d,_0x1c4f17,_0x1e4fc2){return new Promise((_0x4ac6f2,_0x38a6df)=>{const _0x817444=a14_0x297b;try{_0x1e4fc2[_0x817444(0xf8)]('Start\x20Deploy\x20Data'),_0xf997b5=_0xf997b5&&_0xf997b5[_0x817444(0xdd)]?_0xf997b5[_0x817444(0xd4)]('__','')+'/':'';let _0xb79d78={'zipBuffer':'','pipelineId':_0x54a44d,'logId':_0x5a56ff,'branchId':_0x1c4f17,'pipelineNumber':_0x50529d};const _0x20b6b8=_0x16f356+_0x817444(0xe1)+_0xf997b5+_0x817444(0xe3);let _0x26379e=Promise[_0x817444(0xc5)](),_0x2b0d18=0x1;_0x9752a5['forEach'](_0x3d545f=>{const _0xa4b165=_0x817444;_0xb79d78[_0xa4b165(0xc0)]=_0x3d545f,_0xb79d78['isStartDeploy']=_0x2b0d18===_0x9752a5['length'];const _0x4277db={'methodType':constants[_0xa4b165(0xdb)],'body':JSON[_0xa4b165(0xc1)](_0xb79d78)};_0x26379e=_0x26379e['then'](()=>postDeploy(_0x20b6b8,_0x9bb0e3,_0xf997b5,_0x4277db)),_0x2b0d18++;}),_0x26379e[_0x817444(0xf7)](()=>{const _0x240473=_0x817444;_0x1e4fc2[_0x240473(0xf8)]('End\x20Deploy\x20Data'),_0x4ac6f2();})[_0x817444(0x101)](_0x45a6f4=>{const _0x1a9279=_0x817444;_0x1e4fc2[_0x1a9279(0xf8)](_0x1a9279(0xfc)),_0x38a6df(_0x45a6f4);});}catch(_0x5c61ec){_0x1e4fc2['log'](_0x817444(0xfc)),_0x38a6df(_0x5c61ec);}});}function handleNoComponents(_0x2b9831,_0x134621,_0xe145d5,_0x14109d,_0x1d6793,_0xcaad34,_0x2e0f89,_0x2a96f1){return new Promise((_0x27c359,_0x440eea)=>{const _0x22d486=a14_0x297b;try{_0x2a96f1[_0x22d486(0xf8)]('Start\x20Update\x20Log.\x20No\x20Components\x20to\x20Backup.'),_0xe145d5=_0xe145d5&&_0xe145d5[_0x22d486(0xdd)]?_0xe145d5['replace']('__','')+'/':'';let _0x140a86={'message':_0x22d486(0xfd),'pipelineId':_0x1d6793,'logId':_0x14109d,'branchId':_0x2e0f89,'pipelineNumber':_0xcaad34,'isStartDeploy':!![]};const _0x54b2c3=_0x2b9831+'/services/apexrest/'+_0xe145d5+_0x22d486(0xe3),_0x52c9f9={'methodType':constants[_0x22d486(0xc9)],'body':JSON[_0x22d486(0xc1)](_0x140a86)};postDeploy(_0x54b2c3,_0x134621,_0xe145d5,_0x52c9f9)[_0x22d486(0xf7)](()=>{const _0x27294f=_0x22d486;_0x2a96f1[_0x27294f(0xf8)](_0x27294f(0xcc)),_0x27c359();})['catch'](_0x2260cd=>{_0x440eea(_0x2260cd),_0x2a96f1['log']('Error\x20Update\x20Log.\x20No\x20Components\x20to\x20Backup.\x0a');});}catch(_0x469f45){_0x2a96f1[_0x22d486(0xf8)]('Error\x20Update\x20Log.\x20No\x20Components\x20to\x20Backup.'),_0x440eea(_0x469f45);}});}function postDeploy(_0x353359,_0x150652,_0x4aea01,_0x59e4a6){return new Promise((_0x1b6dc7,_0x5afff4)=>{const _0x2fdc11=a14_0x297b;try{http[_0x2fdc11(0xbc)](_0x353359,_0x150652,_0x4aea01,_0x59e4a6)['then'](_0x2de156=>{_0x1b6dc7(_0x2de156);})['catch'](_0x36b54c=>{const _0x502909=_0x2fdc11;console[_0x502909(0xf8)](_0x36b54c),_0x5afff4(_0x36b54c);});}catch(_0x1e8962){_0x5afff4(_0x1e8962);}});}function callContinuePipelineVlocityDeploy(_0x3726cc,_0x42b1ab,_0x5dc667,_0x1b6e44,_0x14e4c1,_0x46b669,_0x21d4de,_0x3e5a69,_0x286fde){return new Promise((_0x1e4c5f,_0x4d97db)=>{const _0x4cf961=a14_0x297b;try{_0x5dc667=_0x5dc667&&_0x5dc667['length']?_0x5dc667[_0x4cf961(0xd4)]('__','')+'/':'',_0x286fde[_0x4cf961(0xf8)](_0x4cf961(0xed));const _0x53e222={'pipelineId':_0x1b6e44,'pipelineNumber':_0x14e4c1,'logId':_0x3e5a69,'branchId':_0x21d4de,'pipelineKey':_0x46b669},_0x5d92b5=_0x3726cc+'/services/apexrest/'+_0x5dc667+_0x4cf961(0xe3),_0x715b2e={'methodType':constants[_0x4cf961(0xda)],'body':JSON[_0x4cf961(0xc1)](_0x53e222)};http['post'](_0x5d92b5,_0x42b1ab,_0x5dc667,_0x715b2e)[_0x4cf961(0xf7)](_0x55db3a=>{const _0x81e843=_0x4cf961;_0x286fde['log'](_0x81e843(0xe0)),_0x1e4c5f(_0x55db3a);})['catch'](_0xff946=>{const _0x3f4fb4=_0x4cf961;_0x286fde[_0x3f4fb4(0xf8)](_0x3f4fb4(0x100)),_0x4d97db(_0xff946);});}catch(_0x2ceeaa){_0x4d97db(_0x2ceeaa);}});}module[a14_0x426941(0xe8)]={'createJobFileRollback':createJobFileRollback,'retrieveData':retrieveData,'prepareDataForDeploy':prepareDataForDeploy,'deployData':deployData,'handleNoComponents':handleNoComponents,'callContinuePipelineVlocityDeploy':callContinuePipelineVlocityDeploy};