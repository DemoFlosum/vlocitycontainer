const a10_0x501183=a10_0x450f;function a10_0x450f(_0x10532d,_0x1dd620){const _0x119b7c=a10_0x119b();return a10_0x450f=function(_0x450f12,_0x4f8172){_0x450f12=_0x450f12-0xd3;let _0x8bc1a=_0x119b7c[_0x450f12];return _0x8bc1a;},a10_0x450f(_0x10532d,_0x1dd620);}(function(_0xc38ffd,_0x3e5620){const _0x3f7ba4=a10_0x450f,_0x408b4d=_0xc38ffd();while(!![]){try{const _0x2151fe=-parseInt(_0x3f7ba4(0xdf))/0x1*(parseInt(_0x3f7ba4(0x104))/0x2)+parseInt(_0x3f7ba4(0xf5))/0x3*(parseInt(_0x3f7ba4(0xda))/0x4)+-parseInt(_0x3f7ba4(0x114))/0x5+-parseInt(_0x3f7ba4(0xf6))/0x6*(parseInt(_0x3f7ba4(0xf1))/0x7)+parseInt(_0x3f7ba4(0xe4))/0x8+-parseInt(_0x3f7ba4(0x10e))/0x9*(-parseInt(_0x3f7ba4(0x10b))/0xa)+-parseInt(_0x3f7ba4(0x105))/0xb;if(_0x2151fe===_0x3e5620)break;else _0x408b4d['push'](_0x408b4d['shift']());}catch(_0x21f53c){_0x408b4d['push'](_0x408b4d['shift']());}}}(a10_0x119b,0x3b1cc));const fs=require('fs'),AdmZip=require(a10_0x501183(0xfd)),childProcess=require(a10_0x501183(0xfc)),constants=require(a10_0x501183(0x100)),http=require('../../../services/http');function createJobFileRollback(_0x5aded2,_0x31356c,_0x538c41,_0xc25a28){return new Promise((_0x1816f2,_0x48d0a2)=>{const _0x47502c=a10_0x450f;try{_0xc25a28[_0x47502c(0xfe)](_0x47502c(0xff));let _0x379319=_0x47502c(0xe0)+constants[_0x47502c(0xf7)]+_0x47502c(0xe3);Object[_0x47502c(0x112)](_0x31356c)[_0x47502c(0xe2)](_0x2f0716=>{const _0xc1f085=_0x47502c;_0x31356c[_0x2f0716][_0xc1f085(0xe2)](_0x2ab0e4=>{const _0x98bb5e=_0xc1f085;constants[_0x98bb5e(0xf9)][_0x2f0716][_0x98bb5e(0xe2)](_0x1c9deb=>{const _0x15975b=_0x98bb5e;_0x379319+=_0x15975b(0xe8)+_0x2f0716+'\x0a',_0x379319+=_0x15975b(0x110)+_0x1c9deb+_0x15975b(0xdc)+_0x2ab0e4+'%\x27\x0a';});});}),fs[_0x47502c(0x108)](_0x5aded2+'/'+constants[_0x47502c(0xd4)],_0x379319),_0xc25a28[_0x47502c(0xfe)](_0x47502c(0x111)),_0x1816f2();}catch(_0x43a742){_0xc25a28['log'](_0x47502c(0xd7)),_0x48d0a2(_0x43a742);}});}function a10_0x119b(){const _0x8d7815=['keys','post','1361085vKeJQf','Error\x20Prepare\x20Data\x20For\x20Deploy','slice','JOB_FILE_NAME','isDirectory','-autoRetryErrors','Error\x20Create\x20Job\x20File','Error\x20Continue\x20Vlocity\x20Pipeline\x20Deploy','toBuffer','119480pyvkHv','join','\x20where\x20Name\x20LIKE\x20\x27%','Error\x20Update\x20Log.\x20No\x20Components\x20to\x20Backup.','/services/apexrest/','657ihIGUb','projectPath:\x20./','-sf.instanceUrl','forEach','\x0aqueries:\x0a','2829472LuLoeQ','Start\x20Continue\x20Vlocity\x20Pipeline\x20Deploy','isStartDeploy','stringify','\x20\x20-\x20VlocityDataPackType:\x20','METHOD_BACKUP_LOG','Error\x20Deploy\x20Data','callChildProcess','vlocity','packExport','End\x20Retrieve\x20Data','then','End\x20Continue\x20Vlocity\x20Pipeline\x20Deploy','14PYZePh','push','length','-job','12OxgXiq','187578OQDyGv','UNZIP_CATALOG_NAME','Start\x20Retrieve\x20Data','DATA_PACK_TYPES_QUERIES_MAP','exports','name','../../../services/child-process','adm-zip','log','Start\x20Create\x20Job\x20File','../../../constants','Start\x20Prepare\x20Data\x20For\x20Deploy','Start\x20Update\x20Log.\x20No\x20Components\x20to\x20Backup.','-sf.accessToken','218SDtCqW','551958AuhSjP','catch','unlocked-packages','appendFileSync','replace','toString','310eNaQey','-maxDepth','base64','65466MZNkjT','zipBuffer','\x20\x20\x20\x20query:\x20Select\x20Id\x20from\x20','End\x20Create\x20Job\x20File'];a10_0x119b=function(){return _0x8d7815;};return a10_0x119b();}function retrieveData(_0x5ad000,_0x5d37ce,_0x1ca43b,_0x49a158){return new Promise((_0x1f25d4,_0xc44bb7)=>{const _0x5b6628=a10_0x450f;try{_0x49a158[_0x5b6628(0xfe)](_0x5b6628(0xf8));const _0xabade5=_0x5b6628(0xec),_0x21cd01=[_0x5b6628(0x103),''+_0x1ca43b,_0x5b6628(0xe1),''+_0x5d37ce,_0x5b6628(0xf4),''+constants[_0x5b6628(0xd4)],_0x5b6628(0xd6),_0x5b6628(0x10c),'0',_0x5b6628(0xed)];_0x49a158['log'](_0x21cd01[_0x5b6628(0xd3)](0x2)[_0x5b6628(0xdb)]('\x20'));const _0x562ff7={'cwd':''+_0x5ad000,'maxBuffer':0x400*0x1f4};childProcess[_0x5b6628(0xeb)](_0xabade5,_0x21cd01,_0x49a158,_0x562ff7)['then'](_0x369d17=>{const _0x1e3827=_0x5b6628;_0x49a158[_0x1e3827(0xfe)](_0x1e3827(0xee)),_0x1f25d4(_0x369d17);})[_0x5b6628(0x106)](_0x2aa1a9=>{const _0x479967=_0x5b6628;_0x49a158[_0x479967(0xfe)]('Error\x20Retrieve\x20Data\x20'+_0x2aa1a9),_0xc44bb7(_0x2aa1a9);});}catch(_0x5c6b88){_0xc44bb7(_0x5c6b88);}});}function prepareDataForDeploy(_0x298928,_0x55f3fa){return new Promise((_0x54418d,_0x301846)=>{const _0x4f1cfa=a10_0x450f;try{_0x55f3fa['log'](_0x4f1cfa(0x101));const _0x238f66=_0x298928+'/'+constants['SOURCE_FOLDER'];let _0x4decc3=new AdmZip();const _0x365fd0=fs['readdirSync'](_0x238f66,{'withFileTypes':!![]}),_0x454e06=[];_0x365fd0['forEach'](_0x435b55=>{const _0x29f77f=_0x4f1cfa;if(_0x435b55[_0x29f77f(0xd5)]()){const _0x310ea2=_0x4decc3['toBuffer']()['toString'](_0x29f77f(0x10d));_0x310ea2[_0x29f77f(0xf3)]>0x1e8480&&(_0x454e06[_0x29f77f(0xf2)](_0x310ea2),_0x4decc3=new AdmZip()),_0x4decc3['addLocalFolder'](_0x238f66+'/'+_0x435b55['name'],_0x435b55[_0x29f77f(0xfb)]);}}),_0x454e06['push'](_0x4decc3[_0x4f1cfa(0xd9)]()[_0x4f1cfa(0x10a)](_0x4f1cfa(0x10d))),_0x55f3fa[_0x4f1cfa(0xfe)]('End\x20Prepare\x20Data\x20For\x20Deploy'),_0x54418d(_0x454e06);}catch(_0x2f7bfe){_0x55f3fa[_0x4f1cfa(0xfe)](_0x4f1cfa(0x115)),_0x301846(_0x2f7bfe);}});}function deployData(_0x126bc2,_0x33f4fb,_0x57ec60,_0x2471a2,_0x2eff39,_0x1b6022,_0x177922,_0x249ee6,_0x588a81){return new Promise((_0x14d008,_0x2626e9)=>{const _0x5a64d7=a10_0x450f;try{_0x588a81['log']('Start\x20Deploy\x20Data'),_0x57ec60=_0x57ec60&&_0x57ec60['length']?_0x57ec60[_0x5a64d7(0x109)]('__','')+'/':'';let _0x39d360={'zipBuffer':'','pipelineId':_0x1b6022,'logId':_0x2471a2,'branchId':_0x249ee6,'pipelineNumber':_0x177922};const _0x3d3136=_0x126bc2+_0x5a64d7(0xde)+_0x57ec60+_0x5a64d7(0x107);let _0xa7856f=Promise['resolve'](),_0x53cad3=0x1;_0x2eff39[_0x5a64d7(0xe2)](_0x2a526d=>{const _0xe7d05a=_0x5a64d7;_0x39d360[_0xe7d05a(0x10f)]=_0x2a526d,_0x39d360[_0xe7d05a(0xe6)]=_0x53cad3===_0x2eff39['length'];const _0x3b0519={'methodType':constants[_0xe7d05a(0xe9)],'body':JSON[_0xe7d05a(0xe7)](_0x39d360)};_0xa7856f=_0xa7856f['then'](()=>postDeploy(_0x3d3136,_0x33f4fb,_0x57ec60,_0x3b0519)),_0x53cad3++;}),_0xa7856f[_0x5a64d7(0xef)](()=>{const _0x1fcdb7=_0x5a64d7;_0x588a81[_0x1fcdb7(0xfe)]('End\x20Deploy\x20Data'),_0x14d008();})[_0x5a64d7(0x106)](_0x4c2e81=>{const _0x4ab7e8=_0x5a64d7;_0x588a81[_0x4ab7e8(0xfe)]('Error\x20Deploy\x20Data'),_0x2626e9(_0x4c2e81);});}catch(_0x4f5c6c){_0x588a81['log'](_0x5a64d7(0xea)),_0x2626e9(_0x4f5c6c);}});}function handleNoComponents(_0x57ccb0,_0x5f104f,_0x10f303,_0x331af4,_0x379a01,_0x53a133,_0xdb9ef6,_0x30bad2){return new Promise((_0x241fd2,_0x202780)=>{const _0x2fdde6=a10_0x450f;try{_0x30bad2[_0x2fdde6(0xfe)](_0x2fdde6(0x102)),_0x10f303=_0x10f303&&_0x10f303[_0x2fdde6(0xf3)]?_0x10f303[_0x2fdde6(0x109)]('__','')+'/':'';let _0x5a8875={'message':'Components\x20not\x20found!','pipelineId':_0x379a01,'logId':_0x331af4,'branchId':_0xdb9ef6,'pipelineNumber':_0x53a133,'isStartDeploy':!![]};const _0x1cf872=_0x57ccb0+_0x2fdde6(0xde)+_0x10f303+_0x2fdde6(0x107),_0x53e4d0={'methodType':constants['METHOD_BACKUP_LOG_ERROR'],'body':JSON['stringify'](_0x5a8875)};postDeploy(_0x1cf872,_0x5f104f,_0x10f303,_0x53e4d0)[_0x2fdde6(0xef)](()=>{_0x30bad2['log']('End\x20Update\x20Log.\x20No\x20Components\x20to\x20Backup.'),_0x241fd2();})[_0x2fdde6(0x106)](_0x426c7a=>{const _0x14ed23=_0x2fdde6;_0x202780(_0x426c7a),_0x30bad2[_0x14ed23(0xfe)]('Error\x20Update\x20Log.\x20No\x20Components\x20to\x20Backup.\x0a');});}catch(_0xa4c27e){_0x30bad2[_0x2fdde6(0xfe)](_0x2fdde6(0xdd)),_0x202780(_0xa4c27e);}});}function postDeploy(_0x41c9d5,_0x584834,_0x3669cf,_0x5ca1e1){return new Promise((_0x5e01e5,_0xe835d5)=>{const _0x8e695d=a10_0x450f;try{http[_0x8e695d(0x113)](_0x41c9d5,_0x584834,_0x3669cf,_0x5ca1e1)[_0x8e695d(0xef)](_0x4cb6f4=>{_0x5e01e5(_0x4cb6f4);})[_0x8e695d(0x106)](_0x45870e=>{const _0x35c457=_0x8e695d;console[_0x35c457(0xfe)](_0x45870e),_0xe835d5(_0x45870e);});}catch(_0x45d827){_0xe835d5(_0x45d827);}});}function callContinuePipelineVlocityDeploy(_0x4be690,_0x4c7201,_0x32f80f,_0x34f590,_0x4268bd,_0x11d797,_0x59d327,_0x233196,_0x954c34){return new Promise((_0x1e9740,_0x25675f)=>{const _0x3ab242=a10_0x450f;try{_0x32f80f=_0x32f80f&&_0x32f80f[_0x3ab242(0xf3)]?_0x32f80f[_0x3ab242(0x109)]('__','')+'/':'',_0x954c34[_0x3ab242(0xfe)](_0x3ab242(0xe5));const _0x58b255={'pipelineId':_0x34f590,'pipelineNumber':_0x4268bd,'logId':_0x233196,'branchId':_0x59d327,'pipelineKey':_0x11d797},_0x5a0d90=_0x4be690+'/services/apexrest/'+_0x32f80f+_0x3ab242(0x107),_0x12c105={'methodType':constants['METHOD_NEXT_VLOCITY_CONTINUE_DEPLOY_STEP'],'body':JSON[_0x3ab242(0xe7)](_0x58b255)};http['post'](_0x5a0d90,_0x4c7201,_0x32f80f,_0x12c105)['then'](_0x1e719c=>{const _0x102cd0=_0x3ab242;_0x954c34[_0x102cd0(0xfe)](_0x102cd0(0xf0)),_0x1e9740(_0x1e719c);})[_0x3ab242(0x106)](_0x569a3b=>{const _0x5afde1=_0x3ab242;_0x954c34['log'](_0x5afde1(0xd8)),_0x25675f(_0x569a3b);});}catch(_0x48e492){_0x25675f(_0x48e492);}});}module[a10_0x501183(0xfa)]={'createJobFileRollback':createJobFileRollback,'retrieveData':retrieveData,'prepareDataForDeploy':prepareDataForDeploy,'deployData':deployData,'handleNoComponents':handleNoComponents,'callContinuePipelineVlocityDeploy':callContinuePipelineVlocityDeploy};