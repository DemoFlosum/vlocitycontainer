const a14_0x36a38d=a14_0x5fc8;(function(_0x415734,_0x39330d){const _0x2a5c1c=a14_0x5fc8,_0x28b4ef=_0x415734();while(!![]){try{const _0x1f90ff=parseInt(_0x2a5c1c(0xa6))/0x1*(parseInt(_0x2a5c1c(0xa5))/0x2)+parseInt(_0x2a5c1c(0xc3))/0x3*(parseInt(_0x2a5c1c(0x89))/0x4)+-parseInt(_0x2a5c1c(0xb6))/0x5+parseInt(_0x2a5c1c(0xad))/0x6+-parseInt(_0x2a5c1c(0x99))/0x7+parseInt(_0x2a5c1c(0xb0))/0x8+parseInt(_0x2a5c1c(0x8f))/0x9;if(_0x1f90ff===_0x39330d)break;else _0x28b4ef['push'](_0x28b4ef['shift']());}catch(_0x47bb73){_0x28b4ef['push'](_0x28b4ef['shift']());}}}(a14_0x4427,0xec20c));function a14_0x5fc8(_0x1f4f7,_0x5dada8){const _0x442781=a14_0x4427();return a14_0x5fc8=function(_0x5fc86d,_0x14b156){_0x5fc86d=_0x5fc86d-0x85;let _0xea884a=_0x442781[_0x5fc86d];return _0xea884a;},a14_0x5fc8(_0x1f4f7,_0x5dada8);}const fs=require('fs'),AdmZip=require(a14_0x36a38d(0xb5)),childProcess=require(a14_0x36a38d(0xc2)),constants=require(a14_0x36a38d(0xa2)),http=require(a14_0x36a38d(0xbf));function createJobFileRollback(_0x433f5c,_0x550c9a,_0x22a427,_0x2aa5ad){return new Promise((_0x5efbe5,_0x1e22f6)=>{const _0x5409f0=a14_0x5fc8;try{_0x2aa5ad[_0x5409f0(0x8b)](_0x5409f0(0x87));let _0x22d93f=_0x5409f0(0x9b)+constants[_0x5409f0(0x8c)]+'\x0aqueries:\x0a';Object[_0x5409f0(0xb8)](_0x550c9a)[_0x5409f0(0x9a)](_0x3e0a6a=>{const _0x175bfc=_0x5409f0;_0x550c9a[_0x3e0a6a][_0x175bfc(0x9a)](_0x89148b=>{constants['DATA_PACK_TYPES_QUERIES_MAP'][_0x3e0a6a]['forEach'](_0xb482f9=>{const _0x10ec08=a14_0x5fc8;_0x22d93f+=_0x10ec08(0xc4)+_0x3e0a6a+'\x0a',_0x22d93f+=_0x10ec08(0xba)+_0xb482f9+_0x10ec08(0xa8)+_0x89148b+_0x10ec08(0x95);});});}),fs['appendFileSync'](_0x433f5c+'/'+constants[_0x5409f0(0xc1)],_0x22d93f),_0x2aa5ad[_0x5409f0(0x8b)](_0x5409f0(0xb3)),_0x5efbe5();}catch(_0x54148a){_0x2aa5ad['log'](_0x5409f0(0xaa)),_0x1e22f6(_0x54148a);}});}function retrieveData(_0x2cb2c7,_0x2ae3ad,_0x520763,_0x269b4f){return new Promise((_0x1f4e83,_0x1d50eb)=>{const _0x4685aa=a14_0x5fc8;try{_0x269b4f[_0x4685aa(0x8b)]('Start\x20Retrieve\x20Data');const _0x18aeab=_0x4685aa(0x96),_0x53c3c0=['-sf.accessToken',''+_0x520763,_0x4685aa(0xa4),''+_0x2ae3ad,_0x4685aa(0x92),''+constants['JOB_FILE_NAME'],_0x4685aa(0xa0),_0x4685aa(0x88),'0','packExport'];_0x269b4f[_0x4685aa(0x8b)](_0x53c3c0[_0x4685aa(0xac)](0x2)[_0x4685aa(0xa9)]('\x20'));const _0x5191de={'cwd':''+_0x2cb2c7,'maxBuffer':0x400*0x1f4};childProcess['callChildProcess'](_0x18aeab,_0x53c3c0,_0x269b4f,_0x5191de)['then'](_0x1005d4=>{const _0x4a82ea=_0x4685aa;_0x269b4f[_0x4a82ea(0x8b)](_0x4a82ea(0xb4)),_0x1f4e83(_0x1005d4);})[_0x4685aa(0x90)](_0xa96348=>{const _0x1680b2=_0x4685aa;_0x269b4f[_0x1680b2(0x8b)](_0x1680b2(0x86)+_0xa96348),_0x1d50eb(_0xa96348);});}catch(_0x471a65){_0x1d50eb(_0x471a65);}});}function prepareDataForDeploy(_0x59372a,_0x32b794){return new Promise((_0x3711b4,_0x5d0826)=>{const _0x24c468=a14_0x5fc8;try{_0x32b794[_0x24c468(0x8b)]('Start\x20Prepare\x20Data\x20For\x20Deploy');const _0x203bb6=_0x59372a+'/'+constants['SOURCE_FOLDER'];let _0x18c8c4=new AdmZip();const _0x4a4ed8=fs[_0x24c468(0xb9)](_0x203bb6,{'withFileTypes':!![]}),_0x8a5dd3=[];_0x4a4ed8['forEach'](_0x1d87d1=>{const _0x508c20=_0x24c468;if(_0x1d87d1[_0x508c20(0xae)]()){const _0x294f09=_0x18c8c4[_0x508c20(0xbb)]()[_0x508c20(0x8e)](_0x508c20(0xa3));_0x294f09[_0x508c20(0x93)]>0x1e8480&&(_0x8a5dd3[_0x508c20(0x9f)](_0x294f09),_0x18c8c4=new AdmZip()),_0x18c8c4[_0x508c20(0x9d)](_0x203bb6+'/'+_0x1d87d1[_0x508c20(0x8d)],_0x1d87d1[_0x508c20(0x8d)]);}}),_0x8a5dd3[_0x24c468(0x9f)](_0x18c8c4[_0x24c468(0xbb)]()['toString'](_0x24c468(0xa3))),_0x32b794[_0x24c468(0x8b)](_0x24c468(0xbd)),_0x3711b4(_0x8a5dd3);}catch(_0x5ab104){_0x32b794[_0x24c468(0x8b)]('Error\x20Prepare\x20Data\x20For\x20Deploy'),_0x5d0826(_0x5ab104);}});}function deployData(_0x4ae17a,_0x808790,_0x4e77f9,_0x579322,_0x3c31d4,_0x5da84c,_0x1636e3,_0x233b88){return new Promise((_0x4c375f,_0x2f3c35)=>{const _0x11e0b0=a14_0x5fc8;try{_0x233b88[_0x11e0b0(0x8b)](_0x11e0b0(0xa1));const _0x188a54={'zipBuffer':'','pipelineId':_0x3c31d4,'logId':_0x4e77f9,'branchId':_0x1636e3,'pipelineNumber':_0x5da84c};let _0x4fe4a4=Promise['resolve'](),_0x1e9d37=0x1;_0x579322[_0x11e0b0(0x9a)](_0x24192b=>{const _0x5594ba=_0x11e0b0;_0x188a54[_0x5594ba(0x85)]=_0x24192b,_0x188a54['isStartDeploy']=_0x1e9d37===_0x579322[_0x5594ba(0x93)];const _0x59460a={'methodType':constants[_0x5594ba(0xc0)],'body':JSON['stringify'](_0x188a54)};_0x4fe4a4=_0x4fe4a4[_0x5594ba(0xb7)](()=>postDeploy(_0x4ae17a,_0x808790,_0x59460a)),_0x1e9d37++;}),_0x4fe4a4[_0x11e0b0(0xb7)](()=>{const _0xc662b0=_0x11e0b0;_0x233b88[_0xc662b0(0x8b)]('End\x20Deploy\x20Data'),_0x4c375f();})[_0x11e0b0(0x90)](_0x19799a=>{_0x233b88['log']('Error\x20Deploy\x20Data'),_0x2f3c35(_0x19799a);});}catch(_0x4600ea){_0x233b88[_0x11e0b0(0x8b)](_0x11e0b0(0x8a)),_0x2f3c35(_0x4600ea);}});}function handleNoComponents(_0x2da4f0,_0x1d65f3,_0x48fc44,_0x110bf5,_0x5dfd76,_0x7830ec,_0x128831,_0x401281){return new Promise((_0x4742d2,_0x3a5cff)=>{const _0x3e024e=a14_0x5fc8;try{_0x401281[_0x3e024e(0x8b)](_0x3e024e(0xab)),_0x48fc44=_0x48fc44&&_0x48fc44[_0x3e024e(0x93)]?_0x48fc44[_0x3e024e(0xaf)]('__','')+'/':'';const _0x5110ad={'message':_0x3e024e(0x9c),'pipelineId':_0x5dfd76,'logId':_0x110bf5,'branchId':_0x128831,'pipelineNumber':_0x7830ec,'isStartDeploy':!![]},_0x2d22e1=_0x2da4f0+'/services/apexrest/'+_0x48fc44+_0x3e024e(0xbc),_0x4d03a1={'methodType':constants[_0x3e024e(0x9e)],'body':JSON[_0x3e024e(0x97)](_0x5110ad)};postDeploy(_0x2d22e1,_0x1d65f3,_0x48fc44,_0x4d03a1)[_0x3e024e(0xb7)](()=>{const _0x2e115c=_0x3e024e;_0x401281['log'](_0x2e115c(0x94)),_0x4742d2();})['catch'](_0x17e475=>{const _0x4accd2=_0x3e024e;_0x3a5cff(_0x17e475),_0x401281[_0x4accd2(0x8b)]('Error\x20Update\x20Log.\x20No\x20Components\x20to\x20Backup.\x0a');});}catch(_0x4ed9a6){_0x401281[_0x3e024e(0x8b)](_0x3e024e(0x98)),_0x3a5cff(_0x4ed9a6);}});}function postDeploy(_0x3ec047,_0x20746e,_0x2444dd){return new Promise((_0x217e71,_0x494a2d)=>{const _0xe63e07=a14_0x5fc8;try{http[_0xe63e07(0xbe)](_0x3ec047,_0x20746e,_0x2444dd)[_0xe63e07(0xb7)](_0x211ae6=>{_0x217e71(_0x211ae6);})['catch'](_0x20b1f9=>{console['log'](_0x20b1f9),_0x494a2d(_0x20b1f9);});}catch(_0x14de3d){_0x494a2d(_0x14de3d);}});}function callContinuePipelineVlocityDeploy(_0x4e6720,_0x297cab,_0x725861,_0x4f034d,_0xa523ec,_0x37e54f,_0x52f33d,_0x1268a0){return new Promise((_0x41d950,_0x3e54eb)=>{const _0x4207b6=a14_0x5fc8;try{_0x297cab=_0x297cab&&_0x297cab['length']?_0x297cab[_0x4207b6(0xaf)]('__','')+'/':'',_0x1268a0[_0x4207b6(0x8b)](_0x4207b6(0xa7));const _0x318ae4={'pipelineId':_0x725861,'pipelineNumber':_0x4f034d,'logId':_0x52f33d,'branchId':_0x37e54f,'pipelineKey':_0xa523ec},_0x828eca={'methodType':constants[_0x4207b6(0xb1)],'body':JSON[_0x4207b6(0x97)](_0x318ae4)};http[_0x4207b6(0xbe)](_0x4e6720,_0x297cab,_0x828eca)[_0x4207b6(0xb7)](_0x385d54=>{_0x1268a0['log']('End\x20Continue\x20Vlocity\x20Pipeline\x20Deploy'),_0x41d950(_0x385d54);})[_0x4207b6(0x90)](_0x391148=>{const _0x2c9ec2=_0x4207b6;_0x1268a0[_0x2c9ec2(0x8b)](_0x2c9ec2(0xb2)),_0x3e54eb(_0x391148);});}catch(_0x490e54){_0x3e54eb(_0x490e54);}});}function a14_0x4427(){const _0x5c7926=['../../../services/child-process','3771WyHsKO','\x20\x20-\x20VlocityDataPackType:\x20','zipBuffer','Error\x20Retrieve\x20Data\x20','Start\x20Create\x20Job\x20File','-maxDepth','132jEsCQf','Error\x20Deploy\x20Data','log','UNZIP_CATALOG_NAME','name','toString','16354521vymFQz','catch','exports','-job','length','End\x20Update\x20Log.\x20No\x20Components\x20to\x20Backup.','%\x27\x0a','vlocity','stringify','Error\x20Update\x20Log.\x20No\x20Components\x20to\x20Backup.','13040860PUuqPK','forEach','projectPath:\x20./','Components\x20not\x20found!','addLocalFolder','METHOD_BACKUP_LOG_ERROR','push','-autoRetryErrors','Start\x20Deploy\x20Data','../../../constants','base64','-sf.instanceUrl','27518ADrMjL','47nxyRoo','Start\x20Continue\x20Vlocity\x20Pipeline\x20Deploy','\x20where\x20Name\x20LIKE\x20\x27%','join','Error\x20Create\x20Job\x20File','Start\x20Update\x20Log.\x20No\x20Components\x20to\x20Backup.','slice','708144TYUMHb','isDirectory','replace','10390552IUuPhl','METHOD_NEXT_VLOCITY_CONTINUE_DEPLOY_STEP','Error\x20Continue\x20Vlocity\x20Pipeline\x20Deploy','End\x20Create\x20Job\x20File','End\x20Retrieve\x20Data','adm-zip','5460030BRarqw','then','keys','readdirSync','\x20\x20\x20\x20query:\x20Select\x20Id\x20from\x20','toBuffer','unlocked-packages','End\x20Prepare\x20Data\x20For\x20Deploy','post','../../../services/http','METHOD_BACKUP_LOG','JOB_FILE_NAME'];a14_0x4427=function(){return _0x5c7926;};return a14_0x4427();}module[a14_0x36a38d(0x91)]={'createJobFileRollback':createJobFileRollback,'retrieveData':retrieveData,'prepareDataForDeploy':prepareDataForDeploy,'deployData':deployData,'handleNoComponents':handleNoComponents,'callContinuePipelineVlocityDeploy':callContinuePipelineVlocityDeploy};