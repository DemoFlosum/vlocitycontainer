function a10_0x477c(_0x2b5870,_0x319b10){const _0x7fd74a=a10_0x7fd7();return a10_0x477c=function(_0x477c18,_0x6a8652){_0x477c18=_0x477c18-0x185;let _0x15f768=_0x7fd74a[_0x477c18];return _0x15f768;},a10_0x477c(_0x2b5870,_0x319b10);}const a10_0x5af487=a10_0x477c;(function(_0x34c49e,_0x3f222a){const _0x5603aa=a10_0x477c,_0x214d82=_0x34c49e();while(!![]){try{const _0x3055df=-parseInt(_0x5603aa(0x189))/0x1*(parseInt(_0x5603aa(0x1ab))/0x2)+-parseInt(_0x5603aa(0x191))/0x3*(parseInt(_0x5603aa(0x1b1))/0x4)+parseInt(_0x5603aa(0x19f))/0x5+parseInt(_0x5603aa(0x1be))/0x6*(-parseInt(_0x5603aa(0x1ac))/0x7)+parseInt(_0x5603aa(0x1af))/0x8+parseInt(_0x5603aa(0x1a8))/0x9*(-parseInt(_0x5603aa(0x1c7))/0xa)+parseInt(_0x5603aa(0x1c8))/0xb;if(_0x3055df===_0x3f222a)break;else _0x214d82['push'](_0x214d82['shift']());}catch(_0x11194f){_0x214d82['push'](_0x214d82['shift']());}}}(a10_0x7fd7,0x92cb7));const fs=require('fs'),AdmZip=require(a10_0x5af487(0x1b0)),childProcess=require(a10_0x5af487(0x18d)),constants=require(a10_0x5af487(0x18b)),http=require('../../../services/http');function createJobFileRollback(_0x3fe23a,_0x265adf,_0x472113,_0x8b9c85){return new Promise((_0x30c593,_0xba80ef)=>{const _0x4ffba0=a10_0x477c;try{_0x8b9c85[_0x4ffba0(0x18f)]('Start\x20Create\x20Job\x20File');let _0x5b5c62='projectPath:\x20./'+constants[_0x4ffba0(0x1ba)]+_0x4ffba0(0x1bd);Object[_0x4ffba0(0x1c2)](_0x265adf)['forEach'](_0x29addc=>{const _0x494ceb=_0x4ffba0;_0x265adf[_0x29addc][_0x494ceb(0x18e)](_0x2f8811=>{const _0x316d26=_0x494ceb;constants[_0x316d26(0x199)][_0x29addc][_0x316d26(0x18e)](_0x44eae3=>{const _0x52ca71=_0x316d26;_0x5b5c62+=_0x52ca71(0x1bc)+_0x29addc+'\x0a',_0x5b5c62+=_0x52ca71(0x185)+_0x44eae3+_0x52ca71(0x1b3)+_0x2f8811+_0x52ca71(0x1a2);});});}),fs[_0x4ffba0(0x196)](_0x3fe23a+'/'+constants['JOB_FILE_NAME'],_0x5b5c62),_0x8b9c85[_0x4ffba0(0x18f)](_0x4ffba0(0x1a5)),_0x30c593();}catch(_0x4783f5){_0x8b9c85[_0x4ffba0(0x18f)]('Error\x20Create\x20Job\x20File'),_0xba80ef(_0x4783f5);}});}function retrieveData(_0xcbc71d,_0xa3834b,_0x300eff,_0x132592){return new Promise((_0x20374f,_0x4cfbe6)=>{const _0x1f2ddd=a10_0x477c;try{_0x132592[_0x1f2ddd(0x18f)]('Start\x20Retrieve\x20Data');const _0x277c21='vlocity',_0x115e20=[_0x1f2ddd(0x19a),''+_0x300eff,_0x1f2ddd(0x1a4),''+_0xa3834b,'-job',''+constants[_0x1f2ddd(0x1c6)],_0x1f2ddd(0x1c0),_0x1f2ddd(0x197),'0','packExport'];_0x132592[_0x1f2ddd(0x18f)](_0x115e20[_0x1f2ddd(0x1b5)](0x2)[_0x1f2ddd(0x1a7)]('\x20'));const _0xd5a08e={'cwd':''+_0xcbc71d,'maxBuffer':0x400*0x1f4};childProcess[_0x1f2ddd(0x1b7)](_0x277c21,_0x115e20,_0x132592,_0xd5a08e)[_0x1f2ddd(0x1bb)](_0x55ba38=>{const _0x5e7990=_0x1f2ddd;_0x132592[_0x5e7990(0x18f)](_0x5e7990(0x1c1)),_0x20374f(_0x55ba38);})['catch'](_0x30308a=>{const _0x2761ae=_0x1f2ddd;_0x132592['log'](_0x2761ae(0x1b9)+_0x30308a),_0x4cfbe6(_0x30308a);});}catch(_0x393b7f){_0x4cfbe6(_0x393b7f);}});}function prepareDataForDeploy(_0x2b85a0,_0x3247c7){return new Promise((_0x599430,_0x31a8da)=>{const _0xb289e6=a10_0x477c;try{_0x3247c7[_0xb289e6(0x18f)](_0xb289e6(0x190));const _0x1d3630=_0x2b85a0+'/'+constants['SOURCE_FOLDER'];let _0x12a52f=new AdmZip();const _0x4a3315=fs[_0xb289e6(0x1a1)](_0x1d3630,{'withFileTypes':!![]}),_0x2d10ac=[];_0x4a3315[_0xb289e6(0x18e)](_0xd09885=>{const _0xaa9bd6=_0xb289e6;if(_0xd09885[_0xaa9bd6(0x19c)]()){const _0x1cd8de=_0x12a52f[_0xaa9bd6(0x1a6)]()[_0xaa9bd6(0x1a9)](_0xaa9bd6(0x1c5));_0x1cd8de[_0xaa9bd6(0x1a3)]>0x1e8480&&(_0x2d10ac[_0xaa9bd6(0x1c9)](_0x1cd8de),_0x12a52f=new AdmZip()),_0x12a52f[_0xaa9bd6(0x19b)](_0x1d3630+'/'+_0xd09885[_0xaa9bd6(0x19e)],_0xd09885[_0xaa9bd6(0x19e)]);}}),_0x2d10ac[_0xb289e6(0x1c9)](_0x12a52f[_0xb289e6(0x1a6)]()[_0xb289e6(0x1a9)](_0xb289e6(0x1c5))),_0x3247c7[_0xb289e6(0x18f)](_0xb289e6(0x1bf)),_0x599430(_0x2d10ac);}catch(_0x203519){_0x3247c7[_0xb289e6(0x18f)](_0xb289e6(0x198)),_0x31a8da(_0x203519);}});}function deployData(_0x358e81,_0x20074c,_0x381b70,_0x1f2b37,_0x4bdc67,_0x25c313,_0x19d341,_0x47d063,_0x9101d9){return new Promise((_0x511a20,_0x456d16)=>{const _0x1b967e=a10_0x477c;try{_0x9101d9['log'](_0x1b967e(0x18a)),_0x381b70=_0x381b70&&_0x381b70['length']?_0x381b70['replace']('__','')+'/':'';let _0x86ae88={'zipBuffer':'','pipelineId':_0x25c313,'logId':_0x1f2b37,'branchId':_0x47d063,'pipelineNumber':_0x19d341};const _0x5be1ed=_0x358e81+_0x1b967e(0x1a0)+_0x381b70+_0x1b967e(0x186);let _0x5d30a9=Promise[_0x1b967e(0x188)](),_0x1dee0b=0x1;_0x4bdc67[_0x1b967e(0x18e)](_0xb4d1d6=>{const _0x5d0eac=_0x1b967e;_0x86ae88[_0x5d0eac(0x1c3)]=_0xb4d1d6,_0x86ae88[_0x5d0eac(0x18c)]=_0x1dee0b===_0x4bdc67[_0x5d0eac(0x1a3)];const _0x5257b5={'methodType':constants['METHOD_BACKUP_LOG'],'body':JSON[_0x5d0eac(0x1ad)](_0x86ae88)};_0x5d30a9=_0x5d30a9['then'](()=>postDeploy(_0x5be1ed,_0x20074c,_0x381b70,_0x5257b5)),_0x1dee0b++;}),_0x5d30a9[_0x1b967e(0x1bb)](()=>{_0x9101d9['log']('End\x20Deploy\x20Data'),_0x511a20();})[_0x1b967e(0x1b4)](_0xa9141f=>{const _0x787a4a=_0x1b967e;_0x9101d9[_0x787a4a(0x18f)](_0x787a4a(0x1ae)),_0x456d16(_0xa9141f);});}catch(_0x5eb1cf){_0x9101d9[_0x1b967e(0x18f)](_0x1b967e(0x1ae)),_0x456d16(_0x5eb1cf);}});}function a10_0x7fd7(){const _0x536e21=['catch','slice','replace','callChildProcess','METHOD_BACKUP_LOG_ERROR','Error\x20Retrieve\x20Data\x20','UNZIP_CATALOG_NAME','then','\x20\x20-\x20VlocityDataPackType:\x20','\x0aqueries:\x0a','6YGwPge','End\x20Prepare\x20Data\x20For\x20Deploy','-autoRetryErrors','End\x20Retrieve\x20Data','keys','zipBuffer','Components\x20not\x20found!','base64','JOB_FILE_NAME','296550feYDnK','19053309amSOJO','push','\x20\x20\x20\x20query:\x20Select\x20Id\x20from\x20','unlocked-packages','End\x20Continue\x20Vlocity\x20Pipeline\x20Deploy','resolve','67eVodAD','Start\x20Deploy\x20Data','../../../constants','isStartDeploy','../../../services/child-process','forEach','log','Start\x20Prepare\x20Data\x20For\x20Deploy','558531QtcfFU','End\x20Update\x20Log.\x20No\x20Components\x20to\x20Backup.','Start\x20Update\x20Log.\x20No\x20Components\x20to\x20Backup.','METHOD_NEXT_VLOCITY_CONTINUE_DEPLOY_STEP','exports','appendFileSync','-maxDepth','Error\x20Prepare\x20Data\x20For\x20Deploy','DATA_PACK_TYPES_QUERIES_MAP','-sf.accessToken','addLocalFolder','isDirectory','Start\x20Continue\x20Vlocity\x20Pipeline\x20Deploy','name','1098230yCgGhx','/services/apexrest/','readdirSync','%\x27\x0a','length','-sf.instanceUrl','End\x20Create\x20Job\x20File','toBuffer','join','45kYgrlb','toString','Error\x20Update\x20Log.\x20No\x20Components\x20to\x20Backup.\x0a','16334eOcZwI','7561918UahAsE','stringify','Error\x20Deploy\x20Data','4891368pPqrDt','adm-zip','4bLQZHP','post','\x20where\x20Name\x20LIKE\x20\x27%'];a10_0x7fd7=function(){return _0x536e21;};return a10_0x7fd7();}function handleNoComponents(_0x324c0e,_0x34d794,_0x15560b,_0x15ed0c,_0x4caa08,_0x22b0a6,_0x235583,_0x5f0aef){return new Promise((_0x51cdbf,_0x540225)=>{const _0x443803=a10_0x477c;try{_0x5f0aef[_0x443803(0x18f)](_0x443803(0x193)),_0x15560b=_0x15560b&&_0x15560b[_0x443803(0x1a3)]?_0x15560b[_0x443803(0x1b6)]('__','')+'/':'';let _0x4fb4c7={'message':_0x443803(0x1c4),'pipelineId':_0x4caa08,'logId':_0x15ed0c,'branchId':_0x235583,'pipelineNumber':_0x22b0a6,'isStartDeploy':!![]};const _0x24af65=_0x324c0e+'/services/apexrest/'+_0x15560b+_0x443803(0x186),_0x21396a={'methodType':constants[_0x443803(0x1b8)],'body':JSON[_0x443803(0x1ad)](_0x4fb4c7)};postDeploy(_0x24af65,_0x34d794,_0x15560b,_0x21396a)[_0x443803(0x1bb)](()=>{const _0xdd3cc8=_0x443803;_0x5f0aef[_0xdd3cc8(0x18f)](_0xdd3cc8(0x192)),_0x51cdbf();})[_0x443803(0x1b4)](_0x2db7ff=>{const _0x5684a9=_0x443803;_0x540225(_0x2db7ff),_0x5f0aef['log'](_0x5684a9(0x1aa));});}catch(_0x57b2e3){_0x5f0aef[_0x443803(0x18f)]('Error\x20Update\x20Log.\x20No\x20Components\x20to\x20Backup.'),_0x540225(_0x57b2e3);}});}function postDeploy(_0x340a6c,_0x430be3,_0xd2c9bf,_0x67d769){return new Promise((_0x35dad2,_0x496c85)=>{const _0x551bde=a10_0x477c;try{http['post'](_0x340a6c,_0x430be3,_0xd2c9bf,_0x67d769)[_0x551bde(0x1bb)](_0x4d1fbc=>{_0x35dad2(_0x4d1fbc);})['catch'](_0x12446e=>{const _0x4b998d=_0x551bde;console[_0x4b998d(0x18f)](_0x12446e),_0x496c85(_0x12446e);});}catch(_0x4f8cbe){_0x496c85(_0x4f8cbe);}});}function callContinuePipelineVlocityDeploy(_0x51186c,_0x5e9a45,_0x55e449,_0x218ecc,_0x225828,_0xe20cd6,_0x3c6040,_0x1f75cd,_0x653ba2){return new Promise((_0x5da99f,_0x4818ed)=>{const _0x48dc24=a10_0x477c;try{_0x55e449=_0x55e449&&_0x55e449[_0x48dc24(0x1a3)]?_0x55e449[_0x48dc24(0x1b6)]('__','')+'/':'',_0x653ba2[_0x48dc24(0x18f)](_0x48dc24(0x19d));const _0x46ab3c={'pipelineId':_0x218ecc,'pipelineNumber':_0x225828,'logId':_0x1f75cd,'branchId':_0x3c6040,'pipelineKey':_0xe20cd6},_0x1fc8cd=_0x51186c+_0x48dc24(0x1a0)+_0x55e449+_0x48dc24(0x186),_0x4fd1be={'methodType':constants[_0x48dc24(0x194)],'body':JSON[_0x48dc24(0x1ad)](_0x46ab3c)};http[_0x48dc24(0x1b2)](_0x1fc8cd,_0x5e9a45,_0x55e449,_0x4fd1be)[_0x48dc24(0x1bb)](_0x4b185d=>{const _0x238fb9=_0x48dc24;_0x653ba2[_0x238fb9(0x18f)](_0x238fb9(0x187)),_0x5da99f(_0x4b185d);})[_0x48dc24(0x1b4)](_0x3039a2=>{_0x653ba2['log']('Error\x20Continue\x20Vlocity\x20Pipeline\x20Deploy'),_0x4818ed(_0x3039a2);});}catch(_0x2b3717){_0x4818ed(_0x2b3717);}});}module[a10_0x5af487(0x195)]={'createJobFileRollback':createJobFileRollback,'retrieveData':retrieveData,'prepareDataForDeploy':prepareDataForDeploy,'deployData':deployData,'handleNoComponents':handleNoComponents,'callContinuePipelineVlocityDeploy':callContinuePipelineVlocityDeploy};