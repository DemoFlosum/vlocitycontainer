const a10_0x48a8e9=a10_0x2ba1;function a10_0x1356(){const _0x4f3534=['../../../services/child-process','Error\x20Deploy\x20Data','End\x20Continue\x20Vlocity\x20Pipeline\x20Deploy','-maxDepth','SOURCE_FOLDER','65970ybkfBn','vlocity','isStartDeploy','keys','name','forEach','then','End\x20Retrieve\x20Data','753VJsnLo','-sf.accessToken','End\x20Deploy\x20Data','JOB_FILE_NAME','3058391MeHzRb','17872646rtbKVT','METHOD_BACKUP_LOG','catch','join','resolve','DATA_PACK_TYPES_QUERIES_MAP','12AlJpom','Start\x20Deploy\x20Data','792sLuKeN','Error\x20Update\x20Log.\x20No\x20Components\x20to\x20Backup.','Error\x20Retrieve\x20Data\x20','unlocked-packages','post','Error\x20Create\x20Job\x20File','\x20where\x20Name\x20LIKE\x20\x27%','zipBuffer','33798FoMRrb','length','End\x20Update\x20Log.\x20No\x20Components\x20to\x20Backup.','push','replace','-sf.instanceUrl','isDirectory','Start\x20Create\x20Job\x20File','Start\x20Retrieve\x20Data','Start\x20Update\x20Log.\x20No\x20Components\x20to\x20Backup.','toString','base64','Error\x20Continue\x20Vlocity\x20Pipeline\x20Deploy','/services/apexrest/','-job','projectPath:\x20./','\x0aqueries:\x0a','3032050scXEQg','Error\x20Update\x20Log.\x20No\x20Components\x20to\x20Backup.\x0a','168RnWJJA','slice','Error\x20Prepare\x20Data\x20For\x20Deploy','-autoRetryErrors','toBuffer','%\x27\x0a','\x20\x20\x20\x20query:\x20Select\x20Id\x20from\x20','3396420GXwnuy','appendFileSync','Start\x20Prepare\x20Data\x20For\x20Deploy','callChildProcess','Components\x20not\x20found!','stringify','log','../../../constants','METHOD_BACKUP_LOG_ERROR','6lfwNwq','METHOD_NEXT_VLOCITY_CONTINUE_DEPLOY_STEP'];a10_0x1356=function(){return _0x4f3534;};return a10_0x1356();}(function(_0x57029b,_0x348c31){const _0x1b26fb=a10_0x2ba1,_0x4758ef=_0x57029b();while(!![]){try{const _0x1140da=-parseInt(_0x1b26fb(0x209))/0x1*(-parseInt(_0x1b26fb(0x1e5))/0x2)+-parseInt(_0x1b26fb(0x1f4))/0x3*(parseInt(_0x1b26fb(0x201))/0x4)+parseInt(_0x1b26fb(0x1dc))/0x5+-parseInt(_0x1b26fb(0x1ff))/0x6*(-parseInt(_0x1b26fb(0x1f8))/0x7)+-parseInt(_0x1b26fb(0x1d5))/0x8*(-parseInt(_0x1b26fb(0x1ec))/0x9)+parseInt(_0x1b26fb(0x1d3))/0xa+-parseInt(_0x1b26fb(0x1f9))/0xb;if(_0x1140da===_0x348c31)break;else _0x4758ef['push'](_0x4758ef['shift']());}catch(_0x4f2106){_0x4758ef['push'](_0x4758ef['shift']());}}}(a10_0x1356,0x6aba3));const fs=require('fs'),AdmZip=require('adm-zip'),childProcess=require(a10_0x48a8e9(0x1e7)),constants=require(a10_0x48a8e9(0x1e3)),http=require('../../../services/http');function createJobFileRollback(_0x591e78,_0xe39751,_0x4eba00,_0x4897d9){return new Promise((_0x5778ab,_0x4a7c82)=>{const _0x4debf3=a10_0x2ba1;try{_0x4897d9['log'](_0x4debf3(0x210));let _0x3d4964=_0x4debf3(0x218)+constants['UNZIP_CATALOG_NAME']+_0x4debf3(0x219);Object[_0x4debf3(0x1ef)](_0xe39751)['forEach'](_0x359184=>{const _0x4c7ffe=_0x4debf3;_0xe39751[_0x359184][_0x4c7ffe(0x1f1)](_0x47dda6=>{const _0xe19b75=_0x4c7ffe;constants[_0xe19b75(0x1fe)][_0x359184][_0xe19b75(0x1f1)](_0x5886ee=>{const _0xba8383=_0xe19b75;_0x3d4964+='\x20\x20-\x20VlocityDataPackType:\x20'+_0x359184+'\x0a',_0x3d4964+=_0xba8383(0x1db)+_0x5886ee+_0xba8383(0x207)+_0x47dda6+_0xba8383(0x1da);});});}),fs[_0x4debf3(0x1dd)](_0x591e78+'/'+constants[_0x4debf3(0x1f7)],_0x3d4964),_0x4897d9[_0x4debf3(0x1e2)]('End\x20Create\x20Job\x20File'),_0x5778ab();}catch(_0x407d5d){_0x4897d9[_0x4debf3(0x1e2)](_0x4debf3(0x206)),_0x4a7c82(_0x407d5d);}});}function a10_0x2ba1(_0x14d00b,_0x368b91){const _0x1356fe=a10_0x1356();return a10_0x2ba1=function(_0x2ba173,_0x2e034e){_0x2ba173=_0x2ba173-0x1d3;let _0xaa73ea=_0x1356fe[_0x2ba173];return _0xaa73ea;},a10_0x2ba1(_0x14d00b,_0x368b91);}function retrieveData(_0x39e8f0,_0x2918b3,_0xeec1d0,_0x5695b1){return new Promise((_0x8cc2f8,_0x1c749a)=>{const _0x33d527=a10_0x2ba1;try{_0x5695b1[_0x33d527(0x1e2)](_0x33d527(0x211));const _0x476400=_0x33d527(0x1ed),_0x274757=[_0x33d527(0x1f5),''+_0xeec1d0,_0x33d527(0x20e),''+_0x2918b3,_0x33d527(0x217),''+constants[_0x33d527(0x1f7)],_0x33d527(0x1d8),_0x33d527(0x1ea),'0','packExport'];_0x5695b1[_0x33d527(0x1e2)](_0x274757[_0x33d527(0x1d6)](0x2)[_0x33d527(0x1fc)]('\x20'));const _0x48436a={'cwd':''+_0x39e8f0,'maxBuffer':0x400*0x1f4};childProcess[_0x33d527(0x1df)](_0x476400,_0x274757,_0x5695b1,_0x48436a)[_0x33d527(0x1f2)](_0x434916=>{const _0x5043b4=_0x33d527;_0x5695b1[_0x5043b4(0x1e2)](_0x5043b4(0x1f3)),_0x8cc2f8(_0x434916);})[_0x33d527(0x1fb)](_0x1963f9=>{const _0x470d44=_0x33d527;_0x5695b1['log'](_0x470d44(0x203)+_0x1963f9),_0x1c749a(_0x1963f9);});}catch(_0x174d71){_0x1c749a(_0x174d71);}});}function prepareDataForDeploy(_0x151d03,_0x20c6cc){return new Promise((_0x42a84c,_0x463b98)=>{const _0x2252eb=a10_0x2ba1;try{_0x20c6cc[_0x2252eb(0x1e2)](_0x2252eb(0x1de));const _0x5b14d3=_0x151d03+'/'+constants[_0x2252eb(0x1eb)];let _0x44266c=new AdmZip();const _0x2fe85a=fs['readdirSync'](_0x5b14d3,{'withFileTypes':!![]}),_0x3fd314=[];_0x2fe85a['forEach'](_0xa56812=>{const _0x32c7c1=_0x2252eb;if(_0xa56812[_0x32c7c1(0x20f)]()){const _0x5b12fd=_0x44266c[_0x32c7c1(0x1d9)]()[_0x32c7c1(0x213)](_0x32c7c1(0x214));_0x5b12fd[_0x32c7c1(0x20a)]>0x1e8480&&(_0x3fd314[_0x32c7c1(0x20c)](_0x5b12fd),_0x44266c=new AdmZip()),_0x44266c['addLocalFolder'](_0x5b14d3+'/'+_0xa56812[_0x32c7c1(0x1f0)],_0xa56812[_0x32c7c1(0x1f0)]);}}),_0x3fd314[_0x2252eb(0x20c)](_0x44266c[_0x2252eb(0x1d9)]()['toString'](_0x2252eb(0x214))),_0x20c6cc[_0x2252eb(0x1e2)]('End\x20Prepare\x20Data\x20For\x20Deploy'),_0x42a84c(_0x3fd314);}catch(_0x4473d0){_0x20c6cc[_0x2252eb(0x1e2)](_0x2252eb(0x1d7)),_0x463b98(_0x4473d0);}});}function deployData(_0x5c6c97,_0x1df4f7,_0x42915b,_0xdbdda8,_0x4ba648,_0x9ff1e2,_0x14b898,_0x4b503c,_0xf746d){return new Promise((_0x255a8e,_0x182490)=>{const _0x35f259=a10_0x2ba1;try{_0xf746d['log'](_0x35f259(0x200)),_0x42915b=_0x42915b&&_0x42915b[_0x35f259(0x20a)]?_0x42915b[_0x35f259(0x20d)]('__','')+'/':'';let _0x45377b={'zipBuffer':'','pipelineId':_0x9ff1e2,'logId':_0xdbdda8,'branchId':_0x4b503c,'pipelineNumber':_0x14b898};const _0x429064=_0x5c6c97+_0x35f259(0x216)+_0x42915b+_0x35f259(0x204);let _0x19b599=Promise[_0x35f259(0x1fd)](),_0x4292ab=0x1;_0x4ba648[_0x35f259(0x1f1)](_0x50fbed=>{const _0x24bf42=_0x35f259;_0x45377b[_0x24bf42(0x208)]=_0x50fbed,_0x45377b[_0x24bf42(0x1ee)]=_0x4292ab===_0x4ba648[_0x24bf42(0x20a)];const _0x313bbd={'methodType':constants[_0x24bf42(0x1fa)],'body':JSON['stringify'](_0x45377b)};_0x19b599=_0x19b599[_0x24bf42(0x1f2)](()=>postDeploy(_0x429064,_0x1df4f7,_0x42915b,_0x313bbd)),_0x4292ab++;}),_0x19b599[_0x35f259(0x1f2)](()=>{const _0x28867e=_0x35f259;_0xf746d['log'](_0x28867e(0x1f6)),_0x255a8e();})['catch'](_0x55f801=>{const _0x833840=_0x35f259;_0xf746d[_0x833840(0x1e2)](_0x833840(0x1e8)),_0x182490(_0x55f801);});}catch(_0x151765){_0xf746d['log']('Error\x20Deploy\x20Data'),_0x182490(_0x151765);}});}function handleNoComponents(_0x5253af,_0x18968e,_0x1b1199,_0x1ac4c9,_0x4ebe3b,_0x549012,_0x1bcd70,_0x11aadb){return new Promise((_0x330c43,_0x494af9)=>{const _0x2f7735=a10_0x2ba1;try{_0x11aadb['log'](_0x2f7735(0x212)),_0x1b1199=_0x1b1199&&_0x1b1199[_0x2f7735(0x20a)]?_0x1b1199[_0x2f7735(0x20d)]('__','')+'/':'';let _0x1f6944={'message':_0x2f7735(0x1e0),'pipelineId':_0x4ebe3b,'logId':_0x1ac4c9,'branchId':_0x1bcd70,'pipelineNumber':_0x549012,'isStartDeploy':!![]};const _0x785b04=_0x5253af+_0x2f7735(0x216)+_0x1b1199+'unlocked-packages',_0x3542d0={'methodType':constants[_0x2f7735(0x1e4)],'body':JSON[_0x2f7735(0x1e1)](_0x1f6944)};postDeploy(_0x785b04,_0x18968e,_0x1b1199,_0x3542d0)['then'](()=>{const _0x2217f7=_0x2f7735;_0x11aadb['log'](_0x2217f7(0x20b)),_0x330c43();})[_0x2f7735(0x1fb)](_0x83632d=>{const _0x327ad5=_0x2f7735;_0x494af9(_0x83632d),_0x11aadb[_0x327ad5(0x1e2)](_0x327ad5(0x1d4));});}catch(_0x3e4bac){_0x11aadb[_0x2f7735(0x1e2)](_0x2f7735(0x202)),_0x494af9(_0x3e4bac);}});}function postDeploy(_0x475b81,_0x1616d7,_0x43276b,_0x263ca3){return new Promise((_0x28a7a4,_0x155f55)=>{const _0x44e737=a10_0x2ba1;try{http[_0x44e737(0x205)](_0x475b81,_0x1616d7,_0x43276b,_0x263ca3)['then'](_0x58cb83=>{_0x28a7a4(_0x58cb83);})[_0x44e737(0x1fb)](_0x5c093d=>{console['log'](_0x5c093d),_0x155f55(_0x5c093d);});}catch(_0x3cc5d6){_0x155f55(_0x3cc5d6);}});}function callContinuePipelineVlocityDeploy(_0x4468c9,_0x3c4680,_0x27ff0b,_0x309e23,_0x253caa,_0x21ee00,_0x592838,_0x3c5b9f,_0xbb3d4c){return new Promise((_0x4177bb,_0x38f089)=>{const _0x51bd1=a10_0x2ba1;try{_0x27ff0b=_0x27ff0b&&_0x27ff0b[_0x51bd1(0x20a)]?_0x27ff0b[_0x51bd1(0x20d)]('__','')+'/':'',_0xbb3d4c[_0x51bd1(0x1e2)]('Start\x20Continue\x20Vlocity\x20Pipeline\x20Deploy');const _0x3a19dd={'pipelineId':_0x309e23,'pipelineNumber':_0x253caa,'logId':_0x3c5b9f,'branchId':_0x592838,'pipelineKey':_0x21ee00},_0x180f1c=_0x4468c9+'/services/apexrest/'+_0x27ff0b+_0x51bd1(0x204),_0x474260={'methodType':constants[_0x51bd1(0x1e6)],'body':JSON[_0x51bd1(0x1e1)](_0x3a19dd)};http[_0x51bd1(0x205)](_0x180f1c,_0x3c4680,_0x27ff0b,_0x474260)[_0x51bd1(0x1f2)](_0x1a43ff=>{const _0x14f3bd=_0x51bd1;_0xbb3d4c[_0x14f3bd(0x1e2)](_0x14f3bd(0x1e9)),_0x4177bb(_0x1a43ff);})['catch'](_0x28b0cf=>{const _0x2d173b=_0x51bd1;_0xbb3d4c[_0x2d173b(0x1e2)](_0x2d173b(0x215)),_0x38f089(_0x28b0cf);});}catch(_0x164f7b){_0x38f089(_0x164f7b);}});}module['exports']={'createJobFileRollback':createJobFileRollback,'retrieveData':retrieveData,'prepareDataForDeploy':prepareDataForDeploy,'deployData':deployData,'handleNoComponents':handleNoComponents,'callContinuePipelineVlocityDeploy':callContinuePipelineVlocityDeploy};