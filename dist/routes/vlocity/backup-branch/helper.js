const a14_0x3c1c05=a14_0x5cb0;(function(_0xd7d1ed,_0x6f3d2f){const _0x39f5be=a14_0x5cb0,_0x5866a7=_0xd7d1ed();while(!![]){try{const _0x54cd5f=parseInt(_0x39f5be(0xee))/0x1+parseInt(_0x39f5be(0xd0))/0x2*(-parseInt(_0x39f5be(0xda))/0x3)+-parseInt(_0x39f5be(0xc3))/0x4+parseInt(_0x39f5be(0xf3))/0x5+-parseInt(_0x39f5be(0xb3))/0x6+-parseInt(_0x39f5be(0xcb))/0x7+parseInt(_0x39f5be(0xd9))/0x8*(parseInt(_0x39f5be(0xd8))/0x9);if(_0x54cd5f===_0x6f3d2f)break;else _0x5866a7['push'](_0x5866a7['shift']());}catch(_0x4d3dec){_0x5866a7['push'](_0x5866a7['shift']());}}}(a14_0x4501,0xb20c2));const fs=require('fs'),AdmZip=require(a14_0x3c1c05(0xc2)),childProcess=require(a14_0x3c1c05(0xe4)),constants=require('../../../constants'),http=require(a14_0x3c1c05(0xd1));function a14_0x4501(){const _0x5773b1=['stringify','METHOD_NEXT_VLOCITY_CONTINUE_DEPLOY_STEP','\x20where\x20Name\x20LIKE\x20\x27%','Start\x20Retrieve\x20Data','End\x20Prepare\x20Data\x20For\x20Deploy','push','JOB_FILE_NAME','-job','1086683LDmKgo','-sf.instanceUrl','Start\x20Prepare\x20Data\x20For\x20Deploy','forEach','End\x20Create\x20Job\x20File','475535ihacYU','join','Error\x20Update\x20Log.\x20No\x20Components\x20to\x20Backup.','UNZIP_CATALOG_NAME','5203776YIFExp','/services/apexrest/','DATA_PACK_TYPES_QUERIES_MAP','\x20\x20-\x20VlocityDataPackType:\x20','catch','Error\x20Continue\x20Vlocity\x20Pipeline\x20Deploy','then','isStartDeploy','packExport','\x0aqueries:\x0a','Components\x20not\x20found!','slice','keys','length','projectPath:\x20./','adm-zip','423404EoJKCl','unlocked-packages','Error\x20Retrieve\x20Data\x20','base64','Start\x20Update\x20Log.\x20No\x20Components\x20to\x20Backup.','toString','zipBuffer','isDirectory','7926716lWynCp','\x20\x20\x20\x20query:\x20Select\x20Id\x20from\x20','post','log','Error\x20Update\x20Log.\x20No\x20Components\x20to\x20Backup.\x0a','2nYLstl','../../../services/http','-sf.accessToken','name','exports','METHOD_BACKUP_LOG_ERROR','Error\x20Deploy\x20Data','METHOD_BACKUP_LOG','11665782dMCUTa','16mfFPWs','2818107LbNSpb','-autoRetryErrors','Start\x20Continue\x20Vlocity\x20Pipeline\x20Deploy','appendFileSync','toBuffer','addLocalFolder','Start\x20Deploy\x20Data','End\x20Retrieve\x20Data','End\x20Deploy\x20Data','vlocity','../../../services/child-process','SOURCE_FOLDER'];a14_0x4501=function(){return _0x5773b1;};return a14_0x4501();}function createJobFileRollback(_0xe4c0f4,_0x4b09ed,_0x38e0b2,_0x123f98){return new Promise((_0x12a207,_0x1c7ad2)=>{const _0x1f9408=a14_0x5cb0;try{_0x123f98['log']('Start\x20Create\x20Job\x20File');let _0x48ca8a=_0x1f9408(0xc1)+constants[_0x1f9408(0xb2)]+_0x1f9408(0xbc);Object[_0x1f9408(0xbf)](_0x4b09ed)['forEach'](_0x4cffce=>{_0x4b09ed[_0x4cffce]['forEach'](_0x2cd666=>{const _0x427b65=a14_0x5cb0;constants[_0x427b65(0xb5)][_0x4cffce]['forEach'](_0x15ba11=>{const _0x3081c6=_0x427b65;_0x48ca8a+=_0x3081c6(0xb6)+_0x4cffce+'\x0a',_0x48ca8a+=_0x3081c6(0xcc)+_0x15ba11+_0x3081c6(0xe8)+_0x2cd666+'%\x27\x0a';});});}),fs[_0x1f9408(0xdd)](_0xe4c0f4+'/'+constants[_0x1f9408(0xec)],_0x48ca8a),_0x123f98[_0x1f9408(0xce)](_0x1f9408(0xf2)),_0x12a207();}catch(_0x4ec045){_0x123f98[_0x1f9408(0xce)]('Error\x20Create\x20Job\x20File'),_0x1c7ad2(_0x4ec045);}});}function retrieveData(_0x338b53,_0xe65b1b,_0x1e8f90,_0x1edf2a){return new Promise((_0xde0649,_0x15bee1)=>{const _0x2db2d9=a14_0x5cb0;try{_0x1edf2a['log'](_0x2db2d9(0xe9));const _0x4c5a7b=_0x2db2d9(0xe3),_0x3976ff=[_0x2db2d9(0xd2),''+_0x1e8f90,_0x2db2d9(0xef),''+_0xe65b1b,_0x2db2d9(0xed),''+constants[_0x2db2d9(0xec)],_0x2db2d9(0xdb),'-maxDepth','0',_0x2db2d9(0xbb)];_0x1edf2a[_0x2db2d9(0xce)](_0x3976ff[_0x2db2d9(0xbe)](0x2)[_0x2db2d9(0xf4)]('\x20'));const _0x2a7a9e={'cwd':''+_0x338b53,'maxBuffer':0x400*0x1f4};childProcess['callChildProcess'](_0x4c5a7b,_0x3976ff,_0x1edf2a,_0x2a7a9e)[_0x2db2d9(0xb9)](_0x475cf1=>{const _0x4a2eb6=_0x2db2d9;_0x1edf2a[_0x4a2eb6(0xce)](_0x4a2eb6(0xe1)),_0xde0649(_0x475cf1);})[_0x2db2d9(0xb7)](_0x5abaaf=>{const _0xf70bbc=_0x2db2d9;_0x1edf2a[_0xf70bbc(0xce)](_0xf70bbc(0xc5)+_0x5abaaf),_0x15bee1(_0x5abaaf);});}catch(_0x3236ff){_0x15bee1(_0x3236ff);}});}function a14_0x5cb0(_0x4bce99,_0x357655){const _0x4501e8=a14_0x4501();return a14_0x5cb0=function(_0x5cb066,_0x197bde){_0x5cb066=_0x5cb066-0xb1;let _0x276440=_0x4501e8[_0x5cb066];return _0x276440;},a14_0x5cb0(_0x4bce99,_0x357655);}function prepareDataForDeploy(_0x4f4b6e,_0x30699d){return new Promise((_0x2d1dbd,_0x29ffa2)=>{const _0x253e6c=a14_0x5cb0;try{_0x30699d[_0x253e6c(0xce)](_0x253e6c(0xf0));const _0x4c525e=_0x4f4b6e+'/'+constants[_0x253e6c(0xe5)];let _0x4928b3=new AdmZip();const _0x20b5a8=fs['readdirSync'](_0x4c525e,{'withFileTypes':!![]}),_0x468a50=[];_0x20b5a8['forEach'](_0x553060=>{const _0xdb4acb=_0x253e6c;if(_0x553060[_0xdb4acb(0xca)]()){const _0x184b47=_0x4928b3['toBuffer']()['toString']('base64');_0x184b47[_0xdb4acb(0xc0)]>0x1e8480&&(_0x468a50[_0xdb4acb(0xeb)](_0x184b47),_0x4928b3=new AdmZip()),_0x4928b3[_0xdb4acb(0xdf)](_0x4c525e+'/'+_0x553060[_0xdb4acb(0xd3)],_0x553060[_0xdb4acb(0xd3)]);}}),_0x468a50[_0x253e6c(0xeb)](_0x4928b3[_0x253e6c(0xde)]()[_0x253e6c(0xc8)](_0x253e6c(0xc6))),_0x30699d[_0x253e6c(0xce)](_0x253e6c(0xea)),_0x2d1dbd(_0x468a50);}catch(_0x4c5eeb){_0x30699d[_0x253e6c(0xce)]('Error\x20Prepare\x20Data\x20For\x20Deploy'),_0x29ffa2(_0x4c5eeb);}});}function deployData(_0x5e031c,_0x15ef62,_0x1e1e54,_0x19d941,_0x38e0f7,_0x78fa4b,_0x51efbe,_0x1bb36c){return new Promise((_0x5aa997,_0x67cee1)=>{const _0x44000a=a14_0x5cb0;try{_0x1bb36c[_0x44000a(0xce)](_0x44000a(0xe0));const _0x27d8c9={'zipBuffer':'','pipelineId':_0x38e0f7,'logId':_0x1e1e54,'branchId':_0x51efbe,'pipelineNumber':_0x78fa4b};let _0x3e7a67=Promise['resolve'](),_0xbb6ee9=0x1;_0x19d941[_0x44000a(0xf1)](_0x14ac14=>{const _0x455bf7=_0x44000a;_0x27d8c9[_0x455bf7(0xc9)]=_0x14ac14,_0x27d8c9[_0x455bf7(0xba)]=_0xbb6ee9===_0x19d941[_0x455bf7(0xc0)];const _0x50ac7f={'methodType':constants[_0x455bf7(0xd7)],'body':JSON[_0x455bf7(0xe6)](_0x27d8c9)};_0x3e7a67=_0x3e7a67[_0x455bf7(0xb9)](()=>postDeploy(_0x5e031c,_0x15ef62,_0x50ac7f)),_0xbb6ee9++;}),_0x3e7a67[_0x44000a(0xb9)](()=>{const _0x510202=_0x44000a;_0x1bb36c[_0x510202(0xce)](_0x510202(0xe2)),_0x5aa997();})[_0x44000a(0xb7)](_0x4937e1=>{const _0x573de0=_0x44000a;_0x1bb36c[_0x573de0(0xce)]('Error\x20Deploy\x20Data'),_0x67cee1(_0x4937e1);});}catch(_0x1f6ae4){_0x1bb36c[_0x44000a(0xce)](_0x44000a(0xd6)),_0x67cee1(_0x1f6ae4);}});}function handleNoComponents(_0x3f72a4,_0x60fd74,_0x2db980,_0x2d80a7,_0x4c3c24,_0x4d3f10,_0x1ce62c,_0x545c96){return new Promise((_0x472558,_0x1cbe73)=>{const _0x24bc7d=a14_0x5cb0;try{_0x545c96[_0x24bc7d(0xce)](_0x24bc7d(0xc7)),_0x2db980=_0x2db980&&_0x2db980[_0x24bc7d(0xc0)]?_0x2db980['replace']('__','')+'/':'';const _0x1ca85b={'message':_0x24bc7d(0xbd),'pipelineId':_0x4c3c24,'logId':_0x2d80a7,'branchId':_0x1ce62c,'pipelineNumber':_0x4d3f10,'isStartDeploy':!![]},_0x3779dd=_0x3f72a4+_0x24bc7d(0xb4)+_0x2db980+_0x24bc7d(0xc4),_0x14570b={'methodType':constants[_0x24bc7d(0xd5)],'body':JSON[_0x24bc7d(0xe6)](_0x1ca85b)};postDeploy(_0x3779dd,_0x60fd74,_0x2db980,_0x14570b)[_0x24bc7d(0xb9)](()=>{const _0x585c6b=_0x24bc7d;_0x545c96[_0x585c6b(0xce)]('End\x20Update\x20Log.\x20No\x20Components\x20to\x20Backup.'),_0x472558();})[_0x24bc7d(0xb7)](_0x5d4fcf=>{const _0x25c391=_0x24bc7d;_0x1cbe73(_0x5d4fcf),_0x545c96[_0x25c391(0xce)](_0x25c391(0xcf));});}catch(_0x4226b6){_0x545c96[_0x24bc7d(0xce)](_0x24bc7d(0xb1)),_0x1cbe73(_0x4226b6);}});}function postDeploy(_0x52718d,_0x4f8365,_0x1eed9a){return new Promise((_0x322056,_0x3728bb)=>{const _0x24a48b=a14_0x5cb0;try{http[_0x24a48b(0xcd)](_0x52718d,_0x4f8365,_0x1eed9a)[_0x24a48b(0xb9)](_0x227489=>{_0x322056(_0x227489);})[_0x24a48b(0xb7)](_0x56f3f8=>{const _0x5ca0b7=_0x24a48b;console[_0x5ca0b7(0xce)](_0x56f3f8),_0x3728bb(_0x56f3f8);});}catch(_0x21ae7e){_0x3728bb(_0x21ae7e);}});}function callContinuePipelineVlocityDeploy(_0xa60817,_0x122cdf,_0x272f74,_0x5b52e6,_0x5c19cf,_0x2a39b3,_0xe3bbb0,_0xc03769){return new Promise((_0x2bd8c9,_0x8f0893)=>{const _0x1186b6=a14_0x5cb0;try{_0x122cdf=_0x122cdf&&_0x122cdf[_0x1186b6(0xc0)]?_0x122cdf['replace']('__','')+'/':'',_0xc03769['log'](_0x1186b6(0xdc));const _0x4e2b3e={'pipelineId':_0x272f74,'pipelineNumber':_0x5b52e6,'logId':_0xe3bbb0,'branchId':_0x2a39b3,'pipelineKey':_0x5c19cf},_0x195962={'methodType':constants[_0x1186b6(0xe7)],'body':JSON[_0x1186b6(0xe6)](_0x4e2b3e)};http[_0x1186b6(0xcd)](_0xa60817,_0x122cdf,_0x195962)['then'](_0x1b3fb1=>{const _0x56761e=_0x1186b6;_0xc03769[_0x56761e(0xce)]('End\x20Continue\x20Vlocity\x20Pipeline\x20Deploy'),_0x2bd8c9(_0x1b3fb1);})[_0x1186b6(0xb7)](_0x222fa2=>{const _0x5685db=_0x1186b6;_0xc03769['log'](_0x5685db(0xb8)),_0x8f0893(_0x222fa2);});}catch(_0x2c2eab){_0x8f0893(_0x2c2eab);}});}module[a14_0x3c1c05(0xd4)]={'createJobFileRollback':createJobFileRollback,'retrieveData':retrieveData,'prepareDataForDeploy':prepareDataForDeploy,'deployData':deployData,'handleNoComponents':handleNoComponents,'callContinuePipelineVlocityDeploy':callContinuePipelineVlocityDeploy};