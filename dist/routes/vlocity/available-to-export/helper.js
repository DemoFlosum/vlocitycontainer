const a11_0x462db0=a11_0x1f0e;function a11_0x39b9(){const _0x4102d7=['265fhihjI','317304kqMpjt','29270mToJMr','../../../config/path','length','substring','getAvailableToExport','vlocityUrl','push','key','exports','754569uCafiY','page','path','1854QjaRxK','availableToExport','288heTDrp','sort','261116qdXnOy','logger','available_export','26340HIvDxq','33Hwlbsn','map','7370847buxAUc','tmpPath','catch','utf-8','136038BEQdlh','vlocityToken','stringify'];a11_0x39b9=function(){return _0x4102d7;};return a11_0x39b9();}(function(_0x1b8dad,_0x3eafcd){const _0x283982=a11_0x1f0e,_0x20ea42=_0x1b8dad();while(!![]){try{const _0x29b7a9=-parseInt(_0x283982(0x170))/0x1+parseInt(_0x283982(0x166))/0x2+-parseInt(_0x283982(0x17b))/0x3*(-parseInt(_0x283982(0x177))/0x4)+parseInt(_0x283982(0x165))/0x5*(-parseInt(_0x283982(0x17a))/0x6)+-parseInt(_0x283982(0x181))/0x7*(parseInt(_0x283982(0x175))/0x8)+-parseInt(_0x283982(0x173))/0x9*(-parseInt(_0x283982(0x167))/0xa)+parseInt(_0x283982(0x17d))/0xb;if(_0x29b7a9===_0x3eafcd)break;else _0x20ea42['push'](_0x20ea42['shift']());}catch(_0x5009f4){_0x20ea42['push'](_0x20ea42['shift']());}}}(a11_0x39b9,0x71031));const {readFile,access,writeFile,rm}=require('fs/promises'),{join}=require(a11_0x462db0(0x172)),{VlocityHelper}=require('../../../services/vlocity'),{pathConfig}=require(a11_0x462db0(0x168)),body={'instanceUrl':'','accessToken':'','page':0x0},AVAILABLE_TO_EXPORT=a11_0x462db0(0x179),COUNT_OF_COMPONENTS_PER_PAGE=0x2710;function a11_0x1f0e(_0x3d0e10,_0x235366){const _0x39b940=a11_0x39b9();return a11_0x1f0e=function(_0x1f0e60,_0xb37e8b){_0x1f0e60=_0x1f0e60-0x164;let _0x53a90e=_0x39b940[_0x1f0e60];return _0x53a90e;},a11_0x1f0e(_0x3d0e10,_0x235366);}function checkFileExists(_0x371dd5){const _0x4c05d4=a11_0x462db0;return access(_0x371dd5)['then'](()=>!![])[_0x4c05d4(0x17f)](()=>![]);}class AvailableToExportHelper{constructor({instanceUrl:_0x58c4bc,accessToken:_0x355449,page:_0xe4d651}=body,_0x11db9f){const _0x33439e=a11_0x462db0;this[_0x33439e(0x16c)]=_0x58c4bc,this['vlocityToken']=_0x355449,this[_0x33439e(0x171)]=_0xe4d651!==null&&_0xe4d651!==undefined?_0xe4d651:-0x1,this[_0x33439e(0x178)]=_0x11db9f;}async['availableToExport'](){const _0x83b86c=a11_0x462db0,_0x4532b5=join(pathConfig[_0x83b86c(0x17e)],AVAILABLE_TO_EXPORT+'_'+this[_0x83b86c(0x182)][_0x83b86c(0x16a)](0x0,0xf)+'.json'),_0x2432ac=await checkFileExists(_0x4532b5);if(this[_0x83b86c(0x171)]!==null&&this[_0x83b86c(0x171)]!==undefined&&this[_0x83b86c(0x171)]>0x0&&_0x2432ac){const _0x3459f1=await readFile(_0x4532b5,{'encoding':_0x83b86c(0x180)});try{return JSON['parse'](_0x3459f1);}catch(_0x584970){}}this[_0x83b86c(0x171)]===0x0&&_0x2432ac&&await rm(_0x4532b5);const _0x58f873=await new VlocityHelper(this[_0x83b86c(0x182)],this[_0x83b86c(0x16c)],this[_0x83b86c(0x178)])[_0x83b86c(0x16b)](),_0x56efe7=_0x58f873?.['records'][_0x83b86c(0x17c)](({VlocityDataPackType:_0x5ea149,Name:_0xecb11d,VlocityDataPackDisplayLabel:_0x29aeaf,VlocityDataPackKey:_0x28bcf1})=>({'type':_0x5ea149,'name':_0xecb11d,'label':_0x29aeaf,'key':_0x28bcf1}));return _0x56efe7[_0x83b86c(0x176)]((_0x47ef56,_0x1fcfbf)=>{const _0x227810=_0x83b86c,_0x3f0e4e=_0x47ef56['type']+'_'+_0x47ef56[_0x227810(0x16e)],_0x5087e8=_0x1fcfbf['type']+'_'+_0x1fcfbf[_0x227810(0x16e)];if(_0x3f0e4e>_0x5087e8)return 0x1;if(_0x5087e8>_0x3f0e4e)return-0x1;return 0x0;}),_0x56efe7[_0x83b86c(0x169)]>COUNT_OF_COMPONENTS_PER_PAGE&&await writeFile(_0x4532b5,JSON[_0x83b86c(0x164)](_0x56efe7)),_0x56efe7;}async['execute'](){const _0x56b5b2=a11_0x462db0,_0x2066cd=await this[_0x56b5b2(0x174)](),_0x155b8c={};let _0x2c66d9=-0x1,_0x11af2e=0x0;for(const {type:_0x1c38bb,name:_0x47ec46,label:_0x3f725d,key:_0x24cf7f}of _0x2066cd){_0x2c66d9++;if(this[_0x56b5b2(0x171)]>=0x0){if(_0x11af2e>=COUNT_OF_COMPONENTS_PER_PAGE)return _0x155b8c;if(_0x2c66d9<=this[_0x56b5b2(0x171)]*COUNT_OF_COMPONENTS_PER_PAGE)continue;}!_0x155b8c[_0x1c38bb]&&(_0x155b8c[_0x1c38bb]=[]),_0x155b8c[_0x1c38bb][_0x56b5b2(0x16d)]({'name':_0x47ec46,'label':_0x3f725d,'key':_0x24cf7f}),_0x11af2e++;}return _0x155b8c;}}module[a11_0x462db0(0x16f)]={'AvailableToExportHelper':AvailableToExportHelper};