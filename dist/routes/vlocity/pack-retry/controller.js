const a36_0x1e09aa=a36_0xe73c;function a36_0x29b5(){const _0x56bd1d=['timestamp','flosumToken','createProjectDirectory','37166272CkeoMR','stringify','then','getAttachmentBody','exports','resolve','../../../services/http','15vvuofC','zip','2208688NVitYu','../../../services/storage','unzipVlocityTemp','9597623guUczd','prepareDataForDeploy','flosumUrl','completeDeployment','1327290rKnRGF','deployComponents','catch','../retrieve/helper','projectName','../../../services/js-force','---\x20body','tmpPath','attachLogId','2499381jsiVEc','907710ncUMXx','log','1202608GHevZq','vlocityTempAttachmentId','clientSecret','nameSpacePrefix','logId','vlocityToken','vlocityTempZip'];a36_0x29b5=function(){return _0x56bd1d;};return a36_0x29b5();}(function(_0x3a9351,_0x57fc30){const _0x2cdfa4=a36_0xe73c,_0x2898a1=_0x3a9351();while(!![]){try{const _0x38aa5b=parseInt(_0x2cdfa4(0x177))/0x1+parseInt(_0x2cdfa4(0x170))/0x2+parseInt(_0x2cdfa4(0x180))/0x3+parseInt(_0x2cdfa4(0x183))/0x4+parseInt(_0x2cdfa4(0x16e))/0x5*(parseInt(_0x2cdfa4(0x181))/0x6)+parseInt(_0x2cdfa4(0x173))/0x7+-parseInt(_0x2cdfa4(0x167))/0x8;if(_0x38aa5b===_0x57fc30)break;else _0x2898a1['push'](_0x2898a1['shift']());}catch(_0x4c490e){_0x2898a1['push'](_0x2898a1['shift']());}}}(a36_0x29b5,0xb5c7d));function a36_0xe73c(_0x527040,_0x35c7fd){const _0x29b536=a36_0x29b5();return a36_0xe73c=function(_0xe73cf,_0x431a57){_0xe73cf=_0xe73cf-0x167;let _0x288f9c=_0x29b536[_0xe73cf];return _0x288f9c;},a36_0xe73c(_0x527040,_0x35c7fd);}const path=require('path'),storage=require(a36_0x1e09aa(0x171)),helper=require('./helper'),http=require(a36_0x1e09aa(0x16d)),{RetrieveHelper}=require(a36_0x1e09aa(0x17a)),{pathConfig}=require('../../../config/path'),{JsForceHelper}=require(a36_0x1e09aa(0x17c));function packRetry(_0x5e89e4,_0x262d6c){return new Promise((_0xf54ec9,_0x439394)=>{const _0x55abcc=a36_0xe73c,_0x40f3f1=JSON['parse'](JSON[_0x55abcc(0x168)](_0x5e89e4));_0x40f3f1['vlocityTempZip']=_0x55abcc(0x16f),console[_0x55abcc(0x182)](_0x55abcc(0x17d)),console[_0x55abcc(0x182)](_0x40f3f1);const _0x236c23={'instanceUrl':_0x5e89e4[_0x55abcc(0x175)],'accessToken':_0x5e89e4[_0x55abcc(0x18b)],'clientId':_0x5e89e4['clientId'],'clientSecret':_0x5e89e4[_0x55abcc(0x185)]},_0x4f0077=_0x5e89e4['vlocityUrl'],_0x5bb47d=_0x5e89e4[_0x55abcc(0x188)],_0x4b3d42=_0x5e89e4[_0x55abcc(0x187)],_0x203967=_0x5e89e4[_0x55abcc(0x17f)],_0x459d7c=_0x5e89e4[_0x55abcc(0x18a)],_0x539238=_0x5e89e4[_0x55abcc(0x186)],_0x2b789d=_0x5e89e4['snapshotType'],_0x31b4a7=_0x5e89e4['snapshotId'];let _0x5d1da4=![],_0x97dc7f;_0x5e89e4[_0x55abcc(0x189)]||_0x5e89e4[_0x55abcc(0x184)]?_0x97dc7f=_0x2b789d+'_'+_0x459d7c+'_'+_0x203967:(_0x5d1da4=!![],_0x97dc7f=_0x5e89e4[_0x55abcc(0x17b)]);const _0x52c3dd=path['join'](pathConfig[_0x55abcc(0x17e)],_0x97dc7f),_0x24c355=new RetrieveHelper(_0x52c3dd,{'snapshotId':_0x31b4a7,'nameSpacePrefix':_0x539238,'logId':_0x4b3d42,'attachLogId':_0x203967,'authFlosum':_0x236c23,'authVlosityOrg':{'instanceUrl':_0x4f0077,'accessToken':_0x5bb47d},'selectedDataPackTypes':'[]'},_0x262d6c),_0x186bdd=new JsForceHelper(_0x236c23,_0x262d6c);Promise[_0x55abcc(0x16c)]()['then'](()=>{const _0x2df1f5=_0x55abcc;let _0x4451ad=Promise[_0x2df1f5(0x16c)]();return!_0x5d1da4&&(_0x4451ad=_0x4451ad[_0x2df1f5(0x169)](()=>storage[_0x2df1f5(0x18c)](_0x52c3dd)),_0x5e89e4['vlocityTempZip']?_0x4451ad=_0x4451ad[_0x2df1f5(0x169)](()=>helper[_0x2df1f5(0x172)](_0x52c3dd,_0x5e89e4[_0x2df1f5(0x189)],_0x262d6c)):_0x4451ad=_0x4451ad['then'](()=>http[_0x2df1f5(0x16a)](_0x186bdd,_0x5e89e4[_0x2df1f5(0x184)],_0x262d6c,![]))[_0x2df1f5(0x169)](_0x25486e=>helper[_0x2df1f5(0x172)](_0x52c3dd,_0x25486e,_0x262d6c))),_0x4451ad;})[_0x55abcc(0x169)](()=>helper['packRetry'](_0x52c3dd,_0x4f0077,_0x5bb47d,_0x186bdd,_0x236c23,_0x203967,_0x262d6c))[_0x55abcc(0x169)](()=>helper['isNeedToDeploy'](_0x52c3dd,_0x262d6c))['then'](_0x588a2d=>{const _0x3bb561=_0x55abcc;if(_0x588a2d)return _0x24c355[_0x3bb561(0x174)]()['then'](_0x213285=>_0x24c355[_0x3bb561(0x178)](_0x213285));return Promise[_0x3bb561(0x16c)]();})[_0x55abcc(0x169)](()=>{const _0x1769d7=_0x55abcc;if(_0x5d1da4)_0xf54ec9();else return Promise[_0x1769d7(0x16c)]()[_0x1769d7(0x169)](()=>_0x24c355[_0x1769d7(0x176)](!![]))[_0x1769d7(0x179)](_0x1418d6=>{const _0x317b47=_0x1769d7;_0x24c355[_0x317b47(0x176)](!![],!![])[_0x317b47(0x169)](()=>_0x439394(_0x1418d6))[_0x317b47(0x179)](_0x48672c=>_0x439394(_0x1418d6+'\x0a'+_0x48672c));})[_0x1769d7(0x169)](()=>storage['removeProject'](_0x52c3dd,_0x262d6c));});});}module[a36_0x1e09aa(0x16b)]={'packRetry':packRetry};