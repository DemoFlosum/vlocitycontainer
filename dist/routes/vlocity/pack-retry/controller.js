const a34_0x1547a4=a34_0x383e;function a34_0x4903(){const _0x4a529e=['232blnmMl','attachLogId','timestamp','zip','parse','vlocityToken','then','deployComponents','./helper','logId','unzipVlocityTemp','snapshotType','completeDeployment','isNeedToDeploy','catch','exports','join','../../../services/storage','tmpPath','---\x20body','323056nEPZHm','712035ICYvsv','projectName','resolve','91007hASQfR','98602tAVpuv','9CzSQeV','createProjectDirectory','flosumToken','stringify','15UooXUi','vlocityTempZip','prepareDataForDeploy','13079090fvajWv','1530892SiqROc','Connection','232368sUwbzK','log','vlocityTempAttachmentId','path'];a34_0x4903=function(){return _0x4a529e;};return a34_0x4903();}(function(_0x2e5bb9,_0x5bf7fa){const _0x1a3108=a34_0x383e,_0x607e6f=_0x2e5bb9();while(!![]){try{const _0x561eeb=parseInt(_0x1a3108(0x175))/0x1+parseInt(_0x1a3108(0x152))/0x2*(parseInt(_0x1a3108(0x157))/0x3)+parseInt(_0x1a3108(0x15b))/0x4+parseInt(_0x1a3108(0x176))/0x5+parseInt(_0x1a3108(0x15d))/0x6+-parseInt(_0x1a3108(0x151))/0x7*(-parseInt(_0x1a3108(0x161))/0x8)+parseInt(_0x1a3108(0x153))/0x9*(-parseInt(_0x1a3108(0x15a))/0xa);if(_0x561eeb===_0x5bf7fa)break;else _0x607e6f['push'](_0x607e6f['shift']());}catch(_0x119d34){_0x607e6f['push'](_0x607e6f['shift']());}}}(a34_0x4903,0x3172b));function a34_0x383e(_0x3e0ee5,_0x3ab3bb){const _0x490355=a34_0x4903();return a34_0x383e=function(_0x383ece,_0x2d4d4f){_0x383ece=_0x383ece-0x14f;let _0x59f270=_0x490355[_0x383ece];return _0x59f270;},a34_0x383e(_0x3e0ee5,_0x3ab3bb);}const jsForce=require('jsforce'),storage=require(a34_0x1547a4(0x172)),helper=require(a34_0x1547a4(0x169)),http=require('../../../services/http'),{RetrieveHelper}=require('../retrieve/helper'),path=require(a34_0x1547a4(0x160)),{pathConfig}=require('../../../config/path');function packRetry(_0x44d20d,_0x319f0e){return new Promise((_0x15f22b,_0x54a125)=>{const _0x26a9ea=a34_0x383e,_0x3104f0=JSON[_0x26a9ea(0x165)](JSON[_0x26a9ea(0x156)](_0x44d20d));_0x3104f0['vlocityTempZip']=_0x26a9ea(0x164),console['log'](_0x26a9ea(0x174)),console[_0x26a9ea(0x15e)](_0x3104f0);const _0x2a8755=_0x44d20d['flosumUrl'],_0x41f8ba=_0x44d20d[_0x26a9ea(0x155)],_0x30b634=_0x44d20d['vlocityUrl'],_0x4cce76=_0x44d20d[_0x26a9ea(0x166)],_0x538393=_0x44d20d[_0x26a9ea(0x16a)],_0x2fa4ca=_0x44d20d[_0x26a9ea(0x162)],_0x442b4a=_0x44d20d[_0x26a9ea(0x163)],_0x39be20=_0x44d20d['nameSpacePrefix'],_0x52caf4=_0x44d20d[_0x26a9ea(0x16c)],_0x32ef1b=_0x44d20d['snapshotId'];let _0x59332a=![],_0xf711aa;_0x44d20d['vlocityTempZip']||_0x44d20d[_0x26a9ea(0x15f)]?_0xf711aa=_0x52caf4+'_'+_0x442b4a+'_'+_0x2fa4ca:(_0x59332a=!![],_0xf711aa=_0x44d20d[_0x26a9ea(0x14f)]);const _0x2ed653=path[_0x26a9ea(0x171)](pathConfig[_0x26a9ea(0x173)],_0xf711aa),_0x4e7513=new RetrieveHelper(_0x2ed653,{'snapshotId':_0x32ef1b,'nameSpacePrefix':_0x39be20,'logId':_0x538393,'attachLogId':_0x2fa4ca,'authFlosum':{'instanceUrl':_0x2a8755,'accessToken':_0x41f8ba},'authVlosityOrg':{'instanceUrl':_0x30b634,'accessToken':_0x4cce76},'selectedDataPackTypes':'[]'},_0x319f0e),_0x2de3fd=new jsForce[(_0x26a9ea(0x15c))]({'instanceUrl':_0x2a8755,'accessToken':_0x41f8ba});Promise[_0x26a9ea(0x150)]()[_0x26a9ea(0x167)](()=>{const _0x474da8=_0x26a9ea;let _0x263651=Promise[_0x474da8(0x150)]();return!_0x59332a&&(_0x263651=_0x263651[_0x474da8(0x167)](()=>storage[_0x474da8(0x154)](_0x2ed653)),_0x44d20d[_0x474da8(0x158)]?_0x263651=_0x263651[_0x474da8(0x167)](()=>helper[_0x474da8(0x16b)](_0x2ed653,_0x44d20d['vlocityTempZip'],_0x319f0e)):_0x263651=_0x263651[_0x474da8(0x167)](()=>http['getAttachmentBody'](_0x2de3fd,_0x44d20d[_0x474da8(0x15f)],_0x319f0e,![]))[_0x474da8(0x167)](_0x44bf3a=>helper[_0x474da8(0x16b)](_0x2ed653,_0x44bf3a,_0x319f0e))),_0x263651;})[_0x26a9ea(0x167)](()=>helper['packRetry'](_0x2ed653,_0x30b634,_0x4cce76,_0x2de3fd,_0x2fa4ca,_0x319f0e))[_0x26a9ea(0x167)](()=>helper[_0x26a9ea(0x16e)](_0x2ed653,_0x319f0e))[_0x26a9ea(0x167)](_0x4f6fac=>{const _0x5240fb=_0x26a9ea;if(_0x4f6fac)return _0x4e7513[_0x5240fb(0x159)]()[_0x5240fb(0x167)](_0x3c01dd=>_0x4e7513[_0x5240fb(0x168)](_0x3c01dd));return Promise['resolve']();})[_0x26a9ea(0x167)](()=>{const _0x5085e0=_0x26a9ea;if(_0x59332a)_0x15f22b();else return Promise[_0x5085e0(0x150)]()[_0x5085e0(0x167)](()=>_0x4e7513[_0x5085e0(0x16d)](!![]))[_0x5085e0(0x16f)](_0x377cf9=>{const _0x47e578=_0x5085e0;_0x4e7513[_0x47e578(0x16d)](!![],!![])[_0x47e578(0x167)](()=>_0x54a125(_0x377cf9))[_0x47e578(0x16f)](_0x1b005b=>_0x54a125(_0x377cf9+'\x0a'+_0x1b005b));})[_0x5085e0(0x167)](()=>storage['removeProject'](_0x2ed653,_0x319f0e));});});}module[a34_0x1547a4(0x170)]={'packRetry':packRetry};