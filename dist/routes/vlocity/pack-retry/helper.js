const a29_0x28f89e=a29_0x3b00;(function(_0x18304a,_0x2ff112){const _0x2bf345=a29_0x3b00,_0x20b74c=_0x18304a();while(!![]){try{const _0x57d0f3=parseInt(_0x2bf345(0xdd))/0x1+-parseInt(_0x2bf345(0xac))/0x2+parseInt(_0x2bf345(0xe2))/0x3*(parseInt(_0x2bf345(0xdf))/0x4)+-parseInt(_0x2bf345(0xc2))/0x5*(-parseInt(_0x2bf345(0xb7))/0x6)+parseInt(_0x2bf345(0xd1))/0x7+-parseInt(_0x2bf345(0xd5))/0x8+parseInt(_0x2bf345(0xad))/0x9;if(_0x57d0f3===_0x2ff112)break;else _0x20b74c['push'](_0x20b74c['shift']());}catch(_0xb05a6f){_0x20b74c['push'](_0x20b74c['shift']());}}}(a29_0x8605,0xde5a3));const AdmZip=require(a29_0x28f89e(0xc0)),fs=require('fs'),yaml=require(a29_0x28f89e(0xe1)),jsForce=require(a29_0x28f89e(0xc3)),childProcess=require(a29_0x28f89e(0xc6)),constants=require(a29_0x28f89e(0xd9)),http=require(a29_0x28f89e(0xc9));function unzipVlocityTemp(_0xcf81ed,_0x557a7f,_0x59ff67){return new Promise((_0x29af14,_0x15d571)=>{const _0x2c529a=a29_0x3b00;try{_0x59ff67['log'](_0x2c529a(0xcd));const _0x2c2584=new AdmZip(_0x557a7f);_0x2c2584[_0x2c529a(0xd6)](_0xcf81ed,![]),_0x29af14(),_0x59ff67[_0x2c529a(0xce)](_0x2c529a(0xda));}catch(_0x3e4304){_0x59ff67[_0x2c529a(0xce)]('Error\x20Unzip\x20Vlocity\x20Temp\x20'+_0x3e4304),_0x15d571(_0x3e4304);}});}function packRetry(_0xbfb1d1,_0x2b5126,_0x16c994,_0x101359,_0x1bc210,_0x3a42ea){return new Promise((_0x2b18a3,_0x3357c7)=>{const _0x2d04ba=a29_0x3b00;try{_0x3a42ea[_0x2d04ba(0xce)](_0x2d04ba(0xb8));const _0x8b4b49=_0x2d04ba(0xbe),_0x5c4feb=[_0x2d04ba(0xca),''+_0x16c994,_0x2d04ba(0xbc),''+_0x2b5126,_0x2d04ba(0xde),_0x2d04ba(0xe4)];_0x3a42ea[_0x2d04ba(0xce)](_0x2d04ba(0xd3)),_0x3a42ea[_0x2d04ba(0xce)](_0x2d04ba(0xb3)),_0x3a42ea[_0x2d04ba(0xce)](_0x2d04ba(0xbd)+_0x2b5126),_0x3a42ea[_0x2d04ba(0xce)](_0x2d04ba(0xaf)),_0x3a42ea[_0x2d04ba(0xce)]('packRetry');function _0x1fceae(){http['updateAttachmentLog'](_0xbfb1d1,_0x101359,_0x1bc210,_0x3a42ea,![]);}const _0x3bfdf8={'cwd':_0xbfb1d1,'maxBuffer':0x400*0x1f4};childProcess['callChildProcess'](_0x8b4b49,_0x5c4feb,_0x3a42ea,_0x3bfdf8,!![],_0x1fceae)[_0x2d04ba(0xe0)](_0x18ae02=>{const _0x3ee83c=_0x2d04ba;_0x3a42ea[_0x3ee83c(0xce)](_0x3ee83c(0xb5)),_0x2b18a3(_0x18ae02);})[_0x2d04ba(0xb9)](_0x4726e1=>{const _0x4c9154=_0x2d04ba;_0x3a42ea[_0x4c9154(0xce)]('Error\x20Pack\x20Retry\x20'+_0x4726e1),_0x3357c7(_0x4726e1);});}catch(_0x2419ed){_0x3357c7(_0x2419ed);}});}function a29_0x3b00(_0x2d938b,_0x6e950a){const _0x8605f=a29_0x8605();return a29_0x3b00=function(_0x3b0086,_0x4835fe){_0x3b0086=_0x3b0086-0xaa;let _0x15a38b=_0x8605f[_0x3b0086];return _0x15a38b;},a29_0x3b00(_0x2d938b,_0x6e950a);}function isNeedToDeploy(_0x1172bc,_0x77692e){return new Promise((_0xcc67ae,_0x55bc09)=>{const _0x3e9315=a29_0x3b00;try{fs[_0x3e9315(0xba)](_0x1172bc+'/'+constants[_0x3e9315(0xc1)])?(_0x77692e['log'](_0x3e9315(0xb6)),_0xcc67ae(!![])):(_0x77692e[_0x3e9315(0xce)](_0x3e9315(0xbb)),_0xcc67ae(![]));}catch(_0x55fe23){_0x77692e['log']('Error\x20Unzip\x20Vlocity\x20Temp\x20'+_0x55fe23),_0x55bc09(_0x55fe23);}});}function callUpdateSnapshot(_0x3c1eaa,_0x37a4a9,_0x573386,_0x18f390,_0x318a3d,_0x45f4eb){return new Promise((_0x5d49a6,_0x2ed531)=>{const _0x3c2254=a29_0x3b00;try{const _0x17bae6=new jsForce[(_0x3c2254(0xc4))]({'accessToken':_0x37a4a9,'instanceUrl':_0x573386});_0x45f4eb[_0x3c2254(0xce)](_0x3c2254(0xd0));const _0x528e25={'Id':_0x18f390,[_0x318a3d+'Is_Completed__c']:!![]};if(fs[_0x3c2254(0xba)](_0x3c1eaa+'/'+constants[_0x3c2254(0xd8)])){const _0x123d07=yaml[_0x3c2254(0xb0)](fs[_0x3c2254(0xdb)](_0x3c1eaa+'/'+constants[_0x3c2254(0xd8)],_0x3c2254(0xbf)));_0x123d07['Errors']&&(_0x528e25[_0x318a3d+_0x3c2254(0xcf)]=_0x123d07[_0x3c2254(0xdc)][_0x3c2254(0xd7)]>0x0);}else _0x528e25[_0x318a3d+_0x3c2254(0xcf)]=![];_0x17bae6[_0x3c2254(0xb1)](_0x318a3d+'Snapshot_Vlocity__c')[_0x3c2254(0xc5)](_0x528e25)[_0x3c2254(0xe0)](()=>{const _0x4e83fe=_0x3c2254;_0x45f4eb[_0x4e83fe(0xce)](_0x4e83fe(0xd2)),_0x5d49a6();})['catch'](_0x1a4ae0=>{const _0x1a3f49=_0x3c2254;_0x45f4eb['log'](_0x1a3f49(0xaa)),_0x2ed531(_0x1a4ae0);});}catch(_0x417fc0){_0x45f4eb[_0x3c2254(0xce)](_0x3c2254(0xaa)),_0x2ed531(_0x417fc0);}});}function getTime(){const _0x4655c0=a29_0x28f89e,_0x31db76=new Date(),_0x58ed7f=[_0x31db76[_0x4655c0(0xc8)](),_0x31db76['getMonth']()+0x1,_0x31db76[_0x4655c0(0xae)](),_0x31db76[_0x4655c0(0xcc)](),_0x31db76[_0x4655c0(0xcb)](),_0x31db76[_0x4655c0(0xe3)]()];return _0x58ed7f[_0x4655c0(0xab)](_0x199287=>_0x199287=_0x199287[_0x4655c0(0xd4)]()[_0x4655c0(0xb4)](/^([0-9])$/,_0x4655c0(0xb2))),_0x58ed7f[0x2]+'-'+_0x58ed7f[0x1]+'-'+_0x58ed7f[0x0]+'\x20'+_0x58ed7f[0x3]+':'+_0x58ed7f[0x4]+':'+_0x58ed7f[0x5];}module[a29_0x28f89e(0xc7)]={'unzipVlocityTemp':unzipVlocityTemp,'callUpdateSnapshot':callUpdateSnapshot,'packRetry':packRetry,'getTime':getTime,'isNeedToDeploy':isNeedToDeploy};function a29_0x8605(){const _0x54f344=['Start\x20Update\x20Snapshot','3112151OsiUmp','End\x20Update\x20Snapshot','Command:','toString','4180168nbnECy','extractAllTo','length','NAME_LOGS_FILE','../../../constants','End\x20Unzip\x20Vlocity\x20Temp','readFileSync','Errors','1058255WrTTpU','--nojob','3626216QqdGjG','then','js-yaml','3oLurCs','getSeconds','packRetry','Error\x20Update\x20Snapshot','forEach','3434842BcSPjy','3045258qGzacP','getFullYear','-nojob','load','sobject','0$1','-sf.accessToken\x20##########','replace','End\x20Pack\x20Retry','Exist\x20Components\x20To\x20Deploy','42414ShqSCd','Start\x20Pack\x20Retry','catch','existsSync','No\x20Components\x20To\x20Deploy','-sf.instanceUrl','-sf.instanceUrl\x20','vlocity','utf8','adm-zip','SOURCE_FOLDER','285fxlhlc','jsforce','Connection','update','../../../services/child-process','exports','getDate','../../../services/http','-sf.accessToken','getMinutes','getHours','Start\x20Unzip\x20Vlocity\x20Temp','log','Is_Error__c'];a29_0x8605=function(){return _0x54f344;};return a29_0x8605();}