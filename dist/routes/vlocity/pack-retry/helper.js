const a37_0x2c72a3=a37_0x3d67;(function(_0x34d317,_0x4581d9){const _0x51b3aa=a37_0x3d67,_0x18994c=_0x34d317();while(!![]){try{const _0x51228d=parseInt(_0x51b3aa(0xfa))/0x1+parseInt(_0x51b3aa(0xf0))/0x2+parseInt(_0x51b3aa(0xc9))/0x3+parseInt(_0x51b3aa(0xd4))/0x4*(parseInt(_0x51b3aa(0xf6))/0x5)+-parseInt(_0x51b3aa(0xd8))/0x6*(-parseInt(_0x51b3aa(0xea))/0x7)+-parseInt(_0x51b3aa(0xd0))/0x8*(parseInt(_0x51b3aa(0xdc))/0x9)+parseInt(_0x51b3aa(0xe9))/0xa*(-parseInt(_0x51b3aa(0xe8))/0xb);if(_0x51228d===_0x4581d9)break;else _0x18994c['push'](_0x18994c['shift']());}catch(_0x3ae086){_0x18994c['push'](_0x18994c['shift']());}}}(a37_0x456d,0x64870));const AdmZip=require(a37_0x2c72a3(0xe1)),fs=require('fs'),yaml=require('js-yaml'),jsForce=require(a37_0x2c72a3(0xdf)),childProcess=require('../../../services/child-process'),constants=require(a37_0x2c72a3(0xda)),http=require('../../../services/http');function unzipVlocityTemp(_0x24a367,_0x851bbf,_0x111ac0){return new Promise((_0x3d6df3,_0x8f4a65)=>{const _0x2c08b8=a37_0x3d67;try{_0x111ac0[_0x2c08b8(0xe5)](_0x2c08b8(0xd1));const _0x569b29=new AdmZip(_0x851bbf);_0x569b29['extractAllTo'](_0x24a367,![]),_0x3d6df3(),_0x111ac0[_0x2c08b8(0xe5)](_0x2c08b8(0xcd));}catch(_0x14f55a){_0x111ac0[_0x2c08b8(0xe5)]('Error\x20Unzip\x20Vlocity\x20Temp\x20'+_0x14f55a),_0x8f4a65(_0x14f55a);}});}function a37_0x3d67(_0x2d2e80,_0x42e972){const _0x456d23=a37_0x456d();return a37_0x3d67=function(_0x3d67b7,_0x593bfc){_0x3d67b7=_0x3d67b7-0xc7;let _0x5e0155=_0x456d23[_0x3d67b7];return _0x5e0155;},a37_0x3d67(_0x2d2e80,_0x42e972);}function packRetry(_0x5d84b8,_0x496bf5,_0xcd2dbf,_0x43b1fd,_0x476713,_0x18247c){return new Promise((_0x1a3241,_0x57bc55)=>{const _0x2aa853=a37_0x3d67;try{_0x18247c[_0x2aa853(0xe5)]('Start\x20Pack\x20Retry');const _0x554629=_0x2aa853(0xef),_0x1d15ae=['-sf.accessToken',''+_0xcd2dbf,_0x2aa853(0xee),''+_0x496bf5,'--nojob',_0x2aa853(0xd2)];_0x18247c[_0x2aa853(0xe5)](_0x2aa853(0xec)),_0x18247c['log'](_0x2aa853(0xf7)),_0x18247c[_0x2aa853(0xe5)]('-sf.instanceUrl\x20'+_0x496bf5),_0x18247c[_0x2aa853(0xe5)](_0x2aa853(0xf2)),_0x18247c['log'](_0x2aa853(0xd2));function _0x5bfc2a(){const _0x523da2=_0x2aa853;http[_0x523da2(0xcb)](_0x5d84b8,_0x43b1fd,_0x476713,_0x18247c,![]);}const _0x20160b={'cwd':_0x5d84b8,'maxBuffer':0x400*0x1f4};childProcess[_0x2aa853(0xd7)](_0x554629,_0x1d15ae,_0x18247c,_0x20160b,!![],_0x5bfc2a)[_0x2aa853(0xde)](_0x5fc9a6=>{const _0x1ac8ef=_0x2aa853;_0x18247c[_0x1ac8ef(0xe5)]('End\x20Pack\x20Retry'),_0x1a3241(_0x5fc9a6);})[_0x2aa853(0xe3)](_0x251d70=>{const _0x3e7bf0=_0x2aa853;_0x18247c[_0x3e7bf0(0xe5)](_0x3e7bf0(0xd6)+_0x251d70),_0x57bc55(_0x251d70);});}catch(_0x393612){_0x57bc55(_0x393612);}});}function a37_0x456d(){const _0x349c19=['0$1','1709403PJBNKD','sobject','updateAttachmentLog','getHours','End\x20Unzip\x20Vlocity\x20Temp','getMinutes','Errors','27992BwWtDp','Start\x20Unzip\x20Vlocity\x20Temp','packRetry','replace','124HYXKEX','getDate','Error\x20Pack\x20Retry\x20','callChildProcess','1936392RsIIBA','Snapshot_Vlocity__c','../../../constants','Error\x20Update\x20Snapshot','72RJUyZl','load','then','jsforce','toString','adm-zip','End\x20Update\x20Snapshot','catch','Is_Completed__c','log','Exist\x20Components\x20To\x20Deploy','Is_Error__c','3088987UkuMoE','80NRFLhB','14XUztaY','getSeconds','Command:','update','-sf.instanceUrl','vlocity','1125516QDcEDx','existsSync','-nojob','exports','getMonth','NAME_LOGS_FILE','33455iCwWbB','-sf.accessToken\x20##########','utf8','getFullYear','700844JHFngC','Error\x20Unzip\x20Vlocity\x20Temp\x20'];a37_0x456d=function(){return _0x349c19;};return a37_0x456d();}function isNeedToDeploy(_0x39098f,_0x2af6fa){return new Promise((_0x5860f6,_0x3ba57a)=>{const _0x115353=a37_0x3d67;try{fs['existsSync'](_0x39098f+'/'+constants['SOURCE_FOLDER'])?(_0x2af6fa['log'](_0x115353(0xe6)),_0x5860f6(!![])):(_0x2af6fa[_0x115353(0xe5)]('No\x20Components\x20To\x20Deploy'),_0x5860f6(![]));}catch(_0x69a0e1){_0x2af6fa[_0x115353(0xe5)](_0x115353(0xc7)+_0x69a0e1),_0x3ba57a(_0x69a0e1);}});}function callUpdateSnapshot(_0x5bfd40,_0x150f75,_0x57881f,_0x369349,_0x1a2820,_0x1a90da){return new Promise((_0x43e072,_0x15a742)=>{const _0x38202d=a37_0x3d67;try{const _0x275f81=new jsForce['Connection']({'accessToken':_0x150f75,'instanceUrl':_0x57881f});_0x1a90da[_0x38202d(0xe5)]('Start\x20Update\x20Snapshot');const _0x322dbe={'Id':_0x369349,[_0x1a2820+_0x38202d(0xe4)]:!![]};if(fs[_0x38202d(0xf1)](_0x5bfd40+'/'+constants[_0x38202d(0xf5)])){const _0x1bc93a=yaml[_0x38202d(0xdd)](fs['readFileSync'](_0x5bfd40+'/'+constants[_0x38202d(0xf5)],_0x38202d(0xf8)));_0x1bc93a['Errors']&&(_0x322dbe[_0x1a2820+_0x38202d(0xe7)]=_0x1bc93a[_0x38202d(0xcf)]['length']>0x0);}else _0x322dbe[_0x1a2820+'Is_Error__c']=![];_0x275f81[_0x38202d(0xca)](_0x1a2820+_0x38202d(0xd9))[_0x38202d(0xed)](_0x322dbe)['then'](()=>{const _0xb1f4c2=_0x38202d;_0x1a90da[_0xb1f4c2(0xe5)](_0xb1f4c2(0xe2)),_0x43e072();})[_0x38202d(0xe3)](_0x9686ea=>{const _0x1102c8=_0x38202d;_0x1a90da[_0x1102c8(0xe5)](_0x1102c8(0xdb)),_0x15a742(_0x9686ea);});}catch(_0x4e11b2){_0x1a90da[_0x38202d(0xe5)](_0x38202d(0xdb)),_0x15a742(_0x4e11b2);}});}function getTime(){const _0xa57250=a37_0x2c72a3,_0x3b72f9=new Date(),_0xb7a646=[_0x3b72f9[_0xa57250(0xd5)](),_0x3b72f9[_0xa57250(0xf4)]()+0x1,_0x3b72f9[_0xa57250(0xf9)](),_0x3b72f9[_0xa57250(0xcc)](),_0x3b72f9[_0xa57250(0xce)](),_0x3b72f9[_0xa57250(0xeb)]()];return _0xb7a646['forEach'](_0x15ccae=>_0x15ccae=_0x15ccae[_0xa57250(0xe0)]()[_0xa57250(0xd3)](/^([0-9])$/,_0xa57250(0xc8))),_0xb7a646[0x2]+'-'+_0xb7a646[0x1]+'-'+_0xb7a646[0x0]+'\x20'+_0xb7a646[0x3]+':'+_0xb7a646[0x4]+':'+_0xb7a646[0x5];}module[a37_0x2c72a3(0xf3)]={'unzipVlocityTemp':unzipVlocityTemp,'callUpdateSnapshot':callUpdateSnapshot,'packRetry':packRetry,'getTime':getTime,'isNeedToDeploy':isNeedToDeploy};