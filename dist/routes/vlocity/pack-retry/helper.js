const a31_0x28d074=a31_0x47d5;(function(_0x42d26f,_0x1790c2){const _0x4bd3b7=a31_0x47d5,_0x2084d8=_0x42d26f();while(!![]){try{const _0x5333f7=parseInt(_0x4bd3b7(0x1b3))/0x1+-parseInt(_0x4bd3b7(0x1ca))/0x2*(parseInt(_0x4bd3b7(0x1bf))/0x3)+parseInt(_0x4bd3b7(0x1db))/0x4*(-parseInt(_0x4bd3b7(0x1c1))/0x5)+-parseInt(_0x4bd3b7(0x1ce))/0x6*(parseInt(_0x4bd3b7(0x1b5))/0x7)+-parseInt(_0x4bd3b7(0x1d5))/0x8*(parseInt(_0x4bd3b7(0x1d2))/0x9)+parseInt(_0x4bd3b7(0x1d1))/0xa+-parseInt(_0x4bd3b7(0x1c3))/0xb*(-parseInt(_0x4bd3b7(0x1d9))/0xc);if(_0x5333f7===_0x1790c2)break;else _0x2084d8['push'](_0x2084d8['shift']());}catch(_0x39434e){_0x2084d8['push'](_0x2084d8['shift']());}}}(a31_0x5e7e,0x77ada));const AdmZip=require(a31_0x28d074(0x1ab)),fs=require('fs'),yaml=require(a31_0x28d074(0x1d4)),jsForce=require(a31_0x28d074(0x1b8)),childProcess=require(a31_0x28d074(0x1aa)),constants=require('../../../constants'),http=require('../../../services/http');function unzipVlocityTemp(_0x4359b6,_0x43edfc,_0x5af9b8){return new Promise((_0x40cb83,_0x4d95a6)=>{const _0x1df03b=a31_0x47d5;try{_0x5af9b8[_0x1df03b(0x1b6)]('Start\x20Unzip\x20Vlocity\x20Temp');const _0x58cedc=new AdmZip(_0x43edfc);_0x58cedc[_0x1df03b(0x1e1)](_0x4359b6,![]),_0x40cb83(),_0x5af9b8[_0x1df03b(0x1b6)](_0x1df03b(0x1b9));}catch(_0x2d9dad){_0x5af9b8[_0x1df03b(0x1b6)](_0x1df03b(0x1bd)+_0x2d9dad),_0x4d95a6(_0x2d9dad);}});}function a31_0x5e7e(){const _0x17472=['2697735yDFJix','readFileSync','209nwyVky','catch','update','forEach','SOURCE_FOLDER','Snapshot_Vlocity__c','Exist\x20Components\x20To\x20Deploy','692642RCcqHH','packRetry','Start\x20Update\x20Snapshot','Connection','826854jpbnuq','NAME_LOGS_FILE','existsSync','26270RnIuSA','24318PwrbJS','Error\x20Update\x20Snapshot','js-yaml','176zDFkHi','toString','Is_Completed__c','--nojob','1221264lxxVYA','getDate','4IzquQJ','utf8','End\x20Pack\x20Retry','No\x20Components\x20To\x20Deploy','Errors','Is_Error__c','extractAllTo','../../../services/child-process','adm-zip','Command:','getMinutes','replace','exports','load','End\x20Update\x20Snapshot','then','188264RynEkX','sobject','35sPaeks','log','getMonth','jsforce','End\x20Unzip\x20Vlocity\x20Temp','getFullYear','0$1','Start\x20Pack\x20Retry','Error\x20Unzip\x20Vlocity\x20Temp\x20','vlocity','3JBSJtD','-sf.instanceUrl\x20'];a31_0x5e7e=function(){return _0x17472;};return a31_0x5e7e();}function packRetry(_0x41937b,_0x4211ab,_0x5a123c,_0x6000c5,_0x1684bd,_0x50e9d8){return new Promise((_0xb259f0,_0x67a1a7)=>{const _0x137d8c=a31_0x47d5;try{_0x50e9d8[_0x137d8c(0x1b6)](_0x137d8c(0x1bc));const _0x9a8318=_0x137d8c(0x1be),_0xfc0d4a=['-sf.accessToken',''+_0x5a123c,'-sf.instanceUrl',''+_0x4211ab,_0x137d8c(0x1d8),_0x137d8c(0x1cb)];_0x50e9d8[_0x137d8c(0x1b6)](_0x137d8c(0x1ac)),_0x50e9d8[_0x137d8c(0x1b6)]('-sf.accessToken\x20##########'),_0x50e9d8[_0x137d8c(0x1b6)](_0x137d8c(0x1c0)+_0x4211ab),_0x50e9d8[_0x137d8c(0x1b6)]('-nojob'),_0x50e9d8['log'](_0x137d8c(0x1cb));function _0x983777(){http['updateAttachmentLog'](_0x41937b,_0x6000c5,_0x1684bd,_0x50e9d8,![]);}const _0x1f245b={'cwd':_0x41937b,'maxBuffer':0x400*0x1f4};childProcess['callChildProcess'](_0x9a8318,_0xfc0d4a,_0x50e9d8,_0x1f245b,!![],_0x983777)[_0x137d8c(0x1b2)](_0x5c55c6=>{const _0x33b31a=_0x137d8c;_0x50e9d8[_0x33b31a(0x1b6)](_0x33b31a(0x1dd)),_0xb259f0(_0x5c55c6);})[_0x137d8c(0x1c4)](_0x47893f=>{_0x50e9d8['log']('Error\x20Pack\x20Retry\x20'+_0x47893f),_0x67a1a7(_0x47893f);});}catch(_0xbed6f9){_0x67a1a7(_0xbed6f9);}});}function isNeedToDeploy(_0x3cc750,_0x1ddfd6){return new Promise((_0x3cd1b3,_0x297460)=>{const _0x49113e=a31_0x47d5;try{fs[_0x49113e(0x1d0)](_0x3cc750+'/'+constants[_0x49113e(0x1c7)])?(_0x1ddfd6['log'](_0x49113e(0x1c9)),_0x3cd1b3(!![])):(_0x1ddfd6['log'](_0x49113e(0x1de)),_0x3cd1b3(![]));}catch(_0x3b3fda){_0x1ddfd6[_0x49113e(0x1b6)](_0x49113e(0x1bd)+_0x3b3fda),_0x297460(_0x3b3fda);}});}function callUpdateSnapshot(_0x412a1f,_0x10afd9,_0x5c298a,_0xc98e44,_0x383f58,_0x261812){return new Promise((_0x26588a,_0xf1cd9c)=>{const _0x4a0071=a31_0x47d5;try{const _0x18ceaf=new jsForce[(_0x4a0071(0x1cd))]({'accessToken':_0x10afd9,'instanceUrl':_0x5c298a});_0x261812[_0x4a0071(0x1b6)](_0x4a0071(0x1cc));const _0x43b770={'Id':_0xc98e44,[_0x383f58+_0x4a0071(0x1d7)]:!![]};if(fs['existsSync'](_0x412a1f+'/'+constants[_0x4a0071(0x1cf)])){const _0x31bcf5=yaml[_0x4a0071(0x1b0)](fs[_0x4a0071(0x1c2)](_0x412a1f+'/'+constants[_0x4a0071(0x1cf)],_0x4a0071(0x1dc)));_0x31bcf5['Errors']&&(_0x43b770[_0x383f58+_0x4a0071(0x1e0)]=_0x31bcf5[_0x4a0071(0x1df)]['length']>0x0);}else _0x43b770[_0x383f58+_0x4a0071(0x1e0)]=![];_0x18ceaf[_0x4a0071(0x1b4)](_0x383f58+_0x4a0071(0x1c8))[_0x4a0071(0x1c5)](_0x43b770)[_0x4a0071(0x1b2)](()=>{const _0x1862f8=_0x4a0071;_0x261812[_0x1862f8(0x1b6)](_0x1862f8(0x1b1)),_0x26588a();})[_0x4a0071(0x1c4)](_0x496765=>{const _0x259d54=_0x4a0071;_0x261812[_0x259d54(0x1b6)](_0x259d54(0x1d3)),_0xf1cd9c(_0x496765);});}catch(_0x3efa4e){_0x261812[_0x4a0071(0x1b6)]('Error\x20Update\x20Snapshot'),_0xf1cd9c(_0x3efa4e);}});}function a31_0x47d5(_0x8e3c9e,_0x8b42ce){const _0x5e7eed=a31_0x5e7e();return a31_0x47d5=function(_0x47d5a1,_0x4f95fe){_0x47d5a1=_0x47d5a1-0x1aa;let _0x2befcb=_0x5e7eed[_0x47d5a1];return _0x2befcb;},a31_0x47d5(_0x8e3c9e,_0x8b42ce);}function getTime(){const _0x31898d=a31_0x28d074,_0x7961b1=new Date(),_0x1566c0=[_0x7961b1[_0x31898d(0x1da)](),_0x7961b1[_0x31898d(0x1b7)]()+0x1,_0x7961b1[_0x31898d(0x1ba)](),_0x7961b1['getHours'](),_0x7961b1[_0x31898d(0x1ad)](),_0x7961b1['getSeconds']()];return _0x1566c0[_0x31898d(0x1c6)](_0x20aba5=>_0x20aba5=_0x20aba5[_0x31898d(0x1d6)]()[_0x31898d(0x1ae)](/^([0-9])$/,_0x31898d(0x1bb))),_0x1566c0[0x2]+'-'+_0x1566c0[0x1]+'-'+_0x1566c0[0x0]+'\x20'+_0x1566c0[0x3]+':'+_0x1566c0[0x4]+':'+_0x1566c0[0x5];}module[a31_0x28d074(0x1af)]={'unzipVlocityTemp':unzipVlocityTemp,'callUpdateSnapshot':callUpdateSnapshot,'packRetry':packRetry,'getTime':getTime,'isNeedToDeploy':isNeedToDeploy};