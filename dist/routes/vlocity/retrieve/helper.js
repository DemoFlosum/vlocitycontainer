const a40_0x3cf16b=a40_0xe1d0;(function(_0x4f0fbc,_0x41bd9f){const _0x5ff25a=a40_0xe1d0,_0x52bdb5=_0x4f0fbc();while(!![]){try{const _0x46360f=parseInt(_0x5ff25a(0x78))/0x1+parseInt(_0x5ff25a(0xf9))/0x2+parseInt(_0x5ff25a(0x121))/0x3*(parseInt(_0x5ff25a(0x108))/0x4)+-parseInt(_0x5ff25a(0xc7))/0x5*(-parseInt(_0x5ff25a(0xdc))/0x6)+parseInt(_0x5ff25a(0x73))/0x7*(-parseInt(_0x5ff25a(0xb2))/0x8)+parseInt(_0x5ff25a(0x120))/0x9+-parseInt(_0x5ff25a(0xab))/0xa*(parseInt(_0x5ff25a(0x7c))/0xb);if(_0x46360f===_0x41bd9f)break;else _0x52bdb5['push'](_0x52bdb5['shift']());}catch(_0x5b4d7a){_0x52bdb5['push'](_0x52bdb5['shift']());}}}(a40_0x2f3a,0x27f87));const fs=require('fs'),crc32=require(a40_0x3cf16b(0xba)),AdmZip=require('adm-zip'),yaml=require(a40_0x3cf16b(0x119)),{resolve}=require('path'),jsForce=require('jsforce'),constants=require(a40_0x3cf16b(0xfd)),childProcess=require(a40_0x3cf16b(0x8c)),http=require(a40_0x3cf16b(0xf5)),{VlocityHelper}=require(a40_0x3cf16b(0x10f));class RetrieveHelper{constructor(_0x53890f,_0x1a67f8,_0x3ad329){const _0x3b68f6=a40_0x3cf16b;this[_0x3b68f6(0x7f)]=_0x1a67f8[_0x3b68f6(0x10c)]['instanceUrl'],this['flosumToken']=_0x1a67f8[_0x3b68f6(0x10c)][_0x3b68f6(0x8e)],this[_0x3b68f6(0x11a)]=_0x1a67f8[_0x3b68f6(0xd9)][_0x3b68f6(0xac)],this[_0x3b68f6(0xe2)]=_0x1a67f8[_0x3b68f6(0xd9)]['accessToken'],this[_0x3b68f6(0xf1)]=_0x1a67f8[_0x3b68f6(0xf1)],this[_0x3b68f6(0xcf)]=_0x1a67f8[_0x3b68f6(0xcf)],this[_0x3b68f6(0xda)]=_0x53890f,this['authFlosum']=_0x1a67f8[_0x3b68f6(0x10c)],this[_0x3b68f6(0x8b)]=_0x1a67f8[_0x3b68f6(0x8b)],this[_0x3b68f6(0xa7)]=_0x1a67f8[_0x3b68f6(0xa7)],this[_0x3b68f6(0x113)]=_0x1a67f8['nameOfComponents'],this[_0x3b68f6(0xd6)]=_0x1a67f8[_0x3b68f6(0xd6)],this['isLikeSearch']=_0x1a67f8[_0x3b68f6(0xa8)],this[_0x3b68f6(0xa9)]=_0x1a67f8['snapshotId'],this['selectedDataPackTypes']=JSON[_0x3b68f6(0xa2)](_0x1a67f8[_0x3b68f6(0xe9)]),this['isNotIncludeDependencies']=_0x1a67f8['isNotIncludeDependencies'],this[_0x3b68f6(0x85)]=_0x1a67f8[_0x3b68f6(0x85)],this[_0x3b68f6(0x128)]=_0x1a67f8[_0x3b68f6(0x128)],this[_0x3b68f6(0xf7)]=_0x1a67f8['isAfterUpdateSearchByKey'],this['isRunPackRetryAutomatically']=!!_0x1a67f8['isRunPackRetryAutomatically'],this[_0x3b68f6(0xbf)]=_0x1a67f8[_0x3b68f6(0xbf)],this[_0x3b68f6(0xd7)]=_0x1a67f8[_0x3b68f6(0xd7)],this[_0x3b68f6(0x74)]=_0x3ad329,this[_0x3b68f6(0xcb)]=new jsForce[(_0x3b68f6(0xaf))](_0x1a67f8[_0x3b68f6(0x10c)]);}async[a40_0x3cf16b(0x114)](){const _0x4bf6a1=a40_0x3cf16b,_0x41fdca=await new VlocityHelper(this[_0x4bf6a1(0xe2)],this[_0x4bf6a1(0x11a)],this[_0x4bf6a1(0x74)])[_0x4bf6a1(0x98)]();if(!_0x41fdca?.['records']?.[_0x4bf6a1(0xe3)])throw new Error(_0x4bf6a1(0xed));const _0x17899c=this[_0x4bf6a1(0x113)][_0x4bf6a1(0xbe)](';')[_0x4bf6a1(0x93)](_0x416e27=>_0x416e27[_0x4bf6a1(0x10a)]()),_0x14899e=new Set(this[_0x4bf6a1(0xe9)]),_0x1d81da=[];for(const {VlocityDataPackType:_0x1e4ca9,Name:_0x715f44,VlocityDataPackDisplayLabel:_0x1359af,VlocityDataPackKey:_0x5194f1}of _0x41fdca[_0x4bf6a1(0xea)]){if(!_0x14899e[_0x4bf6a1(0xb0)](_0x1e4ca9))continue;const _0x513e45=_0x715f44?.['toLowerCase']()||'',_0x28f611=_0x1359af?.[_0x4bf6a1(0x10a)]()||'',_0x4b88d2=_0x5194f1?.[_0x4bf6a1(0x10a)]()||'';(_0x17899c[_0x4bf6a1(0xd1)](_0x5c0ac0=>_0x513e45[_0x4bf6a1(0xbd)](_0x5c0ac0))||_0x17899c['some'](_0x1d72c9=>_0x28f611['includes'](_0x1d72c9))||_0x17899c[_0x4bf6a1(0xd1)](_0xe9d968=>_0x4b88d2[_0x4bf6a1(0xbd)](_0xe9d968)))&&_0x1d81da['push'](_0x5194f1);}const _0x1b7e4f=_0x4bf6a1(0xa3)+constants[_0x4bf6a1(0x11f)]+_0x4bf6a1(0xe8)+_0x1d81da[_0x4bf6a1(0x95)](_0x4bf6a1(0xae));fs[_0x4bf6a1(0xd0)](this[_0x4bf6a1(0xda)]+'/'+constants[_0x4bf6a1(0x88)],_0x1b7e4f),this[_0x4bf6a1(0x74)][_0x4bf6a1(0xcc)](_0x4bf6a1(0x77));}[a40_0x3cf16b(0x91)](){return new Promise((_0x3f493d,_0x12711d)=>{const _0x18e0cb=a40_0xe1d0;try{this[_0x18e0cb(0x74)][_0x18e0cb(0xcc)](_0x18e0cb(0xb1));let _0x357f37;if(this[_0x18e0cb(0xbf)]===_0x18e0cb(0x9b)&&this[_0x18e0cb(0xd7)]?.['length']){_0x357f37=_0x18e0cb(0xa3)+constants['UNZIP_CATALOG_NAME']+_0x18e0cb(0xe8)+this['keys']['join']('\x0a\x20-\x20'),fs[_0x18e0cb(0xd0)](this['projectPath']+'/'+constants[_0x18e0cb(0x88)],_0x357f37),this['logger'][_0x18e0cb(0xcc)](_0x18e0cb(0x77)),_0x3f493d();return;}if(this[_0x18e0cb(0xbf)]===_0x18e0cb(0x89)){this['createYamlByDataPackTypes']()[_0x18e0cb(0x86)](()=>_0x3f493d())[_0x18e0cb(0xdf)](_0x29507e=>{const _0x2b4ef6=_0x18e0cb;this[_0x2b4ef6(0x74)][_0x2b4ef6(0xcc)](_0x2b4ef6(0xef)),_0x12711d(_0x29507e);});return;}_0x357f37=_0x18e0cb(0xa3)+constants['UNZIP_CATALOG_NAME']+'\x0a';if(this[_0x18e0cb(0xf7)]){if(this['nameOfComponents']){if(this['searchBy']===_0x18e0cb(0x11e)){const _0x41391f=this[_0x18e0cb(0x113)][_0x18e0cb(0xbe)]('\x0a')[_0x18e0cb(0x10e)](_0x8e6cf2=>_0x8e6cf2['trim']()['startsWith']('-'))[_0x18e0cb(0x93)](_0x1ffe70=>_0x1ffe70[_0x18e0cb(0x11d)]('-','')['trim']());_0x41391f[_0x18e0cb(0xe3)]?(_0x357f37+=_0x18e0cb(0xc0),_0x357f37+=_0x41391f[_0x18e0cb(0x95)](_0x18e0cb(0xae)),fs[_0x18e0cb(0xd0)](this['projectPath']+'/'+constants[_0x18e0cb(0x88)],_0x357f37),this[_0x18e0cb(0x74)][_0x18e0cb(0xcc)]('End\x20Create\x20Job\x20File'),_0x3f493d()):_0x12711d(_0x18e0cb(0xc2));}if(this[_0x18e0cb(0xd6)]===_0x18e0cb(0xdb))try{const _0xdc977b=yaml[_0x18e0cb(0x118)](this[_0x18e0cb(0x113)]);_0xdc977b[_0x18e0cb(0xda)]=_0x18e0cb(0x99),fs[_0x18e0cb(0xd0)](this['projectPath']+'/'+constants[_0x18e0cb(0x88)],yaml[_0x18e0cb(0x101)](_0xdc977b)),_0x3f493d(),this[_0x18e0cb(0x74)][_0x18e0cb(0xcc)](_0x18e0cb(0x77));}catch(_0x7558ea){this[_0x18e0cb(0x74)][_0x18e0cb(0xcc)](_0x18e0cb(0xe1)+_0x7558ea),_0x12711d(_0x7558ea);}else _0x357f37+=_0x18e0cb(0xe0)+this[_0x18e0cb(0xb9)](),fs['appendFileSync'](this['projectPath']+'/'+constants[_0x18e0cb(0x88)],_0x357f37),_0x3f493d(),this[_0x18e0cb(0x74)][_0x18e0cb(0xcc)](_0x18e0cb(0x77));}else _0x357f37+=_0x18e0cb(0xe0)+this[_0x18e0cb(0xb9)](),fs['appendFileSync'](this[_0x18e0cb(0xda)]+'/'+constants['JOB_FILE_NAME'],_0x357f37),_0x3f493d(),this['logger'][_0x18e0cb(0xcc)](_0x18e0cb(0x77));}else _0x357f37+='queries:\x0a'+this[_0x18e0cb(0xb9)](),fs[_0x18e0cb(0xd0)](this['projectPath']+'/'+constants[_0x18e0cb(0x88)],_0x357f37),_0x3f493d(),this[_0x18e0cb(0x74)][_0x18e0cb(0xcc)](_0x18e0cb(0x77));}catch(_0x407282){this[_0x18e0cb(0x74)][_0x18e0cb(0xcc)](_0x18e0cb(0xef)),_0x12711d(_0x407282);}});}[a40_0x3cf16b(0xb9)](){const _0x347ce4=a40_0x3cf16b,_0x536608=Array[_0x347ce4(0x79)](this['selectedDataPackTypes'])?this['selectedDataPackTypes']:Object[_0x347ce4(0xd7)](this[_0x347ce4(0xe9)]),_0x5f31e4=[];/^ *$/['test'](this[_0x347ce4(0x113)])?this[_0x347ce4(0x113)]=[]:this[_0x347ce4(0x113)]=this[_0x347ce4(0x113)][_0x347ce4(0xbe)](';');if(this[_0x347ce4(0x113)][_0x347ce4(0xe3)]){const _0x566ad6=this[_0x347ce4(0xa8)]?this[_0x347ce4(0x113)][_0x347ce4(0x95)](_0x347ce4(0x9c)):this[_0x347ce4(0x113)][_0x347ce4(0x95)](_0x347ce4(0xc1));for(const _0x1f2a87 of _0x536608){_0x5f31e4[_0x347ce4(0x97)](this[_0x347ce4(0x103)](_0x1f2a87,_0x566ad6));}}else for(const _0x56bac6 of _0x536608){const _0x439f10=constants[_0x347ce4(0x7e)]['includes'](_0x56bac6)?this[_0x347ce4(0x103)](_0x56bac6):'-\x20'+_0x56bac6;_0x5f31e4[_0x347ce4(0x97)](_0x439f10);}return _0x5f31e4[_0x347ce4(0x95)]('\x0a');}[a40_0x3cf16b(0x103)](_0x33163a,_0x3d488c=null){const _0x12560a=a40_0x3cf16b,_0x45d445=constants[_0x12560a(0x90)][_0x33163a];let _0x593e2c='';if(_0x45d445){const _0x3c770c=_0x45d445[_0x12560a(0x94)][_0x12560a(0xe5)]('__c')&&!!this[_0x12560a(0xa7)]?''+this[_0x12560a(0xa7)]+_0x45d445[_0x12560a(0x94)]:''+_0x45d445[_0x12560a(0x94)];_0x593e2c=_0x12560a(0xad)+_0x33163a+'\x0a';const _0x1e6277=_0x45d445[_0x12560a(0xb6)][_0x12560a(0x11d)](new RegExp(constants[_0x12560a(0xce)],'g'),this[_0x12560a(0xa7)]);this[_0x12560a(0xa8)]?(_0x593e2c+='\x20\x20query:\x20SELECT\x20'+_0x1e6277+_0x12560a(0x117)+_0x3c770c,_0x3d488c&&(_0x593e2c+=_0x12560a(0xa6)+_0x3d488c+_0x12560a(0xcd))):(_0x593e2c+=_0x12560a(0xe4)+_0x1e6277+_0x12560a(0x117)+_0x3c770c,_0x3d488c&&(_0x593e2c+=_0x12560a(0xaa)+_0x3d488c+'\x27)'));if(_0x45d445[_0x12560a(0xf3)]){const _0x3b5f18=_0x3d488c?'AND':_0x12560a(0x75),_0x59b2fb=_0x45d445['query'][_0x12560a(0x11d)](new RegExp(constants['VLOCITY_NAMESPACE_PREFIX_CODE'],'g'),this[_0x12560a(0xa7)]);_0x593e2c+='\x20'+_0x3b5f18+'\x20'+_0x59b2fb+'\x0a';}else _0x593e2c+='\x0a';}return _0x593e2c;}['retrieveData'](){return new Promise((_0x363cfe,_0x540d28)=>{const _0x2dbcb8=a40_0xe1d0;try{this[_0x2dbcb8(0x74)]['log'](_0x2dbcb8(0xa5));const _0x550de4='vlocity',_0x5527ba=this[_0x2dbcb8(0x10b)]?'0':'-1',_0x1b07f1=[_0x2dbcb8(0x104),''+this[_0x2dbcb8(0xe2)],_0x2dbcb8(0xd5),''+this[_0x2dbcb8(0x11a)],'-job',''+constants[_0x2dbcb8(0x88)],_0x2dbcb8(0xc5),_0x2dbcb8(0xe7),_0x5527ba];this['isSeparateMatrixVersions']&&_0x1b07f1[_0x2dbcb8(0x97)](_0x2dbcb8(0xb7));this[_0x2dbcb8(0x128)]&&_0x1b07f1[_0x2dbcb8(0x97)](_0x2dbcb8(0xde));_0x1b07f1[_0x2dbcb8(0x97)](_0x2dbcb8(0x116));const _0x55ffd6=()=>{const _0x1382d7=_0x2dbcb8;http[_0x1382d7(0xff)](this[_0x1382d7(0xda)],this['jsForceConnection'],this[_0x1382d7(0xcf)],this['logger'],![]);};this[_0x2dbcb8(0x74)][_0x2dbcb8(0xcc)](_0x1b07f1['join']('\x20'));const _0x3d891f={'cwd':''+this['projectPath'],'maxBuffer':0x400*0x1f4};childProcess[_0x2dbcb8(0xbc)](_0x550de4,_0x1b07f1,this[_0x2dbcb8(0x74)],_0x3d891f,!![],_0x55ffd6)[_0x2dbcb8(0x86)](_0x18869c=>{const _0x94e13e=_0x2dbcb8;this[_0x94e13e(0x74)][_0x94e13e(0xcc)](_0x94e13e(0xeb)),_0x363cfe(_0x18869c);})[_0x2dbcb8(0xdf)](_0x2db2ba=>{const _0x500bef=_0x2dbcb8;this[_0x500bef(0x74)][_0x500bef(0xcc)](_0x500bef(0x7d)+_0x2db2ba),_0x540d28(_0x2db2ba);});}catch(_0x3b39c5){_0x540d28(_0x3b39c5);}});}[a40_0x3cf16b(0x102)](){return new Promise((_0x2eeff0,_0x2afb52)=>{const _0x5f2d70=a40_0xe1d0;try{this[_0x5f2d70(0x74)]['log'](_0x5f2d70(0x8f));let _0x25572c=0x0,_0x26fe05=[],_0x2dca03=0x0;const _0x2ceaa2=[],_0x46f233=this[_0x5f2d70(0xda)]+'/'+constants[_0x5f2d70(0x11f)],_0x42864d=fs['readdirSync'](_0x46f233);for(let _0xff18d5=0x0;_0xff18d5<_0x42864d[_0x5f2d70(0xe3)];_0xff18d5++){const _0x34e724=_0x42864d[_0xff18d5]===_0x5f2d70(0xbb)?_0x5f2d70(0x84):'Name',_0x3a6f5d=_0x46f233+'/'+_0x42864d[_0xff18d5],_0x17b5fb=fs[_0x5f2d70(0xb4)](_0x3a6f5d);for(let _0x6fbd24=0x0;_0x6fbd24<_0x17b5fb[_0x5f2d70(0xe3)];_0x6fbd24++){const _0x3ff101=_0x42864d[_0xff18d5]+'/'+_0x17b5fb[_0x6fbd24];let _0x2097a5=_0x17b5fb[_0x6fbd24];const _0x256edf=[],_0x33d21a=_0x46f233+'/'+_0x42864d[_0xff18d5]+'/'+_0x17b5fb[_0x6fbd24],_0xf5dc8b=fs[_0x5f2d70(0xb4)](_0x33d21a);_0xf5dc8b[_0x5f2d70(0xfa)](_0x121b28=>{const _0x1ba1ce=_0x5f2d70;try{_0x121b28[_0x1ba1ce(0x80)]()[_0x1ba1ce(0xe5)](_0x1ba1ce(0x110))&&(_0x2097a5=JSON[_0x1ba1ce(0xa2)](fs[_0x1ba1ce(0xd3)](_0x33d21a+'/'+_0x121b28)[_0x1ba1ce(0x80)]())[_0x34e724]);}catch(_0x1aa8fc){this[_0x1ba1ce(0x74)][_0x1ba1ce(0xcc)](_0x1ba1ce(0xf2)+_0x121b28);}!_0x2097a5&&(_0x2097a5=undefined),fs['lstatSync'](_0x33d21a+'/'+_0x121b28[_0x1ba1ce(0x80)]())['isDirectory']()&&_0x256edf[_0x1ba1ce(0x97)](...this[_0x1ba1ce(0xee)](_0x33d21a,_0x121b28));});const _0x4b545e=new AdmZip();_0x4b545e[_0x5f2d70(0x9e)](_0x33d21a,_0x42864d[_0xff18d5]+'/'+_0x17b5fb[_0x6fbd24]);const _0x3a7309=_0x4b545e[_0x5f2d70(0x11b)](),_0x344e2b=crc32[_0x5f2d70(0x106)](_0x3a7309),_0x4abcea=_0x3a7309[_0x5f2d70(0x80)]('base64'),_0x561b3a={'fileName':_0x2097a5,'name':_0x17b5fb[_0x6fbd24],'type':_0x42864d[_0xff18d5],'label':_0x3ff101,'crc':_0x344e2b,'base64':_0x4abcea,'snapshotId':this[_0x5f2d70(0xa9)],'subItemList':JSON[_0x5f2d70(0x76)](_0x256edf)},_0x280e08=_0x3a7309[_0x5f2d70(0xe3)]/0xf4240,_0x8ce63e=!!(_0x17b5fb['length']-0x1===_0x6fbd24&&_0x42864d[_0x5f2d70(0xe3)]-0x1===_0xff18d5);_0x25572c+=_0x280e08,_0x25572c>0x2||_0x26fe05>0xfa0?(_0x2ceaa2['push'](_0x26fe05),_0x280e08<0x3?(_0x26fe05=[_0x561b3a],_0x2dca03++,_0x25572c=_0x280e08):(this['logger'][_0x5f2d70(0xcc)](_0x5f2d70(0x7b)+_0x3ff101+_0x5f2d70(0xf8),!![]),_0x25572c=0x0)):(_0x26fe05[_0x5f2d70(0x97)](_0x561b3a),_0x2dca03++),_0x8ce63e&&_0x2ceaa2[_0x5f2d70(0x97)](_0x26fe05);}}this[_0x5f2d70(0x74)][_0x5f2d70(0xcc)](_0x5f2d70(0xa4)),_0x2eeff0({'iteratorDeploy':_0x2ceaa2[Symbol[_0x5f2d70(0x127)]](),'count':_0x2dca03});}catch(_0x5c4800){this[_0x5f2d70(0x74)][_0x5f2d70(0xcc)](_0x5f2d70(0x8d)),_0x2afb52(_0x5c4800);}});}['findSubItems'](_0x35209d,_0x3434fa,_0xa7c616='',_0x9d8284=[]){const _0x3512df=a40_0x3cf16b;_0xa7c616[_0x3512df(0xe3)]&&(_0xa7c616='/'+_0xa7c616);const _0x56e8fd=fs[_0x3512df(0xb4)](_0x35209d+'/'+_0x3434fa+_0xa7c616);return _0x56e8fd[_0x3512df(0xfa)](_0x33d924=>{const _0x252a4d=_0x3512df;!fs['lstatSync'](_0x35209d+'/'+_0x3434fa+_0xa7c616+'/'+_0x33d924[_0x252a4d(0x80)]())['isDirectory']()?_0x9d8284[_0x252a4d(0x97)](''+_0x3434fa+_0xa7c616+'/'+_0x33d924[_0x252a4d(0x80)]()):this['findSubItems'](_0x35209d,_0x3434fa,_0x33d924,_0x9d8284);}),_0x9d8284;}['readFiles'](_0x7d552c,_0x3b8ad4='',_0x550462=[]){const _0x556bbe=a40_0x3cf16b,_0x1572c4=fs[_0x556bbe(0xb4)](_0x7d552c,{'withFileTypes':!![]});return _0x1572c4['forEach'](_0x163eb6=>{const _0x1ca59f=_0x556bbe,_0x3f243c=resolve(_0x7d552c,_0x163eb6[_0x1ca59f(0xf4)]);if(_0x163eb6['isDirectory']()){const _0x5b8204=_0x3b8ad4[_0x1ca59f(0xe3)]?_0x3b8ad4+'/'+_0x163eb6[_0x1ca59f(0xf4)]:_0x163eb6[_0x1ca59f(0xf4)];this[_0x1ca59f(0x10d)](_0x3f243c,_0x5b8204,_0x550462);}else{let _0x1898cc;_0x3b8ad4[_0x1ca59f(0xe3)]?_0x1898cc=_0x3b8ad4+'/'+_0x163eb6[_0x1ca59f(0xf4)]:_0x1898cc=_0x163eb6[_0x1ca59f(0xf4)],_0x550462['push'](_0x1898cc);}}),_0x550462;}[a40_0x3cf16b(0x129)](_0x32ee2f){return new Promise((_0x11b059,_0x2f8e87)=>{const _0x4d6122=a40_0xe1d0;try{this['logger']['log'](_0x4d6122(0xca)),this[_0x4d6122(0x107)](_0x32ee2f)[_0x4d6122(0x86)](()=>{const _0x29a184=_0x4d6122;this[_0x29a184(0x74)]['log'](_0x29a184(0xd2)),_0x11b059();})[_0x4d6122(0xdf)](_0x50e6ae=>{const _0x4a4ddb=_0x4d6122;this['logger'][_0x4a4ddb(0xcc)](_0x4a4ddb(0x11c)+_0x50e6ae),_0x2f8e87(_0x50e6ae);});}catch(_0x50b81c){_0x2f8e87(_0x50b81c);}});}[a40_0x3cf16b(0x107)](_0x3560a0,_0x7aea03=0x0){return new Promise((_0x1d44de,_0x37c431)=>{const _0x4d0dbc=a40_0xe1d0;try{const _0x2d9e8f=_0x3560a0[_0x4d0dbc(0x100)]['next']();_0x2d9e8f['done']?_0x1d44de():this[_0x4d0dbc(0xf0)](_0x3560a0,_0x2d9e8f,_0x7aea03)[_0x4d0dbc(0x86)](()=>_0x1d44de())[_0x4d0dbc(0xdf)](_0x5197c5=>_0x37c431(_0x5197c5));}catch(_0x43bc06){_0x37c431(_0x43bc06);}});}[a40_0x3cf16b(0xf0)](_0x33163b,_0x5dec30,_0x3d4e4c=0x0){return new Promise((_0x253479,_0x4a07c9)=>{const _0x25f1f4=a40_0xe1d0;try{const _0x5a3d11=this[_0x25f1f4(0x8b)]===''?_0x25f1f4(0xdd):'/Flosum/SnapshotVlocity/',_0x25ee50={'items':_0x5dec30[_0x25f1f4(0xc4)]};this['jsForceConnection']['apex']['post'](_0x5a3d11,_0x25ee50)[_0x25f1f4(0x86)](()=>{const _0x4e01d2=_0x25f1f4;return _0x3d4e4c+=_0x5dec30[_0x4e01d2(0xc4)]['length'],this[_0x4e01d2(0x74)]['log'](_0x4e01d2(0x96)+_0x3d4e4c+'\x20from\x20'+_0x33163b[_0x4e01d2(0x105)]),Promise[_0x4e01d2(0x9d)]();})[_0x25f1f4(0xdf)](_0x28bf9c=>{const _0x531e3d=_0x25f1f4;return this[_0x531e3d(0x74)]['log'](_0x531e3d(0x112)+_0x28bf9c),Promise[_0x531e3d(0x9d)]();})[_0x25f1f4(0x86)](()=>this['nextChunk'](_0x33163b,_0x3d4e4c))[_0x25f1f4(0x86)](_0x253479)[_0x25f1f4(0xdf)](_0x4a07c9);}catch(_0x23ceef){_0x4a07c9(_0x23ceef);}});}[a40_0x3cf16b(0x111)](){return new Promise(_0x56fe07=>{const _0x403ec7=a40_0xe1d0;try{this['logger'][_0x403ec7(0xcc)]('Start\x20Create\x20Vlocity\x20Temp\x20Zip');const _0x5bf469=this['projectPath']+'/'+constants['VLOCITY_TEMP_CATALOG'];if(fs[_0x403ec7(0x82)](_0x5bf469)){const _0x11de07=_0x5bf469+_0x403ec7(0xc6);if(this['logger'][_0x403ec7(0xb3)][_0x403ec7(0xe3)]&&fs[_0x403ec7(0x82)](_0x11de07)){const _0x50aa67=fs[_0x403ec7(0xb4)](_0x11de07);if(_0x50aa67&&_0x50aa67[_0x403ec7(0xe3)]){const _0x48a70a=_0x50aa67[0x0];if(_0x48a70a['includes'](_0x403ec7(0xb5))&&_0x48a70a[_0x403ec7(0xbd)](_0x403ec7(0x123))){const _0x546850=_0x403ec7(0xa0)+JSON[_0x403ec7(0x76)](this['logger'][_0x403ec7(0xb3)]);fs[_0x403ec7(0xd0)]('./'+_0x11de07+'/'+_0x48a70a,_0x546850);}}}const _0x13efb3=new AdmZip();_0x13efb3[_0x403ec7(0x9e)](_0x5bf469,constants[_0x403ec7(0x7a)]),_0x56fe07(_0x13efb3[_0x403ec7(0x11b)]()[_0x403ec7(0x80)]('base64')),this[_0x403ec7(0x74)]['log'](_0x403ec7(0xfe));}else this[_0x403ec7(0x74)][_0x403ec7(0xcc)](_0x403ec7(0xc3)),_0x56fe07();}catch(_0x530281){this['logger']['log'](_0x403ec7(0xec)+_0x530281),_0x56fe07();}});}['sendVlocityTemp'](_0x36042a){return new Promise((_0x53fe1a,_0x6642da)=>{const _0x2bcb41=a40_0xe1d0;try{this[_0x2bcb41(0x74)]['log'](_0x2bcb41(0xc8));const _0x45c01e={'Name':_0x2bcb41(0xc9),'ContentType':_0x2bcb41(0xd8),'Description':'Vlocity\x20Temp','ParentId':this[_0x2bcb41(0xa9)],'Body':_0x36042a};this['jsForceConnection'][_0x2bcb41(0xf6)](_0x2bcb41(0x115))[_0x2bcb41(0x81)](_0x45c01e)[_0x2bcb41(0x86)](()=>{const _0x3184bb=_0x2bcb41;this[_0x3184bb(0x74)]['log'](_0x3184bb(0xfc)),_0x53fe1a();})['catch'](_0x32c17e=>{const _0xafe05b=_0x2bcb41;this[_0xafe05b(0x74)][_0xafe05b(0xcc)](_0xafe05b(0xa1)+_0x32c17e),_0x6642da(_0x32c17e);});}catch(_0x75ceb2){this[_0x2bcb41(0x74)][_0x2bcb41(0xcc)](_0x2bcb41(0xa1)+_0x75ceb2),_0x6642da(_0x75ceb2);}});}['checkErrors'](){return new Promise(_0x146147=>{const _0x501003=a40_0xe1d0;try{if(fs[_0x501003(0x82)](this['projectPath']+'/'+constants[_0x501003(0x122)])){const _0x2ebdb7=yaml[_0x501003(0x118)](fs[_0x501003(0xd3)](this[_0x501003(0xda)]+'/'+constants['NAME_LOGS_FILE'],_0x501003(0x126)));_0x2ebdb7[_0x501003(0x125)]&&_0x2ebdb7['Errors'][_0x501003(0xe3)]?(this[_0x501003(0x74)][_0x501003(0xcc)](_0x501003(0xd4)+_0x2ebdb7[_0x501003(0x125)]['join']('\x0a')),_0x146147(!![])):_0x146147(![]);}else _0x146147(![]);}catch(_0x25cc91){_0x146147(![]);}});}[a40_0x3cf16b(0xb8)](_0x519b36,_0xa8c887=![]){return new Promise((_0x3db522,_0x87a3d6)=>{const _0x1a2895=a40_0xe1d0;try{Promise[_0x1a2895(0x9d)]()[_0x1a2895(0x86)](()=>this['createVlocityTempZip']())['then'](_0x4faeae=>{const _0x303f72=_0x1a2895;if(_0x4faeae)return this['sendVlocityTemp'](_0x4faeae);return Promise[_0x303f72(0x9d)]();})['then'](()=>http['updateAttachmentLog'](this[_0x1a2895(0xda)],this['jsForceConnection'],this[_0x1a2895(0xcf)],this[_0x1a2895(0x74)],_0xa8c887,!![]))['then'](_0x366aca=>{const _0x589d19=_0x1a2895;return _0xa8c887=_0x366aca,http[_0x589d19(0x109)](this[_0x589d19(0xcb)],this['logId'],this[_0x589d19(0x8b)],_0x519b36,this[_0x589d19(0x74)],_0x366aca);})[_0x1a2895(0x86)](()=>this[_0x1a2895(0x92)](_0xa8c887));}catch(_0x5ade54){_0x87a3d6(_0x5ade54);}});}[a40_0x3cf16b(0x92)](_0x57cfd4){return new Promise((_0x209fcb,_0x36fa21)=>{const _0x2e72ac=a40_0xe1d0;try{this[_0x2e72ac(0x74)][_0x2e72ac(0xcc)]('Start\x20Update\x20Snapshot');const _0x356ad7={'Id':this['snapshotId'],[this[_0x2e72ac(0x8b)]+_0x2e72ac(0x8a)]:!![],[this['nameSpacePrefix']+_0x2e72ac(0xfb)]:_0x57cfd4};this[_0x2e72ac(0xcb)][_0x2e72ac(0xf6)](this[_0x2e72ac(0x8b)]+'Snapshot_Vlocity__c')[_0x2e72ac(0x124)](_0x356ad7)['then'](()=>{const _0x1caf87=_0x2e72ac;this[_0x1caf87(0x74)]['log'](_0x1caf87(0xe6)),_0x209fcb(_0x356ad7[this[_0x1caf87(0x8b)]+_0x1caf87(0xfb)]);})['catch'](_0x5f22e2=>{const _0x3c6a66=_0x2e72ac;this[_0x3c6a66(0x74)]['log'](_0x3c6a66(0x83)),_0x36fa21(_0x5f22e2);});}catch(_0x5e34e9){this[_0x2e72ac(0x74)][_0x2e72ac(0xcc)](_0x2e72ac(0x83)),_0x36fa21(_0x5e34e9);}});}}function a40_0xe1d0(_0x17268c,_0x2e8cb3){const _0x2f3a96=a40_0x2f3a();return a40_0xe1d0=function(_0xe1d0e,_0x283fdf){_0xe1d0e=_0xe1d0e-0x73;let _0x6e6abe=_0x2f3a96[_0xe1d0e];return _0x6e6abe;},a40_0xe1d0(_0x17268c,_0x2e8cb3);}function createZip(_0x2fbfae,_0x28178c){const _0x455496=a40_0x3cf16b,_0x2779e9=new AdmZip(),_0x5e82da=this[_0x455496(0x10d)](_0x2fbfae);return _0x5e82da[_0x455496(0xfa)](_0x46eb4b=>{const _0x37078b=_0x455496;if(Array['isArray'](_0x46eb4b))_0x46eb4b[_0x37078b(0xfa)](_0x3972fb=>{const _0x106e52=_0x37078b,_0x447da4=fs[_0x106e52(0xd3)](_0x2fbfae+'/'+_0x3972fb,_0x106e52(0x126));_0x2779e9[_0x106e52(0x9a)](_0x28178c+'/'+_0x3972fb,Buffer[_0x106e52(0x9f)](_0x447da4));});else{const _0x28b426=fs[_0x37078b(0xd3)](_0x2fbfae+'/'+_0x46eb4b,_0x37078b(0x126));_0x2779e9[_0x37078b(0x9a)](_0x28178c+'/'+_0x46eb4b,Buffer['from'](_0x28b426));}}),_0x2779e9[_0x455496(0x11b)]();}module[a40_0x3cf16b(0x87)]={'RetrieveHelper':RetrieveHelper};function a40_0x2f3a(){const _0x5bc4a3=['8Bskgiv','callUpdateLog','toLowerCase','isNotIncludeDependencies','authFlosum','readFiles','filter','../../../services/vlocity','_DataPack.json','createVlocityTempZip','Error\x20deploy\x20chunk\x20','nameOfComponents','createYamlByDataPackTypes','Attachment','packExport','\x20FROM\x20','load','js-yaml','vlocityUrl','toBuffer','Error\x20Deploy\x20Components\x20','replace','key','UNZIP_CATALOG_NAME','1976823mkVNdI','416811sAkISI','NAME_LOGS_FILE','-Export.yaml','update','Errors','utf8','iterator','isSeparateCalculationProcedureVersions','deployComponents','7AFtbwB','logger','WHERE','stringify','End\x20Create\x20Job\x20File','234628bEUhNO','isArray','VLOCITY_TEMP_CATALOG','Cannot\x20retrieve\x20component\x20','26015mHABUO','Error\x20Retrieve\x20Data\x20','UNSUPPORTED_BY_DEFAULT_LIST','flosumUrl','toString','create','existsSync','Error\x20Update\x20Snapshot','Title','isSeparateMatrixVersions','then','exports','JOB_FILE_NAME','types','Is_Completed__c','nameSpacePrefix','../../../services/child-process','Error\x20Prepare\x20Data\x20For\x20Deploy','accessToken','Start\x20Prepare\x20Data\x20For\x20Deploy','DATA_PACK_TYPES_QUERIES_MAP','createJobYamlFile','callUpdateSnapshot','map','objectName','join','Deployed\x20','push','getAvailableToExport','./source_data','addFile','selective','%\x27\x20OR\x20Name\x20LIKE\x20\x27%','resolve','addLocalFolder','from','FlosumErrors:\x20','Error\x20Send\x20Vlocity\x20Temp\x20Zip\x20','parse','projectPath:\x20./','End\x20Prepare\x20Data\x20For\x20Deploy','Start\x20Retrieve\x20Data','\x20WHERE\x20(Name\x20LIKE\x20\x27%','vlocityNameSpacePrefix','isLikeSearch','snapshotId','\x20WHERE\x20Name\x20IN\x20(\x27','3580rMKlMx','instanceUrl','-\x20VlocityDataPackType:\x20','\x0a\x20-\x20','Connection','has','Start\x20Create\x20Job\x20File','1327656XhHMiT','errors','readdirSync','job-yaml-','fields','-separateMatrixVersions','completeDeployment','getVlocityQueries','crc-32','ContentVersion','callChildProcess','includes','split','type','manifest:\x0a\x20-\x20','\x27,\x27','Error,\x20Components\x20not\x20found','Error\x20Create\x20Vlocity\x20Temp\x20Zip,\x20Vlocity\x20Temp\x20not\x20found','value','-autoRetryErrors','/logs','1198240EsdqvZ','Start\x20Send\x20Vlocity\x20Temp','Vlocity\x20Temp','Start\x20Deploy\x20Components','jsForceConnection','log','%\x27)','VLOCITY_NAMESPACE_PREFIX_CODE','attachLogId','appendFileSync','some','End\x20Deploy\x20Components','readFileSync','Errors\x20found,\x20start\x20pack\x20retry\x20command\x20\x0a','-sf.instanceUrl','searchBy','keys','application/zip','authVlosityOrg','projectPath','yaml','6kRnSQe','/SnapshotVlocity/','-separateCalculationProcedureVersions','catch','queries:\x0a','Error\x20Create\x20Job\x20File,\x20Not\x20Valid\x20Provided\x20Yaml\x20File:\x20','vlocityToken','length','\x20\x20query:\x20SELECT\x20','endsWith','End\x20Update\x20Snapshot','-maxDepth','\x0amanifest:\x0a\x20-\x20','selectedDataPackTypes','records','End\x20Retrieve\x20Data','Error\x20Create\x20Vlocity\x20Temp\x20Zip\x20','Records\x20to\x20export\x20not\x20a\x20found','findSubItems','Error\x20Create\x20Job\x20File','deploy','logId','Error\x20parse\x20component\x20','query','name','../../../services/http','sobject','isAfterUpdateSearchByKey',',\x20size\x20more\x20then\x203mb.','409098DXQhDh','forEach','Is_Error__c','End\x20Send\x20Vlocity\x20Temp','../../../constants','End\x20Create\x20Vlocity\x20Temp\x20Zip','updateAttachmentLog','iteratorDeploy','dump','prepareDataForDeploy','createQuery','-sf.accessToken','count','buf','nextChunk'];a40_0x2f3a=function(){return _0x5bc4a3;};return a40_0x2f3a();}