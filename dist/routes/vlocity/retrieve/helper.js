const a40_0x5bf665=a40_0x2a83;(function(_0x65254f,_0x262067){const _0x2d8223=a40_0x2a83,_0x4d71df=_0x65254f();while(!![]){try{const _0x2a6d6c=-parseInt(_0x2d8223(0x1b3))/0x1+parseInt(_0x2d8223(0x19f))/0x2+parseInt(_0x2d8223(0x195))/0x3*(-parseInt(_0x2d8223(0x1a4))/0x4)+parseInt(_0x2d8223(0x1a3))/0x5*(-parseInt(_0x2d8223(0x1e2))/0x6)+parseInt(_0x2d8223(0x157))/0x7+-parseInt(_0x2d8223(0x17a))/0x8*(parseInt(_0x2d8223(0x1b7))/0x9)+-parseInt(_0x2d8223(0x170))/0xa*(-parseInt(_0x2d8223(0x1d2))/0xb);if(_0x2a6d6c===_0x262067)break;else _0x4d71df['push'](_0x4d71df['shift']());}catch(_0x21faa9){_0x4d71df['push'](_0x4d71df['shift']());}}}(a40_0x56ad,0xe32d3));const fs=require('fs'),crc32=require(a40_0x5bf665(0x162)),AdmZip=require(a40_0x5bf665(0x14e)),yaml=require(a40_0x5bf665(0x158)),{resolve}=require(a40_0x5bf665(0x1bb)),constants=require(a40_0x5bf665(0x199)),childProcess=require('../../../services/child-process'),http=require(a40_0x5bf665(0x161)),{VlocityHelper}=require(a40_0x5bf665(0x15f)),{JsForceHelper}=require(a40_0x5bf665(0x1b8));class RetrieveHelper{constructor(_0x31bca3,_0x4c8355,_0xabd871){const _0x17b282=a40_0x5bf665;this[_0x17b282(0x179)]=_0x4c8355[_0x17b282(0x176)]['instanceUrl'],this[_0x17b282(0x1f0)]=_0x4c8355[_0x17b282(0x176)][_0x17b282(0x1c8)],this[_0x17b282(0x15b)]=_0x4c8355[_0x17b282(0x15b)],this[_0x17b282(0x1a8)]=_0x4c8355[_0x17b282(0x1a8)],this['projectPath']=_0x31bca3,this['flosumAuth']=_0x4c8355['authFlosum'],this['nameSpacePrefix']=_0x4c8355[_0x17b282(0x1b4)],this[_0x17b282(0x1dd)]=_0x4c8355['vlocityNameSpacePrefix'],this[_0x17b282(0x1c4)]=_0x4c8355[_0x17b282(0x1c4)],this[_0x17b282(0x1cc)]=_0x4c8355[_0x17b282(0x1cc)],this[_0x17b282(0x1c1)]=_0x4c8355[_0x17b282(0x1c1)],this[_0x17b282(0x197)]=_0x4c8355['snapshotId'],this[_0x17b282(0x1cd)]=JSON['parse'](_0x4c8355[_0x17b282(0x1cd)]),this[_0x17b282(0x18e)]=_0x4c8355['isNotIncludeDependencies'],this['isSeparateMatrixVersions']=_0x4c8355['isSeparateMatrixVersions'],this[_0x17b282(0x1f2)]=_0x4c8355[_0x17b282(0x1f2)],this[_0x17b282(0x165)]=_0x4c8355[_0x17b282(0x165)],this['isRunPackRetryAutomatically']=!!_0x4c8355[_0x17b282(0x1ef)],this[_0x17b282(0x154)]=_0x4c8355[_0x17b282(0x154)],this['keys']=_0x4c8355[_0x17b282(0x1bf)],this[_0x17b282(0x1a7)]=_0xabd871,this[_0x17b282(0x1a6)]=new JsForceHelper(this[_0x17b282(0x151)],_0xabd871);}async[a40_0x5bf665(0x159)](){const _0x11459c=a40_0x5bf665,_0x55ae2e=await new VlocityHelper(this[_0x11459c(0x1f0)],this['vlocityUrl'],this['logger'])['getAvailableToExport']();if(!_0x55ae2e?.[_0x11459c(0x1ec)]?.[_0x11459c(0x1c6)])throw new Error(_0x11459c(0x166));const _0x1305a2=this['nameOfComponents'][_0x11459c(0x1b9)](';')[_0x11459c(0x18b)](_0x4acea2=>_0x4acea2[_0x11459c(0x153)]()),_0x2af425=new Set(this[_0x11459c(0x1cd)]),_0x4b42a7=[];for(const {VlocityDataPackType:_0x5e1f8a,Name:_0x406ca9,VlocityDataPackDisplayLabel:_0x37fa7c,VlocityDataPackKey:_0x12d259}of _0x55ae2e[_0x11459c(0x1ec)]){if(!_0x2af425[_0x11459c(0x18d)](_0x5e1f8a))continue;const _0x535671=_0x406ca9?.[_0x11459c(0x153)]()||'',_0x4863ac=_0x37fa7c?.[_0x11459c(0x153)]()||'',_0x4dd9c7=_0x12d259?.[_0x11459c(0x153)]()||'';(_0x1305a2['some'](_0x795a9e=>_0x535671[_0x11459c(0x150)](_0x795a9e))||_0x1305a2[_0x11459c(0x152)](_0x64ebcd=>_0x4863ac[_0x11459c(0x150)](_0x64ebcd))||_0x1305a2[_0x11459c(0x152)](_0x180461=>_0x4dd9c7['includes'](_0x180461)))&&_0x4b42a7[_0x11459c(0x1ae)]('\x27'+_0x12d259[_0x11459c(0x185)]('\x27','\x5c\x27\x27')+'\x27');}const _0x133c78=_0x11459c(0x191)+constants['UNZIP_CATALOG_NAME']+_0x11459c(0x1b0)+_0x4b42a7[_0x11459c(0x14a)](_0x11459c(0x169));fs['appendFileSync'](this[_0x11459c(0x1da)]+'/'+constants[_0x11459c(0x1f1)],_0x133c78),this[_0x11459c(0x1a7)][_0x11459c(0x16e)](_0x11459c(0x1e6));}[a40_0x5bf665(0x1dc)](){return new Promise((_0x3d288f,_0x44c16c)=>{const _0x51f5b9=a40_0x2a83;try{this[_0x51f5b9(0x1a7)][_0x51f5b9(0x16e)]('Start\x20Create\x20Job\x20File');let _0x4290b5;if(this[_0x51f5b9(0x154)]===_0x51f5b9(0x1ea)&&this[_0x51f5b9(0x1bf)]?.[_0x51f5b9(0x1c6)]){const _0xb2c38a=this[_0x51f5b9(0x1bf)][_0x51f5b9(0x18b)](_0x4bd100=>'\x27'+_0x4bd100[_0x51f5b9(0x185)]('\x27','\x5c\x27\x27')+'\x27');_0x4290b5=_0x51f5b9(0x191)+constants[_0x51f5b9(0x1f3)]+_0x51f5b9(0x1b0)+_0xb2c38a[_0x51f5b9(0x14a)](_0x51f5b9(0x169)),fs[_0x51f5b9(0x194)](this['projectPath']+'/'+constants[_0x51f5b9(0x1f1)],_0x4290b5),this[_0x51f5b9(0x1a7)][_0x51f5b9(0x16e)](_0x51f5b9(0x1e6)),_0x3d288f();return;}if(this['type']===_0x51f5b9(0x1c7)){this[_0x51f5b9(0x159)]()[_0x51f5b9(0x155)](()=>_0x3d288f())[_0x51f5b9(0x156)](_0xd18174=>{const _0x5e977b=_0x51f5b9;this[_0x5e977b(0x1a7)]['log'](_0x5e977b(0x1eb)),_0x44c16c(_0xd18174);});return;}_0x4290b5=_0x51f5b9(0x191)+constants[_0x51f5b9(0x1f3)]+'\x0a';if(this[_0x51f5b9(0x165)]){if(this[_0x51f5b9(0x1c4)]){if(this['searchBy']===_0x51f5b9(0x1e3)){const _0x3d4653=this[_0x51f5b9(0x1c4)]['split']('\x0a')['filter'](_0xe93fb5=>_0xe93fb5[_0x51f5b9(0x18a)]()[_0x51f5b9(0x16f)]('-'))[_0x51f5b9(0x18b)](_0x161323=>_0x161323['replace']('-','')[_0x51f5b9(0x18a)]());_0x3d4653[_0x51f5b9(0x1c6)]?(_0x4290b5+=_0x51f5b9(0x196),_0x4290b5+=_0x3d4653[_0x51f5b9(0x14a)](_0x51f5b9(0x169)),fs[_0x51f5b9(0x194)](this[_0x51f5b9(0x1da)]+'/'+constants['JOB_FILE_NAME'],_0x4290b5),this['logger'][_0x51f5b9(0x16e)](_0x51f5b9(0x1e6)),_0x3d288f()):_0x44c16c(_0x51f5b9(0x1db));}if(this[_0x51f5b9(0x1cc)]===_0x51f5b9(0x1d9))try{const _0x51df11=yaml['load'](this[_0x51f5b9(0x1c4)]);_0x51df11[_0x51f5b9(0x1da)]=_0x51f5b9(0x1ba),fs[_0x51f5b9(0x194)](this[_0x51f5b9(0x1da)]+'/'+constants['JOB_FILE_NAME'],yaml[_0x51f5b9(0x1d8)](_0x51df11)),_0x3d288f(),this[_0x51f5b9(0x1a7)][_0x51f5b9(0x16e)](_0x51f5b9(0x1e6));}catch(_0x68ab68){this[_0x51f5b9(0x1a7)][_0x51f5b9(0x16e)](_0x51f5b9(0x19a)+_0x68ab68),_0x44c16c(_0x68ab68);}else _0x4290b5+='queries:\x0a'+this[_0x51f5b9(0x1ad)](),fs[_0x51f5b9(0x194)](this[_0x51f5b9(0x1da)]+'/'+constants[_0x51f5b9(0x1f1)],_0x4290b5),_0x3d288f(),this[_0x51f5b9(0x1a7)]['log'](_0x51f5b9(0x1e6));}else _0x4290b5+=_0x51f5b9(0x1ed)+this[_0x51f5b9(0x1ad)](),fs[_0x51f5b9(0x194)](this[_0x51f5b9(0x1da)]+'/'+constants[_0x51f5b9(0x1f1)],_0x4290b5),_0x3d288f(),this[_0x51f5b9(0x1a7)]['log'](_0x51f5b9(0x1e6));}else _0x4290b5+='queries:\x0a'+this[_0x51f5b9(0x1ad)](),fs[_0x51f5b9(0x194)](this['projectPath']+'/'+constants[_0x51f5b9(0x1f1)],_0x4290b5),_0x3d288f(),this[_0x51f5b9(0x1a7)][_0x51f5b9(0x16e)](_0x51f5b9(0x1e6));}catch(_0x17fd49){this[_0x51f5b9(0x1a7)][_0x51f5b9(0x16e)]('Error\x20Create\x20Job\x20File\x20'+_0x17fd49),_0x44c16c(_0x17fd49);}});}[a40_0x5bf665(0x1ad)](){const _0x2eb119=a40_0x5bf665,_0x2cc328=Array['isArray'](this[_0x2eb119(0x1cd)])?this['selectedDataPackTypes']:Object[_0x2eb119(0x1bf)](this[_0x2eb119(0x1cd)]),_0x4a9e6d=[];/^ *$/[_0x2eb119(0x19d)](this['nameOfComponents'])?this['nameOfComponents']=[]:this[_0x2eb119(0x1c4)]=this[_0x2eb119(0x1c4)]['split'](';');if(this[_0x2eb119(0x1c4)][_0x2eb119(0x1c6)]){const _0x189e08=this[_0x2eb119(0x1c1)]?this[_0x2eb119(0x1c4)]['join'](_0x2eb119(0x14d)):this[_0x2eb119(0x1c4)][_0x2eb119(0x14a)]('\x27,\x27');for(const _0x2f1aea of _0x2cc328){_0x4a9e6d['push'](this[_0x2eb119(0x1f5)](_0x2f1aea,_0x189e08));}}else for(const _0x53ae0e of _0x2cc328){const _0x1099f5=constants[_0x2eb119(0x174)]['includes'](_0x53ae0e)?this[_0x2eb119(0x1f5)](_0x53ae0e):'-\x20'+_0x53ae0e;_0x4a9e6d[_0x2eb119(0x1ae)](_0x1099f5);}return _0x4a9e6d[_0x2eb119(0x14a)]('\x0a');}[a40_0x5bf665(0x1f5)](_0x2a03c1,_0x5a3dfa=null){const _0x1dba17=a40_0x5bf665,_0x17e4d9=constants[_0x1dba17(0x15c)][_0x2a03c1];let _0x169b42='';if(_0x17e4d9){const _0x2670cc=_0x17e4d9[_0x1dba17(0x1a0)][_0x1dba17(0x184)](_0x1dba17(0x1df))&&!!this[_0x1dba17(0x1dd)]?''+this[_0x1dba17(0x1dd)]+_0x17e4d9[_0x1dba17(0x1a0)]:''+_0x17e4d9[_0x1dba17(0x1a0)];_0x169b42=_0x1dba17(0x186)+_0x2a03c1+'\x0a';const _0x2b066b=_0x17e4d9[_0x1dba17(0x1d7)][_0x1dba17(0x16b)](new RegExp(constants[_0x1dba17(0x1e0)],'g'),this[_0x1dba17(0x1dd)]);this[_0x1dba17(0x1c1)]?(_0x169b42+=_0x1dba17(0x17b)+_0x2b066b+'\x20FROM\x20'+_0x2670cc,_0x5a3dfa&&(_0x169b42+=_0x1dba17(0x164)+_0x5a3dfa+'%\x27)')):(_0x169b42+=_0x1dba17(0x17b)+_0x2b066b+_0x1dba17(0x172)+_0x2670cc,_0x5a3dfa&&(_0x169b42+=_0x1dba17(0x182)+_0x5a3dfa+'\x27)'));if(_0x17e4d9[_0x1dba17(0x1b1)]){const _0x34dd82=_0x5a3dfa?'AND':_0x1dba17(0x1d0),_0x1d78d5=_0x17e4d9[_0x1dba17(0x1b1)]['replace'](new RegExp(constants[_0x1dba17(0x1e0)],'g'),this[_0x1dba17(0x1dd)]);_0x169b42+='\x20'+_0x34dd82+'\x20'+_0x1d78d5+'\x0a';}else _0x169b42+='\x0a';}return _0x169b42;}[a40_0x5bf665(0x1f4)](){return new Promise((_0x57ea09,_0xbd78fd)=>{const _0x51a26e=a40_0x2a83;try{this[_0x51a26e(0x1a7)][_0x51a26e(0x16e)](_0x51a26e(0x17d));const _0x44d55a=_0x51a26e(0x16a),_0x35a728=this['isNotIncludeDependencies']?'0':'-1',_0x546994=['-sf.accessToken',''+this[_0x51a26e(0x1f0)],'-sf.instanceUrl',''+this[_0x51a26e(0x179)],_0x51a26e(0x177),''+constants[_0x51a26e(0x1f1)],_0x51a26e(0x1b2),'-maxDepth',_0x35a728];this[_0x51a26e(0x1bc)]&&_0x546994[_0x51a26e(0x1ae)](_0x51a26e(0x1d3));this[_0x51a26e(0x1f2)]&&_0x546994[_0x51a26e(0x1ae)](_0x51a26e(0x1be));_0x546994[_0x51a26e(0x1ae)](_0x51a26e(0x1e5));const _0xd705b6=()=>{const _0x27d991=_0x51a26e;http[_0x27d991(0x1cf)](this[_0x27d991(0x1da)],this[_0x27d991(0x1a6)],this['attachLogId'],this[_0x27d991(0x1a7)],![]);};this['logger'][_0x51a26e(0x16e)](_0x546994[_0x51a26e(0x14a)]('\x20'));const _0x4d5781={'cwd':''+this['projectPath'],'maxBuffer':0x400*0x1f4};childProcess[_0x51a26e(0x148)](_0x44d55a,_0x546994,this[_0x51a26e(0x1a7)],_0x4d5781,!![],_0xd705b6)[_0x51a26e(0x155)](_0x518d27=>{const _0x58dfa9=_0x51a26e;this[_0x58dfa9(0x1a7)][_0x58dfa9(0x16e)](_0x58dfa9(0x1d5)),_0x57ea09(_0x518d27);})['catch'](_0x26060d=>{const _0x554292=_0x51a26e;this[_0x554292(0x1a7)][_0x554292(0x16e)]('Error\x20Retrieve\x20Data\x20'+_0x26060d),_0xbd78fd(_0x26060d);});}catch(_0x15a4d1){_0xbd78fd(_0x15a4d1);}});}[a40_0x5bf665(0x1e9)](){return new Promise((_0x2d5ed8,_0x18de18)=>{const _0x1d3d02=a40_0x2a83;try{this[_0x1d3d02(0x1a7)]['log']('Start\x20Prepare\x20Data\x20For\x20Deploy');let _0x1b0f08=0x0,_0x10c41c=[],_0x42b40c=0x0;const _0x4860f2=[],_0x59eaab=this[_0x1d3d02(0x1da)]+'/'+constants['UNZIP_CATALOG_NAME'],_0x583760=fs['readdirSync'](_0x59eaab);for(let _0x4ee394=0x0;_0x4ee394<_0x583760[_0x1d3d02(0x1c6)];_0x4ee394++){const _0xd98bfa=_0x583760[_0x4ee394]==='ContentVersion'?'Title':_0x1d3d02(0x175),_0x5e8059=_0x59eaab+'/'+_0x583760[_0x4ee394],_0x4693e1=fs[_0x1d3d02(0x1f6)](_0x5e8059);for(let _0x40a93d=0x0;_0x40a93d<_0x4693e1[_0x1d3d02(0x1c6)];_0x40a93d++){const _0x1d15f1=_0x583760[_0x4ee394]+'/'+_0x4693e1[_0x40a93d];let _0x2ac3c5=_0x4693e1[_0x40a93d];const _0x20baed=[],_0x7c209c=_0x59eaab+'/'+_0x583760[_0x4ee394]+'/'+_0x4693e1[_0x40a93d],_0x3d4c94=fs[_0x1d3d02(0x1f6)](_0x7c209c);_0x3d4c94['forEach'](_0x1d93a1=>{const _0x3e59b5=_0x1d3d02;try{_0x1d93a1['toString']()['endsWith'](_0x3e59b5(0x15a))&&(_0x2ac3c5=JSON[_0x3e59b5(0x1af)](fs[_0x3e59b5(0x1c9)](_0x7c209c+'/'+_0x1d93a1)['toString']())[_0xd98bfa]);}catch(_0xd0410e){this['logger'][_0x3e59b5(0x16e)](_0x3e59b5(0x16c)+_0x1d93a1);}!_0x2ac3c5&&(_0x2ac3c5=undefined),fs['lstatSync'](_0x7c209c+'/'+_0x1d93a1[_0x3e59b5(0x1b6)]())[_0x3e59b5(0x1e4)]()&&_0x20baed[_0x3e59b5(0x1ae)](...this[_0x3e59b5(0x1c2)](_0x7c209c,_0x1d93a1));});const _0x1d066c=new AdmZip();_0x1d066c[_0x1d3d02(0x15e)](_0x7c209c,_0x583760[_0x4ee394]+'/'+_0x4693e1[_0x40a93d]);const _0x215730=_0x1d066c['toBuffer'](),_0x1dcf41=crc32['buf'](_0x215730),_0x91051=_0x215730[_0x1d3d02(0x1b6)](_0x1d3d02(0x1b5)),_0x3d2dd0={'fileName':_0x2ac3c5,'name':_0x4693e1[_0x40a93d],'type':_0x583760[_0x4ee394],'label':_0x1d15f1,'crc':_0x1dcf41,'base64':_0x91051,'snapshotId':this['snapshotId'],'subItemList':JSON['stringify'](_0x20baed)},_0x25871b=_0x215730[_0x1d3d02(0x1c6)]/0xf4240,_0x2c25d4=!!(_0x4693e1[_0x1d3d02(0x1c6)]-0x1===_0x40a93d&&_0x583760[_0x1d3d02(0x1c6)]-0x1===_0x4ee394);_0x1b0f08+=_0x25871b,_0x1b0f08>0x2||_0x10c41c>0xfa0?(_0x4860f2[_0x1d3d02(0x1ae)](_0x10c41c),_0x25871b<0x3?(_0x10c41c=[_0x3d2dd0],_0x42b40c++,_0x1b0f08=_0x25871b):(this[_0x1d3d02(0x1a7)][_0x1d3d02(0x16e)](_0x1d3d02(0x1c5)+_0x1d15f1+_0x1d3d02(0x1de),!![]),_0x1b0f08=0x0)):(_0x10c41c[_0x1d3d02(0x1ae)](_0x3d2dd0),_0x42b40c++),_0x2c25d4&&_0x4860f2[_0x1d3d02(0x1ae)](_0x10c41c);}}this[_0x1d3d02(0x1a7)]['log']('End\x20Prepare\x20Data\x20For\x20Deploy'),_0x2d5ed8({'iteratorDeploy':_0x4860f2[Symbol[_0x1d3d02(0x19b)]](),'count':_0x42b40c});}catch(_0x490d55){this[_0x1d3d02(0x1a7)][_0x1d3d02(0x16e)]('Error\x20Prepare\x20Data\x20For\x20Deploy'),_0x18de18(_0x490d55);}});}['findSubItems'](_0x12087b,_0x4cfddd,_0x243561='',_0x73e3fe=[]){const _0x225231=a40_0x5bf665;_0x243561['length']&&(_0x243561='/'+_0x243561);const _0x256689=fs[_0x225231(0x1f6)](_0x12087b+'/'+_0x4cfddd+_0x243561);return _0x256689[_0x225231(0x180)](_0x35eca5=>{const _0x10be19=_0x225231;!fs[_0x10be19(0x1a5)](_0x12087b+'/'+_0x4cfddd+_0x243561+'/'+_0x35eca5[_0x10be19(0x1b6)]())[_0x10be19(0x1e4)]()?_0x73e3fe[_0x10be19(0x1ae)](''+_0x4cfddd+_0x243561+'/'+_0x35eca5[_0x10be19(0x1b6)]()):this[_0x10be19(0x1c2)](_0x12087b,_0x4cfddd,_0x35eca5,_0x73e3fe);}),_0x73e3fe;}[a40_0x5bf665(0x190)](_0x5b3b06,_0x5f3a81='',_0x2f160e=[]){const _0x28dc51=a40_0x5bf665,_0x2d57d3=fs[_0x28dc51(0x1f6)](_0x5b3b06,{'withFileTypes':!![]});return _0x2d57d3[_0x28dc51(0x180)](_0x3de59a=>{const _0xbca36e=_0x28dc51,_0x474281=resolve(_0x5b3b06,_0x3de59a[_0xbca36e(0x19c)]);if(_0x3de59a[_0xbca36e(0x1e4)]()){const _0x1917ac=_0x5f3a81[_0xbca36e(0x1c6)]?_0x5f3a81+'/'+_0x3de59a[_0xbca36e(0x19c)]:_0x3de59a['name'];this[_0xbca36e(0x190)](_0x474281,_0x1917ac,_0x2f160e);}else{let _0x4afb78;_0x5f3a81[_0xbca36e(0x1c6)]?_0x4afb78=_0x5f3a81+'/'+_0x3de59a['name']:_0x4afb78=_0x3de59a[_0xbca36e(0x19c)],_0x2f160e[_0xbca36e(0x1ae)](_0x4afb78);}}),_0x2f160e;}[a40_0x5bf665(0x198)](_0x512922){return new Promise((_0x1ba02c,_0x19ae90)=>{const _0x168377=a40_0x2a83;try{this[_0x168377(0x1a7)][_0x168377(0x16e)]('Start\x20Deploy\x20Components'),this[_0x168377(0x14f)](_0x512922)['then'](()=>{const _0x7ec626=_0x168377;this[_0x7ec626(0x1a7)]['log'](_0x7ec626(0x1bd)),_0x1ba02c();})[_0x168377(0x156)](_0x4b0dc5=>{const _0x3b72f3=_0x168377;this[_0x3b72f3(0x1a7)][_0x3b72f3(0x16e)](_0x3b72f3(0x173)+_0x4b0dc5),_0x19ae90(_0x4b0dc5);});}catch(_0x5af92a){_0x19ae90(_0x5af92a);}});}[a40_0x5bf665(0x14f)](_0x2fa491,_0x4c6071=0x0){return new Promise((_0xadd990,_0x2ae039)=>{const _0x3b4955=a40_0x2a83;try{const _0x310554=_0x2fa491[_0x3b4955(0x1ee)][_0x3b4955(0x171)]();_0x310554[_0x3b4955(0x17c)]?_0xadd990():this[_0x3b4955(0x1e8)](_0x2fa491,_0x310554,_0x4c6071)['then'](()=>_0xadd990())[_0x3b4955(0x156)](_0x3857f7=>_0x2ae039(_0x3857f7));}catch(_0x2c6f42){_0x2ae039(_0x2c6f42);}});}['deploy'](_0x5a4e81,_0x44141d,_0x59e7ff=0x0){return new Promise((_0x2ed348,_0x59db25)=>{const _0x1c124b=a40_0x2a83;try{const _0x9a8b84={'items':_0x44141d[_0x1c124b(0x1d1)]};http[_0x1c124b(0x1a2)](this['flosumAuth'],this[_0x1c124b(0x1b4)],_0x9a8b84,'SnapshotVlocity/')[_0x1c124b(0x155)](()=>{const _0x2cfa47=_0x1c124b;return _0x59e7ff+=_0x44141d[_0x2cfa47(0x1d1)]['length'],this['logger'][_0x2cfa47(0x16e)](_0x2cfa47(0x1d6)+_0x59e7ff+_0x2cfa47(0x1e1)+_0x5a4e81[_0x2cfa47(0x1a1)]),Promise[_0x2cfa47(0x181)]();})[_0x1c124b(0x156)](_0x569182=>{const _0x2a00c9=_0x1c124b;return this['logger'][_0x2a00c9(0x16e)](_0x2a00c9(0x14b)+_0x569182),Promise[_0x2a00c9(0x181)]();})[_0x1c124b(0x155)](()=>this['nextChunk'](_0x5a4e81,_0x59e7ff))[_0x1c124b(0x155)](_0x2ed348)[_0x1c124b(0x156)](_0x59db25);}catch(_0x223b76){_0x59db25(_0x223b76);}});}[a40_0x5bf665(0x168)](){return new Promise(_0x32fd1b=>{const _0x13b4f8=a40_0x2a83;try{this[_0x13b4f8(0x1a7)][_0x13b4f8(0x16e)](_0x13b4f8(0x1e7));const _0x4c0fc8=this[_0x13b4f8(0x1da)]+'/'+constants[_0x13b4f8(0x188)];if(fs[_0x13b4f8(0x1c0)](_0x4c0fc8)){const _0x589917=_0x4c0fc8+_0x13b4f8(0x16d);if(this[_0x13b4f8(0x1a7)]['errors'][_0x13b4f8(0x1c6)]&&fs[_0x13b4f8(0x1c0)](_0x589917)){const _0x3b4ff9=fs[_0x13b4f8(0x1f6)](_0x589917);if(_0x3b4ff9&&_0x3b4ff9['length']){const _0x4df97c=_0x3b4ff9[0x0];if(_0x4df97c[_0x13b4f8(0x150)]('job-yaml-')&&_0x4df97c[_0x13b4f8(0x150)](_0x13b4f8(0x189))){const _0x4ed209=_0x13b4f8(0x1ab)+JSON['stringify'](this[_0x13b4f8(0x1a7)][_0x13b4f8(0x1aa)]);fs['appendFileSync']('./'+_0x589917+'/'+_0x4df97c,_0x4ed209);}}}const _0x19efee=new AdmZip();_0x19efee[_0x13b4f8(0x15e)](_0x4c0fc8,constants[_0x13b4f8(0x188)]),_0x32fd1b(_0x19efee[_0x13b4f8(0x17e)]()['toString']('base64')),this[_0x13b4f8(0x1a7)][_0x13b4f8(0x16e)](_0x13b4f8(0x193));}else this[_0x13b4f8(0x1a7)][_0x13b4f8(0x16e)]('Error\x20Create\x20Vlocity\x20Temp\x20Zip,\x20Vlocity\x20Temp\x20not\x20found'),_0x32fd1b();}catch(_0x90a415){this[_0x13b4f8(0x1a7)][_0x13b4f8(0x16e)](_0x13b4f8(0x18f)+_0x90a415),_0x32fd1b();}});}async[a40_0x5bf665(0x1ca)](_0x2438d6){const _0x1e1e41=a40_0x5bf665;this[_0x1e1e41(0x1a7)]['log'](_0x1e1e41(0x160));const _0x4c9ec6={'Name':_0x1e1e41(0x1cb),'ContentType':_0x1e1e41(0x1d4),'Description':_0x1e1e41(0x1cb),'ParentId':this[_0x1e1e41(0x197)],'Body':_0x2438d6};await this[_0x1e1e41(0x1a6)]['createAttachment'](_0x4c9ec6),this[_0x1e1e41(0x1a7)]['log'](_0x1e1e41(0x18c));}[a40_0x5bf665(0x149)](){return new Promise(_0xdb95ca=>{const _0x410b0f=a40_0x2a83;try{if(fs[_0x410b0f(0x1c0)](this[_0x410b0f(0x1da)]+'/'+constants['NAME_LOGS_FILE'])){const _0xf42868=yaml['load'](fs[_0x410b0f(0x1c9)](this[_0x410b0f(0x1da)]+'/'+constants[_0x410b0f(0x19e)],_0x410b0f(0x167)));_0xf42868['Errors']&&_0xf42868[_0x410b0f(0x1ce)]['length']?(this['logger'][_0x410b0f(0x16e)](_0x410b0f(0x187)+_0xf42868[_0x410b0f(0x1ce)][_0x410b0f(0x14a)]('\x0a')),_0xdb95ca(!![])):_0xdb95ca(![]);}else _0xdb95ca(![]);}catch(_0x430668){_0xdb95ca(![]);}});}[a40_0x5bf665(0x192)](_0x585d87,_0x533bf9=![]){return new Promise((_0x1dcf03,_0x2de932)=>{const _0x172805=a40_0x2a83;try{Promise['resolve']()[_0x172805(0x155)](()=>this['createVlocityTempZip']())[_0x172805(0x155)](_0x134f94=>{const _0x3abc55=_0x172805;if(_0x134f94)return this[_0x3abc55(0x1ca)](_0x134f94);return Promise['resolve']();})[_0x172805(0x155)](()=>http[_0x172805(0x1cf)](this[_0x172805(0x1da)],this[_0x172805(0x1a6)],this[_0x172805(0x1a8)],this[_0x172805(0x1a7)],_0x533bf9,!![]))[_0x172805(0x155)](_0x53e919=>{const _0x20aee1=_0x172805;return _0x533bf9=_0x53e919,http[_0x20aee1(0x183)](this[_0x20aee1(0x1a6)],this['logId'],this['nameSpacePrefix'],_0x585d87,this['logger'],_0x53e919);})[_0x172805(0x155)](()=>this[_0x172805(0x1a9)](_0x533bf9));}catch(_0xe325bf){_0x2de932(_0xe325bf);}});}async[a40_0x5bf665(0x1a9)](_0x3e7de0){const _0x5bf942=a40_0x5bf665;this[_0x5bf942(0x1a7)]['log'](_0x5bf942(0x163));const _0xc0dbb1={'Id':this['snapshotId'],[this[_0x5bf942(0x1b4)]+_0x5bf942(0x1c3)]:!![],[this[_0x5bf942(0x1b4)]+_0x5bf942(0x14c)]:_0x3e7de0};return await this[_0x5bf942(0x1a6)][_0x5bf942(0x15d)](this[_0x5bf942(0x1b4)],_0xc0dbb1),this[_0x5bf942(0x1a7)][_0x5bf942(0x16e)](_0x5bf942(0x1ac)),_0xc0dbb1[this[_0x5bf942(0x1b4)]+'Is_Error__c'];}}function a40_0x2a83(_0x522349,_0x3f63cd){const _0x56ad35=a40_0x56ad();return a40_0x2a83=function(_0x2a8317,_0x5179ad){_0x2a8317=_0x2a8317-0x148;let _0x540a7b=_0x56ad35[_0x2a8317];return _0x540a7b;},a40_0x2a83(_0x522349,_0x3f63cd);}function a40_0x56ad(){const _0xeef393=['deployComponents','../../../constants','Error\x20Create\x20Job\x20File,\x20Not\x20Valid\x20Provided\x20Yaml\x20File:\x20','iterator','name','test','NAME_LOGS_FILE','2250762UsJBCW','objectName','count','post','93185iCIpzI','4RCZiwE','lstatSync','jsForceHelper','logger','attachLogId','callUpdateSnapshot','errors','FlosumErrors:\x20','End\x20Update\x20Snapshot','getVlocityQueries','push','parse','\x0amanifest:\x0a\x20-\x20','query','-autoRetryErrors','376031bPMHjx','nameSpacePrefix','base64','toString','63LWTovs','../../../services/js-force','split','./source_data','path','isSeparateMatrixVersions','End\x20Deploy\x20Components','-separateCalculationProcedureVersions','keys','existsSync','isLikeSearch','findSubItems','Is_Completed__c','nameOfComponents','Cannot\x20retrieve\x20component\x20','length','types','accessToken','readFileSync','sendVlocityTemp','Vlocity\x20Temp','searchBy','selectedDataPackTypes','Errors','updateAttachmentLog','WHERE','value','351197gGFNsT','-separateMatrixVersions','application/zip','End\x20Retrieve\x20Data','Deployed\x20','fields','dump','yaml','projectPath','Error,\x20Components\x20not\x20found','createJobYamlFile','vlocityNameSpacePrefix',',\x20size\x20more\x20then\x203mb.','__c','VLOCITY_NAMESPACE_PREFIX_CODE','\x20from\x20','48EejqpZ','key','isDirectory','packExport','End\x20Create\x20Job\x20File','Start\x20Create\x20Vlocity\x20Temp\x20Zip','deploy','prepareDataForDeploy','selective','Error\x20Create\x20Job\x20File','records','queries:\x0a','iteratorDeploy','isRunPackRetryAutomatically','vlocityToken','JOB_FILE_NAME','isSeparateCalculationProcedureVersions','UNZIP_CATALOG_NAME','retrieveData','createQuery','readdirSync','callChildProcess','checkErrors','join','Error\x20deploy\x20chunk\x20','Is_Error__c','%\x27\x20OR\x20Name\x20LIKE\x20\x27%','adm-zip','nextChunk','includes','flosumAuth','some','toLowerCase','type','then','catch','10251899yQJAMb','js-yaml','createYamlByDataPackTypes','_DataPack.json','logId','DATA_PACK_TYPES_QUERIES_MAP','updateSnapshot','addLocalFolder','../../../services/vlocity','Start\x20Send\x20Vlocity\x20Temp','../../../services/http','crc-32','Start\x20Update\x20Snapshot','\x20WHERE\x20(Name\x20LIKE\x20\x27%','isAfterUpdateSearchByKey','Records\x20to\x20export\x20not\x20a\x20found','utf8','createVlocityTempZip','\x0a\x20-\x20','vlocity','replace','Error\x20parse\x20component\x20','/logs','log','startsWith','250ReEBch','next','\x20FROM\x20','Error\x20Deploy\x20Components\x20','UNSUPPORTED_BY_DEFAULT_LIST','Name','authVlosityOrg','-job','addFile','vlocityUrl','995248bUTSLQ','\x20\x20query:\x20SELECT\x20','done','Start\x20Retrieve\x20Data','toBuffer','from','forEach','resolve','\x20WHERE\x20Name\x20IN\x20(\x27','callUpdateLog','endsWith','replaceAll','-\x20VlocityDataPackType:\x20','Errors\x20found,\x20start\x20pack\x20retry\x20command\x20\x0a','VLOCITY_TEMP_CATALOG','-Export.yaml','trim','map','End\x20Send\x20Vlocity\x20Temp','has','isNotIncludeDependencies','Error\x20Create\x20Vlocity\x20Temp\x20Zip\x20','readFiles','projectPath:\x20./','completeDeployment','End\x20Create\x20Vlocity\x20Temp\x20Zip','appendFileSync','3184887aiTwVP','manifest:\x0a\x20-\x20','snapshotId'];a40_0x56ad=function(){return _0xeef393;};return a40_0x56ad();}function createZip(_0x3d92d5,_0x2f4630){const _0x4b003e=a40_0x5bf665,_0x5b9fcd=new AdmZip(),_0x43a21f=this[_0x4b003e(0x190)](_0x3d92d5);return _0x43a21f[_0x4b003e(0x180)](_0x2b4e9a=>{const _0x3cf11e=_0x4b003e;if(Array['isArray'](_0x2b4e9a))_0x2b4e9a[_0x3cf11e(0x180)](_0x196ae3=>{const _0x2ab449=_0x3cf11e,_0x498582=fs[_0x2ab449(0x1c9)](_0x3d92d5+'/'+_0x196ae3,_0x2ab449(0x167));_0x5b9fcd['addFile'](_0x2f4630+'/'+_0x196ae3,Buffer[_0x2ab449(0x17f)](_0x498582));});else{const _0x46f6e4=fs[_0x3cf11e(0x1c9)](_0x3d92d5+'/'+_0x2b4e9a,_0x3cf11e(0x167));_0x5b9fcd[_0x3cf11e(0x178)](_0x2f4630+'/'+_0x2b4e9a,Buffer[_0x3cf11e(0x17f)](_0x46f6e4));}}),_0x5b9fcd[_0x4b003e(0x17e)]();}module['exports']={'RetrieveHelper':RetrieveHelper};