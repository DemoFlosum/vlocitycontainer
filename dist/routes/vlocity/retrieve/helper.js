const a32_0x5d9d21=a32_0x3ce3;(function(_0x251e25,_0x220933){const _0xd2d946=a32_0x3ce3,_0x2bfef8=_0x251e25();while(!![]){try{const _0x430a81=-parseInt(_0xd2d946(0x98))/0x1+parseInt(_0xd2d946(0xbf))/0x2*(-parseInt(_0xd2d946(0xc5))/0x3)+parseInt(_0xd2d946(0xf1))/0x4+parseInt(_0xd2d946(0x82))/0x5*(-parseInt(_0xd2d946(0xce))/0x6)+-parseInt(_0xd2d946(0x75))/0x7*(-parseInt(_0xd2d946(0xd0))/0x8)+-parseInt(_0xd2d946(0xe9))/0x9*(-parseInt(_0xd2d946(0x84))/0xa)+-parseInt(_0xd2d946(0xab))/0xb*(-parseInt(_0xd2d946(0xde))/0xc);if(_0x430a81===_0x220933)break;else _0x2bfef8['push'](_0x2bfef8['shift']());}catch(_0x4d75c3){_0x2bfef8['push'](_0x2bfef8['shift']());}}}(a32_0x134d,0x55b27));function a32_0x3ce3(_0x3a8d7f,_0x34221c){const _0x134d5c=a32_0x134d();return a32_0x3ce3=function(_0x3ce3b1,_0x4f28d9){_0x3ce3b1=_0x3ce3b1-0x64;let _0x582875=_0x134d5c[_0x3ce3b1];return _0x582875;},a32_0x3ce3(_0x3a8d7f,_0x34221c);}const fs=require('fs'),crc32=require(a32_0x5d9d21(0x7f)),AdmZip=require(a32_0x5d9d21(0x96)),yaml=require('js-yaml'),{resolve}=require(a32_0x5d9d21(0xc2)),jsForce=require(a32_0x5d9d21(0xb4)),constants=require(a32_0x5d9d21(0x9d)),childProcess=require(a32_0x5d9d21(0xfd)),http=require('../../../services/http'),storage=require(a32_0x5d9d21(0x8e));function a32_0x134d(){const _0x58755e=['End\x20Retrieve\x20Data','filter','End\x20Send\x20Vlocity\x20Temp','Error\x20Create\x20Job\x20File,\x20Not\x20Valid\x20Provided\x20Yaml\x20File:\x20','48NuiHwu','\x20WHERE\x20(Name\x20LIKE\x20\x27%','\x20\x20query:\x20SELECT\x20','flosumUrl','authFlosum','_DataPack.json','Start\x20Update\x20Snapshot','isSeparateMatrixVersions','manifest:\x0a\x20-\x20','-maxDepth','log','32697uEbTrH','JOB_FILE_NAME','packGetAllAvailableExports','-\x20VlocityDataPackType:\x20','searchBy','update','logId','End\x20Prepare\x20Data\x20For\x20Deploy','2582008kSDhkR','appendFileSync','/logs','count','fields','readdirSync','updateAttachmentLog','base64','resolve','Vlocity\x20Temp','Error\x20Retrieve\x20Data\x20','getVlocityQueries','../../../services/child-process','Start\x20Send\x20Vlocity\x20Temp','__c','/Flosum/SnapshotVlocity/','Error\x20Prepare\x20Data\x20For\x20Deploy','Error\x20Get\x20All\x20Available\x20Exports\x20Keys\x20','isNotIncludeDependencies','Start\x20Prepare\x20Data\x20For\x20Deploy','instanceUrl','trim','nextChunk','snapshotId','deploy','buf','addFile','endsWith','push','jsForceConnection','\x20WHERE\x20Name\x20IN\x20(\x27','test','then','sendVlocityTemp','readFiles','nameOfComponents','split','-sf.accessToken','FlosumErrors:\x20','selectedDataPackTypes','lstatSync','Cannot\x20retrieve\x20component\x20','forEach','from','WHERE','./source_data','/SnapshotVlocity/','stringify','toString','165424ryWjVe','-nojob','value','queries:\x0a','join','Start\x20Get\x20All\x20Available\x20Exports\x20Keys','isAfterUpdateSearchByKey','End\x20Get\x20All\x20Available\x20Exports\x20Keys','-separateCalculationProcedureVersions','Start\x20Retrieve\x20Data','crc-32','replace','objectName','26680Ppfxhc','Errors','470sYapSE','length','next','isLikeSearch','\x20FROM\x20','existsSync','completeDeployment','nameSpacePrefix','End\x20Create\x20Job\x20File','Error\x20parse\x20component\x20','../../../services/storage','parse','-separateMatrixVersions','post','catch','createVlocityTempZip','map','isDirectory','adm-zip','checkErrors','135339Hylqgw','deployComponents','vlocityToken','callChildProcess','name','../../../constants','load','utf8','End\x20Update\x20Snapshot','Error\x20Create\x20Vlocity\x20Temp\x20Zip,\x20Vlocity\x20Temp\x20not\x20found','authVlosityOrg','addLocalFolder','isRunPackRetryAutomatically','createJobYamlFile','flosumToken','-sf.instanceUrl','UNSUPPORTED_BY_DEFAULT_LIST','-autoRetryErrors','Is_Error__c','1312707dbOiHj','application/zip','keys','Error\x20Update\x20Snapshot','VLOCITY_TEMP_CATALOG','exports','End\x20Deploy\x20Components','-job','logger','jsforce','errors','vlocityUrl','UNZIP_CATALOG_NAME','iterator','VLOCITY_NAMESPACE_PREFIX_CODE','query','attachLogId','Error\x20Send\x20Vlocity\x20Temp\x20Zip\x20','NAME_LOGS_FILE','Snapshot_Vlocity__c','46OhFVbk','findSubItems','dump','path',',\x20size\x20more\x20then\x203mb.','Errors\x20found,\x20start\x20pack\x20retry\x20command\x20\x0a','44643SqSpgK','includes','createQuery','vlocityNameSpacePrefix','readFileSync','\x27,\x27','Error\x20Create\x20Job\x20File','callUpdateSnapshot','toBuffer','762sIHCCd','isSeparateCalculationProcedureVersions','72NdByzF','slice','ContentVersion','accessToken','Start\x20Create\x20Vlocity\x20Temp\x20Zip','Deployed\x20','job-yaml-','projectPath','projectPath:\x20./','yaml'];a32_0x134d=function(){return _0x58755e;};return a32_0x134d();}class RetrieveHelper{constructor(_0x5f4113,_0x504adf,_0x3e6b05){const _0x5915bd=a32_0x5d9d21;this[_0x5915bd(0xe1)]=_0x504adf[_0x5915bd(0xe2)][_0x5915bd(0x105)],this[_0x5915bd(0xa6)]=_0x504adf[_0x5915bd(0xe2)][_0x5915bd(0xd3)],this[_0x5915bd(0xb6)]=_0x504adf[_0x5915bd(0xa2)][_0x5915bd(0x105)],this[_0x5915bd(0x9a)]=_0x504adf[_0x5915bd(0xa2)][_0x5915bd(0xd3)],this[_0x5915bd(0xef)]=_0x504adf['logId'],this[_0x5915bd(0xbb)]=_0x504adf[_0x5915bd(0xbb)],this[_0x5915bd(0xd7)]=_0x5f4113,this[_0x5915bd(0xe2)]=_0x504adf['authFlosum'],this[_0x5915bd(0x8b)]=_0x504adf['nameSpacePrefix'],this['vlocityNameSpacePrefix']=_0x504adf['vlocityNameSpacePrefix'],this[_0x5915bd(0x67)]=_0x504adf[_0x5915bd(0x67)],this['searchBy']=_0x504adf[_0x5915bd(0xed)],this['isLikeSearch']=_0x504adf[_0x5915bd(0x87)],this[_0x5915bd(0x108)]=_0x504adf['snapshotId'],this[_0x5915bd(0x6b)]=JSON[_0x5915bd(0x8f)](_0x504adf[_0x5915bd(0x6b)]),this[_0x5915bd(0x103)]=_0x504adf[_0x5915bd(0x103)],this[_0x5915bd(0xe5)]=_0x504adf[_0x5915bd(0xe5)],this['isSeparateCalculationProcedureVersions']=_0x504adf[_0x5915bd(0xcf)],this[_0x5915bd(0x7b)]=_0x504adf[_0x5915bd(0x7b)],this[_0x5915bd(0xa4)]=!!_0x504adf[_0x5915bd(0xa4)],this[_0x5915bd(0xb3)]=_0x3e6b05,this[_0x5915bd(0x10e)]=new jsForce['Connection'](_0x504adf[_0x5915bd(0xe2)]);}[a32_0x5d9d21(0xa5)](){return new Promise((_0x14270a,_0xa4c77a)=>{const _0x24a575=a32_0x3ce3;try{this[_0x24a575(0xb3)][_0x24a575(0xe8)]('Start\x20Create\x20Job\x20File');let _0x243cf7=_0x24a575(0xd8)+constants[_0x24a575(0xb7)]+'\x0a';if(this[_0x24a575(0x7b)]){if(this['nameOfComponents']){if(this[_0x24a575(0xed)]==='key'){const _0x3ba3d4=this[_0x24a575(0x67)][_0x24a575(0x68)]('\x0a')[_0x24a575(0xdb)](_0x56c209=>_0x56c209[_0x24a575(0x106)]()['startsWith']('-'))[_0x24a575(0x94)](_0x22fa1d=>_0x22fa1d[_0x24a575(0x80)]('-','')['trim']());_0x3ba3d4[_0x24a575(0x85)]?(_0x243cf7+=_0x24a575(0xe6),_0x243cf7+=_0x3ba3d4[_0x24a575(0x79)]('\x0a\x20-\x20'),fs['appendFileSync'](this[_0x24a575(0xd7)]+'/'+constants[_0x24a575(0xea)],_0x243cf7),this[_0x24a575(0xb3)]['log']('End\x20Create\x20Job\x20File'),_0x14270a()):_0xa4c77a('Error,\x20Components\x20not\x20found');}if(this[_0x24a575(0xed)]===_0x24a575(0xd9))try{const _0x39d0ca=yaml['load'](this[_0x24a575(0x67)]);_0x39d0ca[_0x24a575(0xd7)]=_0x24a575(0x71),fs[_0x24a575(0xf2)](this['projectPath']+'/'+constants[_0x24a575(0xea)],yaml[_0x24a575(0xc1)](_0x39d0ca)),_0x14270a(),this[_0x24a575(0xb3)]['log'](_0x24a575(0x8c));}catch(_0x10eb33){this[_0x24a575(0xb3)][_0x24a575(0xe8)](_0x24a575(0xdd)+_0x10eb33),_0xa4c77a(_0x10eb33);}else _0x243cf7+=_0x24a575(0x78)+this[_0x24a575(0xfc)](),fs[_0x24a575(0xf2)](this[_0x24a575(0xd7)]+'/'+constants[_0x24a575(0xea)],_0x243cf7),_0x14270a(),this['logger'][_0x24a575(0xe8)](_0x24a575(0x8c));}else _0x243cf7+='queries:\x0a'+this[_0x24a575(0xfc)](),fs[_0x24a575(0xf2)](this[_0x24a575(0xd7)]+'/'+constants[_0x24a575(0xea)],_0x243cf7),_0x14270a(),this[_0x24a575(0xb3)]['log'](_0x24a575(0x8c));}else _0x243cf7+=_0x24a575(0x78)+this['getVlocityQueries'](),fs[_0x24a575(0xf2)](this[_0x24a575(0xd7)]+'/'+constants[_0x24a575(0xea)],_0x243cf7),_0x14270a(),this[_0x24a575(0xb3)][_0x24a575(0xe8)](_0x24a575(0x8c));}catch(_0x258965){console[_0x24a575(0xe8)](_0x258965),this[_0x24a575(0xb3)][_0x24a575(0xe8)](_0x24a575(0xcb)),_0xa4c77a(_0x258965);}});}['getVlocityQueries'](){const _0x5431a0=a32_0x5d9d21,_0x339fd2=Array['isArray'](this[_0x5431a0(0x6b)])?this[_0x5431a0(0x6b)]:Object[_0x5431a0(0xad)](this[_0x5431a0(0x6b)]),_0x22dd65=[];/^ *$/[_0x5431a0(0x110)](this['nameOfComponents'])?this[_0x5431a0(0x67)]=[]:this[_0x5431a0(0x67)]=this[_0x5431a0(0x67)][_0x5431a0(0x68)](';');if(this['nameOfComponents']['length']){const _0x718a81=this[_0x5431a0(0x87)]?this['nameOfComponents'][_0x5431a0(0x79)]('%\x27\x20OR\x20Name\x20LIKE\x20\x27%'):this[_0x5431a0(0x67)]['join'](_0x5431a0(0xca));for(const _0x27ba47 of _0x339fd2){_0x22dd65[_0x5431a0(0x10d)](this['createQuery'](_0x27ba47,_0x718a81));}}else for(const _0x179cbf of _0x339fd2){const _0x297927=constants[_0x5431a0(0xa8)][_0x5431a0(0xc6)](_0x179cbf)?this[_0x5431a0(0xc7)](_0x179cbf):'-\x20'+_0x179cbf;_0x22dd65['push'](_0x297927);}return _0x22dd65[_0x5431a0(0x79)]('\x0a');}['createQuery'](_0x1e3d85,_0x1be988=null){const _0x1c28d0=a32_0x5d9d21,_0x165a66=constants['DATA_PACK_TYPES_QUERIES_MAP'][_0x1e3d85];let _0x50a402='';if(_0x165a66){const _0x3d6e19=_0x165a66[_0x1c28d0(0x81)][_0x1c28d0(0x10c)](_0x1c28d0(0xff))&&!!this[_0x1c28d0(0xc8)]?''+this[_0x1c28d0(0xc8)]+_0x165a66[_0x1c28d0(0x81)]:''+_0x165a66[_0x1c28d0(0x81)];_0x50a402=_0x1c28d0(0xec)+_0x1e3d85+'\x0a';const _0x24e5fa=_0x165a66[_0x1c28d0(0xf5)][_0x1c28d0(0x80)](new RegExp(constants[_0x1c28d0(0xb9)],'g'),this[_0x1c28d0(0xc8)]);this[_0x1c28d0(0x87)]?(_0x50a402+=_0x1c28d0(0xe0)+_0x24e5fa+_0x1c28d0(0x88)+_0x3d6e19,_0x1be988&&(_0x50a402+=_0x1c28d0(0xdf)+_0x1be988+'%\x27)')):(_0x50a402+=_0x1c28d0(0xe0)+_0x24e5fa+_0x1c28d0(0x88)+_0x3d6e19,_0x1be988&&(_0x50a402+=_0x1c28d0(0x10f)+_0x1be988+'\x27)'));if(_0x165a66[_0x1c28d0(0xba)]){const _0xc44d8d=_0x1be988?'AND':_0x1c28d0(0x70),_0x4e2f0e=_0x165a66[_0x1c28d0(0xba)]['replace'](new RegExp(constants[_0x1c28d0(0xb9)],'g'),this[_0x1c28d0(0xc8)]);_0x50a402+='\x20'+_0xc44d8d+'\x20'+_0x4e2f0e+'\x0a';}else _0x50a402+='\x0a';}return _0x50a402;}['retrieveData'](){return new Promise((_0x3d827c,_0x31e9e9)=>{const _0x161d00=a32_0x3ce3;try{this['logger'][_0x161d00(0xe8)](_0x161d00(0x7e));const _0x3fba00='vlocity',_0x5dc91e=this['isNotIncludeDependencies']?'0':'-1',_0x1930f9=[_0x161d00(0x69),''+this['vlocityToken'],_0x161d00(0xa7),''+this[_0x161d00(0xb6)],_0x161d00(0xb2),''+constants['JOB_FILE_NAME'],_0x161d00(0xa9),_0x161d00(0xe7),_0x5dc91e];this[_0x161d00(0xe5)]&&_0x1930f9[_0x161d00(0x10d)](_0x161d00(0x90));this[_0x161d00(0xcf)]&&_0x1930f9['push'](_0x161d00(0x7d));_0x1930f9[_0x161d00(0x10d)]('packExport');const _0x2a84f3=()=>{const _0x167bdc=_0x161d00;http[_0x167bdc(0xf7)](this[_0x167bdc(0xd7)],this[_0x167bdc(0x10e)],this['attachLogId'],this[_0x167bdc(0xb3)],![]);};this[_0x161d00(0xb3)][_0x161d00(0xe8)](_0x1930f9[_0x161d00(0x79)]('\x20'));const _0x493ee5={'cwd':''+this[_0x161d00(0xd7)],'maxBuffer':0x400*0x1f4,'shell':!![]};childProcess[_0x161d00(0x9b)](_0x3fba00,_0x1930f9,this[_0x161d00(0xb3)],_0x493ee5,!![],_0x2a84f3)['then'](_0xb45045=>{const _0x217f3a=_0x161d00;this['logger'][_0x217f3a(0xe8)](_0x217f3a(0xda)),_0x3d827c(_0xb45045);})[_0x161d00(0x92)](_0xb6e1a2=>{const _0x26d5ad=_0x161d00;this[_0x26d5ad(0xb3)]['log'](_0x26d5ad(0xfb)+_0xb6e1a2),_0x31e9e9(_0xb6e1a2);});}catch(_0x73c1b){_0x31e9e9(_0x73c1b);}});}['prepareDataForDeploy'](){return new Promise((_0x1a1ce2,_0x474175)=>{const _0x4285e5=a32_0x3ce3;try{this[_0x4285e5(0xb3)][_0x4285e5(0xe8)](_0x4285e5(0x104));let _0x58e4ff=0x0,_0x4841f9=[],_0x48fd26=0x0;const _0x16ed79=[],_0x5c3fb6=this[_0x4285e5(0xd7)]+'/'+constants[_0x4285e5(0xb7)],_0x4dbbef=fs[_0x4285e5(0xf6)](_0x5c3fb6);for(let _0x29b9cf=0x0;_0x29b9cf<_0x4dbbef[_0x4285e5(0x85)];_0x29b9cf++){const _0x5d5acb=_0x4dbbef[_0x29b9cf]===_0x4285e5(0xd2)?'Title':'Name',_0x5b1438=_0x5c3fb6+'/'+_0x4dbbef[_0x29b9cf],_0xec7122=fs[_0x4285e5(0xf6)](_0x5b1438);for(let _0x14416c=0x0;_0x14416c<_0xec7122[_0x4285e5(0x85)];_0x14416c++){const _0x31abd1=_0x4dbbef[_0x29b9cf]+'/'+_0xec7122[_0x14416c];let _0x3d9f19=_0xec7122[_0x14416c];const _0x42dbe8=[],_0x4d8856=_0x5c3fb6+'/'+_0x4dbbef[_0x29b9cf]+'/'+_0xec7122[_0x14416c],_0x26c2ab=fs[_0x4285e5(0xf6)](_0x4d8856);_0x26c2ab[_0x4285e5(0x6e)](_0x2744b5=>{const _0x533126=_0x4285e5;try{_0x2744b5['toString']()[_0x533126(0x10c)](_0x533126(0xe3))&&(_0x3d9f19=JSON[_0x533126(0x8f)](fs['readFileSync'](_0x4d8856+'/'+_0x2744b5)[_0x533126(0x74)]())[_0x5d5acb]);}catch(_0x3c949b){this[_0x533126(0xb3)]['log'](_0x533126(0x8d)+_0x2744b5);}!_0x3d9f19&&(_0x3d9f19=undefined),fs[_0x533126(0x6c)](_0x4d8856+'/'+_0x2744b5['toString']())[_0x533126(0x95)]()&&_0x42dbe8['push'](...this['findSubItems'](_0x4d8856,_0x2744b5));});const _0x521c4e=new AdmZip();_0x521c4e[_0x4285e5(0xa3)](_0x4d8856,_0x4dbbef[_0x29b9cf]+'/'+_0xec7122[_0x14416c]);const _0x5ed205=_0x521c4e[_0x4285e5(0xcd)](),_0x187663=crc32[_0x4285e5(0x10a)](_0x5ed205),_0x5048bf=_0x5ed205[_0x4285e5(0x74)](_0x4285e5(0xf8)),_0x49212a={'fileName':_0x3d9f19,'name':_0xec7122[_0x14416c],'type':_0x4dbbef[_0x29b9cf],'label':_0x31abd1,'crc':_0x187663,'base64':_0x5048bf,'snapshotId':this['snapshotId'],'subItemList':JSON['stringify'](_0x42dbe8)},_0x431744=_0x5ed205[_0x4285e5(0x85)]/0xf4240,_0x3cc148=!!(_0xec7122[_0x4285e5(0x85)]-0x1===_0x14416c&&_0x4dbbef[_0x4285e5(0x85)]-0x1===_0x29b9cf);_0x58e4ff+=_0x431744,_0x58e4ff>0x2||_0x4841f9>0xfa0?(_0x16ed79[_0x4285e5(0x10d)](_0x4841f9),_0x431744<0x3?(_0x4841f9=[_0x49212a],_0x48fd26++,_0x58e4ff=_0x431744):(this[_0x4285e5(0xb3)][_0x4285e5(0xe8)](_0x4285e5(0x6d)+_0x31abd1+_0x4285e5(0xc3),!![]),_0x58e4ff=0x0)):(_0x4841f9['push'](_0x49212a),_0x48fd26++),_0x3cc148&&_0x16ed79[_0x4285e5(0x10d)](_0x4841f9);}}this[_0x4285e5(0xb3)][_0x4285e5(0xe8)](_0x4285e5(0xf0)),_0x1a1ce2({'iteratorDeploy':_0x16ed79[Symbol[_0x4285e5(0xb8)]](),'count':_0x48fd26});}catch(_0x53cba1){this[_0x4285e5(0xb3)][_0x4285e5(0xe8)](_0x4285e5(0x101)),_0x474175(_0x53cba1);}});}[a32_0x5d9d21(0xc0)](_0x3f2335,_0xfa53c,_0x430089='',_0x77bedd=[]){const _0x5cc211=a32_0x5d9d21;_0x430089[_0x5cc211(0x85)]&&(_0x430089='/'+_0x430089);const _0x423c78=fs[_0x5cc211(0xf6)](_0x3f2335+'/'+_0xfa53c+_0x430089);return _0x423c78[_0x5cc211(0x6e)](_0x1f1466=>{const _0x1e257a=_0x5cc211;!fs[_0x1e257a(0x6c)](_0x3f2335+'/'+_0xfa53c+_0x430089+'/'+_0x1f1466[_0x1e257a(0x74)]())[_0x1e257a(0x95)]()?_0x77bedd[_0x1e257a(0x10d)](''+_0xfa53c+_0x430089+'/'+_0x1f1466['toString']()):this[_0x1e257a(0xc0)](_0x3f2335,_0xfa53c,_0x1f1466,_0x77bedd);}),_0x77bedd;}[a32_0x5d9d21(0x66)](_0xfad86f,_0x1dddba='',_0x24e548=[]){const _0x4f2e15=a32_0x5d9d21,_0x14af84=fs[_0x4f2e15(0xf6)](_0xfad86f,{'withFileTypes':!![]});return _0x14af84[_0x4f2e15(0x6e)](_0x196c01=>{const _0x56a6d2=_0x4f2e15,_0x3ba0a1=resolve(_0xfad86f,_0x196c01['name']);if(_0x196c01[_0x56a6d2(0x95)]()){const _0xa74d73=_0x1dddba[_0x56a6d2(0x85)]?_0x1dddba+'/'+_0x196c01[_0x56a6d2(0x9c)]:_0x196c01[_0x56a6d2(0x9c)];readFiles(_0x3ba0a1,_0xa74d73,_0x24e548);}else{let _0x1210a9;_0x1dddba[_0x56a6d2(0x85)]?_0x1210a9=_0x1dddba+'/'+_0x196c01[_0x56a6d2(0x9c)]:_0x1210a9=_0x196c01[_0x56a6d2(0x9c)],_0x24e548['push'](_0x1210a9);}}),_0x24e548;}[a32_0x5d9d21(0x99)](_0x3a12b0){return new Promise((_0x3fddf6,_0x5c26ea)=>{const _0x1513f5=a32_0x3ce3;try{this[_0x1513f5(0xb3)]['log']('Start\x20Deploy\x20Components'),this[_0x1513f5(0x107)](_0x3a12b0)[_0x1513f5(0x64)](()=>{const _0x1f357b=_0x1513f5;this['logger']['log'](_0x1f357b(0xb1)),_0x3fddf6();})[_0x1513f5(0x92)](_0x2e83de=>{const _0x2bf3c7=_0x1513f5;this['logger'][_0x2bf3c7(0xe8)]('Error\x20Deploy\x20Components\x20'+_0x2e83de),_0x5c26ea(_0x2e83de);});}catch(_0x32d0e5){_0x5c26ea(_0x32d0e5);}});}[a32_0x5d9d21(0x107)](_0x56e704,_0x2ebe13=0x0){return new Promise((_0x4bb7ca,_0x27f881)=>{const _0x349129=a32_0x3ce3;try{const _0x3aa0a7=_0x56e704['iteratorDeploy'][_0x349129(0x86)]();_0x3aa0a7['done']?_0x4bb7ca():this[_0x349129(0x109)](_0x56e704,_0x3aa0a7,_0x2ebe13)[_0x349129(0x64)](()=>_0x4bb7ca())['catch'](_0x4d830c=>_0x27f881(_0x4d830c));}catch(_0x14e82e){_0x27f881(_0x14e82e);}});}[a32_0x5d9d21(0x109)](_0x40a9d1,_0x5c126e,_0x441b23=0x0){return new Promise((_0x3f1a97,_0x42529f)=>{const _0x4496e1=a32_0x3ce3;try{const _0x4a64d9=this[_0x4496e1(0x8b)]===''?_0x4496e1(0x72):_0x4496e1(0x100),_0xab4181={'items':_0x5c126e[_0x4496e1(0x77)]};this['jsForceConnection']['apex'][_0x4496e1(0x91)](_0x4a64d9,_0xab4181)[_0x4496e1(0x64)](()=>{const _0x2d6c57=_0x4496e1;return _0x441b23+=_0x5c126e[_0x2d6c57(0x77)][_0x2d6c57(0x85)],this[_0x2d6c57(0xb3)]['log'](_0x2d6c57(0xd5)+_0x441b23+'\x20from\x20'+_0x40a9d1[_0x2d6c57(0xf4)]),Promise[_0x2d6c57(0xf9)]();})['catch'](_0x155558=>{const _0x347985=_0x4496e1;return this['logger'][_0x347985(0xe8)]('Error\x20deploy\x20chunk\x20'+_0x155558),Promise['resolve']();})[_0x4496e1(0x64)](()=>this[_0x4496e1(0x107)](_0x40a9d1,_0x441b23))[_0x4496e1(0x64)](_0x3f1a97)[_0x4496e1(0x92)](_0x42529f);}catch(_0x228f4f){_0x42529f(_0x228f4f);}});}['createVlocityTempZip'](){return new Promise((_0x10e44b,_0x23a0b8)=>{const _0x20a9c4=a32_0x3ce3;try{this['logger'][_0x20a9c4(0xe8)](_0x20a9c4(0xd4));const _0x215e2c=this[_0x20a9c4(0xd7)]+'/'+constants[_0x20a9c4(0xaf)];if(fs[_0x20a9c4(0x89)](_0x215e2c)){const _0x5a3b90=_0x215e2c+_0x20a9c4(0xf3);if(this[_0x20a9c4(0xb3)][_0x20a9c4(0xb5)][_0x20a9c4(0x85)]&&fs['existsSync'](_0x5a3b90)){const _0x1ab26a=fs[_0x20a9c4(0xf6)](_0x5a3b90);if(_0x1ab26a&&_0x1ab26a['length']){const _0x1a0cfa=_0x1ab26a[0x0];if(_0x1a0cfa[_0x20a9c4(0xc6)](_0x20a9c4(0xd6))&&_0x1a0cfa[_0x20a9c4(0xc6)]('-Export.yaml')){const _0x5f2772=_0x20a9c4(0x6a)+JSON[_0x20a9c4(0x73)](this[_0x20a9c4(0xb3)][_0x20a9c4(0xb5)]);fs['appendFileSync']('./'+_0x5a3b90+'/'+_0x1a0cfa,_0x5f2772);}}}const _0x419706=new AdmZip();_0x419706[_0x20a9c4(0xa3)](_0x215e2c,constants[_0x20a9c4(0xaf)]),_0x10e44b(_0x419706[_0x20a9c4(0xcd)]()[_0x20a9c4(0x74)](_0x20a9c4(0xf8))),this['logger'][_0x20a9c4(0xe8)]('End\x20Create\x20Vlocity\x20Temp\x20Zip');}else this[_0x20a9c4(0xb3)][_0x20a9c4(0xe8)](_0x20a9c4(0xa1)),_0x10e44b();}catch(_0x54b49c){this['logger'][_0x20a9c4(0xe8)]('Error\x20Create\x20Vlocity\x20Temp\x20Zip\x20'+_0x54b49c),_0x10e44b();}});}[a32_0x5d9d21(0x65)](_0x478a7b){return new Promise((_0x595f14,_0x420589)=>{const _0x3f715b=a32_0x3ce3;try{this[_0x3f715b(0xb3)]['log'](_0x3f715b(0xfe));const _0x4e60a6={'Name':'Vlocity\x20Temp','ContentType':_0x3f715b(0xac),'Description':_0x3f715b(0xfa),'ParentId':this[_0x3f715b(0x108)],'Body':_0x478a7b};this[_0x3f715b(0x10e)]['sobject']('Attachment')['create'](_0x4e60a6)[_0x3f715b(0x64)](()=>{const _0x2639d4=_0x3f715b;this[_0x2639d4(0xb3)][_0x2639d4(0xe8)](_0x2639d4(0xdc)),_0x595f14();})['catch'](_0x27669b=>{const _0xd945db=_0x3f715b;this[_0xd945db(0xb3)][_0xd945db(0xe8)]('Error\x20Send\x20Vlocity\x20Temp\x20Zip\x20'+_0x27669b),_0x420589(_0x27669b);});}catch(_0x56f154){this[_0x3f715b(0xb3)]['log'](_0x3f715b(0xbc)+_0x56f154),_0x420589(_0x56f154);}});}[a32_0x5d9d21(0x97)](){return new Promise(_0x407328=>{const _0x17ebd0=a32_0x3ce3;try{if(fs[_0x17ebd0(0x89)](this[_0x17ebd0(0xd7)]+'/'+constants[_0x17ebd0(0xbd)])){const _0x7e5f81=yaml[_0x17ebd0(0x9e)](fs[_0x17ebd0(0xc9)](this[_0x17ebd0(0xd7)]+'/'+constants[_0x17ebd0(0xbd)],_0x17ebd0(0x9f)));_0x7e5f81[_0x17ebd0(0x83)]&&_0x7e5f81[_0x17ebd0(0x83)]['length']?(this[_0x17ebd0(0xb3)]['log'](_0x17ebd0(0xc4)+_0x7e5f81[_0x17ebd0(0x83)][_0x17ebd0(0x79)]('\x0a')),_0x407328(!![])):_0x407328(![]);}else _0x407328(![]);}catch(_0x4c9faa){_0x407328(![]);}});}[a32_0x5d9d21(0x8a)](_0x544d16,_0x5a2935=![]){return new Promise((_0x2c8703,_0x2836ca)=>{const _0x1bcc74=a32_0x3ce3;try{Promise['resolve']()['then'](()=>this[_0x1bcc74(0x93)]())['then'](_0x1bb556=>{const _0x4632b7=_0x1bcc74;if(_0x1bb556)return this[_0x4632b7(0x65)](_0x1bb556);return Promise[_0x4632b7(0xf9)]();})[_0x1bcc74(0x64)](()=>http[_0x1bcc74(0xf7)](this[_0x1bcc74(0xd7)],this[_0x1bcc74(0x10e)],this[_0x1bcc74(0xbb)],this[_0x1bcc74(0xb3)],_0x5a2935,!![]))[_0x1bcc74(0x64)](_0x22de94=>{const _0x21ce42=_0x1bcc74;return _0x5a2935=_0x22de94,http['callUpdateLog'](this[_0x21ce42(0x10e)],this['logId'],this[_0x21ce42(0x8b)],_0x544d16,this[_0x21ce42(0xb3)],_0x22de94);})[_0x1bcc74(0x64)](()=>this[_0x1bcc74(0xcc)](_0x5a2935));}catch(_0xa6c44){_0x2836ca(_0xa6c44);}});}[a32_0x5d9d21(0xcc)](_0x2eb789){return new Promise((_0x2c953a,_0x516231)=>{const _0x14e79a=a32_0x3ce3;try{this[_0x14e79a(0xb3)][_0x14e79a(0xe8)](_0x14e79a(0xe4));const _0xb46c79={'Id':this['snapshotId'],[this['nameSpacePrefix']+'Is_Completed__c']:!![],[this['nameSpacePrefix']+'Is_Error__c']:_0x2eb789};this[_0x14e79a(0x10e)]['sobject'](this[_0x14e79a(0x8b)]+_0x14e79a(0xbe))[_0x14e79a(0xee)](_0xb46c79)[_0x14e79a(0x64)](()=>{const _0x449cd3=_0x14e79a;this['logger'][_0x449cd3(0xe8)](_0x449cd3(0xa0)),_0x2c953a(_0xb46c79[this[_0x449cd3(0x8b)]+_0x449cd3(0xaa)]);})['catch'](_0x1c9afa=>{const _0x31405a=_0x14e79a;this['logger'][_0x31405a(0xe8)](_0x31405a(0xae)),_0x516231(_0x1c9afa);});}catch(_0x147477){this['logger'][_0x14e79a(0xe8)](_0x14e79a(0xae)),_0x516231(_0x147477);}});}}function getAllAvailableExportsKeys(_0x40b1cc,_0x4e1e51,_0x36c15f,_0x592a35){return new Promise((_0x21c5b3,_0x3d62ad)=>{const _0x5c6448=a32_0x3ce3;try{this[_0x5c6448(0xb3)][_0x5c6448(0xe8)](_0x5c6448(0x7a));const _0x43d7f1='vlocity',_0x247a57=[_0x5c6448(0x69),''+_0x36c15f,'-sf.instanceUrl',''+_0x4e1e51,_0x5c6448(0x76),_0x5c6448(0xeb)];this[_0x5c6448(0xb3)][_0x5c6448(0xe8)](_0x247a57[_0x5c6448(0xd1)](0x2)[_0x5c6448(0x79)]('\x20'));const _0x33a27d={'cwd':''+_0x40b1cc,'maxBuffer':0x400*0x1f4};childProcess['callChildProcess'](_0x43d7f1,_0x247a57,null,_0x33a27d)['then'](_0x506df4=>{const _0x1f6cc6=_0x5c6448;this['logger']['log'](_0x1f6cc6(0x7c)),_0x21c5b3(_0x506df4);})[_0x5c6448(0x92)](_0x3c11e0=>{const _0x26495e=_0x5c6448;this['logger']['log'](_0x26495e(0x102)+_0x3c11e0),_0x3d62ad(_0x3c11e0);});}catch(_0x45c1e5){this[_0x5c6448(0xb3)][_0x5c6448(0xe8)](_0x5c6448(0x102)+_0x45c1e5),_0x3d62ad(_0x45c1e5);}});}function createZip(_0x45a415,_0x4ad58d){const _0x16108b=a32_0x5d9d21,_0x111854=new AdmZip(),_0x9077eb=this[_0x16108b(0x66)](_0x45a415);return _0x9077eb['forEach'](_0x2d7793=>{const _0x160b04=_0x16108b;if(Array['isArray'](_0x2d7793))_0x2d7793[_0x160b04(0x6e)](_0x91a3d8=>{const _0x378aa3=_0x160b04,_0x51e689=fs[_0x378aa3(0xc9)](_0x45a415+'/'+_0x91a3d8,_0x378aa3(0x9f));_0x111854[_0x378aa3(0x10b)](_0x4ad58d+'/'+_0x91a3d8,Buffer[_0x378aa3(0x6f)](_0x51e689));});else{const _0x41a1ae=fs[_0x160b04(0xc9)](_0x45a415+'/'+_0x2d7793,_0x160b04(0x9f));_0x111854[_0x160b04(0x10b)](_0x4ad58d+'/'+_0x2d7793,Buffer[_0x160b04(0x6f)](_0x41a1ae));}}),_0x111854[_0x16108b(0xcd)]();}module[a32_0x5d9d21(0xb0)]={'RetrieveHelper':RetrieveHelper};