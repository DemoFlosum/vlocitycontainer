const a34_0x2cb4d0=a34_0x503d;(function(_0x13733f,_0x580a1d){const _0xa64ec0=a34_0x503d,_0x433bd7=_0x13733f();while(!![]){try{const _0x1a6e4a=-parseInt(_0xa64ec0(0x21c))/0x1+-parseInt(_0xa64ec0(0x216))/0x2*(parseInt(_0xa64ec0(0x17f))/0x3)+-parseInt(_0xa64ec0(0x1b9))/0x4*(parseInt(_0xa64ec0(0x1dc))/0x5)+parseInt(_0xa64ec0(0x199))/0x6+parseInt(_0xa64ec0(0x195))/0x7*(parseInt(_0xa64ec0(0x1aa))/0x8)+parseInt(_0xa64ec0(0x1fa))/0x9+parseInt(_0xa64ec0(0x1db))/0xa;if(_0x1a6e4a===_0x580a1d)break;else _0x433bd7['push'](_0x433bd7['shift']());}catch(_0x5e6b04){_0x433bd7['push'](_0x433bd7['shift']());}}}(a34_0x5eaa,0x655d2));const fs=require('fs'),crc32=require('crc-32'),AdmZip=require(a34_0x2cb4d0(0x1ec)),yaml=require(a34_0x2cb4d0(0x1f1)),{resolve}=require(a34_0x2cb4d0(0x188)),jsForce=require(a34_0x2cb4d0(0x208)),constants=require(a34_0x2cb4d0(0x225)),childProcess=require(a34_0x2cb4d0(0x1dd)),http=require('../../../services/http'),storage=require('../../../services/storage');function a34_0x503d(_0x5a9cba,_0x2009d0){const _0x5eaa9a=a34_0x5eaa();return a34_0x503d=function(_0x503d53,_0x18c872){_0x503d53=_0x503d53-0x17a;let _0x3088d4=_0x5eaa9a[_0x503d53];return _0x3088d4;},a34_0x503d(_0x5a9cba,_0x2009d0);}class RetrieveHelper{constructor(_0x200324,_0x2b4706,_0x44b496){const _0x8a0e31=a34_0x2cb4d0;this[_0x8a0e31(0x210)]=_0x2b4706[_0x8a0e31(0x1b4)][_0x8a0e31(0x19b)],this['flosumToken']=_0x2b4706[_0x8a0e31(0x1b4)][_0x8a0e31(0x19d)],this['vlocityUrl']=_0x2b4706['authVlosityOrg'][_0x8a0e31(0x19b)],this[_0x8a0e31(0x21e)]=_0x2b4706['authVlosityOrg'][_0x8a0e31(0x19d)],this['logId']=_0x2b4706[_0x8a0e31(0x20a)],this['attachLogId']=_0x2b4706[_0x8a0e31(0x1f0)],this[_0x8a0e31(0x18c)]=_0x200324,this['authFlosum']=_0x2b4706[_0x8a0e31(0x1b4)],this[_0x8a0e31(0x1a7)]=_0x2b4706[_0x8a0e31(0x1a7)],this['vlocityNameSpacePrefix']=_0x2b4706['vlocityNameSpacePrefix'],this[_0x8a0e31(0x1b5)]=_0x2b4706[_0x8a0e31(0x1b5)],this[_0x8a0e31(0x212)]=_0x2b4706[_0x8a0e31(0x212)],this[_0x8a0e31(0x1ed)]=_0x2b4706[_0x8a0e31(0x1ed)],this['snapshotId']=_0x2b4706[_0x8a0e31(0x20b)],this[_0x8a0e31(0x1e0)]=JSON[_0x8a0e31(0x1ab)](_0x2b4706['selectedDataPackTypes']),this[_0x8a0e31(0x17b)]=_0x2b4706[_0x8a0e31(0x17b)],this['isSeparateMatrixVersions']=_0x2b4706['isSeparateMatrixVersions'],this[_0x8a0e31(0x1b8)]=_0x2b4706['isSeparateCalculationProcedureVersions'],this['isAfterUpdateSearchByKey']=_0x2b4706[_0x8a0e31(0x1bc)],this[_0x8a0e31(0x1f5)]=!!_0x2b4706[_0x8a0e31(0x1f5)],this[_0x8a0e31(0x1cc)]=_0x44b496,this[_0x8a0e31(0x221)]=new jsForce['Connection'](_0x2b4706[_0x8a0e31(0x1b4)]);}['createJobYamlFile'](){return new Promise((_0x2f59c7,_0x4760cc)=>{const _0x39eafd=a34_0x503d;try{this[_0x39eafd(0x1cc)][_0x39eafd(0x1b3)]('Start\x20Create\x20Job\x20File');let _0xfb69fe=_0x39eafd(0x1c5)+constants[_0x39eafd(0x209)]+'\x0a';if(this['isAfterUpdateSearchByKey']){if(this[_0x39eafd(0x1b5)]){if(this[_0x39eafd(0x212)]===_0x39eafd(0x1d3)){const _0x4fae23=this[_0x39eafd(0x1b5)][_0x39eafd(0x1c4)]('\x0a')[_0x39eafd(0x206)](_0x519642=>_0x519642['trim']()[_0x39eafd(0x214)]('-'))[_0x39eafd(0x1f8)](_0xc9198c=>_0xc9198c['replace']('-','')['trim']());_0x4fae23[_0x39eafd(0x1fc)]?(_0xfb69fe+=_0x39eafd(0x1fd),_0xfb69fe+=_0x4fae23['join']('\x0a\x20-\x20'),fs['appendFileSync'](this[_0x39eafd(0x18c)]+'/'+constants[_0x39eafd(0x17d)],_0xfb69fe),this[_0x39eafd(0x1cc)][_0x39eafd(0x1b3)]('End\x20Create\x20Job\x20File'),_0x2f59c7()):_0x4760cc(_0x39eafd(0x1e7));}if(this[_0x39eafd(0x212)]===_0x39eafd(0x197))try{const _0x1a33e1=yaml[_0x39eafd(0x1c0)](this[_0x39eafd(0x1b5)]);_0x1a33e1['projectPath']=_0x39eafd(0x1b0),fs[_0x39eafd(0x1c7)](this[_0x39eafd(0x18c)]+'/'+constants[_0x39eafd(0x17d)],yaml[_0x39eafd(0x218)](_0x1a33e1)),_0x2f59c7(),this[_0x39eafd(0x1cc)][_0x39eafd(0x1b3)]('End\x20Create\x20Job\x20File');}catch(_0x404eec){this[_0x39eafd(0x1cc)][_0x39eafd(0x1b3)](_0x39eafd(0x1ac)+_0x404eec),_0x4760cc(_0x404eec);}else _0xfb69fe+='queries:\x0a'+this[_0x39eafd(0x1d7)](),fs['appendFileSync'](this['projectPath']+'/'+constants[_0x39eafd(0x17d)],_0xfb69fe),_0x2f59c7(),this[_0x39eafd(0x1cc)]['log'](_0x39eafd(0x1bf));}else _0xfb69fe+=_0x39eafd(0x18b)+this['getVlocityQueries'](),fs['appendFileSync'](this[_0x39eafd(0x18c)]+'/'+constants[_0x39eafd(0x17d)],_0xfb69fe),_0x2f59c7(),this[_0x39eafd(0x1cc)][_0x39eafd(0x1b3)]('End\x20Create\x20Job\x20File');}else _0xfb69fe+=_0x39eafd(0x18b)+this[_0x39eafd(0x1d7)](),fs['appendFileSync'](this[_0x39eafd(0x18c)]+'/'+constants[_0x39eafd(0x17d)],_0xfb69fe),_0x2f59c7(),this[_0x39eafd(0x1cc)][_0x39eafd(0x1b3)](_0x39eafd(0x1bf));}catch(_0x596cd1){console['log'](_0x596cd1),this[_0x39eafd(0x1cc)]['log'](_0x39eafd(0x1e8)),_0x4760cc(_0x596cd1);}});}[a34_0x2cb4d0(0x1d7)](){const _0x4f8962=a34_0x2cb4d0,_0x428acb=Array[_0x4f8962(0x196)](this['selectedDataPackTypes'])?this[_0x4f8962(0x1e0)]:Object[_0x4f8962(0x198)](this[_0x4f8962(0x1e0)]),_0x64274=[];/^ *$/['test'](this[_0x4f8962(0x1b5)])?this[_0x4f8962(0x1b5)]=[]:this[_0x4f8962(0x1b5)]=this[_0x4f8962(0x1b5)][_0x4f8962(0x1c4)](';');if(this['nameOfComponents'][_0x4f8962(0x1fc)]){const _0x26f697=this[_0x4f8962(0x1ed)]?this[_0x4f8962(0x1b5)][_0x4f8962(0x1ba)](_0x4f8962(0x1f2)):this[_0x4f8962(0x1b5)][_0x4f8962(0x1ba)](_0x4f8962(0x20e));for(const _0x4df3f8 of _0x428acb){_0x64274[_0x4f8962(0x1e6)](this['createQuery'](_0x4df3f8,_0x26f697));}}else for(const _0x51871b of _0x428acb){const _0x50541b=constants['UNSUPPORTED_BY_DEFAULT_LIST'][_0x4f8962(0x1b6)](_0x51871b)?this['createQuery'](_0x51871b):'-\x20'+_0x51871b;_0x64274[_0x4f8962(0x1e6)](_0x50541b);}return _0x64274[_0x4f8962(0x1ba)]('\x0a');}[a34_0x2cb4d0(0x19a)](_0x3d2756,_0x249e76=null){const _0x4ab872=a34_0x2cb4d0,_0x33d79b=constants[_0x4ab872(0x18d)][_0x3d2756];let _0x381ae1='';if(_0x33d79b){const _0x7fefa8=_0x33d79b[_0x4ab872(0x18e)][_0x4ab872(0x202)](_0x4ab872(0x211))&&!!this[_0x4ab872(0x20d)]?''+this['vlocityNameSpacePrefix']+_0x33d79b[_0x4ab872(0x18e)]:''+_0x33d79b[_0x4ab872(0x18e)];_0x381ae1=_0x4ab872(0x21d)+_0x3d2756+'\x0a';const _0x139719=_0x33d79b[_0x4ab872(0x21a)]['replace'](new RegExp(constants['VLOCITY_NAMESPACE_PREFIX_CODE'],'g'),this[_0x4ab872(0x20d)]);this[_0x4ab872(0x1ed)]?(_0x381ae1+='\x20\x20query:\x20SELECT\x20'+_0x139719+_0x4ab872(0x1cf)+_0x7fefa8,_0x249e76&&(_0x381ae1+='\x20WHERE\x20(Name\x20LIKE\x20\x27%'+_0x249e76+_0x4ab872(0x186))):(_0x381ae1+=_0x4ab872(0x1f7)+_0x139719+'\x20FROM\x20'+_0x7fefa8,_0x249e76&&(_0x381ae1+=_0x4ab872(0x185)+_0x249e76+'\x27)'));if(_0x33d79b[_0x4ab872(0x220)]){const _0x42bd05=_0x249e76?_0x4ab872(0x1ea):'WHERE',_0x396d97=_0x33d79b['query'][_0x4ab872(0x1f9)](new RegExp(constants[_0x4ab872(0x1e5)],'g'),this['vlocityNameSpacePrefix']);_0x381ae1+='\x20'+_0x42bd05+'\x20'+_0x396d97+'\x0a';}else _0x381ae1+='\x0a';}return _0x381ae1;}[a34_0x2cb4d0(0x1a2)](){return new Promise((_0x5c5e45,_0x50ad1f)=>{const _0x105b36=a34_0x503d;try{this[_0x105b36(0x1cc)][_0x105b36(0x1b3)](_0x105b36(0x1da));const _0x2f1079=_0x105b36(0x200),_0x5852a4=this[_0x105b36(0x17b)]?'0':'-1',_0x44ae40=[_0x105b36(0x1a1),''+this[_0x105b36(0x21e)],_0x105b36(0x181),''+this[_0x105b36(0x1e4)],_0x105b36(0x1fe),''+constants[_0x105b36(0x17d)],_0x105b36(0x1c8),_0x105b36(0x1d9),_0x5852a4];this[_0x105b36(0x224)]&&_0x44ae40['push'](_0x105b36(0x18f));this['isSeparateCalculationProcedureVersions']&&_0x44ae40[_0x105b36(0x1e6)](_0x105b36(0x217));_0x44ae40[_0x105b36(0x1e6)](_0x105b36(0x213));const _0x5ec7f6=()=>{const _0x3eed17=_0x105b36;http[_0x3eed17(0x191)](this[_0x3eed17(0x18c)],this[_0x3eed17(0x221)],this[_0x3eed17(0x1f0)],this[_0x3eed17(0x1cc)],![]);};this['logger'][_0x105b36(0x1b3)](_0x44ae40[_0x105b36(0x1ba)]('\x20'));const _0x3a69f3={'cwd':''+this[_0x105b36(0x18c)],'maxBuffer':0x400*0x1f4,'shell':!![]};childProcess[_0x105b36(0x1c6)](_0x2f1079,_0x44ae40,this['logger'],_0x3a69f3,!![],_0x5ec7f6)['then'](_0x5c8ee0=>{const _0x470d2a=_0x105b36;this['logger'][_0x470d2a(0x1b3)](_0x470d2a(0x17e)),_0x5c5e45(_0x5c8ee0);})[_0x105b36(0x1e1)](_0x44a1b6=>{const _0x1953fb=_0x105b36;this[_0x1953fb(0x1cc)][_0x1953fb(0x1b3)]('Error\x20Retrieve\x20Data\x20'+_0x44a1b6),_0x50ad1f(_0x44a1b6);});}catch(_0x3eb917){_0x50ad1f(_0x3eb917);}});}['prepareDataForDeploy'](){return new Promise((_0x2db81d,_0x3d46ef)=>{const _0x111237=a34_0x503d;try{this[_0x111237(0x1cc)]['log'](_0x111237(0x1df));let _0x2d5252=0x0,_0xe35272=[],_0x42efbe=0x0;const _0x48bd8e=[],_0x1baa6b=this[_0x111237(0x18c)]+'/'+constants['UNZIP_CATALOG_NAME'],_0x2a4e30=fs['readdirSync'](_0x1baa6b);for(let _0x480aaa=0x0;_0x480aaa<_0x2a4e30[_0x111237(0x1fc)];_0x480aaa++){const _0x168691=_0x2a4e30[_0x480aaa]==='ContentVersion'?_0x111237(0x1a8):_0x111237(0x1f6),_0xa348d=_0x1baa6b+'/'+_0x2a4e30[_0x480aaa],_0x4f2930=fs[_0x111237(0x1af)](_0xa348d);for(let _0x595dc5=0x0;_0x595dc5<_0x4f2930[_0x111237(0x1fc)];_0x595dc5++){const _0x410e9d=_0x2a4e30[_0x480aaa]+'/'+_0x4f2930[_0x595dc5];let _0x2d436d=_0x4f2930[_0x595dc5];const _0x56390b=[],_0x9d8211=_0x1baa6b+'/'+_0x2a4e30[_0x480aaa]+'/'+_0x4f2930[_0x595dc5],_0x4d5316=fs[_0x111237(0x1af)](_0x9d8211);_0x4d5316[_0x111237(0x1d4)](_0x2bb11e=>{const _0x55ba51=_0x111237;try{_0x2bb11e[_0x55ba51(0x1d2)]()[_0x55ba51(0x202)]('_DataPack.json')&&(_0x2d436d=JSON['parse'](fs[_0x55ba51(0x205)](_0x9d8211+'/'+_0x2bb11e)['toString']())[_0x168691]);}catch(_0x7e6ec2){this[_0x55ba51(0x1cc)][_0x55ba51(0x1b3)](_0x55ba51(0x1b7)+_0x2bb11e);}!_0x2d436d&&(_0x2d436d=undefined),fs[_0x55ba51(0x207)](_0x9d8211+'/'+_0x2bb11e[_0x55ba51(0x1d2)]())['isDirectory']()&&_0x56390b[_0x55ba51(0x1e6)](...this[_0x55ba51(0x1a0)](_0x9d8211,_0x2bb11e));});const _0x5540e7=new AdmZip();_0x5540e7['addLocalFolder'](_0x9d8211,_0x2a4e30[_0x480aaa]+'/'+_0x4f2930[_0x595dc5]);const _0x11e5f9=_0x5540e7['toBuffer'](),_0x27bcc2=crc32[_0x111237(0x1e2)](_0x11e5f9),_0x1cf410=_0x11e5f9[_0x111237(0x1d2)]('base64'),_0x24bafd={'fileName':_0x2d436d,'name':_0x4f2930[_0x595dc5],'type':_0x2a4e30[_0x480aaa],'label':_0x410e9d,'crc':_0x27bcc2,'base64':_0x1cf410,'snapshotId':this[_0x111237(0x20b)],'subItemList':JSON['stringify'](_0x56390b)},_0x1856ed=_0x11e5f9['length']/0xf4240,_0x910ba=!!(_0x4f2930[_0x111237(0x1fc)]-0x1===_0x595dc5&&_0x2a4e30['length']-0x1===_0x480aaa);_0x2d5252+=_0x1856ed,_0x2d5252>0x2||_0xe35272>0xfa0?(_0x48bd8e[_0x111237(0x1e6)](_0xe35272),_0x1856ed<0x3?(_0xe35272=[_0x24bafd],_0x42efbe++,_0x2d5252=_0x1856ed):(this['logger']['log']('Cannot\x20retrieve\x20component\x20'+_0x410e9d+_0x111237(0x1cd),!![]),_0x2d5252=0x0)):(_0xe35272[_0x111237(0x1e6)](_0x24bafd),_0x42efbe++),_0x910ba&&_0x48bd8e['push'](_0xe35272);}}this[_0x111237(0x1cc)][_0x111237(0x1b3)](_0x111237(0x1d1)),_0x2db81d({'iteratorDeploy':_0x48bd8e[Symbol[_0x111237(0x1a6)]](),'count':_0x42efbe});}catch(_0x2e175e){this['logger'][_0x111237(0x1b3)](_0x111237(0x1ca)),_0x3d46ef(_0x2e175e);}});}[a34_0x2cb4d0(0x1a0)](_0x253683,_0x2542c5,_0x759c51='',_0xe8243=[]){const _0x4fd8eb=a34_0x2cb4d0;_0x759c51[_0x4fd8eb(0x1fc)]&&(_0x759c51='/'+_0x759c51);const _0x19b94a=fs[_0x4fd8eb(0x1af)](_0x253683+'/'+_0x2542c5+_0x759c51);return _0x19b94a[_0x4fd8eb(0x1d4)](_0x16ab4e=>{const _0x5efb9c=_0x4fd8eb;!fs[_0x5efb9c(0x207)](_0x253683+'/'+_0x2542c5+_0x759c51+'/'+_0x16ab4e[_0x5efb9c(0x1d2)]())['isDirectory']()?_0xe8243[_0x5efb9c(0x1e6)](''+_0x2542c5+_0x759c51+'/'+_0x16ab4e[_0x5efb9c(0x1d2)]()):this['findSubItems'](_0x253683,_0x2542c5,_0x16ab4e,_0xe8243);}),_0xe8243;}[a34_0x2cb4d0(0x182)](_0x53a5e,_0x207632='',_0x4355d9=[]){const _0x360fcf=a34_0x2cb4d0,_0x480287=fs['readdirSync'](_0x53a5e,{'withFileTypes':!![]});return _0x480287[_0x360fcf(0x1d4)](_0x5c4c88=>{const _0x2dd154=_0x360fcf,_0x456f4c=resolve(_0x53a5e,_0x5c4c88[_0x2dd154(0x1b2)]);if(_0x5c4c88['isDirectory']()){const _0x173d7a=_0x207632['length']?_0x207632+'/'+_0x5c4c88['name']:_0x5c4c88['name'];readFiles(_0x456f4c,_0x173d7a,_0x4355d9);}else{let _0x12b2d4;_0x207632[_0x2dd154(0x1fc)]?_0x12b2d4=_0x207632+'/'+_0x5c4c88[_0x2dd154(0x1b2)]:_0x12b2d4=_0x5c4c88[_0x2dd154(0x1b2)],_0x4355d9[_0x2dd154(0x1e6)](_0x12b2d4);}}),_0x4355d9;}[a34_0x2cb4d0(0x1c2)](_0x416274){return new Promise((_0x93e325,_0x184664)=>{const _0x2d54b5=a34_0x503d;try{this[_0x2d54b5(0x1cc)][_0x2d54b5(0x1b3)](_0x2d54b5(0x222)),this[_0x2d54b5(0x1e3)](_0x416274)[_0x2d54b5(0x1be)](()=>{const _0x7710c3=_0x2d54b5;this[_0x7710c3(0x1cc)][_0x7710c3(0x1b3)]('End\x20Deploy\x20Components'),_0x93e325();})['catch'](_0x52cd92=>{const _0x5c08f5=_0x2d54b5;this[_0x5c08f5(0x1cc)][_0x5c08f5(0x1b3)](_0x5c08f5(0x184)+_0x52cd92),_0x184664(_0x52cd92);});}catch(_0x305217){_0x184664(_0x305217);}});}['nextChunk'](_0x13b187,_0x1abb01=0x0){return new Promise((_0x32c20f,_0x45e59f)=>{const _0x78174d=a34_0x503d;try{const _0xdcb415=_0x13b187['iteratorDeploy']['next']();_0xdcb415[_0x78174d(0x1ee)]?_0x32c20f():this['deploy'](_0x13b187,_0xdcb415,_0x1abb01)[_0x78174d(0x1be)](()=>_0x32c20f())[_0x78174d(0x1e1)](_0x52af74=>_0x45e59f(_0x52af74));}catch(_0x5e6e0a){_0x45e59f(_0x5e6e0a);}});}['deploy'](_0x2c8ec6,_0x540044,_0x312c36=0x0){return new Promise((_0x57ae1f,_0x4fd734)=>{const _0x51f335=a34_0x503d;try{const _0x45fba9=this['nameSpacePrefix']===''?_0x51f335(0x1d8):_0x51f335(0x1f3),_0x15a08f={'items':_0x540044[_0x51f335(0x1a3)]};this[_0x51f335(0x221)][_0x51f335(0x1de)][_0x51f335(0x1e9)](_0x45fba9,_0x15a08f)[_0x51f335(0x1be)](()=>{const _0xe31105=_0x51f335;return _0x312c36+=_0x540044[_0xe31105(0x1a3)][_0xe31105(0x1fc)],this[_0xe31105(0x1cc)][_0xe31105(0x1b3)](_0xe31105(0x183)+_0x312c36+'\x20from\x20'+_0x2c8ec6[_0xe31105(0x1ae)]),Promise[_0xe31105(0x1ad)]();})['catch'](_0x317d9d=>{const _0xd26b15=_0x51f335;return this['logger'][_0xd26b15(0x1b3)]('Error\x20deploy\x20chunk\x20'+_0x317d9d),Promise['resolve']();})[_0x51f335(0x1be)](()=>this['nextChunk'](_0x2c8ec6,_0x312c36))[_0x51f335(0x1be)](_0x57ae1f)['catch'](_0x4fd734);}catch(_0x2d2579){_0x4fd734(_0x2d2579);}});}[a34_0x2cb4d0(0x1a5)](){return new Promise((_0x1918e2,_0x4ef172)=>{const _0x2724e4=a34_0x503d;try{this['logger']['log'](_0x2724e4(0x190));const _0x1f9730=this[_0x2724e4(0x18c)]+'/'+constants[_0x2724e4(0x19e)];if(fs[_0x2724e4(0x17c)](_0x1f9730)){const _0x4b5128=_0x1f9730+_0x2724e4(0x19c);if(this[_0x2724e4(0x1cc)][_0x2724e4(0x1ef)][_0x2724e4(0x1fc)]&&fs['existsSync'](_0x4b5128)){const _0x44d8f9=fs[_0x2724e4(0x1af)](_0x4b5128);if(_0x44d8f9&&_0x44d8f9[_0x2724e4(0x1fc)]){const _0x18998f=_0x44d8f9[0x0];if(_0x18998f[_0x2724e4(0x1b6)](_0x2724e4(0x215))&&_0x18998f[_0x2724e4(0x1b6)](_0x2724e4(0x187))){const _0x1318c1=_0x2724e4(0x1b1)+JSON[_0x2724e4(0x1a4)](this[_0x2724e4(0x1cc)][_0x2724e4(0x1ef)]);fs['appendFileSync']('./'+_0x4b5128+'/'+_0x18998f,_0x1318c1);}}}const _0x230df5=new AdmZip();_0x230df5[_0x2724e4(0x21b)](_0x1f9730,constants[_0x2724e4(0x19e)]),_0x1918e2(_0x230df5[_0x2724e4(0x1d6)]()[_0x2724e4(0x1d2)]('base64')),this[_0x2724e4(0x1cc)][_0x2724e4(0x1b3)]('End\x20Create\x20Vlocity\x20Temp\x20Zip');}else this[_0x2724e4(0x1cc)]['log'](_0x2724e4(0x1c9)),_0x1918e2();}catch(_0x2f062d){this[_0x2724e4(0x1cc)][_0x2724e4(0x1b3)](_0x2724e4(0x1eb)+_0x2f062d),_0x1918e2();}});}[a34_0x2cb4d0(0x1ff)](_0x54551c){return new Promise((_0x469bbb,_0x3e445a)=>{const _0x3442c3=a34_0x503d;try{this['logger'][_0x3442c3(0x1b3)](_0x3442c3(0x1bb));const _0x4a6f4a={'Name':'Vlocity\x20Temp','ContentType':_0x3442c3(0x193),'Description':_0x3442c3(0x17a),'ParentId':this['snapshotId'],'Body':_0x54551c};this['jsForceConnection'][_0x3442c3(0x20f)](_0x3442c3(0x19f))[_0x3442c3(0x1c3)](_0x4a6f4a)[_0x3442c3(0x1be)](()=>{const _0x439d16=_0x3442c3;this['logger'][_0x439d16(0x1b3)]('End\x20Send\x20Vlocity\x20Temp'),_0x469bbb();})[_0x3442c3(0x1e1)](_0x40f527=>{const _0x4a247b=_0x3442c3;this['logger'][_0x4a247b(0x1b3)]('Error\x20Send\x20Vlocity\x20Temp\x20Zip\x20'+_0x40f527),_0x3e445a(_0x40f527);});}catch(_0x2a47db){this[_0x3442c3(0x1cc)]['log'](_0x3442c3(0x1cb)+_0x2a47db),_0x3e445a(_0x2a47db);}});}[a34_0x2cb4d0(0x1bd)](){return new Promise(_0x398062=>{const _0x2ce04d=a34_0x503d;try{if(fs[_0x2ce04d(0x17c)](this[_0x2ce04d(0x18c)]+'/'+constants[_0x2ce04d(0x21f)])){const _0x1899b1=yaml[_0x2ce04d(0x1c0)](fs[_0x2ce04d(0x205)](this[_0x2ce04d(0x18c)]+'/'+constants[_0x2ce04d(0x21f)],_0x2ce04d(0x18a)));_0x1899b1[_0x2ce04d(0x1a9)]&&_0x1899b1[_0x2ce04d(0x1a9)][_0x2ce04d(0x1fc)]?(this['logger'][_0x2ce04d(0x1b3)](_0x2ce04d(0x1d5)+_0x1899b1['Errors'][_0x2ce04d(0x1ba)]('\x0a')),_0x398062(!![])):_0x398062(![]);}else _0x398062(![]);}catch(_0x1ac6a2){_0x398062(![]);}});}[a34_0x2cb4d0(0x1f4)](_0x34e287,_0x397610=![]){return new Promise((_0x421aeb,_0x1a29fd)=>{const _0x1394e9=a34_0x503d;try{Promise[_0x1394e9(0x1ad)]()[_0x1394e9(0x1be)](()=>this[_0x1394e9(0x1a5)]())[_0x1394e9(0x1be)](_0x311505=>{const _0x499611=_0x1394e9;if(_0x311505)return this[_0x499611(0x1ff)](_0x311505);return Promise[_0x499611(0x1ad)]();})['then'](()=>http[_0x1394e9(0x191)](this[_0x1394e9(0x18c)],this['jsForceConnection'],this[_0x1394e9(0x1f0)],this['logger'],_0x397610,!![]))[_0x1394e9(0x1be)](_0x273472=>{const _0x2cc6bf=_0x1394e9;return _0x397610=_0x273472,http[_0x2cc6bf(0x1d0)](this[_0x2cc6bf(0x221)],this[_0x2cc6bf(0x20a)],this[_0x2cc6bf(0x1a7)],_0x34e287,this[_0x2cc6bf(0x1cc)],_0x273472);})[_0x1394e9(0x1be)](()=>this[_0x1394e9(0x1ce)](_0x397610));}catch(_0x15cda7){_0x1a29fd(_0x15cda7);}});}['callUpdateSnapshot'](_0x5042eb){return new Promise((_0x3f38ec,_0x141714)=>{const _0x2c8d43=a34_0x503d;try{this[_0x2c8d43(0x1cc)]['log'](_0x2c8d43(0x223));const _0x1c34b6={'Id':this[_0x2c8d43(0x20b)],[this[_0x2c8d43(0x1a7)]+_0x2c8d43(0x1fb)]:!![],[this[_0x2c8d43(0x1a7)]+_0x2c8d43(0x20c)]:_0x5042eb};this['jsForceConnection'][_0x2c8d43(0x20f)](this[_0x2c8d43(0x1a7)]+_0x2c8d43(0x204))['update'](_0x1c34b6)[_0x2c8d43(0x1be)](()=>{const _0x58e5f0=_0x2c8d43;this['logger'][_0x58e5f0(0x1b3)](_0x58e5f0(0x201)),_0x3f38ec(_0x1c34b6[this[_0x58e5f0(0x1a7)]+_0x58e5f0(0x20c)]);})[_0x2c8d43(0x1e1)](_0x38e56e=>{const _0x377a74=_0x2c8d43;this[_0x377a74(0x1cc)][_0x377a74(0x1b3)](_0x377a74(0x192)),_0x141714(_0x38e56e);});}catch(_0x411df7){this[_0x2c8d43(0x1cc)][_0x2c8d43(0x1b3)](_0x2c8d43(0x192)),_0x141714(_0x411df7);}});}}function getAllAvailableExportsKeys(_0x6026b7,_0x5bda14,_0x2e87be,_0x12fb2c){return new Promise((_0x57194a,_0x5231b5)=>{const _0x5e6c89=a34_0x503d;try{this[_0x5e6c89(0x1cc)][_0x5e6c89(0x1b3)](_0x5e6c89(0x219));const _0x4917e4=_0x5e6c89(0x200),_0x5d617b=['-sf.accessToken',''+_0x2e87be,_0x5e6c89(0x181),''+_0x5bda14,'-nojob',_0x5e6c89(0x180)];this[_0x5e6c89(0x1cc)]['log'](_0x5d617b[_0x5e6c89(0x203)](0x2)[_0x5e6c89(0x1ba)]('\x20'));const _0x3cafb9={'cwd':''+_0x6026b7,'maxBuffer':0x400*0x1f4};childProcess[_0x5e6c89(0x1c6)](_0x4917e4,_0x5d617b,null,_0x3cafb9)['then'](_0x3c3736=>{const _0x5c20d4=_0x5e6c89;this['logger'][_0x5c20d4(0x1b3)](_0x5c20d4(0x1c1)),_0x57194a(_0x3c3736);})[_0x5e6c89(0x1e1)](_0x71e552=>{const _0xfe7eb6=_0x5e6c89;this['logger'][_0xfe7eb6(0x1b3)](_0xfe7eb6(0x189)+_0x71e552),_0x5231b5(_0x71e552);});}catch(_0x4a10ce){this['logger']['log']('Error\x20Get\x20All\x20Available\x20Exports\x20Keys\x20'+_0x4a10ce),_0x5231b5(_0x4a10ce);}});}function a34_0x5eaa(){const _0x4de3f1=['/SnapshotVlocity/','-maxDepth','Start\x20Retrieve\x20Data','9090250ngIHyK','6085BInJEG','../../../services/child-process','apex','Start\x20Prepare\x20Data\x20For\x20Deploy','selectedDataPackTypes','catch','buf','nextChunk','vlocityUrl','VLOCITY_NAMESPACE_PREFIX_CODE','push','Error,\x20Components\x20not\x20found','Error\x20Create\x20Job\x20File','post','AND','Error\x20Create\x20Vlocity\x20Temp\x20Zip\x20','adm-zip','isLikeSearch','done','errors','attachLogId','js-yaml','%\x27\x20OR\x20Name\x20LIKE\x20\x27%','/Flosum/SnapshotVlocity/','completeDeployment','isRunPackRetryAutomatically','Name','\x20\x20query:\x20SELECT\x20','map','replace','1564056ShnbKg','Is_Completed__c','length','manifest:\x0a\x20-\x20','-job','sendVlocityTemp','vlocity','End\x20Update\x20Snapshot','endsWith','slice','Snapshot_Vlocity__c','readFileSync','filter','lstatSync','jsforce','UNZIP_CATALOG_NAME','logId','snapshotId','Is_Error__c','vlocityNameSpacePrefix','\x27,\x27','sobject','flosumUrl','__c','searchBy','packExport','startsWith','job-yaml-','146nihJWW','-separateCalculationProcedureVersions','dump','Start\x20Get\x20All\x20Available\x20Exports\x20Keys','fields','addLocalFolder','570208YKCrHo','-\x20VlocityDataPackType:\x20','vlocityToken','NAME_LOGS_FILE','query','jsForceConnection','Start\x20Deploy\x20Components','Start\x20Update\x20Snapshot','isSeparateMatrixVersions','../../../constants','Vlocity\x20Temp','isNotIncludeDependencies','existsSync','JOB_FILE_NAME','End\x20Retrieve\x20Data','21771QRgrcZ','packGetAllAvailableExports','-sf.instanceUrl','readFiles','Deployed\x20','Error\x20Deploy\x20Components\x20','\x20WHERE\x20Name\x20IN\x20(\x27','%\x27)','-Export.yaml','path','Error\x20Get\x20All\x20Available\x20Exports\x20Keys\x20','utf8','queries:\x0a','projectPath','DATA_PACK_TYPES_QUERIES_MAP','objectName','-separateMatrixVersions','Start\x20Create\x20Vlocity\x20Temp\x20Zip','updateAttachmentLog','Error\x20Update\x20Snapshot','application/zip','from','21dLcPVz','isArray','yaml','keys','4349226muGGTI','createQuery','instanceUrl','/logs','accessToken','VLOCITY_TEMP_CATALOG','Attachment','findSubItems','-sf.accessToken','retrieveData','value','stringify','createVlocityTempZip','iterator','nameSpacePrefix','Title','Errors','569992dzmpmQ','parse','Error\x20Create\x20Job\x20File,\x20Not\x20Valid\x20Provided\x20Yaml\x20File:\x20','resolve','count','readdirSync','./source_data','FlosumErrors:\x20','name','log','authFlosum','nameOfComponents','includes','Error\x20parse\x20component\x20','isSeparateCalculationProcedureVersions','1664gmqhMI','join','Start\x20Send\x20Vlocity\x20Temp','isAfterUpdateSearchByKey','checkErrors','then','End\x20Create\x20Job\x20File','load','End\x20Get\x20All\x20Available\x20Exports\x20Keys','deployComponents','create','split','projectPath:\x20./','callChildProcess','appendFileSync','-autoRetryErrors','Error\x20Create\x20Vlocity\x20Temp\x20Zip,\x20Vlocity\x20Temp\x20not\x20found','Error\x20Prepare\x20Data\x20For\x20Deploy','Error\x20Send\x20Vlocity\x20Temp\x20Zip\x20','logger',',\x20size\x20more\x20then\x203mb.','callUpdateSnapshot','\x20FROM\x20','callUpdateLog','End\x20Prepare\x20Data\x20For\x20Deploy','toString','key','forEach','Errors\x20found,\x20start\x20pack\x20retry\x20command\x20\x0a','toBuffer','getVlocityQueries'];a34_0x5eaa=function(){return _0x4de3f1;};return a34_0x5eaa();}function createZip(_0x340dad,_0x34e15a){const _0xccd5a4=a34_0x2cb4d0,_0x227e0f=new AdmZip(),_0xcc6dd9=this[_0xccd5a4(0x182)](_0x340dad);return _0xcc6dd9[_0xccd5a4(0x1d4)](_0x5a6005=>{const _0x2c6b2c=_0xccd5a4;if(Array[_0x2c6b2c(0x196)](_0x5a6005))_0x5a6005[_0x2c6b2c(0x1d4)](_0x6f37d9=>{const _0xd11109=_0x2c6b2c,_0x563880=fs[_0xd11109(0x205)](_0x340dad+'/'+_0x6f37d9,'utf8');_0x227e0f['addFile'](_0x34e15a+'/'+_0x6f37d9,Buffer[_0xd11109(0x194)](_0x563880));});else{const _0xd49b0b=fs[_0x2c6b2c(0x205)](_0x340dad+'/'+_0x5a6005,_0x2c6b2c(0x18a));_0x227e0f['addFile'](_0x34e15a+'/'+_0x5a6005,Buffer[_0x2c6b2c(0x194)](_0xd49b0b));}}),_0x227e0f[_0xccd5a4(0x1d6)]();}module['exports']={'RetrieveHelper':RetrieveHelper};