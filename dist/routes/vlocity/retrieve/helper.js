const a38_0x544404=a38_0x3900;(function(_0x575844,_0x5b4568){const _0x13bfbb=a38_0x3900,_0x4e3c0a=_0x575844();while(!![]){try{const _0x35175b=parseInt(_0x13bfbb(0x1dc))/0x1*(-parseInt(_0x13bfbb(0x250))/0x2)+-parseInt(_0x13bfbb(0x209))/0x3*(-parseInt(_0x13bfbb(0x1fa))/0x4)+parseInt(_0x13bfbb(0x1f7))/0x5*(parseInt(_0x13bfbb(0x20a))/0x6)+parseInt(_0x13bfbb(0x211))/0x7+parseInt(_0x13bfbb(0x1de))/0x8+-parseInt(_0x13bfbb(0x1e9))/0x9+parseInt(_0x13bfbb(0x1dd))/0xa;if(_0x35175b===_0x5b4568)break;else _0x4e3c0a['push'](_0x4e3c0a['shift']());}catch(_0x3edf40){_0x4e3c0a['push'](_0x4e3c0a['shift']());}}}(a38_0xe1b1,0x57f05));const fs=require('fs'),crc32=require('crc-32'),AdmZip=require('adm-zip'),yaml=require(a38_0x544404(0x1fd)),{resolve}=require(a38_0x544404(0x23d)),jsForce=require(a38_0x544404(0x1cf)),constants=require('../../../constants'),childProcess=require(a38_0x544404(0x237)),http=require('../../../services/http'),{VlocityHelper}=require('../../../services/vlocity');class RetrieveHelper{constructor(_0x2b1a86,_0x1dc2cd,_0x33c3cc){const _0x23a4e6=a38_0x544404;this[_0x23a4e6(0x245)]=_0x1dc2cd[_0x23a4e6(0x24a)][_0x23a4e6(0x1ed)],this[_0x23a4e6(0x274)]=_0x1dc2cd[_0x23a4e6(0x24a)][_0x23a4e6(0x251)],this[_0x23a4e6(0x1d0)]=_0x1dc2cd[_0x23a4e6(0x1d1)][_0x23a4e6(0x1ed)],this[_0x23a4e6(0x23b)]=_0x1dc2cd[_0x23a4e6(0x1d1)][_0x23a4e6(0x251)],this[_0x23a4e6(0x214)]=_0x1dc2cd[_0x23a4e6(0x214)],this['attachLogId']=_0x1dc2cd[_0x23a4e6(0x252)],this[_0x23a4e6(0x210)]=_0x2b1a86,this[_0x23a4e6(0x24a)]=_0x1dc2cd[_0x23a4e6(0x24a)],this[_0x23a4e6(0x24f)]=_0x1dc2cd[_0x23a4e6(0x24f)],this[_0x23a4e6(0x265)]=_0x1dc2cd['vlocityNameSpacePrefix'],this[_0x23a4e6(0x206)]=_0x1dc2cd[_0x23a4e6(0x206)],this[_0x23a4e6(0x21b)]=_0x1dc2cd[_0x23a4e6(0x21b)],this['isLikeSearch']=_0x1dc2cd['isLikeSearch'],this['snapshotId']=_0x1dc2cd[_0x23a4e6(0x1c3)],this[_0x23a4e6(0x271)]=JSON[_0x23a4e6(0x24d)](_0x1dc2cd[_0x23a4e6(0x271)]),this[_0x23a4e6(0x21f)]=_0x1dc2cd[_0x23a4e6(0x21f)],this[_0x23a4e6(0x24e)]=_0x1dc2cd['isSeparateMatrixVersions'],this[_0x23a4e6(0x1e6)]=_0x1dc2cd['isSeparateCalculationProcedureVersions'],this[_0x23a4e6(0x1f2)]=_0x1dc2cd[_0x23a4e6(0x1f2)],this[_0x23a4e6(0x213)]=!!_0x1dc2cd['isRunPackRetryAutomatically'],this[_0x23a4e6(0x225)]=_0x1dc2cd[_0x23a4e6(0x225)],this[_0x23a4e6(0x229)]=_0x1dc2cd['keys'],this['logger']=_0x33c3cc,this[_0x23a4e6(0x22a)]=new jsForce[(_0x23a4e6(0x207))](_0x1dc2cd[_0x23a4e6(0x24a)]);}async[a38_0x544404(0x233)](){const _0x463da7=a38_0x544404,_0x510a96=await new VlocityHelper(this[_0x463da7(0x23b)],this[_0x463da7(0x1d0)],this[_0x463da7(0x231)])[_0x463da7(0x1f1)]();if(!_0x510a96?.[_0x463da7(0x230)]?.[_0x463da7(0x226)])throw new Error(_0x463da7(0x248));const _0x127bb4=this[_0x463da7(0x206)][_0x463da7(0x1e8)](';')[_0x463da7(0x1e4)](_0x4c3d42=>_0x4c3d42[_0x463da7(0x22b)]()),_0x30a12f=new Set(this[_0x463da7(0x271)]),_0x2ffc88=[];for(const {VlocityDataPackType:_0x584108,Name:_0xb1393c,VlocityDataPackDisplayLabel:_0x429d2a,VlocityDataPackKey:_0x44a407}of _0x510a96[_0x463da7(0x230)]){if(!_0x30a12f['has'](_0x584108))continue;const _0x1be3cf=_0xb1393c?.[_0x463da7(0x22b)]()||'',_0x1e1530=_0x429d2a?.[_0x463da7(0x22b)]()||'',_0x2eb482=_0x44a407?.[_0x463da7(0x22b)]()||'';(_0x127bb4['some'](_0x34ce0f=>_0x1be3cf[_0x463da7(0x20f)](_0x34ce0f))||_0x127bb4[_0x463da7(0x22e)](_0x1c2f19=>_0x1e1530['includes'](_0x1c2f19))||_0x127bb4[_0x463da7(0x22e)](_0x1fe919=>_0x2eb482[_0x463da7(0x20f)](_0x1fe919)))&&_0x2ffc88[_0x463da7(0x1c4)](_0x44a407);}const _0x4b6251=_0x463da7(0x1ca)+constants[_0x463da7(0x246)]+'\x0amanifest:\x0a\x20-\x20'+_0x2ffc88[_0x463da7(0x25b)]('\x0a\x20-\x20');fs[_0x463da7(0x1d4)](this[_0x463da7(0x210)]+'/'+constants[_0x463da7(0x200)],_0x4b6251),this[_0x463da7(0x231)]['log'](_0x463da7(0x255));}[a38_0x544404(0x23e)](){return new Promise((_0x235093,_0x4e39a2)=>{const _0x3103c0=a38_0x3900;try{this['logger'][_0x3103c0(0x1fe)]('Start\x20Create\x20Job\x20File');let _0x167672;if(this[_0x3103c0(0x225)]===_0x3103c0(0x242)&&this[_0x3103c0(0x229)]?.['length']){_0x167672=_0x3103c0(0x1ca)+constants[_0x3103c0(0x246)]+'\x0amanifest:\x0a\x20-\x20'+this[_0x3103c0(0x229)]['join'](_0x3103c0(0x25f)),fs['appendFileSync'](this[_0x3103c0(0x210)]+'/'+constants[_0x3103c0(0x200)],_0x167672),this[_0x3103c0(0x231)][_0x3103c0(0x1fe)]('End\x20Create\x20Job\x20File'),_0x235093();return;}if(this[_0x3103c0(0x225)]===_0x3103c0(0x1f4)){this[_0x3103c0(0x233)]()['then'](()=>_0x235093())[_0x3103c0(0x205)](_0x45d1c0=>{const _0x24c601=_0x3103c0;this[_0x24c601(0x231)][_0x24c601(0x1fe)](_0x24c601(0x266)),_0x4e39a2(_0x45d1c0);});return;}_0x167672=_0x3103c0(0x1ca)+constants[_0x3103c0(0x246)]+'\x0a';if(this[_0x3103c0(0x1f2)]){if(this[_0x3103c0(0x206)]){if(this[_0x3103c0(0x21b)]===_0x3103c0(0x1db)){const _0x4bc397=this['nameOfComponents'][_0x3103c0(0x1e8)]('\x0a')[_0x3103c0(0x23f)](_0x248161=>_0x248161[_0x3103c0(0x20d)]()[_0x3103c0(0x1fb)]('-'))[_0x3103c0(0x1e4)](_0x146869=>_0x146869[_0x3103c0(0x240)]('-','')['trim']());_0x4bc397['length']?(_0x167672+=_0x3103c0(0x243),_0x167672+=_0x4bc397['join'](_0x3103c0(0x25f)),fs['appendFileSync'](this[_0x3103c0(0x210)]+'/'+constants['JOB_FILE_NAME'],_0x167672),this['logger'][_0x3103c0(0x1fe)](_0x3103c0(0x255)),_0x235093()):_0x4e39a2('Error,\x20Components\x20not\x20found');}if(this[_0x3103c0(0x21b)]===_0x3103c0(0x276))try{const _0xd1ebfd=yaml[_0x3103c0(0x22f)](this[_0x3103c0(0x206)]);_0xd1ebfd[_0x3103c0(0x210)]=_0x3103c0(0x25e),fs[_0x3103c0(0x1d4)](this[_0x3103c0(0x210)]+'/'+constants[_0x3103c0(0x200)],yaml[_0x3103c0(0x222)](_0xd1ebfd)),_0x235093(),this[_0x3103c0(0x231)]['log'](_0x3103c0(0x255));}catch(_0x378a9a){this[_0x3103c0(0x231)][_0x3103c0(0x1fe)](_0x3103c0(0x21a)+_0x378a9a),_0x4e39a2(_0x378a9a);}else _0x167672+=_0x3103c0(0x208)+this['getVlocityQueries'](),fs[_0x3103c0(0x1d4)](this[_0x3103c0(0x210)]+'/'+constants['JOB_FILE_NAME'],_0x167672),_0x235093(),this[_0x3103c0(0x231)][_0x3103c0(0x1fe)](_0x3103c0(0x255));}else _0x167672+=_0x3103c0(0x208)+this[_0x3103c0(0x1f6)](),fs[_0x3103c0(0x1d4)](this[_0x3103c0(0x210)]+'/'+constants['JOB_FILE_NAME'],_0x167672),_0x235093(),this[_0x3103c0(0x231)][_0x3103c0(0x1fe)]('End\x20Create\x20Job\x20File');}else _0x167672+=_0x3103c0(0x208)+this[_0x3103c0(0x1f6)](),fs[_0x3103c0(0x1d4)](this[_0x3103c0(0x210)]+'/'+constants['JOB_FILE_NAME'],_0x167672),_0x235093(),this['logger']['log'](_0x3103c0(0x255));}catch(_0x37d654){this['logger'][_0x3103c0(0x1fe)](_0x3103c0(0x266)),_0x4e39a2(_0x37d654);}});}[a38_0x544404(0x1f6)](){const _0x405d32=a38_0x544404,_0x23a4c8=Array[_0x405d32(0x24b)](this['selectedDataPackTypes'])?this[_0x405d32(0x271)]:Object['keys'](this[_0x405d32(0x271)]),_0xb14daa=[];/^ *$/[_0x405d32(0x1d6)](this[_0x405d32(0x206)])?this[_0x405d32(0x206)]=[]:this[_0x405d32(0x206)]=this[_0x405d32(0x206)][_0x405d32(0x1e8)](';');if(this[_0x405d32(0x206)][_0x405d32(0x226)]){const _0x156ef0=this[_0x405d32(0x275)]?this[_0x405d32(0x206)][_0x405d32(0x25b)]('%\x27\x20OR\x20Name\x20LIKE\x20\x27%'):this['nameOfComponents'][_0x405d32(0x25b)](_0x405d32(0x26d));for(const _0x3561dd of _0x23a4c8){_0xb14daa[_0x405d32(0x1c4)](this['createQuery'](_0x3561dd,_0x156ef0));}}else for(const _0x1794e0 of _0x23a4c8){const _0x4c8160=constants[_0x405d32(0x262)]['includes'](_0x1794e0)?this[_0x405d32(0x216)](_0x1794e0):'-\x20'+_0x1794e0;_0xb14daa[_0x405d32(0x1c4)](_0x4c8160);}return _0xb14daa[_0x405d32(0x25b)]('\x0a');}['createQuery'](_0xc367b2,_0x146298=null){const _0x283e95=a38_0x544404,_0x243330=constants[_0x283e95(0x256)][_0xc367b2];let _0x1f40d2='';if(_0x243330){const _0x5b4676=_0x243330['objectName'][_0x283e95(0x1ec)](_0x283e95(0x215))&&!!this[_0x283e95(0x265)]?''+this[_0x283e95(0x265)]+_0x243330[_0x283e95(0x1e5)]:''+_0x243330[_0x283e95(0x1e5)];_0x1f40d2=_0x283e95(0x1f0)+_0xc367b2+'\x0a';const _0x4ea49a=_0x243330[_0x283e95(0x1ef)][_0x283e95(0x240)](new RegExp(constants[_0x283e95(0x1cc)],'g'),this[_0x283e95(0x265)]);this[_0x283e95(0x275)]?(_0x1f40d2+='\x20\x20query:\x20SELECT\x20'+_0x4ea49a+_0x283e95(0x1ce)+_0x5b4676,_0x146298&&(_0x1f40d2+=_0x283e95(0x27a)+_0x146298+_0x283e95(0x25d))):(_0x1f40d2+=_0x283e95(0x224)+_0x4ea49a+_0x283e95(0x1ce)+_0x5b4676,_0x146298&&(_0x1f40d2+='\x20WHERE\x20Name\x20IN\x20(\x27'+_0x146298+'\x27)'));if(_0x243330[_0x283e95(0x1d9)]){const _0x2871b9=_0x146298?_0x283e95(0x25a):_0x283e95(0x26c),_0x4f975b=_0x243330[_0x283e95(0x1d9)][_0x283e95(0x240)](new RegExp(constants[_0x283e95(0x1cc)],'g'),this['vlocityNameSpacePrefix']);_0x1f40d2+='\x20'+_0x2871b9+'\x20'+_0x4f975b+'\x0a';}else _0x1f40d2+='\x0a';}return _0x1f40d2;}[a38_0x544404(0x1e3)](){return new Promise((_0x206544,_0x2ff4f3)=>{const _0x2d6f94=a38_0x3900;try{this['logger'][_0x2d6f94(0x1fe)](_0x2d6f94(0x270));const _0x4d6f8f=_0x2d6f94(0x267),_0x14a1a2=this[_0x2d6f94(0x21f)]?'0':'-1',_0x1d2272=['-sf.accessToken',''+this[_0x2d6f94(0x23b)],_0x2d6f94(0x1d5),''+this[_0x2d6f94(0x1d0)],_0x2d6f94(0x1e0),''+constants[_0x2d6f94(0x200)],_0x2d6f94(0x1df),_0x2d6f94(0x263),_0x14a1a2];this[_0x2d6f94(0x24e)]&&_0x1d2272['push'](_0x2d6f94(0x264));this[_0x2d6f94(0x1e6)]&&_0x1d2272[_0x2d6f94(0x1c4)](_0x2d6f94(0x218));_0x1d2272[_0x2d6f94(0x1c4)](_0x2d6f94(0x21e));const _0x1e0013=()=>{const _0x1dea85=_0x2d6f94;http[_0x1dea85(0x1ff)](this[_0x1dea85(0x210)],this['jsForceConnection'],this['attachLogId'],this['logger'],![]);};this[_0x2d6f94(0x231)][_0x2d6f94(0x1fe)](_0x1d2272[_0x2d6f94(0x25b)]('\x20'));const _0x34e3b6={'cwd':''+this[_0x2d6f94(0x210)],'maxBuffer':0x400*0x1f4};childProcess[_0x2d6f94(0x23a)](_0x4d6f8f,_0x1d2272,this[_0x2d6f94(0x231)],_0x34e3b6,!![],_0x1e0013)[_0x2d6f94(0x23c)](_0x4ceb56=>{const _0xf083b7=_0x2d6f94;this['logger'][_0xf083b7(0x1fe)]('End\x20Retrieve\x20Data'),_0x206544(_0x4ceb56);})['catch'](_0x1a5f9a=>{const _0x2432cb=_0x2d6f94;this[_0x2432cb(0x231)][_0x2432cb(0x1fe)](_0x2432cb(0x22d)+_0x1a5f9a),_0x2ff4f3(_0x1a5f9a);});}catch(_0x30a83c){_0x2ff4f3(_0x30a83c);}});}[a38_0x544404(0x1d8)](){return new Promise((_0x4a3fa4,_0x404914)=>{const _0x39d440=a38_0x3900;try{this[_0x39d440(0x231)][_0x39d440(0x1fe)](_0x39d440(0x277));let _0x1ff2ee=0x0,_0x4221d=[],_0x42884d=0x0;const _0x402527=[],_0x2a9964=this[_0x39d440(0x210)]+'/'+constants[_0x39d440(0x246)],_0x43843c=fs[_0x39d440(0x278)](_0x2a9964);for(let _0x307bd1=0x0;_0x307bd1<_0x43843c['length'];_0x307bd1++){const _0x5156b8=_0x43843c[_0x307bd1]==='ContentVersion'?_0x39d440(0x1c8):_0x39d440(0x272),_0x4d3655=_0x2a9964+'/'+_0x43843c[_0x307bd1],_0x1f09d2=fs[_0x39d440(0x278)](_0x4d3655);for(let _0x217f64=0x0;_0x217f64<_0x1f09d2['length'];_0x217f64++){const _0x5608ca=_0x43843c[_0x307bd1]+'/'+_0x1f09d2[_0x217f64];let _0x49ee63=_0x1f09d2[_0x217f64];const _0x5b2a07=[],_0x1b812c=_0x2a9964+'/'+_0x43843c[_0x307bd1]+'/'+_0x1f09d2[_0x217f64],_0x193759=fs[_0x39d440(0x278)](_0x1b812c);_0x193759['forEach'](_0x8c00ea=>{const _0x55a107=_0x39d440;try{_0x8c00ea[_0x55a107(0x1e2)]()[_0x55a107(0x1ec)]('_DataPack.json')&&(_0x49ee63=JSON[_0x55a107(0x24d)](fs[_0x55a107(0x1c7)](_0x1b812c+'/'+_0x8c00ea)['toString']())[_0x5156b8]);}catch(_0x1b2e44){this[_0x55a107(0x231)][_0x55a107(0x1fe)]('Error\x20parse\x20component\x20'+_0x8c00ea);}!_0x49ee63&&(_0x49ee63=undefined),fs[_0x55a107(0x261)](_0x1b812c+'/'+_0x8c00ea[_0x55a107(0x1e2)]())[_0x55a107(0x227)]()&&_0x5b2a07[_0x55a107(0x1c4)](...this[_0x55a107(0x20e)](_0x1b812c,_0x8c00ea));});const _0x5e33c0=new AdmZip();_0x5e33c0[_0x39d440(0x24c)](_0x1b812c,_0x43843c[_0x307bd1]+'/'+_0x1f09d2[_0x217f64]);const _0x5d1339=_0x5e33c0[_0x39d440(0x234)](),_0x252df0=crc32[_0x39d440(0x1f3)](_0x5d1339),_0x2cd944=_0x5d1339[_0x39d440(0x1e2)](_0x39d440(0x269)),_0x23b77e={'fileName':_0x49ee63,'name':_0x1f09d2[_0x217f64],'type':_0x43843c[_0x307bd1],'label':_0x5608ca,'crc':_0x252df0,'base64':_0x2cd944,'snapshotId':this[_0x39d440(0x1c3)],'subItemList':JSON[_0x39d440(0x268)](_0x5b2a07)},_0x9dcf7=_0x5d1339['length']/0xf4240,_0x3f79ad=!!(_0x1f09d2[_0x39d440(0x226)]-0x1===_0x217f64&&_0x43843c[_0x39d440(0x226)]-0x1===_0x307bd1);_0x1ff2ee+=_0x9dcf7,_0x1ff2ee>0x2||_0x4221d>0xfa0?(_0x402527[_0x39d440(0x1c4)](_0x4221d),_0x9dcf7<0x3?(_0x4221d=[_0x23b77e],_0x42884d++,_0x1ff2ee=_0x9dcf7):(this[_0x39d440(0x231)]['log'](_0x39d440(0x1eb)+_0x5608ca+_0x39d440(0x232),!![]),_0x1ff2ee=0x0)):(_0x4221d[_0x39d440(0x1c4)](_0x23b77e),_0x42884d++),_0x3f79ad&&_0x402527[_0x39d440(0x1c4)](_0x4221d);}}this[_0x39d440(0x231)][_0x39d440(0x1fe)]('End\x20Prepare\x20Data\x20For\x20Deploy'),_0x4a3fa4({'iteratorDeploy':_0x402527[Symbol['iterator']](),'count':_0x42884d});}catch(_0x15e276){this[_0x39d440(0x231)][_0x39d440(0x1fe)](_0x39d440(0x236)),_0x404914(_0x15e276);}});}[a38_0x544404(0x20e)](_0x150af3,_0x2706e4,_0x4488a5='',_0x3a0ce6=[]){const _0x5da0f4=a38_0x544404;_0x4488a5[_0x5da0f4(0x226)]&&(_0x4488a5='/'+_0x4488a5);const _0x3050b8=fs[_0x5da0f4(0x278)](_0x150af3+'/'+_0x2706e4+_0x4488a5);return _0x3050b8[_0x5da0f4(0x1c9)](_0x2f2b55=>{const _0x41b478=_0x5da0f4;!fs['lstatSync'](_0x150af3+'/'+_0x2706e4+_0x4488a5+'/'+_0x2f2b55[_0x41b478(0x1e2)]())['isDirectory']()?_0x3a0ce6[_0x41b478(0x1c4)](''+_0x2706e4+_0x4488a5+'/'+_0x2f2b55[_0x41b478(0x1e2)]()):this['findSubItems'](_0x150af3,_0x2706e4,_0x2f2b55,_0x3a0ce6);}),_0x3a0ce6;}['readFiles'](_0x14ffdd,_0x4a59ca='',_0x4ee937=[]){const _0xcff0e=a38_0x544404,_0x18a054=fs[_0xcff0e(0x278)](_0x14ffdd,{'withFileTypes':!![]});return _0x18a054[_0xcff0e(0x1c9)](_0xae787e=>{const _0x5086d1=_0xcff0e,_0x55bdff=resolve(_0x14ffdd,_0xae787e[_0x5086d1(0x1ee)]);if(_0xae787e[_0x5086d1(0x227)]()){const _0x43ef34=_0x4a59ca['length']?_0x4a59ca+'/'+_0xae787e['name']:_0xae787e[_0x5086d1(0x1ee)];this['readFiles'](_0x55bdff,_0x43ef34,_0x4ee937);}else{let _0x2fd78a;_0x4a59ca[_0x5086d1(0x226)]?_0x2fd78a=_0x4a59ca+'/'+_0xae787e[_0x5086d1(0x1ee)]:_0x2fd78a=_0xae787e['name'],_0x4ee937['push'](_0x2fd78a);}}),_0x4ee937;}[a38_0x544404(0x202)](_0x315067){return new Promise((_0x4b2ee0,_0x5c75f4)=>{const _0x818f42=a38_0x3900;try{this[_0x818f42(0x231)][_0x818f42(0x1fe)](_0x818f42(0x20b)),this[_0x818f42(0x26b)](_0x315067)[_0x818f42(0x23c)](()=>{const _0x273d53=_0x818f42;this[_0x273d53(0x231)][_0x273d53(0x1fe)](_0x273d53(0x1c6)),_0x4b2ee0();})[_0x818f42(0x205)](_0x1d9f01=>{const _0x2b9a40=_0x818f42;this['logger']['log'](_0x2b9a40(0x26a)+_0x1d9f01),_0x5c75f4(_0x1d9f01);});}catch(_0x56d85c){_0x5c75f4(_0x56d85c);}});}[a38_0x544404(0x26b)](_0x5d33eb,_0x171bb9=0x0){return new Promise((_0x540d4f,_0x2d7948)=>{const _0x5e56e2=a38_0x3900;try{const _0x2137c1=_0x5d33eb['iteratorDeploy'][_0x5e56e2(0x258)]();_0x2137c1[_0x5e56e2(0x1f8)]?_0x540d4f():this[_0x5e56e2(0x247)](_0x5d33eb,_0x2137c1,_0x171bb9)[_0x5e56e2(0x23c)](()=>_0x540d4f())[_0x5e56e2(0x205)](_0x29ad82=>_0x2d7948(_0x29ad82));}catch(_0xde4892){_0x2d7948(_0xde4892);}});}['deploy'](_0x3a3560,_0x5e9c1a,_0x5bdb97=0x0){return new Promise((_0x3cb760,_0x28d03e)=>{const _0x46a0af=a38_0x3900;try{const _0x54b912=this[_0x46a0af(0x24f)]===''?_0x46a0af(0x235):_0x46a0af(0x279),_0x200b0d={'items':_0x5e9c1a['value']};this[_0x46a0af(0x22a)]['apex'][_0x46a0af(0x204)](_0x54b912,_0x200b0d)[_0x46a0af(0x23c)](()=>{const _0x350a86=_0x46a0af;return _0x5bdb97+=_0x5e9c1a[_0x350a86(0x201)][_0x350a86(0x226)],this[_0x350a86(0x231)][_0x350a86(0x1fe)]('Deployed\x20'+_0x5bdb97+_0x350a86(0x254)+_0x3a3560[_0x350a86(0x238)]),Promise[_0x350a86(0x1d3)]();})[_0x46a0af(0x205)](_0x3e34b3=>{const _0x139c57=_0x46a0af;return this['logger'][_0x139c57(0x1fe)]('Error\x20deploy\x20chunk\x20'+_0x3e34b3),Promise['resolve']();})['then'](()=>this[_0x46a0af(0x26b)](_0x3a3560,_0x5bdb97))[_0x46a0af(0x23c)](_0x3cb760)[_0x46a0af(0x205)](_0x28d03e);}catch(_0x3cbc21){_0x28d03e(_0x3cbc21);}});}[a38_0x544404(0x26f)](){return new Promise(_0x19f432=>{const _0x39aba6=a38_0x3900;try{this[_0x39aba6(0x231)][_0x39aba6(0x1fe)](_0x39aba6(0x249));const _0x8a3211=this[_0x39aba6(0x210)]+'/'+constants['VLOCITY_TEMP_CATALOG'];if(fs[_0x39aba6(0x273)](_0x8a3211)){const _0x32b2ce=_0x8a3211+'/logs';if(this[_0x39aba6(0x231)][_0x39aba6(0x1f5)]['length']&&fs[_0x39aba6(0x273)](_0x32b2ce)){const _0x238682=fs[_0x39aba6(0x278)](_0x32b2ce);if(_0x238682&&_0x238682[_0x39aba6(0x226)]){const _0x167b9b=_0x238682[0x0];if(_0x167b9b['includes'](_0x39aba6(0x228))&&_0x167b9b[_0x39aba6(0x20f)](_0x39aba6(0x26e))){const _0xf3dd80=_0x39aba6(0x219)+JSON['stringify'](this['logger']['errors']);fs['appendFileSync']('./'+_0x32b2ce+'/'+_0x167b9b,_0xf3dd80);}}}const _0x56d5a0=new AdmZip();_0x56d5a0[_0x39aba6(0x24c)](_0x8a3211,constants['VLOCITY_TEMP_CATALOG']),_0x19f432(_0x56d5a0[_0x39aba6(0x234)]()[_0x39aba6(0x1e2)](_0x39aba6(0x269))),this['logger'][_0x39aba6(0x1fe)](_0x39aba6(0x1da));}else this[_0x39aba6(0x231)][_0x39aba6(0x1fe)](_0x39aba6(0x1f9)),_0x19f432();}catch(_0x5e735f){this['logger'][_0x39aba6(0x1fe)](_0x39aba6(0x1d2)+_0x5e735f),_0x19f432();}});}['sendVlocityTemp'](_0x5ecc3e){return new Promise((_0x1d6c15,_0x1a9281)=>{const _0x9ebb6b=a38_0x3900;try{this[_0x9ebb6b(0x231)]['log'](_0x9ebb6b(0x1d7));const _0x552ab0={'Name':_0x9ebb6b(0x241),'ContentType':_0x9ebb6b(0x203),'Description':'Vlocity\x20Temp','ParentId':this[_0x9ebb6b(0x1c3)],'Body':_0x5ecc3e};this[_0x9ebb6b(0x22a)][_0x9ebb6b(0x1cb)](_0x9ebb6b(0x221))[_0x9ebb6b(0x25c)](_0x552ab0)[_0x9ebb6b(0x23c)](()=>{const _0x35e20a=_0x9ebb6b;this[_0x35e20a(0x231)][_0x35e20a(0x1fe)](_0x35e20a(0x1e1)),_0x1d6c15();})['catch'](_0x1d1257=>{const _0x2e2bec=_0x9ebb6b;this[_0x2e2bec(0x231)]['log'](_0x2e2bec(0x253)+_0x1d1257),_0x1a9281(_0x1d1257);});}catch(_0x4c993e){this[_0x9ebb6b(0x231)][_0x9ebb6b(0x1fe)](_0x9ebb6b(0x253)+_0x4c993e),_0x1a9281(_0x4c993e);}});}[a38_0x544404(0x260)](){return new Promise(_0x21893e=>{const _0x2db5a2=a38_0x3900;try{if(fs['existsSync'](this[_0x2db5a2(0x210)]+'/'+constants[_0x2db5a2(0x239)])){const _0x35d61c=yaml[_0x2db5a2(0x22f)](fs[_0x2db5a2(0x1c7)](this['projectPath']+'/'+constants[_0x2db5a2(0x239)],_0x2db5a2(0x1ea)));_0x35d61c[_0x2db5a2(0x1fc)]&&_0x35d61c[_0x2db5a2(0x1fc)][_0x2db5a2(0x226)]?(this[_0x2db5a2(0x231)][_0x2db5a2(0x1fe)](_0x2db5a2(0x21d)+_0x35d61c[_0x2db5a2(0x1fc)][_0x2db5a2(0x25b)]('\x0a')),_0x21893e(!![])):_0x21893e(![]);}else _0x21893e(![]);}catch(_0x4d23c0){_0x21893e(![]);}});}[a38_0x544404(0x244)](_0x1def56,_0x59aca5=![]){return new Promise((_0x547d8a,_0x4ec22a)=>{const _0x7cbfce=a38_0x3900;try{Promise[_0x7cbfce(0x1d3)]()[_0x7cbfce(0x23c)](()=>this['createVlocityTempZip']())[_0x7cbfce(0x23c)](_0x321235=>{const _0x520131=_0x7cbfce;if(_0x321235)return this[_0x520131(0x1cd)](_0x321235);return Promise[_0x520131(0x1d3)]();})[_0x7cbfce(0x23c)](()=>http[_0x7cbfce(0x1ff)](this[_0x7cbfce(0x210)],this['jsForceConnection'],this[_0x7cbfce(0x252)],this[_0x7cbfce(0x231)],_0x59aca5,!![]))[_0x7cbfce(0x23c)](_0x5ce211=>{const _0x3f2def=_0x7cbfce;return _0x59aca5=_0x5ce211,http['callUpdateLog'](this['jsForceConnection'],this[_0x3f2def(0x214)],this[_0x3f2def(0x24f)],_0x1def56,this[_0x3f2def(0x231)],_0x5ce211);})['then'](()=>this[_0x7cbfce(0x1c5)](_0x59aca5));}catch(_0x1b7ab3){_0x4ec22a(_0x1b7ab3);}});}['callUpdateSnapshot'](_0xed7a8){return new Promise((_0xc03de0,_0x277edf)=>{const _0x379bb9=a38_0x3900;try{this[_0x379bb9(0x231)]['log']('Start\x20Update\x20Snapshot');const _0x213d48={'Id':this[_0x379bb9(0x1c3)],[this['nameSpacePrefix']+_0x379bb9(0x212)]:!![],[this['nameSpacePrefix']+_0x379bb9(0x257)]:_0xed7a8};this['jsForceConnection'][_0x379bb9(0x1cb)](this['nameSpacePrefix']+_0x379bb9(0x259))[_0x379bb9(0x223)](_0x213d48)[_0x379bb9(0x23c)](()=>{const _0x3ecd9c=_0x379bb9;this[_0x3ecd9c(0x231)]['log'](_0x3ecd9c(0x20c)),_0xc03de0(_0x213d48[this[_0x3ecd9c(0x24f)]+_0x3ecd9c(0x257)]);})[_0x379bb9(0x205)](_0x64c5c4=>{const _0x50eeba=_0x379bb9;this['logger'][_0x50eeba(0x1fe)]('Error\x20Update\x20Snapshot'),_0x277edf(_0x64c5c4);});}catch(_0x2b35a5){this['logger']['log'](_0x379bb9(0x217)),_0x277edf(_0x2b35a5);}});}}function createZip(_0x33f551,_0x445024){const _0x15aeea=a38_0x544404,_0x552c01=new AdmZip(),_0x5cf0a0=this[_0x15aeea(0x21c)](_0x33f551);return _0x5cf0a0[_0x15aeea(0x1c9)](_0x1b03b4=>{const _0x20a88e=_0x15aeea;if(Array['isArray'](_0x1b03b4))_0x1b03b4['forEach'](_0xae27ab=>{const _0x552737=a38_0x3900,_0x37d43b=fs['readFileSync'](_0x33f551+'/'+_0xae27ab,'utf8');_0x552c01[_0x552737(0x220)](_0x445024+'/'+_0xae27ab,Buffer[_0x552737(0x22c)](_0x37d43b));});else{const _0x3aa4d0=fs['readFileSync'](_0x33f551+'/'+_0x1b03b4,_0x20a88e(0x1ea));_0x552c01['addFile'](_0x445024+'/'+_0x1b03b4,Buffer[_0x20a88e(0x22c)](_0x3aa4d0));}}),_0x552c01[_0x15aeea(0x234)]();}function a38_0x3900(_0x1ae9d8,_0x46d910){const _0xe1b13b=a38_0xe1b1();return a38_0x3900=function(_0x3900db,_0x5dd3ad){_0x3900db=_0x3900db-0x1c3;let _0x1517b4=_0xe1b13b[_0x3900db];return _0x1517b4;},a38_0x3900(_0x1ae9d8,_0x46d910);}function a38_0xe1b1(){const _0x51ff34=['then','path','createJobYamlFile','filter','replace','Vlocity\x20Temp','selective','manifest:\x0a\x20-\x20','completeDeployment','flosumUrl','UNZIP_CATALOG_NAME','deploy','Records\x20to\x20export\x20not\x20a\x20found','Start\x20Create\x20Vlocity\x20Temp\x20Zip','authFlosum','isArray','addLocalFolder','parse','isSeparateMatrixVersions','nameSpacePrefix','10lpnXCP','accessToken','attachLogId','Error\x20Send\x20Vlocity\x20Temp\x20Zip\x20','\x20from\x20','End\x20Create\x20Job\x20File','DATA_PACK_TYPES_QUERIES_MAP','Is_Error__c','next','Snapshot_Vlocity__c','AND','join','create','%\x27)','./source_data','\x0a\x20-\x20','checkErrors','lstatSync','UNSUPPORTED_BY_DEFAULT_LIST','-maxDepth','-separateMatrixVersions','vlocityNameSpacePrefix','Error\x20Create\x20Job\x20File','vlocity','stringify','base64','Error\x20Deploy\x20Components\x20','nextChunk','WHERE','\x27,\x27','-Export.yaml','createVlocityTempZip','Start\x20Retrieve\x20Data','selectedDataPackTypes','Name','existsSync','flosumToken','isLikeSearch','yaml','Start\x20Prepare\x20Data\x20For\x20Deploy','readdirSync','/Flosum/SnapshotVlocity/','\x20WHERE\x20(Name\x20LIKE\x20\x27%','snapshotId','push','callUpdateSnapshot','End\x20Deploy\x20Components','readFileSync','Title','forEach','projectPath:\x20./','sobject','VLOCITY_NAMESPACE_PREFIX_CODE','sendVlocityTemp','\x20FROM\x20','jsforce','vlocityUrl','authVlosityOrg','Error\x20Create\x20Vlocity\x20Temp\x20Zip\x20','resolve','appendFileSync','-sf.instanceUrl','test','Start\x20Send\x20Vlocity\x20Temp','prepareDataForDeploy','query','End\x20Create\x20Vlocity\x20Temp\x20Zip','key','79347Vtjnwp','975000ntpqac','3560320nmzEqX','-autoRetryErrors','-job','End\x20Send\x20Vlocity\x20Temp','toString','retrieveData','map','objectName','isSeparateCalculationProcedureVersions','exports','split','2698119fOyTBz','utf8','Cannot\x20retrieve\x20component\x20','endsWith','instanceUrl','name','fields','-\x20VlocityDataPackType:\x20','getAvailableToExport','isAfterUpdateSearchByKey','buf','types','errors','getVlocityQueries','980btrpOB','done','Error\x20Create\x20Vlocity\x20Temp\x20Zip,\x20Vlocity\x20Temp\x20not\x20found','8dvCirc','startsWith','Errors','js-yaml','log','updateAttachmentLog','JOB_FILE_NAME','value','deployComponents','application/zip','post','catch','nameOfComponents','Connection','queries:\x0a','166011oGiwkc','7224zMQhRh','Start\x20Deploy\x20Components','End\x20Update\x20Snapshot','trim','findSubItems','includes','projectPath','1172675AnyUvf','Is_Completed__c','isRunPackRetryAutomatically','logId','__c','createQuery','Error\x20Update\x20Snapshot','-separateCalculationProcedureVersions','FlosumErrors:\x20','Error\x20Create\x20Job\x20File,\x20Not\x20Valid\x20Provided\x20Yaml\x20File:\x20','searchBy','readFiles','Errors\x20found,\x20start\x20pack\x20retry\x20command\x20\x0a','packExport','isNotIncludeDependencies','addFile','Attachment','dump','update','\x20\x20query:\x20SELECT\x20','type','length','isDirectory','job-yaml-','keys','jsForceConnection','toLowerCase','from','Error\x20Retrieve\x20Data\x20','some','load','records','logger',',\x20size\x20more\x20then\x203mb.','createYamlByDataPackTypes','toBuffer','/SnapshotVlocity/','Error\x20Prepare\x20Data\x20For\x20Deploy','../../../services/child-process','count','NAME_LOGS_FILE','callChildProcess','vlocityToken'];a38_0xe1b1=function(){return _0x51ff34;};return a38_0xe1b1();}module[a38_0x544404(0x1e7)]={'RetrieveHelper':RetrieveHelper};