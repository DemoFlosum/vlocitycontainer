const a39_0xab1675=a39_0x5f25;function a39_0x5f25(_0x1e51e5,_0x158636){const _0xab222e=a39_0xab22();return a39_0x5f25=function(_0x5f2599,_0x331523){_0x5f2599=_0x5f2599-0x156;let _0x4e5672=_0xab222e[_0x5f2599];return _0x4e5672;},a39_0x5f25(_0x1e51e5,_0x158636);}(function(_0x24a688,_0x3225b1){const _0x4b1cc0=a39_0x5f25,_0x126b7e=_0x24a688();while(!![]){try{const _0xa8562b=-parseInt(_0x4b1cc0(0x1d9))/0x1+parseInt(_0x4b1cc0(0x1f1))/0x2*(-parseInt(_0x4b1cc0(0x1fb))/0x3)+-parseInt(_0x4b1cc0(0x1d8))/0x4*(parseInt(_0x4b1cc0(0x17f))/0x5)+-parseInt(_0x4b1cc0(0x1fd))/0x6*(parseInt(_0x4b1cc0(0x1c9))/0x7)+parseInt(_0x4b1cc0(0x20f))/0x8+parseInt(_0x4b1cc0(0x1e6))/0x9*(-parseInt(_0x4b1cc0(0x195))/0xa)+parseInt(_0x4b1cc0(0x156))/0xb*(parseInt(_0x4b1cc0(0x1f3))/0xc);if(_0xa8562b===_0x3225b1)break;else _0x126b7e['push'](_0x126b7e['shift']());}catch(_0x261cba){_0x126b7e['push'](_0x126b7e['shift']());}}}(a39_0xab22,0x6ff93));function a39_0xab22(){const _0x37e3b3=['length','catch','isDirectory','keys','-job','isNotIncludeDependencies','jsForceConnection','-maxDepth','/Flosum/SnapshotVlocity/','next','../../../services/http','\x20WHERE\x20(Name\x20LIKE\x20\x27%','Error,\x20Components\x20not\x20found','forEach','Records\x20to\x20export\x20not\x20a\x20found','Is_Completed__c','2087624QbBVuS','1166SjcwRs','objectName','query','vlocityUrl','Vlocity\x20Temp','UNZIP_CATALOG_NAME','FlosumErrors:\x20','-autoRetryErrors','Attachment','isLikeSearch','Title','nameSpacePrefix','_DataPack.json','Error\x20Create\x20Vlocity\x20Temp\x20Zip\x20','toLowerCase','completeDeployment','from','value','js-yaml','isAfterUpdateSearchByKey','flosumUrl','resolve','WHERE','snapshotId','NAME_LOGS_FILE','projectPath','Connection','Is_Error__c','done','adm-zip','deploy','parse','DATA_PACK_TYPES_QUERIES_MAP','selective','authFlosum','iteratorDeploy','name','instanceUrl','Start\x20Prepare\x20Data\x20For\x20Deploy','nameOfComponents','/SnapshotVlocity/','4551055lWuiXD','\x20\x20query:\x20SELECT\x20','push','Start\x20Update\x20Snapshot','createJobYamlFile','appendFileSync','./source_data','searchBy','End\x20Retrieve\x20Data','End\x20Send\x20Vlocity\x20Temp','map','Start\x20Create\x20Vlocity\x20Temp\x20Zip','addFile','updateAttachmentLog','%\x27\x20OR\x20Name\x20LIKE\x20\x27%','toBuffer','queries:\x0a','Deployed\x20','findSubItems','\x0amanifest:\x0a\x20-\x20','readFileSync','replace','1306050tzPLgO','readdirSync','attachLogId','JOB_FILE_NAME','Error\x20Send\x20Vlocity\x20Temp\x20Zip\x20','Error\x20Create\x20Job\x20File,\x20Not\x20Valid\x20Provided\x20Yaml\x20File:\x20','End\x20Prepare\x20Data\x20For\x20Deploy','packExport','End\x20Update\x20Snapshot','logId','/logs','\x0a\x20-\x20','selectedDataPackTypes','../../../constants','vlocityNameSpacePrefix','isSeparateMatrixVersions','has','lstatSync','log','%\x27)','callChildProcess','VLOCITY_TEMP_CATALOG','base64','Start\x20Create\x20Job\x20File','buf','sendVlocityTemp','Error\x20Deploy\x20Components\x20','Error\x20parse\x20component\x20','join','projectPath:\x20./','Error\x20Create\x20Job\x20File','addLocalFolder','__c','types','\x27,\x27','some','load','jsforce','createVlocityTempZip','VLOCITY_NAMESPACE_PREFIX_CODE','isSeparateCalculationProcedureVersions','errors','checkErrors','vlocityToken','../../../services/child-process','stringify','flosumToken','End\x20Create\x20Job\x20File','exports','isRunPackRetryAutomatically','End\x20Deploy\x20Components','toString','1320977QjBRSB','-separateCalculationProcedureVersions','\x20WHERE\x20Name\x20IN\x20(\x27','existsSync','includes','\x20FROM\x20','endsWith','split','trim','\x20from\x20','application/zip','records','createQuery','then','-separateMatrixVersions','4buStSv','57932fnwtsr','manifest:\x0a\x20-\x20','callUpdateSnapshot','update','logger','iterator','retrieveData','dump','-Export.yaml','authVlosityOrg','yaml','createYamlByDataPackTypes','nextChunk','9eCFqFI',',\x20size\x20more\x20then\x203mb.','Error\x20Prepare\x20Data\x20For\x20Deploy','getVlocityQueries','Start\x20Retrieve\x20Data','ContentVersion','Error\x20Update\x20Snapshot','Cannot\x20retrieve\x20component\x20','Snapshot_Vlocity__c','readFiles','test','204iogjsp','accessToken','334032STHdZH','type','create','startsWith','Error\x20deploy\x20chunk\x20','Name','Errors','utf8','26451fdanON','filter','24qsCeQh','isArray'];a39_0xab22=function(){return _0x37e3b3;};return a39_0xab22();}const fs=require('fs'),crc32=require('crc-32'),AdmZip=require(a39_0xab1675(0x173)),yaml=require(a39_0xab1675(0x168)),{resolve}=require('path'),jsForce=require(a39_0xab1675(0x1ba)),constants=require(a39_0xab1675(0x1a2)),childProcess=require(a39_0xab1675(0x1c1)),http=require(a39_0xab1675(0x209)),{VlocityHelper}=require('../../../services/vlocity');class RetrieveHelper{constructor(_0x1f7d55,_0x40cbd5,_0x210029){const _0x47f589=a39_0xab1675;this[_0x47f589(0x16a)]=_0x40cbd5['authFlosum'][_0x47f589(0x17b)],this[_0x47f589(0x1c3)]=_0x40cbd5[_0x47f589(0x178)]['accessToken'],this['vlocityUrl']=_0x40cbd5['authVlosityOrg'][_0x47f589(0x17b)],this[_0x47f589(0x1c0)]=_0x40cbd5[_0x47f589(0x1e2)][_0x47f589(0x1f2)],this[_0x47f589(0x19e)]=_0x40cbd5['logId'],this[_0x47f589(0x197)]=_0x40cbd5['attachLogId'],this['projectPath']=_0x1f7d55,this[_0x47f589(0x178)]=_0x40cbd5[_0x47f589(0x178)],this[_0x47f589(0x161)]=_0x40cbd5[_0x47f589(0x161)],this[_0x47f589(0x1a3)]=_0x40cbd5[_0x47f589(0x1a3)],this[_0x47f589(0x17d)]=_0x40cbd5['nameOfComponents'],this['searchBy']=_0x40cbd5[_0x47f589(0x186)],this[_0x47f589(0x15f)]=_0x40cbd5[_0x47f589(0x15f)],this[_0x47f589(0x16d)]=_0x40cbd5[_0x47f589(0x16d)],this[_0x47f589(0x1a1)]=JSON[_0x47f589(0x175)](_0x40cbd5[_0x47f589(0x1a1)]),this[_0x47f589(0x204)]=_0x40cbd5['isNotIncludeDependencies'],this[_0x47f589(0x1a4)]=_0x40cbd5[_0x47f589(0x1a4)],this['isSeparateCalculationProcedureVersions']=_0x40cbd5[_0x47f589(0x1bd)],this['isAfterUpdateSearchByKey']=_0x40cbd5[_0x47f589(0x169)],this[_0x47f589(0x1c6)]=!!_0x40cbd5[_0x47f589(0x1c6)],this[_0x47f589(0x1f4)]=_0x40cbd5['type'],this[_0x47f589(0x202)]=_0x40cbd5[_0x47f589(0x202)],this[_0x47f589(0x1dd)]=_0x210029,this[_0x47f589(0x205)]=new jsForce[(_0x47f589(0x170))](_0x40cbd5[_0x47f589(0x178)]);}async[a39_0xab1675(0x1e4)](){const _0x45432b=a39_0xab1675,_0x5492f5=await new VlocityHelper(this[_0x45432b(0x1c0)],this[_0x45432b(0x159)],this[_0x45432b(0x1dd)])['getAvailableToExport']();if(!_0x5492f5?.[_0x45432b(0x1d4)]?.['length'])throw new Error(_0x45432b(0x20d));const _0x3b82ed=this[_0x45432b(0x17d)][_0x45432b(0x1d0)](';')['map'](_0xc33749=>_0xc33749[_0x45432b(0x164)]()),_0x46268d=new Set(this[_0x45432b(0x1a1)]),_0xc6247f=[];for(const {VlocityDataPackType:_0x25b92f,Name:_0x184c5a,VlocityDataPackDisplayLabel:_0x1e852d,VlocityDataPackKey:_0x5723b7}of _0x5492f5[_0x45432b(0x1d4)]){if(!_0x46268d[_0x45432b(0x1a5)](_0x25b92f))continue;const _0x3daace=_0x184c5a?.['toLowerCase']()||'',_0x4a254b=_0x1e852d?.['toLowerCase']()||'',_0xab698c=_0x5723b7?.['toLowerCase']()||'';(_0x3b82ed[_0x45432b(0x1b8)](_0x145b01=>_0x3daace[_0x45432b(0x1cd)](_0x145b01))||_0x3b82ed[_0x45432b(0x1b8)](_0x513890=>_0x4a254b['includes'](_0x513890))||_0x3b82ed[_0x45432b(0x1b8)](_0x55fd30=>_0xab698c[_0x45432b(0x1cd)](_0x55fd30)))&&_0xc6247f[_0x45432b(0x181)](_0x5723b7);}const _0x3ebe2c=_0x45432b(0x1b2)+constants[_0x45432b(0x15b)]+_0x45432b(0x192)+_0xc6247f[_0x45432b(0x1b1)](_0x45432b(0x1a0));fs[_0x45432b(0x184)](this[_0x45432b(0x16f)]+'/'+constants[_0x45432b(0x198)],_0x3ebe2c),this[_0x45432b(0x1dd)][_0x45432b(0x1a7)](_0x45432b(0x1c4));}[a39_0xab1675(0x183)](){return new Promise((_0x351a68,_0x1d4149)=>{const _0x3137bb=a39_0x5f25;try{this[_0x3137bb(0x1dd)]['log'](_0x3137bb(0x1ac));let _0xaa9554;if(this[_0x3137bb(0x1f4)]===_0x3137bb(0x177)&&this[_0x3137bb(0x202)]?.[_0x3137bb(0x1ff)]){_0xaa9554=_0x3137bb(0x1b2)+constants[_0x3137bb(0x15b)]+'\x0amanifest:\x0a\x20-\x20'+this[_0x3137bb(0x202)][_0x3137bb(0x1b1)](_0x3137bb(0x1a0)),fs[_0x3137bb(0x184)](this[_0x3137bb(0x16f)]+'/'+constants[_0x3137bb(0x198)],_0xaa9554),this[_0x3137bb(0x1dd)][_0x3137bb(0x1a7)](_0x3137bb(0x1c4)),_0x351a68();return;}if(this[_0x3137bb(0x1f4)]===_0x3137bb(0x1b6)){this[_0x3137bb(0x1e4)]()[_0x3137bb(0x1d6)](()=>_0x351a68())[_0x3137bb(0x200)](_0x2679e7=>{const _0x19fc5e=_0x3137bb;this['logger'][_0x19fc5e(0x1a7)](_0x19fc5e(0x1b3)),_0x1d4149(_0x2679e7);});return;}_0xaa9554='projectPath:\x20./'+constants[_0x3137bb(0x15b)]+'\x0a';if(this[_0x3137bb(0x169)]){if(this[_0x3137bb(0x17d)]){if(this[_0x3137bb(0x186)]==='key'){const _0x2099c5=this['nameOfComponents'][_0x3137bb(0x1d0)]('\x0a')[_0x3137bb(0x1fc)](_0x1cf3e3=>_0x1cf3e3[_0x3137bb(0x1d1)]()[_0x3137bb(0x1f6)]('-'))[_0x3137bb(0x189)](_0x144547=>_0x144547['replace']('-','')['trim']());_0x2099c5[_0x3137bb(0x1ff)]?(_0xaa9554+=_0x3137bb(0x1da),_0xaa9554+=_0x2099c5['join'](_0x3137bb(0x1a0)),fs[_0x3137bb(0x184)](this['projectPath']+'/'+constants['JOB_FILE_NAME'],_0xaa9554),this['logger']['log']('End\x20Create\x20Job\x20File'),_0x351a68()):_0x1d4149(_0x3137bb(0x20b));}if(this[_0x3137bb(0x186)]===_0x3137bb(0x1e3))try{const _0x19783b=yaml[_0x3137bb(0x1b9)](this[_0x3137bb(0x17d)]);_0x19783b['projectPath']=_0x3137bb(0x185),fs['appendFileSync'](this[_0x3137bb(0x16f)]+'/'+constants[_0x3137bb(0x198)],yaml[_0x3137bb(0x1e0)](_0x19783b)),_0x351a68(),this['logger'][_0x3137bb(0x1a7)](_0x3137bb(0x1c4));}catch(_0x1f23be){this[_0x3137bb(0x1dd)][_0x3137bb(0x1a7)](_0x3137bb(0x19a)+_0x1f23be),_0x1d4149(_0x1f23be);}else _0xaa9554+=_0x3137bb(0x18f)+this[_0x3137bb(0x1e9)](),fs[_0x3137bb(0x184)](this[_0x3137bb(0x16f)]+'/'+constants[_0x3137bb(0x198)],_0xaa9554),_0x351a68(),this['logger'][_0x3137bb(0x1a7)]('End\x20Create\x20Job\x20File');}else _0xaa9554+=_0x3137bb(0x18f)+this[_0x3137bb(0x1e9)](),fs[_0x3137bb(0x184)](this[_0x3137bb(0x16f)]+'/'+constants[_0x3137bb(0x198)],_0xaa9554),_0x351a68(),this[_0x3137bb(0x1dd)][_0x3137bb(0x1a7)]('End\x20Create\x20Job\x20File');}else _0xaa9554+=_0x3137bb(0x18f)+this['getVlocityQueries'](),fs['appendFileSync'](this[_0x3137bb(0x16f)]+'/'+constants[_0x3137bb(0x198)],_0xaa9554),_0x351a68(),this[_0x3137bb(0x1dd)][_0x3137bb(0x1a7)](_0x3137bb(0x1c4));}catch(_0x220491){this[_0x3137bb(0x1dd)]['log'](_0x3137bb(0x1b3)),_0x1d4149(_0x220491);}});}['getVlocityQueries'](){const _0x3efa1b=a39_0xab1675,_0x3fdeb8=Array[_0x3efa1b(0x1fe)](this[_0x3efa1b(0x1a1)])?this[_0x3efa1b(0x1a1)]:Object[_0x3efa1b(0x202)](this[_0x3efa1b(0x1a1)]),_0x35a7d8=[];/^ *$/[_0x3efa1b(0x1f0)](this['nameOfComponents'])?this[_0x3efa1b(0x17d)]=[]:this[_0x3efa1b(0x17d)]=this['nameOfComponents']['split'](';');if(this[_0x3efa1b(0x17d)][_0x3efa1b(0x1ff)]){const _0x336388=this[_0x3efa1b(0x15f)]?this[_0x3efa1b(0x17d)]['join'](_0x3efa1b(0x18d)):this[_0x3efa1b(0x17d)][_0x3efa1b(0x1b1)](_0x3efa1b(0x1b7));for(const _0x3851ea of _0x3fdeb8){_0x35a7d8[_0x3efa1b(0x181)](this[_0x3efa1b(0x1d5)](_0x3851ea,_0x336388));}}else for(const _0x38bbee of _0x3fdeb8){const _0x48b31e=constants['UNSUPPORTED_BY_DEFAULT_LIST']['includes'](_0x38bbee)?this[_0x3efa1b(0x1d5)](_0x38bbee):'-\x20'+_0x38bbee;_0x35a7d8[_0x3efa1b(0x181)](_0x48b31e);}return _0x35a7d8['join']('\x0a');}['createQuery'](_0x2b07dc,_0x29e8ba=null){const _0x127ad0=a39_0xab1675,_0x1fd7da=constants[_0x127ad0(0x176)][_0x2b07dc];let _0x694e69='';if(_0x1fd7da){const _0x3bc0cc=_0x1fd7da[_0x127ad0(0x157)][_0x127ad0(0x1cf)](_0x127ad0(0x1b5))&&!!this[_0x127ad0(0x1a3)]?''+this['vlocityNameSpacePrefix']+_0x1fd7da[_0x127ad0(0x157)]:''+_0x1fd7da[_0x127ad0(0x157)];_0x694e69='-\x20VlocityDataPackType:\x20'+_0x2b07dc+'\x0a';const _0x37534b=_0x1fd7da['fields'][_0x127ad0(0x194)](new RegExp(constants['VLOCITY_NAMESPACE_PREFIX_CODE'],'g'),this[_0x127ad0(0x1a3)]);this[_0x127ad0(0x15f)]?(_0x694e69+=_0x127ad0(0x180)+_0x37534b+_0x127ad0(0x1ce)+_0x3bc0cc,_0x29e8ba&&(_0x694e69+=_0x127ad0(0x20a)+_0x29e8ba+_0x127ad0(0x1a8))):(_0x694e69+=_0x127ad0(0x180)+_0x37534b+_0x127ad0(0x1ce)+_0x3bc0cc,_0x29e8ba&&(_0x694e69+=_0x127ad0(0x1cb)+_0x29e8ba+'\x27)'));if(_0x1fd7da[_0x127ad0(0x158)]){const _0x15776a=_0x29e8ba?'AND':_0x127ad0(0x16c),_0x5afe1c=_0x1fd7da[_0x127ad0(0x158)][_0x127ad0(0x194)](new RegExp(constants[_0x127ad0(0x1bc)],'g'),this[_0x127ad0(0x1a3)]);_0x694e69+='\x20'+_0x15776a+'\x20'+_0x5afe1c+'\x0a';}else _0x694e69+='\x0a';}return _0x694e69;}[a39_0xab1675(0x1df)](){return new Promise((_0x2d5de0,_0x385f64)=>{const _0x3b6db1=a39_0x5f25;try{this[_0x3b6db1(0x1dd)][_0x3b6db1(0x1a7)](_0x3b6db1(0x1ea));const _0x585b37='vlocity',_0x5e7bd4=this[_0x3b6db1(0x204)]?'0':'-1',_0x335dd0=['-sf.accessToken',''+this[_0x3b6db1(0x1c0)],'-sf.instanceUrl',''+this[_0x3b6db1(0x159)],_0x3b6db1(0x203),''+constants[_0x3b6db1(0x198)],_0x3b6db1(0x15d),_0x3b6db1(0x206),_0x5e7bd4];this[_0x3b6db1(0x1a4)]&&_0x335dd0[_0x3b6db1(0x181)](_0x3b6db1(0x1d7));this['isSeparateCalculationProcedureVersions']&&_0x335dd0[_0x3b6db1(0x181)](_0x3b6db1(0x1ca));_0x335dd0[_0x3b6db1(0x181)](_0x3b6db1(0x19c));const _0x5bc031=()=>{const _0x3c57f1=_0x3b6db1;http[_0x3c57f1(0x18c)](this[_0x3c57f1(0x16f)],this[_0x3c57f1(0x205)],this[_0x3c57f1(0x197)],this[_0x3c57f1(0x1dd)],![]);};this['logger'][_0x3b6db1(0x1a7)](_0x335dd0[_0x3b6db1(0x1b1)]('\x20'));const _0xde87ea={'cwd':''+this['projectPath'],'maxBuffer':0x400*0x1f4};childProcess[_0x3b6db1(0x1a9)](_0x585b37,_0x335dd0,this['logger'],_0xde87ea,!![],_0x5bc031)[_0x3b6db1(0x1d6)](_0x5a6a8a=>{const _0xd29edb=_0x3b6db1;this['logger']['log'](_0xd29edb(0x187)),_0x2d5de0(_0x5a6a8a);})[_0x3b6db1(0x200)](_0x2a40b0=>{const _0x16b3a5=_0x3b6db1;this['logger'][_0x16b3a5(0x1a7)]('Error\x20Retrieve\x20Data\x20'+_0x2a40b0),_0x385f64(_0x2a40b0);});}catch(_0x27fd17){_0x385f64(_0x27fd17);}});}['prepareDataForDeploy'](){return new Promise((_0x371826,_0x24627a)=>{const _0x15b5eb=a39_0x5f25;try{this[_0x15b5eb(0x1dd)][_0x15b5eb(0x1a7)](_0x15b5eb(0x17c));let _0x231eee=0x0,_0x35b375=[],_0x333113=0x0;const _0x40648f=[],_0x18584f=this[_0x15b5eb(0x16f)]+'/'+constants[_0x15b5eb(0x15b)],_0x414ab4=fs['readdirSync'](_0x18584f);for(let _0xb51997=0x0;_0xb51997<_0x414ab4[_0x15b5eb(0x1ff)];_0xb51997++){const _0xdbc151=_0x414ab4[_0xb51997]===_0x15b5eb(0x1eb)?_0x15b5eb(0x160):_0x15b5eb(0x1f8),_0x2ce8bf=_0x18584f+'/'+_0x414ab4[_0xb51997],_0x3cc99e=fs[_0x15b5eb(0x196)](_0x2ce8bf);for(let _0x2ca7f4=0x0;_0x2ca7f4<_0x3cc99e['length'];_0x2ca7f4++){const _0x225de7=_0x414ab4[_0xb51997]+'/'+_0x3cc99e[_0x2ca7f4];let _0x5a27b3=_0x3cc99e[_0x2ca7f4];const _0x18590b=[],_0x48dbd6=_0x18584f+'/'+_0x414ab4[_0xb51997]+'/'+_0x3cc99e[_0x2ca7f4],_0x4638e4=fs[_0x15b5eb(0x196)](_0x48dbd6);_0x4638e4['forEach'](_0x15bc46=>{const _0x4ab8b7=_0x15b5eb;try{_0x15bc46['toString']()[_0x4ab8b7(0x1cf)](_0x4ab8b7(0x162))&&(_0x5a27b3=JSON[_0x4ab8b7(0x175)](fs[_0x4ab8b7(0x193)](_0x48dbd6+'/'+_0x15bc46)[_0x4ab8b7(0x1c8)]())[_0xdbc151]);}catch(_0x5c4277){this[_0x4ab8b7(0x1dd)][_0x4ab8b7(0x1a7)](_0x4ab8b7(0x1b0)+_0x15bc46);}!_0x5a27b3&&(_0x5a27b3=undefined),fs[_0x4ab8b7(0x1a6)](_0x48dbd6+'/'+_0x15bc46[_0x4ab8b7(0x1c8)]())[_0x4ab8b7(0x201)]()&&_0x18590b[_0x4ab8b7(0x181)](...this[_0x4ab8b7(0x191)](_0x48dbd6,_0x15bc46));});const _0x14f92c=new AdmZip();_0x14f92c[_0x15b5eb(0x1b4)](_0x48dbd6,_0x414ab4[_0xb51997]+'/'+_0x3cc99e[_0x2ca7f4]);const _0x26c6f0=_0x14f92c['toBuffer'](),_0x4a25d7=crc32[_0x15b5eb(0x1ad)](_0x26c6f0),_0x2f6ddc=_0x26c6f0['toString'](_0x15b5eb(0x1ab)),_0x1ec5a5={'fileName':_0x5a27b3,'name':_0x3cc99e[_0x2ca7f4],'type':_0x414ab4[_0xb51997],'label':_0x225de7,'crc':_0x4a25d7,'base64':_0x2f6ddc,'snapshotId':this[_0x15b5eb(0x16d)],'subItemList':JSON[_0x15b5eb(0x1c2)](_0x18590b)},_0x55a981=_0x26c6f0[_0x15b5eb(0x1ff)]/0xf4240,_0x38f51c=!!(_0x3cc99e[_0x15b5eb(0x1ff)]-0x1===_0x2ca7f4&&_0x414ab4['length']-0x1===_0xb51997);_0x231eee+=_0x55a981,_0x231eee>0x2||_0x35b375>0xfa0?(_0x40648f[_0x15b5eb(0x181)](_0x35b375),_0x55a981<0x3?(_0x35b375=[_0x1ec5a5],_0x333113++,_0x231eee=_0x55a981):(this['logger']['log'](_0x15b5eb(0x1ed)+_0x225de7+_0x15b5eb(0x1e7),!![]),_0x231eee=0x0)):(_0x35b375[_0x15b5eb(0x181)](_0x1ec5a5),_0x333113++),_0x38f51c&&_0x40648f[_0x15b5eb(0x181)](_0x35b375);}}this[_0x15b5eb(0x1dd)][_0x15b5eb(0x1a7)](_0x15b5eb(0x19b)),_0x371826({'iteratorDeploy':_0x40648f[Symbol[_0x15b5eb(0x1de)]](),'count':_0x333113});}catch(_0x40f71d){this['logger'][_0x15b5eb(0x1a7)](_0x15b5eb(0x1e8)),_0x24627a(_0x40f71d);}});}[a39_0xab1675(0x191)](_0x482820,_0x5113c8,_0x467b53='',_0x5a13bb=[]){const _0x4b75da=a39_0xab1675;_0x467b53['length']&&(_0x467b53='/'+_0x467b53);const _0xcaf79a=fs[_0x4b75da(0x196)](_0x482820+'/'+_0x5113c8+_0x467b53);return _0xcaf79a[_0x4b75da(0x20c)](_0x134c85=>{const _0x1903c7=_0x4b75da;!fs[_0x1903c7(0x1a6)](_0x482820+'/'+_0x5113c8+_0x467b53+'/'+_0x134c85[_0x1903c7(0x1c8)]())[_0x1903c7(0x201)]()?_0x5a13bb['push'](''+_0x5113c8+_0x467b53+'/'+_0x134c85['toString']()):this[_0x1903c7(0x191)](_0x482820,_0x5113c8,_0x134c85,_0x5a13bb);}),_0x5a13bb;}[a39_0xab1675(0x1ef)](_0x47bfa9,_0x548dcf='',_0x2afa86=[]){const _0xae7da6=a39_0xab1675,_0x2aadc9=fs[_0xae7da6(0x196)](_0x47bfa9,{'withFileTypes':!![]});return _0x2aadc9[_0xae7da6(0x20c)](_0x292afe=>{const _0x2b78d0=_0xae7da6,_0x240811=resolve(_0x47bfa9,_0x292afe[_0x2b78d0(0x17a)]);if(_0x292afe['isDirectory']()){const _0xee4ae3=_0x548dcf['length']?_0x548dcf+'/'+_0x292afe[_0x2b78d0(0x17a)]:_0x292afe['name'];this[_0x2b78d0(0x1ef)](_0x240811,_0xee4ae3,_0x2afa86);}else{let _0x4cd0c0;_0x548dcf[_0x2b78d0(0x1ff)]?_0x4cd0c0=_0x548dcf+'/'+_0x292afe['name']:_0x4cd0c0=_0x292afe['name'],_0x2afa86[_0x2b78d0(0x181)](_0x4cd0c0);}}),_0x2afa86;}['deployComponents'](_0x3b5873){return new Promise((_0x433f06,_0x3c64a9)=>{const _0x464c86=a39_0x5f25;try{this[_0x464c86(0x1dd)][_0x464c86(0x1a7)]('Start\x20Deploy\x20Components'),this['nextChunk'](_0x3b5873)[_0x464c86(0x1d6)](()=>{const _0x5a6cd2=_0x464c86;this[_0x5a6cd2(0x1dd)][_0x5a6cd2(0x1a7)](_0x5a6cd2(0x1c7)),_0x433f06();})[_0x464c86(0x200)](_0x54dcc1=>{const _0x40f9a0=_0x464c86;this['logger'][_0x40f9a0(0x1a7)](_0x40f9a0(0x1af)+_0x54dcc1),_0x3c64a9(_0x54dcc1);});}catch(_0xa909f3){_0x3c64a9(_0xa909f3);}});}[a39_0xab1675(0x1e5)](_0x1fbb9a,_0xc9b818=0x0){return new Promise((_0x32e904,_0x125825)=>{const _0x492dcc=a39_0x5f25;try{const _0x1ecdd4=_0x1fbb9a[_0x492dcc(0x179)][_0x492dcc(0x208)]();_0x1ecdd4[_0x492dcc(0x172)]?_0x32e904():this[_0x492dcc(0x174)](_0x1fbb9a,_0x1ecdd4,_0xc9b818)['then'](()=>_0x32e904())[_0x492dcc(0x200)](_0x23fd00=>_0x125825(_0x23fd00));}catch(_0x148e81){_0x125825(_0x148e81);}});}[a39_0xab1675(0x174)](_0x29b35f,_0x5370df,_0x332c30=0x0){return new Promise((_0x25619c,_0xd988cc)=>{const _0x406c70=a39_0x5f25;try{const _0x3cf415=this[_0x406c70(0x161)]===''?_0x406c70(0x17e):_0x406c70(0x207),_0x3bc769={'items':_0x5370df['value']};this['jsForceConnection']['apex']['post'](_0x3cf415,_0x3bc769)[_0x406c70(0x1d6)](()=>{const _0x56a7ef=_0x406c70;return _0x332c30+=_0x5370df[_0x56a7ef(0x167)][_0x56a7ef(0x1ff)],this[_0x56a7ef(0x1dd)][_0x56a7ef(0x1a7)](_0x56a7ef(0x190)+_0x332c30+_0x56a7ef(0x1d2)+_0x29b35f['count']),Promise[_0x56a7ef(0x16b)]();})[_0x406c70(0x200)](_0x3f73e7=>{const _0x5490f7=_0x406c70;return this['logger']['log'](_0x5490f7(0x1f7)+_0x3f73e7),Promise[_0x5490f7(0x16b)]();})[_0x406c70(0x1d6)](()=>this['nextChunk'](_0x29b35f,_0x332c30))[_0x406c70(0x1d6)](_0x25619c)[_0x406c70(0x200)](_0xd988cc);}catch(_0xce2ad4){_0xd988cc(_0xce2ad4);}});}[a39_0xab1675(0x1bb)](){return new Promise(_0x1b0667=>{const _0x509131=a39_0x5f25;try{this[_0x509131(0x1dd)][_0x509131(0x1a7)](_0x509131(0x18a));const _0x3ccb5a=this['projectPath']+'/'+constants[_0x509131(0x1aa)];if(fs[_0x509131(0x1cc)](_0x3ccb5a)){const _0x5cdca5=_0x3ccb5a+_0x509131(0x19f);if(this[_0x509131(0x1dd)][_0x509131(0x1be)]['length']&&fs[_0x509131(0x1cc)](_0x5cdca5)){const _0x4d688d=fs[_0x509131(0x196)](_0x5cdca5);if(_0x4d688d&&_0x4d688d['length']){const _0x2a47da=_0x4d688d[0x0];if(_0x2a47da[_0x509131(0x1cd)]('job-yaml-')&&_0x2a47da[_0x509131(0x1cd)](_0x509131(0x1e1))){const _0x448df9=_0x509131(0x15c)+JSON['stringify'](this[_0x509131(0x1dd)][_0x509131(0x1be)]);fs['appendFileSync']('./'+_0x5cdca5+'/'+_0x2a47da,_0x448df9);}}}const _0x21bbcb=new AdmZip();_0x21bbcb[_0x509131(0x1b4)](_0x3ccb5a,constants[_0x509131(0x1aa)]),_0x1b0667(_0x21bbcb[_0x509131(0x18e)]()[_0x509131(0x1c8)]('base64')),this[_0x509131(0x1dd)][_0x509131(0x1a7)]('End\x20Create\x20Vlocity\x20Temp\x20Zip');}else this[_0x509131(0x1dd)][_0x509131(0x1a7)]('Error\x20Create\x20Vlocity\x20Temp\x20Zip,\x20Vlocity\x20Temp\x20not\x20found'),_0x1b0667();}catch(_0x37cc03){this[_0x509131(0x1dd)][_0x509131(0x1a7)](_0x509131(0x163)+_0x37cc03),_0x1b0667();}});}['sendVlocityTemp'](_0x15f204){return new Promise((_0xa424dd,_0x5a8817)=>{const _0x165866=a39_0x5f25;try{this[_0x165866(0x1dd)][_0x165866(0x1a7)]('Start\x20Send\x20Vlocity\x20Temp');const _0x59733e={'Name':_0x165866(0x15a),'ContentType':_0x165866(0x1d3),'Description':_0x165866(0x15a),'ParentId':this[_0x165866(0x16d)],'Body':_0x15f204};this[_0x165866(0x205)]['sobject'](_0x165866(0x15e))[_0x165866(0x1f5)](_0x59733e)[_0x165866(0x1d6)](()=>{const _0x266a51=_0x165866;this[_0x266a51(0x1dd)][_0x266a51(0x1a7)](_0x266a51(0x188)),_0xa424dd();})[_0x165866(0x200)](_0x34474e=>{const _0x1fc07f=_0x165866;this[_0x1fc07f(0x1dd)][_0x1fc07f(0x1a7)](_0x1fc07f(0x199)+_0x34474e),_0x5a8817(_0x34474e);});}catch(_0x5c7147){this[_0x165866(0x1dd)]['log']('Error\x20Send\x20Vlocity\x20Temp\x20Zip\x20'+_0x5c7147),_0x5a8817(_0x5c7147);}});}[a39_0xab1675(0x1bf)](){return new Promise(_0x2a65ce=>{const _0x34aedf=a39_0x5f25;try{if(fs[_0x34aedf(0x1cc)](this[_0x34aedf(0x16f)]+'/'+constants[_0x34aedf(0x16e)])){const _0x83627=yaml['load'](fs[_0x34aedf(0x193)](this[_0x34aedf(0x16f)]+'/'+constants[_0x34aedf(0x16e)],_0x34aedf(0x1fa)));_0x83627['Errors']&&_0x83627['Errors']['length']?(this[_0x34aedf(0x1dd)][_0x34aedf(0x1a7)]('Errors\x20found,\x20start\x20pack\x20retry\x20command\x20\x0a'+_0x83627[_0x34aedf(0x1f9)][_0x34aedf(0x1b1)]('\x0a')),_0x2a65ce(!![])):_0x2a65ce(![]);}else _0x2a65ce(![]);}catch(_0x2fee73){_0x2a65ce(![]);}});}[a39_0xab1675(0x165)](_0x5a69e8,_0x4dd88a=![]){return new Promise((_0x20a970,_0x3d307e)=>{const _0x1ab246=a39_0x5f25;try{Promise['resolve']()['then'](()=>this[_0x1ab246(0x1bb)]())['then'](_0x1169f7=>{const _0x5a3722=_0x1ab246;if(_0x1169f7)return this[_0x5a3722(0x1ae)](_0x1169f7);return Promise[_0x5a3722(0x16b)]();})[_0x1ab246(0x1d6)](()=>http[_0x1ab246(0x18c)](this[_0x1ab246(0x16f)],this[_0x1ab246(0x205)],this[_0x1ab246(0x197)],this['logger'],_0x4dd88a,!![]))['then'](_0x4ecf1f=>{const _0x1d3cdf=_0x1ab246;return _0x4dd88a=_0x4ecf1f,http['callUpdateLog'](this[_0x1d3cdf(0x205)],this[_0x1d3cdf(0x19e)],this[_0x1d3cdf(0x161)],_0x5a69e8,this[_0x1d3cdf(0x1dd)],_0x4ecf1f);})[_0x1ab246(0x1d6)](()=>this[_0x1ab246(0x1db)](_0x4dd88a));}catch(_0x34e7ee){_0x3d307e(_0x34e7ee);}});}['callUpdateSnapshot'](_0x2d5595){return new Promise((_0x571b3c,_0x48e496)=>{const _0x51ef2e=a39_0x5f25;try{this[_0x51ef2e(0x1dd)][_0x51ef2e(0x1a7)](_0x51ef2e(0x182));const _0x39cd8e={'Id':this['snapshotId'],[this[_0x51ef2e(0x161)]+_0x51ef2e(0x20e)]:!![],[this['nameSpacePrefix']+_0x51ef2e(0x171)]:_0x2d5595};this['jsForceConnection']['sobject'](this['nameSpacePrefix']+_0x51ef2e(0x1ee))[_0x51ef2e(0x1dc)](_0x39cd8e)[_0x51ef2e(0x1d6)](()=>{const _0x2c15a3=_0x51ef2e;this[_0x2c15a3(0x1dd)]['log'](_0x2c15a3(0x19d)),_0x571b3c(_0x39cd8e[this[_0x2c15a3(0x161)]+_0x2c15a3(0x171)]);})[_0x51ef2e(0x200)](_0x111161=>{const _0x4b45fa=_0x51ef2e;this[_0x4b45fa(0x1dd)][_0x4b45fa(0x1a7)]('Error\x20Update\x20Snapshot'),_0x48e496(_0x111161);});}catch(_0x3249eb){this[_0x51ef2e(0x1dd)]['log'](_0x51ef2e(0x1ec)),_0x48e496(_0x3249eb);}});}}function createZip(_0x3077c0,_0x36dc74){const _0x4c569c=a39_0xab1675,_0x411635=new AdmZip(),_0x3eceaf=this[_0x4c569c(0x1ef)](_0x3077c0);return _0x3eceaf['forEach'](_0x537e74=>{const _0x200115=_0x4c569c;if(Array['isArray'](_0x537e74))_0x537e74[_0x200115(0x20c)](_0x445353=>{const _0x1557da=_0x200115,_0x279eba=fs[_0x1557da(0x193)](_0x3077c0+'/'+_0x445353,'utf8');_0x411635['addFile'](_0x36dc74+'/'+_0x445353,Buffer['from'](_0x279eba));});else{const _0x128f40=fs['readFileSync'](_0x3077c0+'/'+_0x537e74,_0x200115(0x1fa));_0x411635[_0x200115(0x18b)](_0x36dc74+'/'+_0x537e74,Buffer[_0x200115(0x166)](_0x128f40));}}),_0x411635[_0x4c569c(0x18e)]();}module[a39_0xab1675(0x1c5)]={'RetrieveHelper':RetrieveHelper};