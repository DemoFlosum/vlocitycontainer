const a40_0x2234d6=a40_0x2301;function a40_0x2301(_0x28b365,_0x241cb0){const _0x51a54b=a40_0x51a5();return a40_0x2301=function(_0x2301a6,_0x179390){_0x2301a6=_0x2301a6-0x1d2;let _0x52cd1c=_0x51a54b[_0x2301a6];return _0x52cd1c;},a40_0x2301(_0x28b365,_0x241cb0);}(function(_0x2e3054,_0x3a86c1){const _0xe98f24=a40_0x2301,_0x5302e2=_0x2e3054();while(!![]){try{const _0x577e80=-parseInt(_0xe98f24(0x229))/0x1*(-parseInt(_0xe98f24(0x1ec))/0x2)+-parseInt(_0xe98f24(0x251))/0x3*(-parseInt(_0xe98f24(0x230))/0x4)+parseInt(_0xe98f24(0x1ed))/0x5+-parseInt(_0xe98f24(0x245))/0x6*(-parseInt(_0xe98f24(0x20a))/0x7)+-parseInt(_0xe98f24(0x1eb))/0x8+-parseInt(_0xe98f24(0x207))/0x9+parseInt(_0xe98f24(0x23f))/0xa*(-parseInt(_0xe98f24(0x201))/0xb);if(_0x577e80===_0x3a86c1)break;else _0x5302e2['push'](_0x5302e2['shift']());}catch(_0x31d6cd){_0x5302e2['push'](_0x5302e2['shift']());}}}(a40_0x51a5,0xcd478));const fs=require('fs'),crc32=require(a40_0x2234d6(0x22d)),AdmZip=require(a40_0x2234d6(0x23d)),yaml=require(a40_0x2234d6(0x21b)),{resolve}=require(a40_0x2234d6(0x24e)),jsForce=require(a40_0x2234d6(0x1e6)),constants=require(a40_0x2234d6(0x226)),childProcess=require(a40_0x2234d6(0x26f)),http=require('../../../services/http'),{VlocityHelper}=require(a40_0x2234d6(0x26a));class RetrieveHelper{constructor(_0x5b75d8,_0x492768,_0x2688b6){const _0x3f02ff=a40_0x2234d6;this['flosumUrl']=_0x492768['authFlosum'][_0x3f02ff(0x1fb)],this[_0x3f02ff(0x273)]=_0x492768[_0x3f02ff(0x259)]['accessToken'],this[_0x3f02ff(0x1fd)]=_0x492768[_0x3f02ff(0x25e)][_0x3f02ff(0x1fb)],this[_0x3f02ff(0x215)]=_0x492768[_0x3f02ff(0x25e)][_0x3f02ff(0x23b)],this[_0x3f02ff(0x232)]=_0x492768[_0x3f02ff(0x232)],this[_0x3f02ff(0x1db)]=_0x492768[_0x3f02ff(0x1db)],this[_0x3f02ff(0x256)]=_0x5b75d8,this[_0x3f02ff(0x259)]=_0x492768[_0x3f02ff(0x259)],this[_0x3f02ff(0x249)]=_0x492768[_0x3f02ff(0x249)],this[_0x3f02ff(0x1de)]=_0x492768['vlocityNameSpacePrefix'],this[_0x3f02ff(0x25d)]=_0x492768[_0x3f02ff(0x25d)],this[_0x3f02ff(0x1f1)]=_0x492768['searchBy'],this[_0x3f02ff(0x1f2)]=_0x492768[_0x3f02ff(0x1f2)],this[_0x3f02ff(0x277)]=_0x492768[_0x3f02ff(0x277)],this[_0x3f02ff(0x206)]=JSON['parse'](_0x492768[_0x3f02ff(0x206)]),this[_0x3f02ff(0x231)]=_0x492768[_0x3f02ff(0x231)],this['isSeparateMatrixVersions']=_0x492768[_0x3f02ff(0x263)],this[_0x3f02ff(0x239)]=_0x492768[_0x3f02ff(0x239)],this[_0x3f02ff(0x21f)]=_0x492768[_0x3f02ff(0x21f)],this['isRunPackRetryAutomatically']=!!_0x492768[_0x3f02ff(0x1df)],this['type']=_0x492768[_0x3f02ff(0x234)],this[_0x3f02ff(0x265)]=_0x492768[_0x3f02ff(0x265)],this[_0x3f02ff(0x21e)]=_0x2688b6,this[_0x3f02ff(0x25f)]=new jsForce[(_0x3f02ff(0x237))](_0x492768['authFlosum']);}async['createYamlByDataPackTypes'](){const _0x426a47=a40_0x2234d6,_0x429906=await new VlocityHelper(this[_0x426a47(0x215)],this[_0x426a47(0x1fd)],this[_0x426a47(0x21e)])[_0x426a47(0x254)]();if(!_0x429906?.['records']?.[_0x426a47(0x274)])throw new Error(_0x426a47(0x225));const _0x226007=this['nameOfComponents'][_0x426a47(0x20d)](';')[_0x426a47(0x24c)](_0x155583=>_0x155583[_0x426a47(0x228)]()),_0x3940e1=new Set(this[_0x426a47(0x206)]),_0x390057=[];for(const {VlocityDataPackType:_0x4184ad,Name:_0x22a271,VlocityDataPackDisplayLabel:_0x2bcde6,VlocityDataPackKey:_0x42dfc8}of _0x429906[_0x426a47(0x209)]){if(!_0x3940e1['has'](_0x4184ad))continue;const _0x1d7874=_0x22a271?.[_0x426a47(0x228)]()||'',_0x47f614=_0x2bcde6?.[_0x426a47(0x228)]()||'',_0xfa37ba=_0x42dfc8?.[_0x426a47(0x228)]()||'';(_0x226007[_0x426a47(0x1e9)](_0x32af95=>_0x1d7874['includes'](_0x32af95))||_0x226007['some'](_0x303536=>_0x47f614[_0x426a47(0x241)](_0x303536))||_0x226007[_0x426a47(0x1e9)](_0x3373de=>_0xfa37ba['includes'](_0x3373de)))&&_0x390057[_0x426a47(0x1ff)](_0x42dfc8);}const _0x415232=_0x426a47(0x282)+constants[_0x426a47(0x205)]+'\x0amanifest:\x0a\x20-\x20'+_0x390057[_0x426a47(0x25a)](_0x426a47(0x25b));fs[_0x426a47(0x272)](this[_0x426a47(0x256)]+'/'+constants[_0x426a47(0x1f7)],_0x415232),this[_0x426a47(0x21e)]['log']('End\x20Create\x20Job\x20File');}['createJobYamlFile'](){return new Promise((_0x3c9a05,_0x44d242)=>{const _0x34add7=a40_0x2301;try{this[_0x34add7(0x21e)]['log']('Start\x20Create\x20Job\x20File');let _0x51585a;if(this[_0x34add7(0x234)]===_0x34add7(0x1f9)&&this[_0x34add7(0x265)]?.[_0x34add7(0x274)]){_0x51585a=_0x34add7(0x282)+constants[_0x34add7(0x205)]+_0x34add7(0x1f4)+this[_0x34add7(0x265)][_0x34add7(0x25a)]('\x0a\x20-\x20'),fs['appendFileSync'](this[_0x34add7(0x256)]+'/'+constants['JOB_FILE_NAME'],_0x51585a),this[_0x34add7(0x21e)][_0x34add7(0x1f0)](_0x34add7(0x233)),_0x3c9a05();return;}if(this[_0x34add7(0x234)]===_0x34add7(0x243)){this[_0x34add7(0x218)]()[_0x34add7(0x1f8)](()=>_0x3c9a05())[_0x34add7(0x270)](_0xb39135=>{const _0xd3a2f6=_0x34add7;this[_0xd3a2f6(0x21e)][_0xd3a2f6(0x1f0)]('Error\x20Create\x20Job\x20File'),_0x44d242(_0xb39135);});return;}_0x51585a=_0x34add7(0x282)+constants[_0x34add7(0x205)]+'\x0a';if(this[_0x34add7(0x21f)]){if(this[_0x34add7(0x25d)]){if(this[_0x34add7(0x1f1)]===_0x34add7(0x224)){const _0x1d3e37=this[_0x34add7(0x25d)][_0x34add7(0x20d)]('\x0a')['filter'](_0x14ce0d=>_0x14ce0d['trim']()[_0x34add7(0x1e5)]('-'))[_0x34add7(0x24c)](_0x1bb821=>_0x1bb821['replace']('-','')[_0x34add7(0x21c)]());_0x1d3e37[_0x34add7(0x274)]?(_0x51585a+=_0x34add7(0x1dd),_0x51585a+=_0x1d3e37[_0x34add7(0x25a)](_0x34add7(0x25b)),fs['appendFileSync'](this[_0x34add7(0x256)]+'/'+constants[_0x34add7(0x1f7)],_0x51585a),this['logger']['log'](_0x34add7(0x233)),_0x3c9a05()):_0x44d242(_0x34add7(0x1e3));}if(this['searchBy']===_0x34add7(0x236))try{const _0x41903b=yaml[_0x34add7(0x247)](this[_0x34add7(0x25d)]);_0x41903b['projectPath']='./source_data',fs[_0x34add7(0x272)](this[_0x34add7(0x256)]+'/'+constants[_0x34add7(0x1f7)],yaml[_0x34add7(0x248)](_0x41903b)),_0x3c9a05(),this[_0x34add7(0x21e)][_0x34add7(0x1f0)](_0x34add7(0x233));}catch(_0x33e3ad){this[_0x34add7(0x21e)]['log']('Error\x20Create\x20Job\x20File,\x20Not\x20Valid\x20Provided\x20Yaml\x20File:\x20'+_0x33e3ad),_0x44d242(_0x33e3ad);}else _0x51585a+=_0x34add7(0x26d)+this[_0x34add7(0x22c)](),fs['appendFileSync'](this[_0x34add7(0x256)]+'/'+constants['JOB_FILE_NAME'],_0x51585a),_0x3c9a05(),this['logger']['log'](_0x34add7(0x233));}else _0x51585a+=_0x34add7(0x26d)+this[_0x34add7(0x22c)](),fs['appendFileSync'](this['projectPath']+'/'+constants[_0x34add7(0x1f7)],_0x51585a),_0x3c9a05(),this[_0x34add7(0x21e)][_0x34add7(0x1f0)](_0x34add7(0x233));}else _0x51585a+=_0x34add7(0x26d)+this[_0x34add7(0x22c)](),fs[_0x34add7(0x272)](this[_0x34add7(0x256)]+'/'+constants['JOB_FILE_NAME'],_0x51585a),_0x3c9a05(),this[_0x34add7(0x21e)][_0x34add7(0x1f0)](_0x34add7(0x233));}catch(_0x130732){this[_0x34add7(0x21e)]['log'](_0x34add7(0x223)),_0x44d242(_0x130732);}});}['getVlocityQueries'](){const _0x31e845=a40_0x2234d6,_0xc3072=Array['isArray'](this[_0x31e845(0x206)])?this[_0x31e845(0x206)]:Object[_0x31e845(0x265)](this[_0x31e845(0x206)]),_0x1828c5=[];/^ *$/[_0x31e845(0x24d)](this[_0x31e845(0x25d)])?this[_0x31e845(0x25d)]=[]:this[_0x31e845(0x25d)]=this[_0x31e845(0x25d)][_0x31e845(0x20d)](';');if(this['nameOfComponents'][_0x31e845(0x274)]){const _0x574203=this[_0x31e845(0x1f2)]?this[_0x31e845(0x25d)]['join'](_0x31e845(0x21a)):this[_0x31e845(0x25d)][_0x31e845(0x25a)]('\x27,\x27');for(const _0x44812d of _0xc3072){_0x1828c5[_0x31e845(0x1ff)](this[_0x31e845(0x27c)](_0x44812d,_0x574203));}}else for(const _0x5087ce of _0xc3072){const _0x2c786a=constants[_0x31e845(0x266)][_0x31e845(0x241)](_0x5087ce)?this[_0x31e845(0x27c)](_0x5087ce):'-\x20'+_0x5087ce;_0x1828c5['push'](_0x2c786a);}return _0x1828c5[_0x31e845(0x25a)]('\x0a');}[a40_0x2234d6(0x27c)](_0x4726e2,_0x5d636a=null){const _0x31388f=a40_0x2234d6,_0x370f97=constants[_0x31388f(0x27a)][_0x4726e2];let _0x222bb2='';if(_0x370f97){const _0x1c4c71=_0x370f97[_0x31388f(0x235)][_0x31388f(0x276)]('__c')&&!!this['vlocityNameSpacePrefix']?''+this[_0x31388f(0x1de)]+_0x370f97['objectName']:''+_0x370f97[_0x31388f(0x235)];_0x222bb2='-\x20VlocityDataPackType:\x20'+_0x4726e2+'\x0a';const _0x556029=_0x370f97[_0x31388f(0x260)]['replace'](new RegExp(constants[_0x31388f(0x25c)],'g'),this[_0x31388f(0x1de)]);this[_0x31388f(0x1f2)]?(_0x222bb2+='\x20\x20query:\x20SELECT\x20'+_0x556029+_0x31388f(0x1ee)+_0x1c4c71,_0x5d636a&&(_0x222bb2+=_0x31388f(0x214)+_0x5d636a+_0x31388f(0x257))):(_0x222bb2+=_0x31388f(0x1dc)+_0x556029+_0x31388f(0x1ee)+_0x1c4c71,_0x5d636a&&(_0x222bb2+=_0x31388f(0x227)+_0x5d636a+'\x27)'));if(_0x370f97[_0x31388f(0x278)]){const _0x7e7e92=_0x5d636a?'AND':_0x31388f(0x1d9),_0x532aae=_0x370f97[_0x31388f(0x278)][_0x31388f(0x1d3)](new RegExp(constants[_0x31388f(0x25c)],'g'),this[_0x31388f(0x1de)]);_0x222bb2+='\x20'+_0x7e7e92+'\x20'+_0x532aae+'\x0a';}else _0x222bb2+='\x0a';}return _0x222bb2;}[a40_0x2234d6(0x271)](){return new Promise((_0x588225,_0x2691ea)=>{const _0x3f4954=a40_0x2301;try{this['logger'][_0x3f4954(0x1f0)](_0x3f4954(0x1e4));const _0x87cead='vlocity',_0x5872f1=this[_0x3f4954(0x231)]?'0':'-1',_0xd0a047=['-sf.accessToken',''+this['vlocityToken'],_0x3f4954(0x27e),''+this['vlocityUrl'],_0x3f4954(0x220),''+constants[_0x3f4954(0x1f7)],_0x3f4954(0x24b),'-maxDepth',_0x5872f1];this[_0x3f4954(0x263)]&&_0xd0a047['push'](_0x3f4954(0x24a));this[_0x3f4954(0x239)]&&_0xd0a047[_0x3f4954(0x1ff)](_0x3f4954(0x23a));_0xd0a047[_0x3f4954(0x1ff)](_0x3f4954(0x210));const _0x41109e=()=>{const _0x1e02d8=_0x3f4954;http['updateAttachmentLog'](this[_0x1e02d8(0x256)],this[_0x1e02d8(0x25f)],this['attachLogId'],this[_0x1e02d8(0x21e)],![]);};this['logger'][_0x3f4954(0x1f0)](_0xd0a047['join']('\x20'));const _0x178105={'cwd':''+this[_0x3f4954(0x256)],'maxBuffer':0x400*0x1f4};childProcess['callChildProcess'](_0x87cead,_0xd0a047,this[_0x3f4954(0x21e)],_0x178105,!![],_0x41109e)[_0x3f4954(0x1f8)](_0x2a965a=>{const _0x49590d=_0x3f4954;this[_0x49590d(0x21e)][_0x49590d(0x1f0)]('End\x20Retrieve\x20Data'),_0x588225(_0x2a965a);})[_0x3f4954(0x270)](_0x2b6c36=>{const _0x264454=_0x3f4954;this[_0x264454(0x21e)][_0x264454(0x1f0)](_0x264454(0x1ef)+_0x2b6c36),_0x2691ea(_0x2b6c36);});}catch(_0xd492c7){_0x2691ea(_0xd492c7);}});}[a40_0x2234d6(0x22b)](){return new Promise((_0x534de1,_0x5e20e5)=>{const _0x48bb34=a40_0x2301;try{this[_0x48bb34(0x21e)][_0x48bb34(0x1f0)](_0x48bb34(0x1f6));let _0x45e096=0x0,_0x3cdc71=[],_0x25e8ef=0x0;const _0x32efe8=[],_0x4e504e=this[_0x48bb34(0x256)]+'/'+constants[_0x48bb34(0x205)],_0x542b39=fs['readdirSync'](_0x4e504e);for(let _0x62bc7d=0x0;_0x62bc7d<_0x542b39[_0x48bb34(0x274)];_0x62bc7d++){const _0x542ad6=_0x542b39[_0x62bc7d]===_0x48bb34(0x238)?_0x48bb34(0x242):'Name',_0x152a8d=_0x4e504e+'/'+_0x542b39[_0x62bc7d],_0x2ca2d4=fs['readdirSync'](_0x152a8d);for(let _0x343fcc=0x0;_0x343fcc<_0x2ca2d4[_0x48bb34(0x274)];_0x343fcc++){const _0x30cd34=_0x542b39[_0x62bc7d]+'/'+_0x2ca2d4[_0x343fcc];let _0x454ff7=_0x2ca2d4[_0x343fcc];const _0x5ea640=[],_0x12b504=_0x4e504e+'/'+_0x542b39[_0x62bc7d]+'/'+_0x2ca2d4[_0x343fcc],_0x1f41cc=fs[_0x48bb34(0x26e)](_0x12b504);_0x1f41cc[_0x48bb34(0x1f5)](_0x33d010=>{const _0x1bd3ca=_0x48bb34;try{_0x33d010[_0x1bd3ca(0x1e0)]()[_0x1bd3ca(0x276)](_0x1bd3ca(0x275))&&(_0x454ff7=JSON['parse'](fs[_0x1bd3ca(0x255)](_0x12b504+'/'+_0x33d010)[_0x1bd3ca(0x1e0)]())[_0x542ad6]);}catch(_0x451e59){this[_0x1bd3ca(0x21e)][_0x1bd3ca(0x1f0)]('Error\x20parse\x20component\x20'+_0x33d010);}!_0x454ff7&&(_0x454ff7=undefined),fs['lstatSync'](_0x12b504+'/'+_0x33d010['toString']())[_0x1bd3ca(0x211)]()&&_0x5ea640[_0x1bd3ca(0x1ff)](...this[_0x1bd3ca(0x23c)](_0x12b504,_0x33d010));});const _0x551f8f=new AdmZip();_0x551f8f[_0x48bb34(0x269)](_0x12b504,_0x542b39[_0x62bc7d]+'/'+_0x2ca2d4[_0x343fcc]);const _0x15b662=_0x551f8f[_0x48bb34(0x1fa)](),_0x16f180=crc32['buf'](_0x15b662),_0x3b46c0=_0x15b662[_0x48bb34(0x1e0)]('base64'),_0x34912e={'fileName':_0x454ff7,'name':_0x2ca2d4[_0x343fcc],'type':_0x542b39[_0x62bc7d],'label':_0x30cd34,'crc':_0x16f180,'base64':_0x3b46c0,'snapshotId':this[_0x48bb34(0x277)],'subItemList':JSON['stringify'](_0x5ea640)},_0x5ab9a1=_0x15b662[_0x48bb34(0x274)]/0xf4240,_0x5ab18f=!!(_0x2ca2d4[_0x48bb34(0x274)]-0x1===_0x343fcc&&_0x542b39[_0x48bb34(0x274)]-0x1===_0x62bc7d);_0x45e096+=_0x5ab9a1,_0x45e096>0x2||_0x3cdc71>0xfa0?(_0x32efe8[_0x48bb34(0x1ff)](_0x3cdc71),_0x5ab9a1<0x3?(_0x3cdc71=[_0x34912e],_0x25e8ef++,_0x45e096=_0x5ab9a1):(this[_0x48bb34(0x21e)]['log']('Cannot\x20retrieve\x20component\x20'+_0x30cd34+_0x48bb34(0x208),!![]),_0x45e096=0x0)):(_0x3cdc71['push'](_0x34912e),_0x25e8ef++),_0x5ab18f&&_0x32efe8[_0x48bb34(0x1ff)](_0x3cdc71);}}this[_0x48bb34(0x21e)][_0x48bb34(0x1f0)](_0x48bb34(0x268)),_0x534de1({'iteratorDeploy':_0x32efe8[Symbol[_0x48bb34(0x212)]](),'count':_0x25e8ef});}catch(_0x2a8d68){this['logger'][_0x48bb34(0x1f0)]('Error\x20Prepare\x20Data\x20For\x20Deploy'),_0x5e20e5(_0x2a8d68);}});}[a40_0x2234d6(0x23c)](_0x16eb43,_0x337c4c,_0x3786d5='',_0x40843f=[]){const _0x2b971c=a40_0x2234d6;_0x3786d5[_0x2b971c(0x274)]&&(_0x3786d5='/'+_0x3786d5);const _0x46a4cc=fs[_0x2b971c(0x26e)](_0x16eb43+'/'+_0x337c4c+_0x3786d5);return _0x46a4cc[_0x2b971c(0x1f5)](_0xa9bf0b=>{const _0x38c586=_0x2b971c;!fs[_0x38c586(0x267)](_0x16eb43+'/'+_0x337c4c+_0x3786d5+'/'+_0xa9bf0b[_0x38c586(0x1e0)]())[_0x38c586(0x211)]()?_0x40843f[_0x38c586(0x1ff)](''+_0x337c4c+_0x3786d5+'/'+_0xa9bf0b[_0x38c586(0x1e0)]()):this['findSubItems'](_0x16eb43,_0x337c4c,_0xa9bf0b,_0x40843f);}),_0x40843f;}[a40_0x2234d6(0x261)](_0x16f38f,_0x3bd24e='',_0x2bb351=[]){const _0x16a46d=a40_0x2234d6,_0x1756d7=fs[_0x16a46d(0x26e)](_0x16f38f,{'withFileTypes':!![]});return _0x1756d7[_0x16a46d(0x1f5)](_0x5b5d73=>{const _0x46d48b=_0x16a46d,_0x295941=resolve(_0x16f38f,_0x5b5d73[_0x46d48b(0x213)]);if(_0x5b5d73[_0x46d48b(0x211)]()){const _0x2abbd0=_0x3bd24e[_0x46d48b(0x274)]?_0x3bd24e+'/'+_0x5b5d73[_0x46d48b(0x213)]:_0x5b5d73[_0x46d48b(0x213)];this[_0x46d48b(0x261)](_0x295941,_0x2abbd0,_0x2bb351);}else{let _0x5b7d6e;_0x3bd24e[_0x46d48b(0x274)]?_0x5b7d6e=_0x3bd24e+'/'+_0x5b5d73[_0x46d48b(0x213)]:_0x5b7d6e=_0x5b5d73[_0x46d48b(0x213)],_0x2bb351[_0x46d48b(0x1ff)](_0x5b7d6e);}}),_0x2bb351;}[a40_0x2234d6(0x27f)](_0x543189){return new Promise((_0x4b1ef8,_0x1bb439)=>{const _0x10f52e=a40_0x2301;try{this[_0x10f52e(0x21e)][_0x10f52e(0x1f0)](_0x10f52e(0x1f3)),this['nextChunk'](_0x543189)[_0x10f52e(0x1f8)](()=>{this['logger']['log']('End\x20Deploy\x20Components'),_0x4b1ef8();})[_0x10f52e(0x270)](_0x104a3c=>{const _0x3c8009=_0x10f52e;this[_0x3c8009(0x21e)][_0x3c8009(0x1f0)](_0x3c8009(0x262)+_0x104a3c),_0x1bb439(_0x104a3c);});}catch(_0x1766b5){_0x1bb439(_0x1766b5);}});}[a40_0x2234d6(0x1da)](_0x3a25da,_0x3477dd=0x0){return new Promise((_0x14fc29,_0x43d491)=>{const _0x13b35f=a40_0x2301;try{const _0x2a75b0=_0x3a25da['iteratorDeploy'][_0x13b35f(0x1fe)]();_0x2a75b0[_0x13b35f(0x1d6)]?_0x14fc29():this['deploy'](_0x3a25da,_0x2a75b0,_0x3477dd)['then'](()=>_0x14fc29())[_0x13b35f(0x270)](_0x336431=>_0x43d491(_0x336431));}catch(_0x1a6fea){_0x43d491(_0x1a6fea);}});}[a40_0x2234d6(0x22f)](_0x55fe7b,_0x37dd46,_0x5706cd=0x0){return new Promise((_0x541fc1,_0x24abfc)=>{const _0x339502=a40_0x2301;try{const _0xa8155e=this['nameSpacePrefix']===''?'/SnapshotVlocity/':_0x339502(0x217),_0x4dacfd={'items':_0x37dd46['value']};this[_0x339502(0x25f)][_0x339502(0x279)][_0x339502(0x20b)](_0xa8155e,_0x4dacfd)[_0x339502(0x1f8)](()=>{const _0x1c72dd=_0x339502;return _0x5706cd+=_0x37dd46[_0x1c72dd(0x1fc)]['length'],this['logger']['log'](_0x1c72dd(0x21d)+_0x5706cd+_0x1c72dd(0x1e2)+_0x55fe7b[_0x1c72dd(0x253)]),Promise[_0x1c72dd(0x1e8)]();})[_0x339502(0x270)](_0x201166=>{const _0x5d2914=_0x339502;return this[_0x5d2914(0x21e)]['log'](_0x5d2914(0x1d8)+_0x201166),Promise[_0x5d2914(0x1e8)]();})[_0x339502(0x1f8)](()=>this['nextChunk'](_0x55fe7b,_0x5706cd))[_0x339502(0x1f8)](_0x541fc1)[_0x339502(0x270)](_0x24abfc);}catch(_0x30b96f){_0x24abfc(_0x30b96f);}});}['createVlocityTempZip'](){return new Promise(_0x31915a=>{const _0x33ff3a=a40_0x2301;try{this[_0x33ff3a(0x21e)][_0x33ff3a(0x1f0)]('Start\x20Create\x20Vlocity\x20Temp\x20Zip');const _0x13ba10=this[_0x33ff3a(0x256)]+'/'+constants[_0x33ff3a(0x20e)];if(fs[_0x33ff3a(0x219)](_0x13ba10)){const _0x1a6cf7=_0x13ba10+_0x33ff3a(0x250);if(this[_0x33ff3a(0x21e)][_0x33ff3a(0x1d2)][_0x33ff3a(0x274)]&&fs['existsSync'](_0x1a6cf7)){const _0x5af02e=fs[_0x33ff3a(0x26e)](_0x1a6cf7);if(_0x5af02e&&_0x5af02e[_0x33ff3a(0x274)]){const _0x215122=_0x5af02e[0x0];if(_0x215122[_0x33ff3a(0x241)](_0x33ff3a(0x27d))&&_0x215122[_0x33ff3a(0x241)](_0x33ff3a(0x24f))){const _0x3b6d72=_0x33ff3a(0x203)+JSON[_0x33ff3a(0x1d5)](this[_0x33ff3a(0x21e)]['errors']);fs[_0x33ff3a(0x272)]('./'+_0x1a6cf7+'/'+_0x215122,_0x3b6d72);}}}const _0x1f3594=new AdmZip();_0x1f3594[_0x33ff3a(0x269)](_0x13ba10,constants[_0x33ff3a(0x20e)]),_0x31915a(_0x1f3594[_0x33ff3a(0x1fa)]()[_0x33ff3a(0x1e0)](_0x33ff3a(0x244))),this['logger'][_0x33ff3a(0x1f0)](_0x33ff3a(0x202));}else this['logger'][_0x33ff3a(0x1f0)](_0x33ff3a(0x22e)),_0x31915a();}catch(_0x1d188e){this[_0x33ff3a(0x21e)][_0x33ff3a(0x1f0)](_0x33ff3a(0x252)+_0x1d188e),_0x31915a();}});}['sendVlocityTemp'](_0x24e716){return new Promise((_0x357df2,_0x4823b2)=>{const _0x29773b=a40_0x2301;try{this['logger'][_0x29773b(0x1f0)]('Start\x20Send\x20Vlocity\x20Temp');const _0x26edc6={'Name':_0x29773b(0x20f),'ContentType':_0x29773b(0x1e1),'Description':_0x29773b(0x20f),'ParentId':this[_0x29773b(0x277)],'Body':_0x24e716};this[_0x29773b(0x25f)][_0x29773b(0x221)](_0x29773b(0x1ea))[_0x29773b(0x26b)](_0x26edc6)[_0x29773b(0x1f8)](()=>{const _0x906850=_0x29773b;this['logger'][_0x906850(0x1f0)](_0x906850(0x22a)),_0x357df2();})[_0x29773b(0x270)](_0x1a4f0b=>{const _0x1fdc9f=_0x29773b;this['logger'][_0x1fdc9f(0x1f0)](_0x1fdc9f(0x284)+_0x1a4f0b),_0x4823b2(_0x1a4f0b);});}catch(_0x580cac){this['logger'][_0x29773b(0x1f0)]('Error\x20Send\x20Vlocity\x20Temp\x20Zip\x20'+_0x580cac),_0x4823b2(_0x580cac);}});}[a40_0x2234d6(0x222)](){return new Promise(_0x16f87f=>{const _0x282266=a40_0x2301;try{if(fs[_0x282266(0x219)](this[_0x282266(0x256)]+'/'+constants[_0x282266(0x240)])){const _0x2a693d=yaml[_0x282266(0x247)](fs['readFileSync'](this[_0x282266(0x256)]+'/'+constants['NAME_LOGS_FILE'],_0x282266(0x280)));_0x2a693d[_0x282266(0x264)]&&_0x2a693d[_0x282266(0x264)]['length']?(this[_0x282266(0x21e)]['log'](_0x282266(0x283)+_0x2a693d[_0x282266(0x264)]['join']('\x0a')),_0x16f87f(!![])):_0x16f87f(![]);}else _0x16f87f(![]);}catch(_0xd2bba7){_0x16f87f(![]);}});}[a40_0x2234d6(0x204)](_0x480546,_0x54768a=![]){return new Promise((_0x3dda45,_0x1684f4)=>{const _0x1b9d3e=a40_0x2301;try{Promise[_0x1b9d3e(0x1e8)]()['then'](()=>this[_0x1b9d3e(0x20c)]())['then'](_0xc8df8f=>{const _0x2dc2d2=_0x1b9d3e;if(_0xc8df8f)return this[_0x2dc2d2(0x1d4)](_0xc8df8f);return Promise['resolve']();})[_0x1b9d3e(0x1f8)](()=>http[_0x1b9d3e(0x246)](this[_0x1b9d3e(0x256)],this[_0x1b9d3e(0x25f)],this[_0x1b9d3e(0x1db)],this[_0x1b9d3e(0x21e)],_0x54768a,!![]))['then'](_0x46c597=>{const _0x1bec6b=_0x1b9d3e;return _0x54768a=_0x46c597,http[_0x1bec6b(0x1e7)](this[_0x1bec6b(0x25f)],this[_0x1bec6b(0x232)],this[_0x1bec6b(0x249)],_0x480546,this['logger'],_0x46c597);})[_0x1b9d3e(0x1f8)](()=>this['callUpdateSnapshot'](_0x54768a));}catch(_0x358da8){_0x1684f4(_0x358da8);}});}[a40_0x2234d6(0x27b)](_0x1be218){return new Promise((_0x3d51fa,_0x1a214d)=>{const _0x43810f=a40_0x2301;try{this['logger'][_0x43810f(0x1f0)](_0x43810f(0x1d7));const _0xc5b617={'Id':this[_0x43810f(0x277)],[this[_0x43810f(0x249)]+'Is_Completed__c']:!![],[this[_0x43810f(0x249)]+_0x43810f(0x258)]:_0x1be218};this[_0x43810f(0x25f)][_0x43810f(0x221)](this[_0x43810f(0x249)]+_0x43810f(0x200))[_0x43810f(0x23e)](_0xc5b617)['then'](()=>{const _0x34bc78=_0x43810f;this[_0x34bc78(0x21e)]['log'](_0x34bc78(0x26c)),_0x3d51fa(_0xc5b617[this['nameSpacePrefix']+_0x34bc78(0x258)]);})[_0x43810f(0x270)](_0xe25d71=>{this['logger']['log']('Error\x20Update\x20Snapshot'),_0x1a214d(_0xe25d71);});}catch(_0x2af383){this[_0x43810f(0x21e)][_0x43810f(0x1f0)]('Error\x20Update\x20Snapshot'),_0x1a214d(_0x2af383);}});}}function createZip(_0x3076af,_0x2587f4){const _0x527954=a40_0x2234d6,_0x30da0d=new AdmZip(),_0x464373=this[_0x527954(0x261)](_0x3076af);return _0x464373[_0x527954(0x1f5)](_0x4f1034=>{const _0x346eb9=_0x527954;if(Array['isArray'](_0x4f1034))_0x4f1034[_0x346eb9(0x1f5)](_0x41d0d3=>{const _0x190cfd=_0x346eb9,_0x2bb9db=fs[_0x190cfd(0x255)](_0x3076af+'/'+_0x41d0d3,_0x190cfd(0x280));_0x30da0d[_0x190cfd(0x216)](_0x2587f4+'/'+_0x41d0d3,Buffer[_0x190cfd(0x281)](_0x2bb9db));});else{const _0x356a12=fs[_0x346eb9(0x255)](_0x3076af+'/'+_0x4f1034,_0x346eb9(0x280));_0x30da0d[_0x346eb9(0x216)](_0x2587f4+'/'+_0x4f1034,Buffer[_0x346eb9(0x281)](_0x356a12));}}),_0x30da0d[_0x527954(0x1fa)]();}function a40_0x51a5(){const _0x53c3aa=['includes','Title','types','base64','3672042xWHjZG','updateAttachmentLog','load','dump','nameSpacePrefix','-separateMatrixVersions','-autoRetryErrors','map','test','path','-Export.yaml','/logs','3457059roUGhE','Error\x20Create\x20Vlocity\x20Temp\x20Zip\x20','count','getAvailableToExport','readFileSync','projectPath','%\x27)','Is_Error__c','authFlosum','join','\x0a\x20-\x20','VLOCITY_NAMESPACE_PREFIX_CODE','nameOfComponents','authVlosityOrg','jsForceConnection','fields','readFiles','Error\x20Deploy\x20Components\x20','isSeparateMatrixVersions','Errors','keys','UNSUPPORTED_BY_DEFAULT_LIST','lstatSync','End\x20Prepare\x20Data\x20For\x20Deploy','addLocalFolder','../../../services/vlocity','create','End\x20Update\x20Snapshot','queries:\x0a','readdirSync','../../../services/child-process','catch','retrieveData','appendFileSync','flosumToken','length','_DataPack.json','endsWith','snapshotId','query','apex','DATA_PACK_TYPES_QUERIES_MAP','callUpdateSnapshot','createQuery','job-yaml-','-sf.instanceUrl','deployComponents','utf8','from','projectPath:\x20./','Errors\x20found,\x20start\x20pack\x20retry\x20command\x20\x0a','Error\x20Send\x20Vlocity\x20Temp\x20Zip\x20','errors','replace','sendVlocityTemp','stringify','done','Start\x20Update\x20Snapshot','Error\x20deploy\x20chunk\x20','WHERE','nextChunk','attachLogId','\x20\x20query:\x20SELECT\x20','manifest:\x0a\x20-\x20','vlocityNameSpacePrefix','isRunPackRetryAutomatically','toString','application/zip','\x20from\x20','Error,\x20Components\x20not\x20found','Start\x20Retrieve\x20Data','startsWith','jsforce','callUpdateLog','resolve','some','Attachment','11824280aSHZWQ','2DICQgK','7524380xXMpGp','\x20FROM\x20','Error\x20Retrieve\x20Data\x20','log','searchBy','isLikeSearch','Start\x20Deploy\x20Components','\x0amanifest:\x0a\x20-\x20','forEach','Start\x20Prepare\x20Data\x20For\x20Deploy','JOB_FILE_NAME','then','selective','toBuffer','instanceUrl','value','vlocityUrl','next','push','Snapshot_Vlocity__c','7359YKQrEM','End\x20Create\x20Vlocity\x20Temp\x20Zip','FlosumErrors:\x20','completeDeployment','UNZIP_CATALOG_NAME','selectedDataPackTypes','3851019zzeupr',',\x20size\x20more\x20then\x203mb.','records','7PwYnoD','post','createVlocityTempZip','split','VLOCITY_TEMP_CATALOG','Vlocity\x20Temp','packExport','isDirectory','iterator','name','\x20WHERE\x20(Name\x20LIKE\x20\x27%','vlocityToken','addFile','/Flosum/SnapshotVlocity/','createYamlByDataPackTypes','existsSync','%\x27\x20OR\x20Name\x20LIKE\x20\x27%','js-yaml','trim','Deployed\x20','logger','isAfterUpdateSearchByKey','-job','sobject','checkErrors','Error\x20Create\x20Job\x20File','key','Records\x20to\x20export\x20not\x20a\x20found','../../../constants','\x20WHERE\x20Name\x20IN\x20(\x27','toLowerCase','361263CEezdf','End\x20Send\x20Vlocity\x20Temp','prepareDataForDeploy','getVlocityQueries','crc-32','Error\x20Create\x20Vlocity\x20Temp\x20Zip,\x20Vlocity\x20Temp\x20not\x20found','deploy','4bqexAX','isNotIncludeDependencies','logId','End\x20Create\x20Job\x20File','type','objectName','yaml','Connection','ContentVersion','isSeparateCalculationProcedureVersions','-separateCalculationProcedureVersions','accessToken','findSubItems','adm-zip','update','13210tYiviT','NAME_LOGS_FILE'];a40_0x51a5=function(){return _0x53c3aa;};return a40_0x51a5();}module['exports']={'RetrieveHelper':RetrieveHelper};