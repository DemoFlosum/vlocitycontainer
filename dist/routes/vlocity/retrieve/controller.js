const a31_0x37bba2=a31_0x464e;function a31_0x464e(_0x56018e,_0x2bedba){const _0x3750f5=a31_0x3750();return a31_0x464e=function(_0x464e47,_0xc3bb19){_0x464e47=_0x464e47-0x90;let _0x474ca5=_0x3750f5[_0x464e47];return _0x474ca5;},a31_0x464e(_0x56018e,_0x2bedba);}(function(_0x3170c6,_0xe8b92){const _0x5dac70=a31_0x464e,_0x6c5ff1=_0x3170c6();while(!![]){try{const _0x4d6ce9=parseInt(_0x5dac70(0x9c))/0x1*(-parseInt(_0x5dac70(0xb8))/0x2)+-parseInt(_0x5dac70(0xaf))/0x3*(parseInt(_0x5dac70(0x9e))/0x4)+parseInt(_0x5dac70(0xa6))/0x5*(-parseInt(_0x5dac70(0x9a))/0x6)+parseInt(_0x5dac70(0xb4))/0x7*(-parseInt(_0x5dac70(0x9d))/0x8)+-parseInt(_0x5dac70(0x91))/0x9+-parseInt(_0x5dac70(0xbd))/0xa+-parseInt(_0x5dac70(0xb0))/0xb*(-parseInt(_0x5dac70(0x94))/0xc);if(_0x4d6ce9===_0xe8b92)break;else _0x6c5ff1['push'](_0x6c5ff1['shift']());}catch(_0x46786b){_0x6c5ff1['push'](_0x6c5ff1['shift']());}}}(a31_0x3750,0x9a1ae));const fs=require('fs'),path=require(a31_0x37bba2(0xab)),{RetrieveHelper}=require(a31_0x37bba2(0xa0)),http=require('../../../services/http'),storage=require(a31_0x37bba2(0xbc)),packRetry=require(a31_0x37bba2(0x97)),constants=require(a31_0x37bba2(0xb5)),{pathConfig}=require(a31_0x37bba2(0x96));function a31_0x3750(){const _0x57d3fe=['rmdirSync','./helper','existsSync','createProjectDirectory','accessToken','snapshotId','checkExistComponents','140CxFuXR','then','catch','isRunPackRetryAutomatically','authFlosum','path','Retrieval\x20(SFI)\x20started:\x20','completeDeployment','attachLogId','1160556LXfmhO','1640573ATJRVw','log','logId','instanceUrl','8024947fRxHOK','../../../constants','Snapshot\x20has\x20errors,\x20Start\x20PackRetry\x20command:','PackRetry','1149734gYbcWT','---\x20body','tmpPath','SOURCE_FOLDER','../../../services/storage','5699220mNzSgH','join','prepareDataForDeploy','1372347LbNCPo','resolve','getTime','348eLnuFS','checkErrors','../../../config/path','../pack-retry/controller','removeProject','timestamp','19218FZHSvR','packRetry','1AKCtSN','8YDrFiB','12PHlHKq'];a31_0x3750=function(){return _0x57d3fe;};return a31_0x3750();}function retrieve(_0x21e201,_0x1ee584){return new Promise((_0x1e8bde,_0x35a59e)=>{const _0x249826=a31_0x464e;try{console['log'](_0x249826(0xb9)),console[_0x249826(0xb1)](_0x21e201),_0x1ee584[_0x249826(0xb1)](_0x249826(0xac)+http[_0x249826(0x93)]());const _0xe3c9f3=new Date()['valueOf'](),_0x405e14=_0x21e201['snapshotType']+'_'+_0xe3c9f3+'_'+_0x21e201[_0x249826(0xb2)],_0x50eb66=path[_0x249826(0xbe)](pathConfig[_0x249826(0xba)],_0x405e14),_0x3df12b=new RetrieveHelper(_0x50eb66,_0x21e201,_0x1ee584);Promise['resolve']()[_0x249826(0xa7)](()=>storage[_0x249826(0xa2)](_0x50eb66))[_0x249826(0xa7)](()=>_0x3df12b['createJobYamlFile']())[_0x249826(0xa7)](()=>_0x3df12b['retrieveData']())[_0x249826(0xa7)](()=>storage[_0x249826(0xa5)](_0x50eb66,_0x1ee584))[_0x249826(0xa7)](_0x292380=>{const _0x2887ec=_0x249826;if(_0x292380)return _0x3df12b[_0x2887ec(0x90)]()[_0x2887ec(0xa7)](_0x124b17=>_0x3df12b['deployComponents'](_0x124b17));return Promise[_0x2887ec(0x92)]();})[_0x249826(0xa7)](()=>{const _0x395133=_0x249826;if(_0x21e201[_0x395133(0xa9)])return _0x3df12b[_0x395133(0x95)](_0x50eb66,_0x1ee584);return Promise[_0x395133(0x92)](![]);})[_0x249826(0xa7)](_0x5de5d7=>{const _0x5f3728=_0x249826;if(_0x21e201['isRunPackRetryAutomatically']&&_0x5de5d7){_0x1ee584[_0x5f3728(0xb1)](_0x5f3728(0xb6));const _0x5ac77c={'flosumUrl':_0x21e201[_0x5f3728(0xaa)][_0x5f3728(0xb3)],'flosumToken':_0x21e201['authFlosum'][_0x5f3728(0xa3)],'vlocityUrl':_0x21e201['authVlosityOrg'][_0x5f3728(0xb3)],'vlocityToken':_0x21e201['authVlosityOrg'][_0x5f3728(0xa3)],'logId':_0x21e201[_0x5f3728(0xb2)],'attachLogId':_0x21e201[_0x5f3728(0xae)],'timestamp':_0x21e201[_0x5f3728(0x99)],'nameSpacePrefix':_0x21e201['nameSpacePrefix'],'snapshotType':_0x5f3728(0xb7),'snapshotId':_0x21e201[_0x5f3728(0xa4)],'projectName':_0x405e14};return fs[_0x5f3728(0xa1)](_0x50eb66+'/'+constants['SOURCE_FOLDER'])&&fs[_0x5f3728(0x9f)](_0x50eb66+'/'+constants[_0x5f3728(0xbb)],{'recursive':!![]}),packRetry[_0x5f3728(0x9b)](_0x5ac77c,_0x1ee584);}return Promise[_0x5f3728(0x92)]();})[_0x249826(0xa7)](()=>_0x3df12b[_0x249826(0xad)](!![]))[_0x249826(0xa8)](_0x54f126=>{const _0xea5237=_0x249826;_0x3df12b[_0xea5237(0xad)](!![],!![])[_0xea5237(0xa7)](()=>_0x35a59e(_0x54f126))[_0xea5237(0xa8)](_0x347cf3=>_0x35a59e(_0x54f126+'\x0a'+_0x347cf3));})[_0x249826(0xa7)](()=>storage[_0x249826(0x98)](_0x50eb66,_0x1ee584));}catch(_0x490f8e){_0x35a59e(_0x490f8e);}});}module['exports']={'retrieve':retrieve};