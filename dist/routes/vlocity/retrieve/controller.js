const a39_0x378019=a39_0x1da6;(function(_0x203daf,_0x4e8d97){const _0x2a54a5=a39_0x1da6,_0x1eeefb=_0x203daf();while(!![]){try{const _0x1985ba=-parseInt(_0x2a54a5(0xdc))/0x1*(-parseInt(_0x2a54a5(0xf2))/0x2)+-parseInt(_0x2a54a5(0xff))/0x3+-parseInt(_0x2a54a5(0xe4))/0x4+-parseInt(_0x2a54a5(0xe0))/0x5*(parseInt(_0x2a54a5(0xf6))/0x6)+-parseInt(_0x2a54a5(0xdf))/0x7*(parseInt(_0x2a54a5(0xea))/0x8)+parseInt(_0x2a54a5(0xe1))/0x9*(parseInt(_0x2a54a5(0xe2))/0xa)+parseInt(_0x2a54a5(0xf8))/0xb;if(_0x1985ba===_0x4e8d97)break;else _0x1eeefb['push'](_0x1eeefb['shift']());}catch(_0x5287b5){_0x1eeefb['push'](_0x1eeefb['shift']());}}}(a39_0x3227,0xd30b3));const fs=require('fs'),path=require(a39_0x378019(0x101)),{RetrieveHelper}=require(a39_0x378019(0xe8)),http=require('../../../services/http'),storage=require(a39_0x378019(0xfe)),packRetry=require(a39_0x378019(0xee)),constants=require('../../../constants'),{pathConfig}=require(a39_0x378019(0xe7));function a39_0x1da6(_0x24e445,_0x8d89c6){const _0x322766=a39_0x3227();return a39_0x1da6=function(_0x1da6e1,_0x1bfc86){_0x1da6e1=_0x1da6e1-0xdc;let _0x6cb51e=_0x322766[_0x1da6e1];return _0x6cb51e;},a39_0x1da6(_0x24e445,_0x8d89c6);}function a39_0x3227(){const _0x5961ed=['catch','prepareDataForDeploy','nameSpacePrefix','491398YEoJyr','tmpPath','accessToken','rmdirSync','1582032EROvJf','createJobYamlFile','31576149HrWdQY','log','---\x20body','removeProject','resolve','logId','../../../services/storage','2018208ShQGmB','isRunPackRetryAutomatically','path','authFlosum','timestamp','packRetry','snapshotType','instanceUrl','existsSync','checkExistComponents','attachLogId','snapshotId','6QfTMYP','join','then','12083393jGJIgE','5FvlaWu','108rFhniA','470480cZuBuN','completeDeployment','5529148yzVqYq','checkErrors','getTime','../../../config/path','./helper','exports','8bdNYWY','SOURCE_FOLDER','valueOf','Retrieval\x20(SFI)\x20started:\x20','../pack-retry/controller'];a39_0x3227=function(){return _0x5961ed;};return a39_0x3227();}function retrieve(_0x3ff3f8,_0x1287e9){return new Promise((_0x4ed27c,_0x398da8)=>{const _0x588a6c=a39_0x1da6;try{console[_0x588a6c(0xf9)](_0x588a6c(0xfa)),console[_0x588a6c(0xf9)](_0x3ff3f8),_0x1287e9[_0x588a6c(0xf9)](_0x588a6c(0xed)+http[_0x588a6c(0xe6)]());const _0x589a49=new Date()[_0x588a6c(0xec)](),_0xb18319=_0x3ff3f8[_0x588a6c(0x105)]+'_'+_0x589a49+'_'+_0x3ff3f8['logId'],_0xa6d1b6=path[_0x588a6c(0xdd)](pathConfig[_0x588a6c(0xf3)],_0xb18319),_0x319d75=new RetrieveHelper(_0xa6d1b6,_0x3ff3f8,_0x1287e9);Promise[_0x588a6c(0xfc)]()['then'](()=>storage['createProjectDirectory'](_0xa6d1b6))['then'](()=>_0x319d75[_0x588a6c(0xf7)]())[_0x588a6c(0xde)](()=>_0x319d75['retrieveData']())[_0x588a6c(0xde)](()=>storage[_0x588a6c(0x108)](_0xa6d1b6,_0x1287e9))[_0x588a6c(0xde)](_0x50c986=>{const _0x4ae180=_0x588a6c;if(_0x50c986)return _0x319d75[_0x4ae180(0xf0)]()['then'](_0x594894=>_0x319d75['deployComponents'](_0x594894));return Promise[_0x4ae180(0xfc)]();})[_0x588a6c(0xde)](()=>{const _0x4b9ac7=_0x588a6c;if(_0x3ff3f8[_0x4b9ac7(0x100)])return _0x319d75[_0x4b9ac7(0xe5)](_0xa6d1b6,_0x1287e9);return Promise[_0x4b9ac7(0xfc)](![]);})[_0x588a6c(0xde)](_0x4498b4=>{const _0x15d2c1=_0x588a6c;if(_0x3ff3f8[_0x15d2c1(0x100)]&&_0x4498b4){_0x1287e9[_0x15d2c1(0xf9)]('Snapshot\x20has\x20errors,\x20Start\x20PackRetry\x20command:');const _0x25a620={'flosumUrl':_0x3ff3f8[_0x15d2c1(0x102)][_0x15d2c1(0x106)],'flosumToken':_0x3ff3f8[_0x15d2c1(0x102)]['accessToken'],'vlocityUrl':_0x3ff3f8['authVlosityOrg'][_0x15d2c1(0x106)],'vlocityToken':_0x3ff3f8['authVlosityOrg'][_0x15d2c1(0xf4)],'logId':_0x3ff3f8[_0x15d2c1(0xfd)],'attachLogId':_0x3ff3f8[_0x15d2c1(0x109)],'timestamp':_0x3ff3f8[_0x15d2c1(0x103)],'nameSpacePrefix':_0x3ff3f8[_0x15d2c1(0xf1)],'snapshotType':'PackRetry','snapshotId':_0x3ff3f8[_0x15d2c1(0x10a)],'projectName':_0xb18319};return fs[_0x15d2c1(0x107)](_0xa6d1b6+'/'+constants[_0x15d2c1(0xeb)])&&fs[_0x15d2c1(0xf5)](_0xa6d1b6+'/'+constants['SOURCE_FOLDER'],{'recursive':!![]}),packRetry[_0x15d2c1(0x104)](_0x25a620,_0x1287e9);}return Promise['resolve']();})[_0x588a6c(0xde)](()=>_0x319d75[_0x588a6c(0xe3)](!![]))[_0x588a6c(0xef)](_0x50edb3=>{const _0x35a37c=_0x588a6c;_0x319d75[_0x35a37c(0xe3)](!![],!![])[_0x35a37c(0xde)](()=>_0x398da8(_0x50edb3))[_0x35a37c(0xef)](_0x51947f=>_0x398da8(_0x50edb3+'\x0a'+_0x51947f));})[_0x588a6c(0xde)](()=>storage[_0x588a6c(0xfb)](_0xa6d1b6,_0x1287e9));}catch(_0x1b0827){_0x398da8(_0x1b0827);}});}module[a39_0x378019(0xe9)]={'retrieve':retrieve};