const _0x168e79=_0x38dd;(function(_0x230e6c,_0x4a4d17){const _0x15b00d=_0x38dd,_0x1ebc94=_0x230e6c();while(!![]){try{const _0x19a21e=-parseInt(_0x15b00d(0xe1))/0x1*(-parseInt(_0x15b00d(0xd2))/0x2)+-parseInt(_0x15b00d(0xdd))/0x3*(parseInt(_0x15b00d(0xdc))/0x4)+parseInt(_0x15b00d(0xcf))/0x5*(parseInt(_0x15b00d(0xd8))/0x6)+-parseInt(_0x15b00d(0xbb))/0x7+-parseInt(_0x15b00d(0xe7))/0x8+parseInt(_0x15b00d(0xe2))/0x9*(-parseInt(_0x15b00d(0xc5))/0xa)+parseInt(_0x15b00d(0xe5))/0xb;if(_0x19a21e===_0x4a4d17)break;else _0x1ebc94['push'](_0x1ebc94['shift']());}catch(_0x31a058){_0x1ebc94['push'](_0x1ebc94['shift']());}}}(_0x6cf7,0xd3144));const jsForce=require('jsforce'),fs=require('fs'),helper=require('./helper'),http=require(_0x168e79(0xbe)),storage=require(_0x168e79(0xd4)),packRetry=require(_0x168e79(0xc6)),constants=require(_0x168e79(0xc8));function retrieve(_0x1869ad,_0x42426a){return new Promise((_0x4420ee,_0x5de996)=>{const _0x2ef4b5=_0x38dd;try{console[_0x2ef4b5(0xce)](_0x2ef4b5(0xe6)),console[_0x2ef4b5(0xce)](_0x1869ad),_0x42426a[_0x2ef4b5(0xce)]('Retrieval\x20(SFI)\x20started:\x20'+http[_0x2ef4b5(0xdb)]());const _0x2fbb04=new Date()['valueOf'](),_0x5997d4=_0x1869ad[_0x2ef4b5(0xdf)][_0x2ef4b5(0xd5)],_0x391db8=_0x1869ad[_0x2ef4b5(0xdf)][_0x2ef4b5(0xd3)],_0x26d12f=_0x1869ad[_0x2ef4b5(0xc2)][_0x2ef4b5(0xd5)],_0x8cbb96=_0x1869ad['authVlosityOrg'][_0x2ef4b5(0xd3)],_0x14397c=_0x1869ad[_0x2ef4b5(0xd0)],_0x1d73e3=_0x1869ad[_0x2ef4b5(0xe4)],_0x3b2e84=_0x1869ad[_0x2ef4b5(0xe9)]+'_'+_0x2fbb04+'_'+_0x1869ad[_0x2ef4b5(0xd0)],_0x55a148=_0x1869ad[_0x2ef4b5(0xdf)],_0x5f16c1=_0x1869ad[_0x2ef4b5(0xda)],_0x23074a=_0x1869ad[_0x2ef4b5(0xcb)],_0x4c9d05=_0x1869ad[_0x2ef4b5(0xde)],_0x2c0ce8=_0x1869ad[_0x2ef4b5(0xc9)],_0x562d13=_0x1869ad[_0x2ef4b5(0xd6)],_0x10004c=_0x1869ad[_0x2ef4b5(0xc3)],_0xbce194=JSON[_0x2ef4b5(0xbd)](_0x1869ad[_0x2ef4b5(0xd7)]),_0x45d60a=_0x1869ad['isNotIncludeDependencies'],_0x5a3509=_0x1869ad['isSeparateMatrixVersions'],_0x238f4d=_0x1869ad['isSeparateCalculationProcedureVersions'],_0x1621fb=_0x1869ad[_0x2ef4b5(0xc7)],_0xf57aee=!!_0x1869ad[_0x2ef4b5(0xb9)],_0x39bd50=_0x5f16c1===''?_0x2ef4b5(0xbf):'/Flosum/SnapshotVlocity/',_0x8a2462=new jsForce['Connection'](_0x55a148);Promise['resolve']()[_0x2ef4b5(0xc4)](()=>storage['createProjectDirectory'](_0x3b2e84))[_0x2ef4b5(0xc4)](()=>helper[_0x2ef4b5(0xe3)](_0x3b2e84,_0x26d12f,_0x8cbb96,_0x4c9d05,_0x2c0ce8,_0x1621fb,_0x562d13,_0xbce194,_0x23074a,_0x42426a))[_0x2ef4b5(0xc4)](()=>helper[_0x2ef4b5(0xbc)](_0x3b2e84,_0x26d12f,_0x8cbb96,_0x8a2462,_0x1d73e3,_0x45d60a,_0x5a3509,_0x238f4d,_0x42426a))[_0x2ef4b5(0xc4)](()=>storage['checkExistComponents'](_0x3b2e84,_0x42426a))[_0x2ef4b5(0xc4)](_0x47c5bb=>{const _0x349f61=_0x2ef4b5;if(_0x47c5bb)return helper['prepareDataForDeploy'](_0x3b2e84,_0x10004c,_0x42426a)[_0x349f61(0xc4)](_0x1f2419=>helper[_0x349f61(0xcd)](_0x1f2419,_0x8a2462,_0x39bd50,_0x42426a));return Promise[_0x349f61(0xd9)]();})[_0x2ef4b5(0xc4)](()=>{const _0x4e6256=_0x2ef4b5;return _0xf57aee?helper[_0x4e6256(0xe0)](_0x3b2e84,_0x42426a):Promise[_0x4e6256(0xd9)](![]);})['then'](_0x4b63af=>{const _0x3bca68=_0x2ef4b5;if(_0xf57aee&&_0x4b63af){_0x42426a[_0x3bca68(0xce)](_0x3bca68(0xba));const _0x481e43={'flosumUrl':_0x5997d4,'flosumToken':_0x391db8,'vlocityUrl':_0x26d12f,'vlocityToken':_0x8cbb96,'logId':_0x14397c,'attachLogId':_0x1d73e3,'timestamp':_0x2fbb04,'nameSpacePrefix':_0x5f16c1,'snapshotType':_0x3bca68(0xcc),'snapshotId':_0x10004c,'projectName':_0x3b2e84};return fs[_0x3bca68(0xe8)](_0x3b2e84+'/'+constants['SOURCE_FOLDER'])&&fs[_0x3bca68(0xd1)](_0x3b2e84+'/'+constants['SOURCE_FOLDER'],{'recursive':!![]}),packRetry['packRetry'](_0x481e43,_0x42426a);}return Promise[_0x3bca68(0xd9)]();})[_0x2ef4b5(0xc4)](()=>helper['completeDeployment'](_0x3b2e84,_0x8a2462,_0x5f16c1,_0x10004c,_0x14397c,_0x1d73e3,!![],_0x42426a))[_0x2ef4b5(0xc1)](_0x3f04a7=>{const _0x3275eb=_0x2ef4b5;helper[_0x3275eb(0xc0)](_0x3b2e84,_0x8a2462,_0x5f16c1,_0x10004c,_0x14397c,_0x1d73e3,!![],_0x42426a,!![])[_0x3275eb(0xc4)](()=>_0x5de996(_0x3f04a7))[_0x3275eb(0xc1)](_0x4bc6e0=>_0x5de996(_0x3f04a7+'\x0a'+_0x4bc6e0));})[_0x2ef4b5(0xc4)](()=>storage[_0x2ef4b5(0xca)](_0x3b2e84,_0x42426a));}catch(_0x19b582){_0x5de996(_0x19b582);}});}function _0x38dd(_0x7f75cf,_0x272f2b){const _0x6cf7de=_0x6cf7();return _0x38dd=function(_0x38dde9,_0x3ea419){_0x38dde9=_0x38dde9-0xb9;let _0x140055=_0x6cf7de[_0x38dde9];return _0x140055;},_0x38dd(_0x7f75cf,_0x272f2b);}function _0x6cf7(){const _0x5d8844=['searchBy','removeProject','vlocityNameSpacePrefix','PackRetry','deployComponents','log','1396440KfMudO','logId','rmdirSync','463882inCXdc','accessToken','../../../services/storage','instanceUrl','isLikeSearch','selectedDataPackTypes','30XAOKiv','resolve','nameSpacePrefix','getTime','4020564AVsvjN','3mOTUyz','nameOfComponents','authFlosum','checkErrors','1umfrXu','44937NojxjU','createJobYamlFile','attachLogId','25842531JpqFLX','---\x20body','7318008pFdfYC','existsSync','snapshotType','isRunPackRetryAutomatically','Snapshot\x20has\x20errors,\x20Start\x20PackRetry\x20command:','4263343LaEvRW','retrieveData','parse','../../../services/http','/SnapshotVlocity/','completeDeployment','catch','authVlosityOrg','snapshotId','then','1170gsoHdV','../pack-retry/controller','isAfterUpdateSearchByKey','../../../constants'];_0x6cf7=function(){return _0x5d8844;};return _0x6cf7();}module['exports']={'retrieve':retrieve};