const a38_0x1d8d42=a38_0x50de;function a38_0x50de(_0x2d6aa1,_0x387490){const _0x35252d=a38_0x3525();return a38_0x50de=function(_0x50dea9,_0xe04f24){_0x50dea9=_0x50dea9-0xd8;let _0x442764=_0x35252d[_0x50dea9];return _0x442764;},a38_0x50de(_0x2d6aa1,_0x387490);}(function(_0x3a04a8,_0x1c542a){const _0x4fcb13=a38_0x50de,_0x104e0d=_0x3a04a8();while(!![]){try{const _0x5a49a8=-parseInt(_0x4fcb13(0xe1))/0x1*(parseInt(_0x4fcb13(0x105))/0x2)+-parseInt(_0x4fcb13(0xf8))/0x3*(-parseInt(_0x4fcb13(0x106))/0x4)+parseInt(_0x4fcb13(0x107))/0x5*(-parseInt(_0x4fcb13(0xed))/0x6)+parseInt(_0x4fcb13(0x102))/0x7+parseInt(_0x4fcb13(0x100))/0x8*(parseInt(_0x4fcb13(0xff))/0x9)+-parseInt(_0x4fcb13(0xf9))/0xa+-parseInt(_0x4fcb13(0xf6))/0xb*(parseInt(_0x4fcb13(0xe3))/0xc);if(_0x5a49a8===_0x1c542a)break;else _0x104e0d['push'](_0x104e0d['shift']());}catch(_0x164e20){_0x104e0d['push'](_0x104e0d['shift']());}}}(a38_0x3525,0x2389f));const fs=require('fs'),path=require('path'),{RetrieveHelper}=require(a38_0x1d8d42(0xee)),http=require(a38_0x1d8d42(0xf3)),storage=require(a38_0x1d8d42(0xe2)),packRetry=require(a38_0x1d8d42(0x103)),constants=require('../../../constants'),{pathConfig}=require('../../../config/path');function retrieve(_0x5f4935,_0x120785){return new Promise((_0xf244e7,_0x2b431)=>{const _0x13d2e3=a38_0x50de;try{console[_0x13d2e3(0xda)](_0x13d2e3(0xfb)),console[_0x13d2e3(0xda)](_0x5f4935),_0x120785[_0x13d2e3(0xda)](_0x13d2e3(0x104)+http[_0x13d2e3(0xf2)]());const _0x5cae86=new Date()['valueOf'](),_0x20bae9=_0x5f4935[_0x13d2e3(0xde)]+'_'+_0x5cae86+'_'+_0x5f4935[_0x13d2e3(0xec)],_0x42ba72=path[_0x13d2e3(0xdc)](pathConfig['tmpPath'],_0x20bae9),_0x2b4411=new RetrieveHelper(_0x42ba72,_0x5f4935,_0x120785);Promise[_0x13d2e3(0xf5)]()[_0x13d2e3(0xe6)](()=>storage[_0x13d2e3(0xfa)](_0x42ba72))['then'](()=>_0x2b4411[_0x13d2e3(0xdb)]())['then'](()=>_0x2b4411[_0x13d2e3(0xdf)]())[_0x13d2e3(0xe6)](()=>storage[_0x13d2e3(0xeb)](_0x42ba72,_0x120785))['then'](_0x3f37d9=>{const _0x1b66e2=_0x13d2e3;if(_0x3f37d9)return _0x2b4411[_0x1b66e2(0xf1)]()[_0x1b66e2(0xe6)](_0x227834=>_0x2b4411[_0x1b66e2(0xf7)](_0x227834));return Promise[_0x1b66e2(0xf5)]();})[_0x13d2e3(0xe6)](()=>{const _0x539ddd=_0x13d2e3;if(_0x5f4935[_0x539ddd(0x101)])return _0x2b4411[_0x539ddd(0xe9)](_0x42ba72,_0x120785);return Promise[_0x539ddd(0xf5)](![]);})['then'](_0x4d25e5=>{const _0x6330a4=_0x13d2e3;if(_0x5f4935[_0x6330a4(0x101)]&&_0x4d25e5){_0x120785[_0x6330a4(0xda)](_0x6330a4(0xef));const _0x387eb5={'flosumUrl':_0x5f4935[_0x6330a4(0xfd)][_0x6330a4(0xdd)],'flosumToken':_0x5f4935[_0x6330a4(0xfd)][_0x6330a4(0xd8)],'vlocityUrl':_0x5f4935[_0x6330a4(0xfc)][_0x6330a4(0xdd)],'vlocityToken':_0x5f4935['authVlosityOrg']['accessToken'],'logId':_0x5f4935[_0x6330a4(0xec)],'attachLogId':_0x5f4935['attachLogId'],'timestamp':_0x5f4935[_0x6330a4(0xf4)],'nameSpacePrefix':_0x5f4935[_0x6330a4(0xf0)],'snapshotType':'PackRetry','snapshotId':_0x5f4935[_0x6330a4(0xea)],'projectName':_0x20bae9};return fs[_0x6330a4(0xd9)](_0x42ba72+'/'+constants[_0x6330a4(0xe5)])&&fs[_0x6330a4(0xe4)](_0x42ba72+'/'+constants[_0x6330a4(0xe5)],{'recursive':!![]}),packRetry[_0x6330a4(0xe7)](_0x387eb5,_0x120785);}return Promise[_0x6330a4(0xf5)]();})[_0x13d2e3(0xe6)](()=>_0x2b4411[_0x13d2e3(0xe0)](!![]))[_0x13d2e3(0xe8)](_0x1a34ef=>{const _0x1bd94e=_0x13d2e3;_0x2b4411[_0x1bd94e(0xe0)](!![],!![])[_0x1bd94e(0xe6)](()=>_0x2b431(_0x1a34ef))[_0x1bd94e(0xe8)](_0x47bb10=>_0x2b431(_0x1a34ef+'\x0a'+_0x47bb10));})[_0x13d2e3(0xe6)](()=>storage[_0x13d2e3(0xfe)](_0x42ba72,_0x120785));}catch(_0x6ef183){_0x2b431(_0x6ef183);}});}function a38_0x3525(){const _0x118777=['Retrieval\x20(SFI)\x20started:\x20','33428JuaHjQ','236RhNOtN','1910fnGwFZ','accessToken','existsSync','log','createJobYamlFile','join','instanceUrl','snapshotType','retrieveData','completeDeployment','8shjacd','../../../services/storage','2635920vbvXaK','rmdirSync','SOURCE_FOLDER','then','packRetry','catch','checkErrors','snapshotId','checkExistComponents','logId','1158xmpvpc','./helper','Snapshot\x20has\x20errors,\x20Start\x20PackRetry\x20command:','nameSpacePrefix','prepareDataForDeploy','getTime','../../../services/http','timestamp','resolve','11ugZlAt','deployComponents','12207BManjk','1480840ifgFey','createProjectDirectory','---\x20body','authVlosityOrg','authFlosum','removeProject','18UULZpC','801552fkheLN','isRunPackRetryAutomatically','1962030cthgTX','../pack-retry/controller'];a38_0x3525=function(){return _0x118777;};return a38_0x3525();}module['exports']={'retrieve':retrieve};