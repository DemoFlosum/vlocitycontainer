const a31_0x4fd754=a31_0x28c2;(function(_0x323221,_0x3ce311){const _0x4daf3a=a31_0x28c2,_0x1ccd4c=_0x323221();while(!![]){try{const _0x14105b=parseInt(_0x4daf3a(0xe3))/0x1+-parseInt(_0x4daf3a(0xf2))/0x2+parseInt(_0x4daf3a(0xed))/0x3+parseInt(_0x4daf3a(0xeb))/0x4+-parseInt(_0x4daf3a(0xf6))/0x5*(parseInt(_0x4daf3a(0xe6))/0x6)+-parseInt(_0x4daf3a(0xe7))/0x7*(parseInt(_0x4daf3a(0xf5))/0x8)+-parseInt(_0x4daf3a(0xe4))/0x9*(-parseInt(_0x4daf3a(0xd6))/0xa);if(_0x14105b===_0x3ce311)break;else _0x1ccd4c['push'](_0x1ccd4c['shift']());}catch(_0x25851c){_0x1ccd4c['push'](_0x1ccd4c['shift']());}}}(a31_0x3376,0xb528c));const fs=require('fs'),path=require(a31_0x4fd754(0xe2)),{RetrieveHelper}=require('./helper'),http=require(a31_0x4fd754(0xf8)),storage=require(a31_0x4fd754(0xfb)),packRetry=require(a31_0x4fd754(0xe5)),constants=require(a31_0x4fd754(0xec)),{pathConfig}=require(a31_0x4fd754(0xf0));function a31_0x28c2(_0x3eb47a,_0x409aca){const _0x3376c0=a31_0x3376();return a31_0x28c2=function(_0x28c25a,_0x356666){_0x28c25a=_0x28c25a-0xd6;let _0x21aa9e=_0x3376c0[_0x28c25a];return _0x21aa9e;},a31_0x28c2(_0x3eb47a,_0x409aca);}function retrieve(_0x300191,_0x4413fb){return new Promise((_0x4f6fce,_0x2c6eea)=>{const _0x4b507b=a31_0x28c2;try{console[_0x4b507b(0xde)](_0x4b507b(0xf4)),console[_0x4b507b(0xde)](_0x300191),_0x4413fb[_0x4b507b(0xde)](_0x4b507b(0xda)+http[_0x4b507b(0xd8)]());const _0x490fd4=new Date()['valueOf'](),_0xdd08df=_0x300191['snapshotType']+'_'+_0x490fd4+'_'+_0x300191['logId'],_0x4b5f48=path['join'](pathConfig['tmpPath'],_0xdd08df),_0x3d9bca=new RetrieveHelper(_0x4b5f48,_0x300191,_0x4413fb);Promise['resolve']()[_0x4b507b(0xef)](()=>storage['createProjectDirectory'](_0x4b5f48))[_0x4b507b(0xef)](()=>_0x3d9bca[_0x4b507b(0xea)]())[_0x4b507b(0xef)](()=>_0x3d9bca[_0x4b507b(0xe0)]())[_0x4b507b(0xef)](()=>storage[_0x4b507b(0xfa)](_0x4b5f48,_0x4413fb))[_0x4b507b(0xef)](_0x14669b=>{const _0x2051ed=_0x4b507b;if(_0x14669b)return _0x3d9bca[_0x2051ed(0xd7)]()[_0x2051ed(0xef)](_0x2c2a1a=>_0x3d9bca[_0x2051ed(0xf9)](_0x2c2a1a));return Promise[_0x2051ed(0xe9)]();})[_0x4b507b(0xef)](()=>{const _0x6a58a7=_0x4b507b;if(_0x300191[_0x6a58a7(0x100)])return _0x3d9bca[_0x6a58a7(0xdc)](_0x4b5f48,_0x4413fb);return Promise[_0x6a58a7(0xe9)](![]);})['then'](_0x285738=>{const _0x1dce19=_0x4b507b;if(_0x300191[_0x1dce19(0x100)]&&_0x285738){_0x4413fb['log'](_0x1dce19(0xe1));const _0x3e03eb={'flosumUrl':_0x300191[_0x1dce19(0xf7)]['instanceUrl'],'flosumToken':_0x300191['authFlosum'][_0x1dce19(0xe8)],'vlocityUrl':_0x300191[_0x1dce19(0xd9)][_0x1dce19(0xee)],'vlocityToken':_0x300191['authVlosityOrg'][_0x1dce19(0xe8)],'logId':_0x300191['logId'],'attachLogId':_0x300191[_0x1dce19(0xdb)],'timestamp':_0x300191[_0x1dce19(0xf3)],'nameSpacePrefix':_0x300191['nameSpacePrefix'],'snapshotType':'PackRetry','snapshotId':_0x300191[_0x1dce19(0xdf)],'projectName':_0xdd08df};return fs['existsSync'](_0x4b5f48+'/'+constants['SOURCE_FOLDER'])&&fs[_0x1dce19(0xfc)](_0x4b5f48+'/'+constants[_0x1dce19(0xfd)],{'recursive':!![]}),packRetry[_0x1dce19(0xf1)](_0x3e03eb,_0x4413fb);}return Promise[_0x1dce19(0xe9)]();})[_0x4b507b(0xef)](()=>_0x3d9bca['completeDeployment'](!![]))[_0x4b507b(0xfe)](_0x3126f9=>{const _0x42a1ff=_0x4b507b;_0x3d9bca[_0x42a1ff(0xdd)](!![],!![])[_0x42a1ff(0xef)](()=>_0x2c6eea(_0x3126f9))['catch'](_0x429f8c=>_0x2c6eea(_0x3126f9+'\x0a'+_0x429f8c));})[_0x4b507b(0xef)](()=>storage['removeProject'](_0x4b5f48,_0x4413fb));}catch(_0x1c0813){_0x2c6eea(_0x1c0813);}});}module[a31_0x4fd754(0xff)]={'retrieve':retrieve};function a31_0x3376(){const _0x4c23c8=['18350pGerci','prepareDataForDeploy','getTime','authVlosityOrg','Retrieval\x20(SFI)\x20started:\x20','attachLogId','checkErrors','completeDeployment','log','snapshotId','retrieveData','Snapshot\x20has\x20errors,\x20Start\x20PackRetry\x20command:','path','374607EXigKp','5652itwCIL','../pack-retry/controller','390210krccHX','91XfpadL','accessToken','resolve','createJobYamlFile','3292012CKxpaP','../../../constants','434106CFOByZ','instanceUrl','then','../../../config/path','packRetry','976086aFzTqW','timestamp','---\x20body','458056GSgOzZ','40iOvfYW','authFlosum','../../../services/http','deployComponents','checkExistComponents','../../../services/storage','rmdirSync','SOURCE_FOLDER','catch','exports','isRunPackRetryAutomatically'];a31_0x3376=function(){return _0x4c23c8;};return a31_0x3376();}