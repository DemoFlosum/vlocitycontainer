const a39_0x1bd6ba=a39_0x2e50;(function(_0x3e2cdf,_0x601bdc){const _0x3525b9=a39_0x2e50,_0x316c8c=_0x3e2cdf();while(!![]){try{const _0x5b5d57=parseInt(_0x3525b9(0x6d))/0x1*(-parseInt(_0x3525b9(0x83))/0x2)+-parseInt(_0x3525b9(0x7c))/0x3*(parseInt(_0x3525b9(0x8f))/0x4)+-parseInt(_0x3525b9(0x90))/0x5+-parseInt(_0x3525b9(0x67))/0x6+parseInt(_0x3525b9(0x6a))/0x7*(-parseInt(_0x3525b9(0x8c))/0x8)+-parseInt(_0x3525b9(0x85))/0x9+parseInt(_0x3525b9(0x82))/0xa;if(_0x5b5d57===_0x601bdc)break;else _0x316c8c['push'](_0x316c8c['shift']());}catch(_0x543c42){_0x316c8c['push'](_0x316c8c['shift']());}}}(a39_0x477a,0xb0b81));const fs=require('fs'),path=require(a39_0x1bd6ba(0x8a)),{RetrieveHelper}=require(a39_0x1bd6ba(0x79)),http=require('../../../services/http'),storage=require('../../../services/storage'),packRetry=require(a39_0x1bd6ba(0x7f)),constants=require('../../../constants'),{pathConfig}=require('../../../config/path');function a39_0x477a(){const _0x10629c=['accessToken','existsSync','path','checkExistComponents','1032CNpsmI','logId','removeProject','4ftgIFW','3727020dJCxyO','packRetry','5497332mxSyyL','catch','createProjectDirectory','36302Zlsyrs','nameSpacePrefix','timestamp','1530akisps','authFlosum','rmdirSync','instanceUrl','checkErrors','prepareDataForDeploy','snapshotId','attachLogId','Snapshot\x20has\x20errors,\x20Start\x20PackRetry\x20command:','retrieveData','isRunPackRetryAutomatically','snapshotType','./helper','SOURCE_FOLDER','log','96231uOnkSw','tmpPath','authVlosityOrg','../pack-retry/controller','join','then','55120590hLSSHK','1432PeZwza','completeDeployment','11970369PbiNIL','deployComponents','resolve'];a39_0x477a=function(){return _0x10629c;};return a39_0x477a();}function a39_0x2e50(_0x17d57e,_0x5f0d6e){const _0x477a07=a39_0x477a();return a39_0x2e50=function(_0x2e5001,_0x5418ad){_0x2e5001=_0x2e5001-0x66;let _0x5d4949=_0x477a07[_0x2e5001];return _0x5d4949;},a39_0x2e50(_0x17d57e,_0x5f0d6e);}function retrieve(_0x3b93c1,_0x1d6e22){return new Promise((_0x3f5c08,_0x44f9b7)=>{const _0x41c76c=a39_0x2e50;try{console['log']('---\x20body'),console['log'](_0x3b93c1),_0x1d6e22[_0x41c76c(0x7b)]('Retrieval\x20(SFI)\x20started:\x20'+http['getTime']());const _0x3b4088=new Date()['valueOf'](),_0x5e409e=_0x3b93c1[_0x41c76c(0x78)]+'_'+_0x3b4088+'_'+_0x3b93c1['logId'],_0x1d9f24=path[_0x41c76c(0x80)](pathConfig[_0x41c76c(0x7d)],_0x5e409e),_0x2a48fd=new RetrieveHelper(_0x1d9f24,_0x3b93c1,_0x1d6e22);Promise[_0x41c76c(0x87)]()[_0x41c76c(0x81)](()=>storage[_0x41c76c(0x69)](_0x1d9f24))['then'](()=>_0x2a48fd['createJobYamlFile']())[_0x41c76c(0x81)](()=>_0x2a48fd[_0x41c76c(0x76)]())[_0x41c76c(0x81)](()=>storage[_0x41c76c(0x8b)](_0x1d9f24,_0x1d6e22))[_0x41c76c(0x81)](_0x102265=>{const _0x213e43=_0x41c76c;if(_0x102265)return _0x2a48fd[_0x213e43(0x72)]()[_0x213e43(0x81)](_0x158f3c=>_0x2a48fd[_0x213e43(0x86)](_0x158f3c));return Promise[_0x213e43(0x87)]();})[_0x41c76c(0x81)](()=>{const _0x4b28c0=_0x41c76c;if(_0x3b93c1['isRunPackRetryAutomatically'])return _0x2a48fd[_0x4b28c0(0x71)](_0x1d9f24,_0x1d6e22);return Promise[_0x4b28c0(0x87)](![]);})[_0x41c76c(0x81)](_0xa686ec=>{const _0x102239=_0x41c76c;if(_0x3b93c1[_0x102239(0x77)]&&_0xa686ec){_0x1d6e22['log'](_0x102239(0x75));const _0x40f5fd={'flosumUrl':_0x3b93c1[_0x102239(0x6e)]['instanceUrl'],'flosumToken':_0x3b93c1['authFlosum'][_0x102239(0x88)],'vlocityUrl':_0x3b93c1[_0x102239(0x7e)][_0x102239(0x70)],'vlocityToken':_0x3b93c1[_0x102239(0x7e)][_0x102239(0x88)],'logId':_0x3b93c1[_0x102239(0x8d)],'attachLogId':_0x3b93c1[_0x102239(0x74)],'timestamp':_0x3b93c1[_0x102239(0x6c)],'nameSpacePrefix':_0x3b93c1[_0x102239(0x6b)],'snapshotType':'PackRetry','snapshotId':_0x3b93c1[_0x102239(0x73)],'projectName':_0x5e409e};return fs[_0x102239(0x89)](_0x1d9f24+'/'+constants[_0x102239(0x7a)])&&fs[_0x102239(0x6f)](_0x1d9f24+'/'+constants[_0x102239(0x7a)],{'recursive':!![]}),packRetry[_0x102239(0x66)](_0x40f5fd,_0x1d6e22);}return Promise['resolve']();})[_0x41c76c(0x81)](()=>_0x2a48fd[_0x41c76c(0x84)](!![]))[_0x41c76c(0x68)](_0x324df7=>{const _0x5a7c64=_0x41c76c;_0x2a48fd[_0x5a7c64(0x84)](!![],!![])[_0x5a7c64(0x81)](()=>_0x44f9b7(_0x324df7))[_0x5a7c64(0x68)](_0x5414bd=>_0x44f9b7(_0x324df7+'\x0a'+_0x5414bd));})['then'](()=>storage[_0x41c76c(0x8e)](_0x1d9f24,_0x1d6e22));}catch(_0x597590){_0x44f9b7(_0x597590);}});}module['exports']={'retrieve':retrieve};