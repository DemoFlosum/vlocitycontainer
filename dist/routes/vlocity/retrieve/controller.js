const a39_0x4e614d=a39_0x45aa;(function(_0x25311d,_0x45b96d){const _0x2fd039=a39_0x45aa,_0x473804=_0x25311d();while(!![]){try{const _0x22b1fb=parseInt(_0x2fd039(0x159))/0x1+-parseInt(_0x2fd039(0x13a))/0x2+-parseInt(_0x2fd039(0x142))/0x3+-parseInt(_0x2fd039(0x162))/0x4+parseInt(_0x2fd039(0x148))/0x5*(parseInt(_0x2fd039(0x14b))/0x6)+parseInt(_0x2fd039(0x147))/0x7+parseInt(_0x2fd039(0x13f))/0x8*(-parseInt(_0x2fd039(0x14e))/0x9);if(_0x22b1fb===_0x45b96d)break;else _0x473804['push'](_0x473804['shift']());}catch(_0x2c55ca){_0x473804['push'](_0x473804['shift']());}}}(a39_0x3e00,0x228f6));function a39_0x45aa(_0x1eacc0,_0x2fdd1d){const _0x3e00f0=a39_0x3e00();return a39_0x45aa=function(_0x45aa22,_0x46ce2f){_0x45aa22=_0x45aa22-0x139;let _0x4b5392=_0x3e00f0[_0x45aa22];return _0x4b5392;},a39_0x45aa(_0x1eacc0,_0x2fdd1d);}const fs=require('fs'),path=require(a39_0x4e614d(0x15c)),{RetrieveHelper}=require('./helper'),http=require(a39_0x4e614d(0x155)),storage=require(a39_0x4e614d(0x160)),packRetry=require(a39_0x4e614d(0x158)),constants=require(a39_0x4e614d(0x163)),{pathConfig}=require(a39_0x4e614d(0x146));function retrieve(_0x48f214,_0x5902a1){return new Promise((_0x252b2f,_0x56027d)=>{const _0x51436e=a39_0x45aa;try{console['log'](_0x51436e(0x13b)),console[_0x51436e(0x14f)](_0x48f214),_0x5902a1[_0x51436e(0x14f)](_0x51436e(0x143)+http[_0x51436e(0x14d)]());const _0x11dd2a=new Date()[_0x51436e(0x166)](),_0x4b7ee5=_0x48f214[_0x51436e(0x15b)]+'_'+_0x11dd2a+'_'+_0x48f214[_0x51436e(0x139)],_0x2b763d=path['join'](pathConfig[_0x51436e(0x165)],_0x4b7ee5),_0x216575=new RetrieveHelper(_0x2b763d,_0x48f214,_0x5902a1);Promise[_0x51436e(0x15e)]()[_0x51436e(0x161)](()=>storage[_0x51436e(0x167)](_0x2b763d))[_0x51436e(0x161)](()=>_0x216575[_0x51436e(0x13e)]())[_0x51436e(0x161)](()=>_0x216575[_0x51436e(0x140)]())[_0x51436e(0x161)](()=>storage[_0x51436e(0x15f)](_0x2b763d,_0x5902a1))[_0x51436e(0x161)](_0x527ddb=>{const _0x18eafd=_0x51436e;if(_0x527ddb)return _0x216575[_0x18eafd(0x150)]()[_0x18eafd(0x161)](_0x9e23c3=>_0x216575[_0x18eafd(0x14a)](_0x9e23c3));return Promise[_0x18eafd(0x15e)]();})['then'](()=>{const _0x40cf76=_0x51436e;if(_0x48f214[_0x40cf76(0x152)])return _0x216575[_0x40cf76(0x144)](_0x2b763d,_0x5902a1);return Promise[_0x40cf76(0x15e)](![]);})[_0x51436e(0x161)](_0x967b=>{const _0x744cfc=_0x51436e;if(_0x48f214[_0x744cfc(0x152)]&&_0x967b){_0x5902a1[_0x744cfc(0x14f)](_0x744cfc(0x156));const _0x4bd6ad={'flosumUrl':_0x48f214[_0x744cfc(0x145)]['instanceUrl'],'flosumToken':_0x48f214[_0x744cfc(0x145)][_0x744cfc(0x151)],'vlocityUrl':_0x48f214[_0x744cfc(0x15d)][_0x744cfc(0x157)],'vlocityToken':_0x48f214[_0x744cfc(0x15d)][_0x744cfc(0x151)],'logId':_0x48f214[_0x744cfc(0x139)],'attachLogId':_0x48f214['attachLogId'],'timestamp':_0x48f214[_0x744cfc(0x141)],'nameSpacePrefix':_0x48f214[_0x744cfc(0x14c)],'snapshotType':'PackRetry','snapshotId':_0x48f214[_0x744cfc(0x149)],'projectName':_0x4b7ee5};return fs[_0x744cfc(0x13c)](_0x2b763d+'/'+constants[_0x744cfc(0x164)])&&fs[_0x744cfc(0x154)](_0x2b763d+'/'+constants['SOURCE_FOLDER'],{'recursive':!![]}),packRetry[_0x744cfc(0x153)](_0x4bd6ad,_0x5902a1);}return Promise[_0x744cfc(0x15e)]();})[_0x51436e(0x161)](()=>_0x216575[_0x51436e(0x15a)](!![]))[_0x51436e(0x168)](_0x5d46a3=>{const _0x2cc59c=_0x51436e;_0x216575[_0x2cc59c(0x15a)](!![],!![])[_0x2cc59c(0x161)](()=>_0x56027d(_0x5d46a3))[_0x2cc59c(0x168)](_0x1b7e28=>_0x56027d(_0x5d46a3+'\x0a'+_0x1b7e28));})[_0x51436e(0x161)](()=>storage[_0x51436e(0x13d)](_0x2b763d,_0x5902a1));}catch(_0x596ae0){_0x56027d(_0x596ae0);}});}function a39_0x3e00(){const _0x347460=['retrieveData','timestamp','233394JQzWSt','Retrieval\x20(SFI)\x20started:\x20','checkErrors','authFlosum','../../../config/path','1472569REMJsq','65uDhjLu','snapshotId','deployComponents','91662YmSCWZ','nameSpacePrefix','getTime','1268334smmjKx','log','prepareDataForDeploy','accessToken','isRunPackRetryAutomatically','packRetry','rmdirSync','../../../services/http','Snapshot\x20has\x20errors,\x20Start\x20PackRetry\x20command:','instanceUrl','../pack-retry/controller','187497LzeFJT','completeDeployment','snapshotType','path','authVlosityOrg','resolve','checkExistComponents','../../../services/storage','then','287540GrbabR','../../../constants','SOURCE_FOLDER','tmpPath','valueOf','createProjectDirectory','catch','logId','328596HSlJTu','---\x20body','existsSync','removeProject','createJobYamlFile','8zqVhOQ'];a39_0x3e00=function(){return _0x347460;};return a39_0x3e00();}module['exports']={'retrieve':retrieve};