const a31_0x1ea96e=a31_0xdc1a;function a31_0xdc1a(_0x8e0352,_0x3999d4){const _0x36efac=a31_0x36ef();return a31_0xdc1a=function(_0xdc1af5,_0x1a0aea){_0xdc1af5=_0xdc1af5-0x1bb;let _0x174e36=_0x36efac[_0xdc1af5];return _0x174e36;},a31_0xdc1a(_0x8e0352,_0x3999d4);}(function(_0x2a30b3,_0x2a0f9b){const _0x248f41=a31_0xdc1a,_0x178106=_0x2a30b3();while(!![]){try{const _0x5ab5d1=parseInt(_0x248f41(0x1dd))/0x1+parseInt(_0x248f41(0x1dc))/0x2+-parseInt(_0x248f41(0x1d7))/0x3+-parseInt(_0x248f41(0x1db))/0x4*(parseInt(_0x248f41(0x1c4))/0x5)+parseInt(_0x248f41(0x1c1))/0x6*(-parseInt(_0x248f41(0x1c9))/0x7)+-parseInt(_0x248f41(0x1ca))/0x8*(-parseInt(_0x248f41(0x1d6))/0x9)+parseInt(_0x248f41(0x1cc))/0xa;if(_0x5ab5d1===_0x2a0f9b)break;else _0x178106['push'](_0x178106['shift']());}catch(_0x12c1d6){_0x178106['push'](_0x178106['shift']());}}}(a31_0x36ef,0x35708));const fs=require('fs'),path=require(a31_0x1ea96e(0x1d3)),{RetrieveHelper}=require('./helper'),http=require(a31_0x1ea96e(0x1d8)),storage=require(a31_0x1ea96e(0x1de)),packRetry=require('../pack-retry/controller'),constants=require(a31_0x1ea96e(0x1c5)),{pathConfig}=require(a31_0x1ea96e(0x1c3));function retrieve(_0x599447,_0x42a365){return new Promise((_0x1b89e8,_0x178e7f)=>{const _0x20d49b=a31_0xdc1a;try{console[_0x20d49b(0x1df)](_0x20d49b(0x1c7)),console[_0x20d49b(0x1df)](_0x599447),_0x42a365[_0x20d49b(0x1df)]('Retrieval\x20(SFI)\x20started:\x20'+http[_0x20d49b(0x1c6)]());const _0x4f6ce1=new Date()[_0x20d49b(0x1e2)](),_0x52661d=_0x599447[_0x20d49b(0x1e4)]+'_'+_0x4f6ce1+'_'+_0x599447[_0x20d49b(0x1d2)],_0x41b4d9=path['join'](pathConfig[_0x20d49b(0x1e6)],_0x52661d),_0x333ba2=new RetrieveHelper(_0x41b4d9,_0x599447,_0x42a365);Promise[_0x20d49b(0x1bb)]()[_0x20d49b(0x1cf)](()=>storage[_0x20d49b(0x1be)](_0x41b4d9))['then'](()=>_0x333ba2[_0x20d49b(0x1bc)]())['then'](()=>_0x333ba2[_0x20d49b(0x1d9)]())[_0x20d49b(0x1cf)](()=>storage['checkExistComponents'](_0x41b4d9,_0x42a365))[_0x20d49b(0x1cf)](_0x3924de=>{const _0x496f95=_0x20d49b;if(_0x3924de)return _0x333ba2[_0x496f95(0x1c0)]()[_0x496f95(0x1cf)](_0xc6fe65=>_0x333ba2[_0x496f95(0x1bd)](_0xc6fe65));return Promise[_0x496f95(0x1bb)]();})[_0x20d49b(0x1cf)](()=>{const _0x357639=_0x20d49b;if(_0x599447[_0x357639(0x1da)])return _0x333ba2[_0x357639(0x1e1)](_0x41b4d9,_0x42a365);return Promise[_0x357639(0x1bb)](![]);})[_0x20d49b(0x1cf)](_0x223f84=>{const _0x2eceb6=_0x20d49b;if(_0x599447[_0x2eceb6(0x1da)]&&_0x223f84){_0x42a365[_0x2eceb6(0x1df)](_0x2eceb6(0x1e5));const _0x4f6f9d={'flosumUrl':_0x599447['authFlosum'][_0x2eceb6(0x1e3)],'flosumToken':_0x599447[_0x2eceb6(0x1bf)][_0x2eceb6(0x1d5)],'vlocityUrl':_0x599447[_0x2eceb6(0x1cb)]['instanceUrl'],'vlocityToken':_0x599447[_0x2eceb6(0x1cb)][_0x2eceb6(0x1d5)],'logId':_0x599447[_0x2eceb6(0x1d2)],'attachLogId':_0x599447[_0x2eceb6(0x1cd)],'timestamp':_0x599447['timestamp'],'nameSpacePrefix':_0x599447[_0x2eceb6(0x1d1)],'snapshotType':_0x2eceb6(0x1c2),'snapshotId':_0x599447[_0x2eceb6(0x1d0)],'projectName':_0x52661d};return fs['existsSync'](_0x41b4d9+'/'+constants['SOURCE_FOLDER'])&&fs['rmdirSync'](_0x41b4d9+'/'+constants[_0x2eceb6(0x1d4)],{'recursive':!![]}),packRetry['packRetry'](_0x4f6f9d,_0x42a365);}return Promise[_0x2eceb6(0x1bb)]();})[_0x20d49b(0x1cf)](()=>_0x333ba2['completeDeployment'](!![]))[_0x20d49b(0x1e0)](_0x52afbd=>{const _0x55dbf8=_0x20d49b;_0x333ba2[_0x55dbf8(0x1c8)](!![],!![])['then'](()=>_0x178e7f(_0x52afbd))['catch'](_0x464118=>_0x178e7f(_0x52afbd+'\x0a'+_0x464118));})[_0x20d49b(0x1cf)](()=>storage['removeProject'](_0x41b4d9,_0x42a365));}catch(_0x2e1f17){_0x178e7f(_0x2e1f17);}});}function a31_0x36ef(){const _0x135073=['17046KVHKfb','625767iMXKNx','../../../services/http','retrieveData','isRunPackRetryAutomatically','92qIHpii','582104EmWrQv','145937nSURoc','../../../services/storage','log','catch','checkErrors','valueOf','instanceUrl','snapshotType','Snapshot\x20has\x20errors,\x20Start\x20PackRetry\x20command:','tmpPath','resolve','createJobYamlFile','deployComponents','createProjectDirectory','authFlosum','prepareDataForDeploy','289014pHMcPe','PackRetry','../../../config/path','69565RDAhwJ','../../../constants','getTime','---\x20body','completeDeployment','56YzglcS','8YVNLBy','authVlosityOrg','6939450cIOOLJ','attachLogId','exports','then','snapshotId','nameSpacePrefix','logId','path','SOURCE_FOLDER','accessToken'];a31_0x36ef=function(){return _0x135073;};return a31_0x36ef();}module[a31_0x1ea96e(0x1ce)]={'retrieve':retrieve};