const a32_0x4870ae=a32_0x4916;(function(_0x54dcc8,_0x109113){const _0x169685=a32_0x4916,_0xb1a8c9=_0x54dcc8();while(!![]){try{const _0x412729=parseInt(_0x169685(0x237))/0x1*(parseInt(_0x169685(0x23f))/0x2)+parseInt(_0x169685(0x22d))/0x3*(parseInt(_0x169685(0x228))/0x4)+parseInt(_0x169685(0x1f7))/0x5*(-parseInt(_0x169685(0x249))/0x6)+parseInt(_0x169685(0x21e))/0x7*(parseInt(_0x169685(0x246))/0x8)+parseInt(_0x169685(0x232))/0x9*(-parseInt(_0x169685(0x212))/0xa)+-parseInt(_0x169685(0x206))/0xb+parseInt(_0x169685(0x219))/0xc;if(_0x412729===_0x109113)break;else _0xb1a8c9['push'](_0xb1a8c9['shift']());}catch(_0x44d179){_0xb1a8c9['push'](_0xb1a8c9['shift']());}}}(a32_0x2fcb,0x4f421));const path=require(a32_0x4870ae(0x254)),fs=require('fs'),fse=require(a32_0x4870ae(0x1f8)),AdmZip=require(a32_0x4870ae(0x24e)),constants=require(a32_0x4870ae(0x227)),http=require(a32_0x4870ae(0x205));function a32_0x2fcb(){const _0x2a5ef4=['Error\x20Update\x20Attachment\x20Log\x20','Start\x20Fetch\x20OmniOut\x20Content\x20List\x20','5QzjiPH','fs-extra','/services/data/v48.0/tooling/query?q=SELECT+Id,DeveloperName,Description+FROM+LightningComponentBundle+WHERE+DeveloperName=\x27','catch','/services/apexrest/','vlocity_cmt__Language__c','query','base64','Start\x20Update\x20Attachment\x20Log','lwcComponentList','(hidden)','entries','vlocity_cmt__','Error\x20Extract\x20LWC\x20Dependencies\x20','../../../services/http','4796462MZrVoR','Error\x20Send\x20Components\x20','push','compositeResponse','LightningComponentBundle','End\x20Send\x20Components','/vlocity_cmt/v1/GenericInvoke/','Error\x20Get\x20Dependency\x20List\x20','MAX_SIZE_UNZIP_ATTACHMENT','children','Custom\x20Lightning\x20Web\x20Component','httpStatusCode','20ZOzxLq','End\x20Get\x20Dependency\x20List\x20','vlocity_cmt__Type__c','bundleInfo',',\x20retrieved\x20','FilePath','unlocked-packages','2961060ttnCoy','callUpdateLog','End\x20Fetch\x20OmniOut\x20Content\x20List\x20','Error\x20Query\x20','body','1477jDRTJj','length','Source','lwcName','eleArray','toString','Error\x20Fetch\x20OmniOut\x20Content\x20List\x20','/services/data/v48.0/tooling/query?q=SELECT+Id,FilePath,Format,Source+FROM+LightningComponentResource+WHERE+LightningComponentBundleId=\x27@{bundleInfo.records[0].Id}\x27','then','../../../constants','68IIMUvE','apex','application/json','Vlocity\x20BuildJSONWithPrefill','name','92343gcoUgW','sobject','getAttachmentBody','End\x20Query','log','1075671fvCXaf','Error\x20Create\x20Lwc\x20Files\x20','resolve','forEach','map','34747bimoYP','Process\x20Get\x20Dependency,\x20processed\x20','post','End\x20Extract\x20LWC\x20Dependencies','End\x20Create\x20Lwc\x20Files','DeveloperName','POST','records','18uziZEr','exports','type','Start\x20Extract\x20LWC\x20Dependencies','update','Error\x20getPrefilledJSON\x20','Start\x20Create\x20Lwc\x20Files','4304pydYHp','elementTypeToLwcTemplateMapping','Start\x20Query','1179312dXsuXe','callUpdateAttachmentLog','parse','Start\x20Get\x20Dependency\x20List\x20','stringify','adm-zip','from','Is_Error__c','Is_Completed__c','instanceUrl','request','path','replace',',\x20all\x20','propSetMap','\x20from\x20','lwcComponentOverride','Error\x20Get\x20Prefilled\x20JSON\x20','Error\x20Update\x20Snapshot','GET','filter'];a32_0x2fcb=function(){return _0x2a5ef4;};return a32_0x2fcb();}function query(_0x192acb,_0x38541b,_0x1ddc87){return new Promise((_0x34ad41,_0x23c7fa)=>{const _0x102da5=a32_0x4916;try{_0x1ddc87[_0x102da5(0x231)](_0x102da5(0x248)),_0x192acb[_0x102da5(0x1fd)](_0x38541b,(_0x8701f5,_0x412624)=>{const _0x1e2c14=_0x102da5;_0x8701f5?(_0x1ddc87[_0x1e2c14(0x231)](_0x1e2c14(0x21c)+_0x8701f5),_0x23c7fa(_0x8701f5)):(_0x1ddc87[_0x1e2c14(0x231)](_0x1e2c14(0x230)),_0x34ad41(_0x412624[_0x1e2c14(0x23e)][_0x1e2c14(0x1f4)](_0x2ac518=>_0x2ac518[_0x1e2c14(0x214)]&&_0x2ac518['vlocity_cmt__SubType__c']&&_0x2ac518[_0x1e2c14(0x1fc)])[_0x1e2c14(0x236)](({vlocity_cmt__Type__c:_0x51e6dc,vlocity_cmt__SubType__c:_0x1499b7,vlocity_cmt__Language__c:_0x38df4a})=>{return''+_0x51e6dc+_0x1499b7+_0x38df4a;})));});}catch(_0x5520d7){_0x23c7fa(_0x5520d7),_0x1ddc87[_0x102da5(0x231)](_0x102da5(0x21c)+_0x5520d7);}});}function fetchOmniOutContentList(_0x374f8a,_0x1846d7,_0x102956){return new Promise((_0x1963a7,_0x2b14d3)=>{const _0x29ea91=a32_0x4916;try{_0x102956[_0x29ea91(0x231)](_0x29ea91(0x1f6));const _0x5ab661=[];let _0x32a70f=0x1,_0x14b059=Promise[_0x29ea91(0x234)]();_0x1846d7[_0x29ea91(0x235)](_0x4d9a8d=>{const _0x2253cd=_0x29ea91;_0x14b059=_0x14b059[_0x2253cd(0x226)](()=>fetchOmniOutContent(_0x374f8a,_0x4d9a8d))['then'](_0x37c59c=>{const _0x333277=_0x2253cd;_0x37c59c&&_0x37c59c[_0x333277(0x209)]&&_0x37c59c[_0x333277(0x209)][_0x333277(0x21f)]===0x2&&(_0x37c59c[_0x333277(0x209)][0x0][_0x333277(0x211)]===0xc8&&_0x5ab661['push']({'lwcComponentList':_0x37c59c[_0x333277(0x209)][0x1]['body'][_0x333277(0x23e)],'name':_0x37c59c['compositeResponse'][0x0][_0x333277(0x21d)][_0x333277(0x23e)][0x0][_0x333277(0x23c)]})),_0x102956[_0x333277(0x231)]('Process\x20Fetch\x20OmniOut\x20Content,\x20processed\x20'+_0x32a70f++ +_0x333277(0x216)+_0x5ab661[_0x333277(0x21f)]+_0x333277(0x256)+_0x1846d7[_0x333277(0x21f)]);});}),_0x14b059[_0x29ea91(0x226)](()=>{const _0xdcdbd9=_0x29ea91;_0x102956['log'](_0xdcdbd9(0x21b)),_0x1963a7(_0x5ab661);})[_0x29ea91(0x1fa)](_0x24462a=>{const _0x161a28=_0x29ea91;_0x102956[_0x161a28(0x231)](_0x161a28(0x224)+_0x24462a),_0x2b14d3(_0x24462a);});}catch(_0x3cef9c){_0x2b14d3(_0x3cef9c),_0x102956['log'](_0x29ea91(0x224)+_0x3cef9c);}});}function fetchOmniOutContent(_0x7e3864,_0x4e1eaa){const _0xfca711=a32_0x4870ae;_0x4e1eaa=_0x4e1eaa[_0xfca711(0x255)]('-','')[_0xfca711(0x255)](_0xfca711(0x203),'');const _0x4e267b={'allOrNone':!![],'compositeRequest':[{'method':_0xfca711(0x1f3),'referenceId':_0xfca711(0x215),'url':_0xfca711(0x1f9)+_0x4e1eaa+'\x27'},{'method':_0xfca711(0x1f3),'referenceId':'bundleResources','url':_0xfca711(0x225)}]},_0xa47375=_0x7e3864[_0xfca711(0x252)],_0x5527a1={'method':_0xfca711(0x23d),'url':_0xa47375+'/services/data/v50.0/tooling/composite','body':JSON[_0xfca711(0x24d)](_0x4e267b),'headers':{'Content-Type':_0xfca711(0x22a)}};return _0x7e3864[_0xfca711(0x253)](_0x5527a1);}function createLwcFiles(_0x14e0ed,_0x15d750,_0x19285a,_0x203d2f){return new Promise((_0x186c5b,_0x2eaa53)=>{const _0x4a073e=a32_0x4916;try{_0x203d2f['log'](_0x4a073e(0x245));let _0x54ccc2=[],_0x97c1e8=[],_0x1d0544=0x0,_0x2cece4=new AdmZip();_0x15d750['forEach'](_0x19057f=>{const _0x533dc5=_0x4a073e;_0x97c1e8[_0x533dc5(0x208)]({'apiName':_0x19057f[_0x533dc5(0x22c)],'componentType':'LightningComponentBundle','label':'lwc/'+_0x19057f[_0x533dc5(0x22c)]}),_0x19057f[_0x533dc5(0x200)][_0x533dc5(0x235)](_0x3ab8f7=>{const _0x4ffe55=_0x533dc5;_0x3ab8f7[_0x4ffe55(0x220)]!==_0x4ffe55(0x201)&&(_0x1d0544+=_0x3ab8f7['Source']['length'],_0x1d0544<constants[_0x4ffe55(0x20e)]?_0x2cece4['addFile'](''+_0x3ab8f7[_0x4ffe55(0x217)],Buffer[_0x4ffe55(0x24f)](_0x3ab8f7[_0x4ffe55(0x220)]['replace'](new RegExp('vlocity_cmt','g'),'c'))):(_0x54ccc2[_0x4ffe55(0x208)]({'snapshotId':_0x19285a,'typeList':[{'type':_0x4ffe55(0x20a),'zip':_0x2cece4['toBuffer']()[_0x4ffe55(0x223)](_0x4ffe55(0x1fe)),'componentList':_0x97c1e8}]}),_0x97c1e8=[],_0x1d0544=0x0,_0x2cece4=new AdmZip()));}),delete _0x19057f['lwcComponentList'];}),_0x97c1e8[_0x4a073e(0x21f)]&&_0x54ccc2['push']({'snapshotId':_0x19285a,'typeList':[{'type':_0x4a073e(0x20a),'zip':_0x2cece4['toBuffer']()['toString'](_0x4a073e(0x1fe)),'componentList':_0x97c1e8}]}),_0x203d2f[_0x4a073e(0x231)](_0x4a073e(0x23b)),_0x186c5b(_0x54ccc2);}catch(_0x3c0f32){_0x203d2f[_0x4a073e(0x231)](_0x4a073e(0x233)+_0x3c0f32),_0x2eaa53(_0x3c0f32);}});}function sendComponents(_0x29689b,_0x204435,_0x10de86,_0x42fc66,_0xf5c6a0){return new Promise((_0x240300,_0xab6038)=>{const _0x558a17=a32_0x4916;try{_0xf5c6a0[_0x558a17(0x231)]('Start\x20Send\x20Components');let _0x2de2cd=Promise[_0x558a17(0x234)]();_0x42fc66[_0x558a17(0x235)](_0x354ac0=>{const _0x3ded88=_0x558a17;_0x2de2cd=_0x2de2cd[_0x3ded88(0x226)](()=>callSentComponents(_0x29689b,_0x204435,_0x10de86,_0x354ac0));}),_0x2de2cd['then'](()=>{const _0x1dcfa2=_0x558a17;_0xf5c6a0[_0x1dcfa2(0x231)](_0x1dcfa2(0x20b)),_0x240300();})[_0x558a17(0x1fa)](_0xf99070=>{const _0x2b408d=_0x558a17;_0xf5c6a0[_0x2b408d(0x231)]('Error\x20Send\x20Components\x20'+_0xf99070),_0xab6038(_0xf99070);});}catch(_0x3abb32){_0xf5c6a0['log'](_0x558a17(0x207)+_0x3abb32),_0xab6038(_0x3abb32);}});}function callSentComponents(_0x247940,_0x2cdb27,_0x3586cf,_0x57a135){return new Promise((_0x32c117,_0x11158b)=>{const _0x3da447=a32_0x4916;try{const _0x1c5b09={'methodType':constants['METHOD_TYPE_ADD_COMPONENTS_TO_SNAPSHOT'],'body':JSON['stringify'](_0x57a135)};_0x3586cf=_0x3586cf?_0x3586cf[_0x3da447(0x255)]('__','')+'/':'';const _0x1ea42d=_0x247940+_0x3da447(0x1fb)+_0x3586cf[_0x3da447(0x255)]('__','')+_0x3da447(0x218);http[_0x3da447(0x239)](_0x1ea42d,_0x2cdb27,_0x3586cf[_0x3da447(0x255)]('__',''),JSON[_0x3da447(0x24d)](_0x1c5b09))[_0x3da447(0x226)](()=>{_0x32c117();})[_0x3da447(0x1fa)](_0x11158b);}catch(_0x5ac009){_0x11158b(_0x5ac009);}});}function completeDeployment(_0x459a71,_0x12c367,_0x4bbdc4,_0x53a247,_0x3de9c4,_0x230967,_0x4fa9d3,_0x265728,_0x5717bf=![]){return new Promise((_0x5ba8e5,_0x3896b2)=>{const _0x10a0ff=a32_0x4916;try{Promise[_0x10a0ff(0x234)]()['then'](()=>updateAttachmentLog(_0x459a71,_0x12c367,_0x230967,_0x265728,_0x5717bf,!![]))['then'](_0xda8a11=>{const _0x4e8f5a=_0x10a0ff;return _0x5717bf=_0xda8a11,http[_0x4e8f5a(0x21a)](_0x12c367,_0x3de9c4,_0x4bbdc4,_0x4fa9d3,_0x265728,_0xda8a11);})['then'](()=>callUpdateSnapshot(_0x12c367,_0x53a247,_0x4bbdc4,_0x5717bf,_0x265728));}catch(_0x322c31){_0x3896b2(_0x322c31);}});}function updateAttachmentLog(_0x349b71,_0x2bb0c2,_0x765fff,_0x3b056a,_0x5b1e3f,_0x51a56c=![]){return new Promise(_0x3d0377=>{const _0x5b8f6e=a32_0x4916;try{_0x3b056a['log'](_0x5b8f6e(0x1ff)),Promise[_0x5b8f6e(0x234)]()[_0x5b8f6e(0x226)](()=>http[_0x5b8f6e(0x22f)](_0x2bb0c2,_0x765fff,_0x3b056a))[_0x5b8f6e(0x226)](_0x33b182=>{const _0x1106fb=_0x5b8f6e;return http[_0x1106fb(0x24a)](_0x2bb0c2,_0x765fff,_0x33b182,_0x3b056a,_0x5b1e3f);})[_0x5b8f6e(0x226)](()=>_0x3d0377(_0x5b1e3f))[_0x5b8f6e(0x1fa)](()=>_0x3d0377(_0x5b1e3f));}catch(_0x1c9f6a){_0x3b056a[_0x5b8f6e(0x231)](_0x5b8f6e(0x1f5)+_0x1c9f6a),_0x3d0377(_0x5b1e3f);}});}function callUpdateSnapshot(_0xf05cef,_0x149c29,_0x589ac8,_0x392091,_0x2c9562){return new Promise((_0x57230d,_0x5b4ce7)=>{const _0x535080=a32_0x4916;try{_0x2c9562[_0x535080(0x231)]('Start\x20Update\x20Snapshot');const _0x4f7d2d={'Id':_0x149c29,[_0x589ac8+_0x535080(0x251)]:!![],[_0x589ac8+_0x535080(0x250)]:_0x392091};_0xf05cef[_0x535080(0x22e)](_0x589ac8+'Snapshot__c')[_0x535080(0x243)](_0x4f7d2d)[_0x535080(0x226)](()=>{const _0x4a9063=_0x535080;_0x2c9562[_0x4a9063(0x231)]('End\x20Update\x20Snapshot'),_0x57230d();})['catch'](_0xf67c78=>{const _0x4bf6a9=_0x535080;_0x2c9562[_0x4bf6a9(0x231)]('Error\x20Update\x20Snapshot'),_0x5b4ce7(_0xf67c78);});}catch(_0x1b9998){_0x2c9562[_0x535080(0x231)](_0x535080(0x1f2)),_0x5b4ce7(_0x1b9998);}});}function getDependencyList(_0x5222de,_0x847c7f,_0x14bab8){return new Promise((_0x77a38d,_0x4bc5f3)=>{const _0x4067bd=a32_0x4916;try{_0x14bab8[_0x4067bd(0x231)](_0x4067bd(0x24c));const _0x5619e3=[];let _0x5b10a5=Promise['resolve']();_0x847c7f[_0x4067bd(0x235)](_0x16a6fc=>{const _0x240b0a=_0x4067bd;_0x5b10a5=_0x5b10a5['then'](()=>getPrefilledJSON(_0x5222de,_0x16a6fc,_0x14bab8))[_0x240b0a(0x226)](_0x25870c=>{const _0xdfcec3=_0x240b0a;_0x5619e3['push'](_0x25870c),_0x14bab8[_0xdfcec3(0x231)](_0xdfcec3(0x238)+_0x5619e3[_0xdfcec3(0x21f)]+_0xdfcec3(0x1ef)+_0x847c7f['length']);});}),_0x5b10a5[_0x4067bd(0x226)](()=>{const _0x1b1bb9=_0x4067bd;_0x14bab8[_0x1b1bb9(0x231)](_0x1b1bb9(0x213)),_0x77a38d(_0x5619e3);})[_0x4067bd(0x1fa)](_0x15db14=>{const _0x25665b=_0x4067bd;_0x14bab8[_0x25665b(0x231)](_0x25665b(0x20d)+_0x15db14),_0x4bc5f3(_0x15db14);});}catch(_0x290c30){_0x14bab8[_0x4067bd(0x231)](_0x4067bd(0x20d)+_0x290c30),_0x4bc5f3(_0x290c30);}});}function getPrefilledJSON(_0x1b508a,_0x241ffe,_0x3cfa80){return new Promise((_0x57fe7a,_0x32adfd)=>{const _0x3dd670=a32_0x4916;try{const _0x422ebd={'sClassName':_0x3dd670(0x22b),'sType':_0x241ffe[_0x3dd670(0x214)],'sSubType':_0x241ffe['vlocity_cmt__SubType__c'],'sLang':_0x241ffe[_0x3dd670(0x1fc)]};_0x1b508a[_0x3dd670(0x229)]['post'](_0x3dd670(0x20c),_0x422ebd,(_0x45eba9,_0x24f85a)=>{const _0x2e6c90=_0x3dd670;_0x45eba9?(_0x3cfa80['log'](_0x2e6c90(0x244)+_0x45eba9),_0x32adfd(_0x45eba9)):_0x57fe7a(JSON[_0x2e6c90(0x24b)](_0x24f85a));});}catch(_0x2ecfb1){_0x32adfd(_0x2ecfb1),_0x3cfa80[_0x3dd670(0x231)](_0x3dd670(0x1f1)+_0x2ecfb1);}});}function a32_0x4916(_0x5ef622,_0x350391){const _0x2fcb27=a32_0x2fcb();return a32_0x4916=function(_0x491637,_0x4ac99b){_0x491637=_0x491637-0x1ef;let _0x2e6d68=_0x2fcb27[_0x491637];return _0x2e6d68;},a32_0x4916(_0x5ef622,_0x350391);}function extractLwcDependencies(_0x59ed7e,_0x18307c){return new Promise((_0x3d9928,_0x24989f)=>{const _0x580a54=a32_0x4916;try{_0x18307c[_0x580a54(0x231)](_0x580a54(0x242));let _0x432a78=[];_0x59ed7e[_0x580a54(0x235)](_0x2db49a=>{const _0x6981e5=_0x580a54;_0x2db49a[_0x6981e5(0x20f)]&&_0x2db49a[_0x6981e5(0x20f)][_0x6981e5(0x21f)]>0x0&&_0x2db49a[_0x6981e5(0x20f)][_0x6981e5(0x235)](_0x56d4b6=>{const _0x5d73d1=_0x6981e5;_0x56d4b6[_0x5d73d1(0x20f)]&&_0x56d4b6[_0x5d73d1(0x20f)][_0x5d73d1(0x21f)]>0x0&&_0x56d4b6[_0x5d73d1(0x20f)][_0x5d73d1(0x235)](_0x225668=>{const _0x16375a=_0x5d73d1;_0x225668[_0x16375a(0x222)][0x0][_0x16375a(0x241)]===_0x16375a(0x210)&&_0x432a78[_0x16375a(0x208)](_0x225668[_0x16375a(0x222)][0x0]['propSetMap'][_0x16375a(0x221)]);});});if(_0x2db49a[_0x6981e5(0x257)]&&_0x2db49a[_0x6981e5(0x257)]['elementTypeToLwcTemplateMapping'])for(const [_0x482659,_0x21e0b1]of Object[_0x6981e5(0x202)](_0x2db49a[_0x6981e5(0x257)][_0x6981e5(0x247)])){_0x432a78[_0x6981e5(0x208)](_0x21e0b1);}_0x2db49a[_0x6981e5(0x20f)]&&_0x2db49a[_0x6981e5(0x20f)]['length']>0x0&&_0x2db49a[_0x6981e5(0x20f)][_0x6981e5(0x235)](_0x21ee48=>{const _0x443ff9=_0x6981e5;_0x21ee48[_0x443ff9(0x257)]&&_0x21ee48[_0x443ff9(0x257)][_0x443ff9(0x1f0)]&&_0x432a78['push'](_0x21ee48[_0x443ff9(0x257)]['lwcComponentOverride']),_0x21ee48[_0x443ff9(0x20f)]&&_0x21ee48['children'][_0x443ff9(0x21f)]>0x0&&_0x21ee48[_0x443ff9(0x20f)][_0x443ff9(0x235)](_0x3be84e=>{const _0xafbdc9=_0x443ff9;_0x3be84e['eleArray'][0x0][_0xafbdc9(0x257)]&&_0x3be84e[_0xafbdc9(0x222)][0x0][_0xafbdc9(0x257)][_0xafbdc9(0x1f0)]&&_0x432a78[_0xafbdc9(0x208)](_0x3be84e[_0xafbdc9(0x222)][0x0][_0xafbdc9(0x257)][_0xafbdc9(0x1f0)]);});});}),_0x18307c[_0x580a54(0x231)](_0x580a54(0x23a)),_0x3d9928(_0x432a78);}catch(_0x375e91){_0x18307c[_0x580a54(0x231)](_0x580a54(0x204)+_0x375e91),_0x24989f(_0x375e91);}});}module[a32_0x4870ae(0x240)]={'query':query,'getDependencyList':getDependencyList,'extractLwcDependencies':extractLwcDependencies,'fetchOmniOutContentList':fetchOmniOutContentList,'createLwcFiles':createLwcFiles,'sendComponents':sendComponents,'completeDeployment':completeDeployment};