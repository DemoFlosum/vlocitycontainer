const a32_0x240cb2=a32_0x2c59;(function(_0x36c0b4,_0x3d1846){const _0x57d8e0=a32_0x2c59,_0x4f7777=_0x36c0b4();while(!![]){try{const _0x1bca66=parseInt(_0x57d8e0(0xef))/0x1*(-parseInt(_0x57d8e0(0xed))/0x2)+-parseInt(_0x57d8e0(0xba))/0x3*(parseInt(_0x57d8e0(0xd9))/0x4)+-parseInt(_0x57d8e0(0xeb))/0x5*(-parseInt(_0x57d8e0(0xd2))/0x6)+-parseInt(_0x57d8e0(0xf9))/0x7*(parseInt(_0x57d8e0(0xb1))/0x8)+parseInt(_0x57d8e0(0xb5))/0x9+-parseInt(_0x57d8e0(0xe5))/0xa+parseInt(_0x57d8e0(0xf8))/0xb;if(_0x1bca66===_0x3d1846)break;else _0x4f7777['push'](_0x4f7777['shift']());}catch(_0x5576ff){_0x4f7777['push'](_0x4f7777['shift']());}}}(a32_0x5ca6,0x64e5d));const path=require(a32_0x240cb2(0xa2)),fs=require('fs'),fse=require('fs-extra'),AdmZip=require(a32_0x240cb2(0x9a)),constants=require(a32_0x240cb2(0xe3)),http=require(a32_0x240cb2(0xce));function query(_0x4a207d,_0x4ed5fe,_0x1869cf){return new Promise((_0x2aeb5d,_0x15080f)=>{const _0x158212=a32_0x2c59;try{_0x1869cf[_0x158212(0xb8)]('Start\x20Query'),_0x4a207d[_0x158212(0xf1)](_0x4ed5fe,(_0x465794,_0x1af215)=>{const _0x109090=_0x158212;_0x465794?(_0x1869cf['log'](_0x109090(0xac)+_0x465794),_0x15080f(_0x465794)):(_0x1869cf[_0x109090(0xb8)]('End\x20Query'),_0x2aeb5d(_0x1af215[_0x109090(0xe6)][_0x109090(0xa5)](_0x3f039c=>_0x3f039c[_0x109090(0xab)]&&_0x3f039c[_0x109090(0x9b)]&&_0x3f039c['vlocity_cmt__Language__c'])[_0x109090(0xbb)](({vlocity_cmt__Type__c:_0x42924f,vlocity_cmt__SubType__c:_0x1c3ba2,vlocity_cmt__Language__c:_0x41f787})=>{return''+_0x42924f+_0x1c3ba2+_0x41f787;})));});}catch(_0x102d6e){_0x15080f(_0x102d6e),_0x1869cf[_0x158212(0xb8)](_0x158212(0xac)+_0x102d6e);}});}function fetchOmniOutContentList(_0x17c6c0,_0x14864d,_0x26ce4d){return new Promise((_0x30026e,_0x4ec345)=>{const _0x5989c5=a32_0x2c59;try{_0x26ce4d['log'](_0x5989c5(0xa8));const _0x1846ac=[];let _0x574c97=0x1,_0x14fb8e=Promise[_0x5989c5(0xad)]();_0x14864d[_0x5989c5(0xfa)](_0x255a75=>{_0x14fb8e=_0x14fb8e['then'](()=>fetchOmniOutContent(_0x17c6c0,_0x255a75))['then'](_0x5d6448=>{const _0xf0c56c=a32_0x2c59;_0x5d6448&&_0x5d6448[_0xf0c56c(0xc6)]&&_0x5d6448[_0xf0c56c(0xc6)][_0xf0c56c(0xc7)]===0x2&&(_0x5d6448[_0xf0c56c(0xc6)][0x0]['httpStatusCode']===0xc8&&_0x1846ac['push']({'lwcComponentList':_0x5d6448[_0xf0c56c(0xc6)][0x1][_0xf0c56c(0xb7)][_0xf0c56c(0xe6)],'name':_0x5d6448[_0xf0c56c(0xc6)][0x0][_0xf0c56c(0xb7)]['records'][0x0][_0xf0c56c(0xc4)]})),_0x26ce4d[_0xf0c56c(0xb8)](_0xf0c56c(0xcb)+_0x574c97++ +',\x20retrieved\x20'+_0x1846ac[_0xf0c56c(0xc7)]+',\x20all\x20'+_0x14864d['length']);});}),_0x14fb8e[_0x5989c5(0x9e)](()=>{_0x26ce4d['log']('End\x20Fetch\x20OmniOut\x20Content\x20List\x20'),_0x30026e(_0x1846ac);})[_0x5989c5(0xcc)](_0x397527=>{const _0x2304c2=_0x5989c5;_0x26ce4d[_0x2304c2(0xb8)](_0x2304c2(0xf7)+_0x397527),_0x4ec345(_0x397527);});}catch(_0xe304ca){_0x4ec345(_0xe304ca),_0x26ce4d[_0x5989c5(0xb8)]('Error\x20Fetch\x20OmniOut\x20Content\x20List\x20'+_0xe304ca);}});}function a32_0x2c59(_0x1bcf64,_0x2a32a8){const _0x5ca6aa=a32_0x5ca6();return a32_0x2c59=function(_0x2c59fd,_0x430ac3){_0x2c59fd=_0x2c59fd-0x9a;let _0x45de72=_0x5ca6aa[_0x2c59fd];return _0x45de72;},a32_0x2c59(_0x1bcf64,_0x2a32a8);}function fetchOmniOutContent(_0x4eb6c9,_0x5e25b9){const _0x752b33=a32_0x240cb2;_0x5e25b9=_0x5e25b9['replace']('-','')['replace']('vlocity_cmt__','');const _0x5d16ed={'allOrNone':!![],'compositeRequest':[{'method':_0x752b33(0x9d),'referenceId':'bundleInfo','url':_0x752b33(0xd3)+_0x5e25b9+'\x27'},{'method':_0x752b33(0x9d),'referenceId':_0x752b33(0xdd),'url':_0x752b33(0xc0)}]},_0xaac568=_0x4eb6c9['instanceUrl'],_0xd0a027={'method':'POST','url':_0xaac568+_0x752b33(0xd0),'body':JSON[_0x752b33(0xb9)](_0x5d16ed),'headers':{'Content-Type':_0x752b33(0xd1)}};return _0x4eb6c9['request'](_0xd0a027);}function createLwcFiles(_0x2b7878,_0x5b95f4,_0x4e3017,_0x28a352){return new Promise((_0x1522c9,_0x558c01)=>{const _0x56c029=a32_0x2c59;try{_0x28a352[_0x56c029(0xb8)](_0x56c029(0xcf));let _0x3cd343=[],_0x204bb1=[],_0x168922=0x0,_0x215f28=new AdmZip();_0x5b95f4[_0x56c029(0xfa)](_0x32126d=>{const _0x35f9a0=_0x56c029;_0x204bb1['push']({'apiName':_0x32126d[_0x35f9a0(0xbe)],'componentType':_0x35f9a0(0xe2),'label':_0x35f9a0(0xa7)+_0x32126d['name']}),_0x32126d[_0x35f9a0(0xee)]['forEach'](_0x5a0449=>{const _0x46a3cf=_0x35f9a0;_0x5a0449[_0x46a3cf(0xb2)]!==_0x46a3cf(0xe0)&&(_0x168922+=_0x5a0449['Source'][_0x46a3cf(0xc7)],_0x168922<constants['MAX_SIZE_UNZIP_ATTACHMENT']?_0x215f28[_0x46a3cf(0xc5)](''+_0x5a0449[_0x46a3cf(0xa3)],Buffer[_0x46a3cf(0xf6)](_0x5a0449[_0x46a3cf(0xb2)][_0x46a3cf(0xf3)](new RegExp(_0x46a3cf(0xb3),'g'),'c'))):(_0x3cd343[_0x46a3cf(0xaf)]({'snapshotId':_0x4e3017,'typeList':[{'type':_0x46a3cf(0xe2),'zip':_0x215f28[_0x46a3cf(0xaa)]()[_0x46a3cf(0xea)](_0x46a3cf(0xe7)),'componentList':_0x204bb1}]}),_0x204bb1=[],_0x168922=0x0,_0x215f28=new AdmZip()));}),delete _0x32126d[_0x35f9a0(0xee)];}),_0x204bb1['length']&&_0x3cd343[_0x56c029(0xaf)]({'snapshotId':_0x4e3017,'typeList':[{'type':_0x56c029(0xe2),'zip':_0x215f28[_0x56c029(0xaa)]()[_0x56c029(0xea)](_0x56c029(0xe7)),'componentList':_0x204bb1}]}),_0x28a352[_0x56c029(0xb8)](_0x56c029(0xcd)),_0x1522c9(_0x3cd343);}catch(_0x2c3f9c){_0x28a352[_0x56c029(0xb8)]('Error\x20Create\x20Lwc\x20Files\x20'+_0x2c3f9c),_0x558c01(_0x2c3f9c);}});}function sendComponents(_0x5141ab,_0x352a24,_0x21858f,_0x44cb55,_0x4d2e72){return new Promise((_0x487c3e,_0x431e0b)=>{const _0x452813=a32_0x2c59;try{_0x4d2e72[_0x452813(0xb8)](_0x452813(0x9f));let _0x3e9c2b=Promise['resolve']();_0x44cb55[_0x452813(0xfa)](_0x31a8f7=>{const _0x17b593=_0x452813;_0x3e9c2b=_0x3e9c2b[_0x17b593(0x9e)](()=>callSentComponents(_0x5141ab,_0x352a24,_0x21858f,_0x31a8f7));}),_0x3e9c2b['then'](()=>{const _0x12b8ec=_0x452813;_0x4d2e72[_0x12b8ec(0xb8)](_0x12b8ec(0xb4)),_0x487c3e();})[_0x452813(0xcc)](_0x4af1f7=>{_0x4d2e72['log']('Error\x20Send\x20Components\x20'+_0x4af1f7),_0x431e0b(_0x4af1f7);});}catch(_0x59cf11){_0x4d2e72[_0x452813(0xb8)](_0x452813(0xca)+_0x59cf11),_0x431e0b(_0x59cf11);}});}function callSentComponents(_0x355780,_0x149297,_0x50eeaa,_0xb9a8ff){return new Promise((_0x5044b4,_0x13b88a)=>{const _0x20ea90=a32_0x2c59;try{const _0x43242b={'methodType':constants[_0x20ea90(0xe9)],'body':JSON[_0x20ea90(0xb9)](_0xb9a8ff)};_0x50eeaa=_0x50eeaa?_0x50eeaa['replace']('__','')+'/':'';const _0x580fa2=_0x355780+_0x20ea90(0xde)+_0x50eeaa[_0x20ea90(0xf3)]('__','')+'unlocked-packages';http[_0x20ea90(0xbf)](_0x580fa2,_0x149297,_0x50eeaa[_0x20ea90(0xf3)]('__',''),JSON[_0x20ea90(0xb9)](_0x43242b))[_0x20ea90(0x9e)](()=>{_0x5044b4();})[_0x20ea90(0xcc)](_0x13b88a);}catch(_0x3a68fa){_0x13b88a(_0x3a68fa);}});}function completeDeployment(_0xc1167c,_0x2cb6ba,_0x3e6773,_0x1c9370,_0x2197a3,_0x410b46,_0x3fa8bc,_0x2cbe28,_0x5df657=![]){return new Promise((_0x7ccdf7,_0x584828)=>{const _0x2a619b=a32_0x2c59;try{Promise[_0x2a619b(0xad)]()[_0x2a619b(0x9e)](()=>updateAttachmentLog(_0xc1167c,_0x2cb6ba,_0x410b46,_0x2cbe28,_0x5df657,!![]))[_0x2a619b(0x9e)](_0xd994bd=>{return _0x5df657=_0xd994bd,http['callUpdateLog'](_0x2cb6ba,_0x2197a3,_0x3e6773,_0x3fa8bc,_0x2cbe28,_0xd994bd);})[_0x2a619b(0x9e)](()=>callUpdateSnapshot(_0x2cb6ba,_0x1c9370,_0x3e6773,_0x5df657,_0x2cbe28));}catch(_0x3f837b){_0x584828(_0x3f837b);}});}function updateAttachmentLog(_0x1a1b76,_0x27b279,_0x40b5fc,_0x1918eb,_0x306900,_0x414e52=![]){return new Promise(_0x2f8d0f=>{const _0x547d5e=a32_0x2c59;try{_0x1918eb[_0x547d5e(0xb8)](_0x547d5e(0xb0)),Promise['resolve']()[_0x547d5e(0x9e)](()=>http['getAttachmentBody'](_0x27b279,_0x40b5fc,_0x1918eb))[_0x547d5e(0x9e)](_0x14ab90=>{const _0x4710d4=_0x547d5e;return http[_0x4710d4(0xd8)](_0x27b279,_0x40b5fc,_0x14ab90,_0x1918eb,_0x306900);})[_0x547d5e(0x9e)](()=>_0x2f8d0f(_0x306900))['catch'](()=>_0x2f8d0f(_0x306900));}catch(_0x17a61a){_0x1918eb['log'](_0x547d5e(0xd5)+_0x17a61a),_0x2f8d0f(_0x306900);}});}function callUpdateSnapshot(_0x25bf28,_0x254856,_0x1e057a,_0x2bddc8,_0x38ae63){return new Promise((_0x5a0420,_0x323189)=>{const _0x2bafb0=a32_0x2c59;try{_0x38ae63[_0x2bafb0(0xb8)](_0x2bafb0(0xbc));const _0x649b48={'Id':_0x254856,[_0x1e057a+_0x2bafb0(0xf0)]:!![],[_0x1e057a+_0x2bafb0(0xec)]:_0x2bddc8};_0x25bf28[_0x2bafb0(0xfb)](_0x1e057a+_0x2bafb0(0xae))[_0x2bafb0(0xd7)](_0x649b48)[_0x2bafb0(0x9e)](()=>{const _0x4a0069=_0x2bafb0;_0x38ae63[_0x4a0069(0xb8)](_0x4a0069(0xe1)),_0x5a0420();})['catch'](_0x30b8cd=>{const _0x4decf1=_0x2bafb0;_0x38ae63[_0x4decf1(0xb8)](_0x4decf1(0xa0)),_0x323189(_0x30b8cd);});}catch(_0x453dfe){_0x38ae63['log']('Error\x20Update\x20Snapshot'),_0x323189(_0x453dfe);}});}function getDependencyList(_0x58a869,_0x57add9,_0x4c65b1){return new Promise((_0x3ff391,_0x3b984e)=>{const _0x2c3ea7=a32_0x2c59;try{_0x4c65b1[_0x2c3ea7(0xb8)](_0x2c3ea7(0xa9));const _0x32f284=[];let _0x362f9e=Promise[_0x2c3ea7(0xad)]();_0x57add9[_0x2c3ea7(0xfa)](_0x9f0050=>{_0x362f9e=_0x362f9e['then'](()=>getPrefilledJSON(_0x58a869,_0x9f0050,_0x4c65b1))['then'](_0x4e039c=>{const _0xd4dce0=a32_0x2c59;_0x32f284[_0xd4dce0(0xaf)](_0x4e039c),_0x4c65b1['log'](_0xd4dce0(0xf5)+_0x32f284['length']+_0xd4dce0(0xf2)+_0x57add9[_0xd4dce0(0xc7)]);});}),_0x362f9e['then'](()=>{const _0x40897c=_0x2c3ea7;_0x4c65b1[_0x40897c(0xb8)](_0x40897c(0xa6)),_0x3ff391(_0x32f284);})[_0x2c3ea7(0xcc)](_0x120ea1=>{const _0x12c605=_0x2c3ea7;_0x4c65b1[_0x12c605(0xb8)](_0x12c605(0xdf)+_0x120ea1),_0x3b984e(_0x120ea1);});}catch(_0x3bb0ed){_0x4c65b1[_0x2c3ea7(0xb8)](_0x2c3ea7(0xdf)+_0x3bb0ed),_0x3b984e(_0x3bb0ed);}});}function a32_0x5ca6(){const _0x447024=['application/json','1120596TvePzv','/services/data/v48.0/tooling/query?q=SELECT+Id,DeveloperName,Description+FROM+LightningComponentBundle+WHERE+DeveloperName=\x27','type','Error\x20Update\x20Attachment\x20Log\x20','Error\x20Extract\x20LWC\x20Dependencies\x20','update','callUpdateAttachmentLog','315596GBttps','lwcComponentOverride','Vlocity\x20BuildJSONWithPrefill','propSetMap','bundleResources','/services/apexrest/','Error\x20Get\x20Dependency\x20List\x20','(hidden)','End\x20Update\x20Snapshot','LightningComponentBundle','../../../constants','entries','3123940adlTCS','records','base64','children','METHOD_TYPE_ADD_COMPONENTS_TO_SNAPSHOT','toString','15GhMbIP','Is_Error__c','36398HbtDzW','lwcComponentList','44jSaVfF','Is_Completed__c','query','\x20from\x20','replace','/vlocity_cmt/v1/GenericInvoke/','Process\x20Get\x20Dependency,\x20processed\x20','from','Error\x20Fetch\x20OmniOut\x20Content\x20List\x20','18948523bxAIax','59703acfBOc','forEach','sobject','adm-zip','vlocity_cmt__SubType__c','vlocity_cmt__Language__c','GET','then','Start\x20Send\x20Components','Error\x20Update\x20Snapshot','Start\x20Extract\x20LWC\x20Dependencies','path','FilePath','lwcName','filter','End\x20Get\x20Dependency\x20List\x20','lwc/','Start\x20Fetch\x20OmniOut\x20Content\x20List\x20','Start\x20Get\x20Dependency\x20List\x20','toBuffer','vlocity_cmt__Type__c','Error\x20Query\x20','resolve','Snapshot__c','push','Start\x20Update\x20Attachment\x20Log','640PHYBnL','Source','vlocity_cmt','End\x20Send\x20Components','2173068pUbNrg','elementTypeToLwcTemplateMapping','body','log','stringify','12tHoeiy','map','Start\x20Update\x20Snapshot','apex','name','post','/services/data/v48.0/tooling/query?q=SELECT+Id,FilePath,Format,Source+FROM+LightningComponentResource+WHERE+LightningComponentBundleId=\x27@{bundleInfo.records[0].Id}\x27','parse','Custom\x20Lightning\x20Web\x20Component','eleArray','DeveloperName','addFile','compositeResponse','length','exports','End\x20Extract\x20LWC\x20Dependencies','Error\x20Send\x20Components\x20','Process\x20Fetch\x20OmniOut\x20Content,\x20processed\x20','catch','End\x20Create\x20Lwc\x20Files','../../../services/http','Start\x20Create\x20Lwc\x20Files','/services/data/v50.0/tooling/composite'];a32_0x5ca6=function(){return _0x447024;};return a32_0x5ca6();}function getPrefilledJSON(_0x5e62a7,_0x1be7d0,_0x596eaa){return new Promise((_0x509ea0,_0x2584a1)=>{const _0x19ebc7=a32_0x2c59;try{const _0x217ddb={'sClassName':_0x19ebc7(0xdb),'sType':_0x1be7d0[_0x19ebc7(0xab)],'sSubType':_0x1be7d0[_0x19ebc7(0x9b)],'sLang':_0x1be7d0[_0x19ebc7(0x9c)]};_0x5e62a7[_0x19ebc7(0xbd)][_0x19ebc7(0xbf)](_0x19ebc7(0xf4),_0x217ddb,(_0x1745aa,_0x40da0a)=>{const _0x1b2393=_0x19ebc7;_0x1745aa?(_0x596eaa['log']('Error\x20getPrefilledJSON\x20'+_0x1745aa),_0x2584a1(_0x1745aa)):_0x509ea0(JSON[_0x1b2393(0xc1)](_0x40da0a));});}catch(_0x4cbb7d){_0x2584a1(_0x4cbb7d),_0x596eaa[_0x19ebc7(0xb8)]('Error\x20Get\x20Prefilled\x20JSON\x20'+_0x4cbb7d);}});}function extractLwcDependencies(_0xd4016a,_0x3b5c43){return new Promise((_0x45540f,_0x2c6014)=>{const _0x2db5d8=a32_0x2c59;try{_0x3b5c43[_0x2db5d8(0xb8)](_0x2db5d8(0xa1));let _0x4d42fe=[];_0xd4016a[_0x2db5d8(0xfa)](_0xa073c9=>{const _0x471ebf=_0x2db5d8;_0xa073c9['children']&&_0xa073c9[_0x471ebf(0xe8)][_0x471ebf(0xc7)]>0x0&&_0xa073c9['children']['forEach'](_0x164b2d=>{const _0x500c9d=_0x471ebf;_0x164b2d[_0x500c9d(0xe8)]&&_0x164b2d[_0x500c9d(0xe8)][_0x500c9d(0xc7)]>0x0&&_0x164b2d[_0x500c9d(0xe8)][_0x500c9d(0xfa)](_0x2a6260=>{const _0x24f033=_0x500c9d;_0x2a6260[_0x24f033(0xc3)][0x0][_0x24f033(0xd4)]===_0x24f033(0xc2)&&_0x4d42fe[_0x24f033(0xaf)](_0x2a6260[_0x24f033(0xc3)][0x0]['propSetMap'][_0x24f033(0xa4)]);});});if(_0xa073c9[_0x471ebf(0xdc)]&&_0xa073c9[_0x471ebf(0xdc)][_0x471ebf(0xb6)])for(const [_0x2fb6dd,_0x136f55]of Object[_0x471ebf(0xe4)](_0xa073c9[_0x471ebf(0xdc)][_0x471ebf(0xb6)])){_0x4d42fe['push'](_0x136f55);}_0xa073c9[_0x471ebf(0xe8)]&&_0xa073c9['children'][_0x471ebf(0xc7)]>0x0&&_0xa073c9['children'][_0x471ebf(0xfa)](_0x1febe3=>{const _0xb22cd9=_0x471ebf;_0x1febe3[_0xb22cd9(0xdc)]&&_0x1febe3[_0xb22cd9(0xdc)][_0xb22cd9(0xda)]&&_0x4d42fe[_0xb22cd9(0xaf)](_0x1febe3[_0xb22cd9(0xdc)][_0xb22cd9(0xda)]),_0x1febe3[_0xb22cd9(0xe8)]&&_0x1febe3['children'][_0xb22cd9(0xc7)]>0x0&&_0x1febe3[_0xb22cd9(0xe8)][_0xb22cd9(0xfa)](_0x1356b7=>{const _0x1276bf=_0xb22cd9;_0x1356b7[_0x1276bf(0xc3)][0x0]['propSetMap']&&_0x1356b7[_0x1276bf(0xc3)][0x0][_0x1276bf(0xdc)]['lwcComponentOverride']&&_0x4d42fe[_0x1276bf(0xaf)](_0x1356b7['eleArray'][0x0][_0x1276bf(0xdc)][_0x1276bf(0xda)]);});});}),_0x3b5c43[_0x2db5d8(0xb8)](_0x2db5d8(0xc9)),_0x45540f(_0x4d42fe);}catch(_0x427d5a){_0x3b5c43[_0x2db5d8(0xb8)](_0x2db5d8(0xd6)+_0x427d5a),_0x2c6014(_0x427d5a);}});}module[a32_0x240cb2(0xc8)]={'query':query,'getDependencyList':getDependencyList,'extractLwcDependencies':extractLwcDependencies,'fetchOmniOutContentList':fetchOmniOutContentList,'createLwcFiles':createLwcFiles,'sendComponents':sendComponents,'completeDeployment':completeDeployment};