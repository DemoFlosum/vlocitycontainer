const a26_0x2a17fa=a26_0x2213;(function(_0x4cacc0,_0x43cb96){const _0x4a4b20=a26_0x2213,_0x4796b1=_0x4cacc0();while(!![]){try{const _0x2e838e=-parseInt(_0x4a4b20(0xc9))/0x1*(-parseInt(_0x4a4b20(0xc5))/0x2)+-parseInt(_0x4a4b20(0xa9))/0x3+-parseInt(_0x4a4b20(0xc0))/0x4+parseInt(_0x4a4b20(0xe2))/0x5+parseInt(_0x4a4b20(0x95))/0x6*(parseInt(_0x4a4b20(0x86))/0x7)+parseInt(_0x4a4b20(0x8b))/0x8*(-parseInt(_0x4a4b20(0x91))/0x9)+parseInt(_0x4a4b20(0x93))/0xa;if(_0x2e838e===_0x43cb96)break;else _0x4796b1['push'](_0x4796b1['shift']());}catch(_0x178f3c){_0x4796b1['push'](_0x4796b1['shift']());}}}(a26_0x336f,0x60f13));const path=require(a26_0x2a17fa(0xcf)),fs=require('fs'),fse=require(a26_0x2a17fa(0xa0)),AdmZip=require('adm-zip'),constants=require(a26_0x2a17fa(0x92)),http=require(a26_0x2a17fa(0xa2));function query(_0x538ecc,_0x341b84,_0x2754f0){return new Promise((_0x2724a2,_0x256825)=>{const _0x223593=a26_0x2213;try{_0x2754f0[_0x223593(0x97)](_0x223593(0xb9)),_0x538ecc[_0x223593(0xb0)](_0x341b84,(_0x5a5567,_0x5f2908)=>{const _0x5bb9f2=_0x223593;_0x5a5567?(_0x2754f0[_0x5bb9f2(0x97)](_0x5bb9f2(0xd7)+_0x5a5567),_0x256825(_0x5a5567)):(_0x2754f0[_0x5bb9f2(0x97)]('End\x20Query'),_0x2724a2(_0x5f2908[_0x5bb9f2(0xdc)]['filter'](_0x2e6032=>_0x2e6032[_0x5bb9f2(0xba)]&&_0x2e6032[_0x5bb9f2(0xe1)]&&_0x2e6032[_0x5bb9f2(0xc6)])[_0x5bb9f2(0xe5)](({vlocity_cmt__Type__c:_0x3eb168,vlocity_cmt__SubType__c:_0x3e2e4b,vlocity_cmt__Language__c:_0x309efd})=>{return''+_0x3eb168+_0x3e2e4b+_0x309efd;})));});}catch(_0x2a6f0b){_0x256825(_0x2a6f0b),_0x2754f0[_0x223593(0x97)](_0x223593(0xd7)+_0x2a6f0b);}});}function fetchOmniOutContentList(_0x187c34,_0x466ebe,_0x310f97){return new Promise((_0x4f5d84,_0x5adf1d)=>{const _0x273dc5=a26_0x2213;try{_0x310f97['log'](_0x273dc5(0xa4));const _0x35cfeb=[];let _0x272904=0x1,_0x237079=Promise[_0x273dc5(0xdb)]();_0x466ebe[_0x273dc5(0xca)](_0x128013=>{const _0x790743=_0x273dc5;_0x237079=_0x237079[_0x790743(0xbd)](()=>fetchOmniOutContent(_0x187c34,_0x128013))[_0x790743(0xbd)](_0x207b18=>{const _0x2b8044=_0x790743;_0x207b18&&_0x207b18['compositeResponse']&&_0x207b18[_0x2b8044(0xbb)][_0x2b8044(0xa7)]===0x2&&(_0x207b18[_0x2b8044(0xbb)][0x0][_0x2b8044(0xa6)]===0xc8&&_0x35cfeb[_0x2b8044(0x8a)]({'lwcComponentList':_0x207b18['compositeResponse'][0x1][_0x2b8044(0xc8)][_0x2b8044(0xdc)],'name':_0x207b18[_0x2b8044(0xbb)][0x0][_0x2b8044(0xc8)][_0x2b8044(0xdc)][0x0][_0x2b8044(0x98)]})),_0x310f97[_0x2b8044(0x97)](_0x2b8044(0xb6)+_0x272904++ +_0x2b8044(0xe7)+_0x35cfeb[_0x2b8044(0xa7)]+_0x2b8044(0xcb)+_0x466ebe['length']);});}),_0x237079[_0x273dc5(0xbd)](()=>{const _0x528d6f=_0x273dc5;_0x310f97['log'](_0x528d6f(0xd6)),_0x4f5d84(_0x35cfeb);})[_0x273dc5(0xb7)](_0x114f92=>{const _0x3968e4=_0x273dc5;_0x310f97[_0x3968e4(0x97)](_0x3968e4(0xd1)+_0x114f92),_0x5adf1d(_0x114f92);});}catch(_0x34f106){_0x5adf1d(_0x34f106),_0x310f97['log']('Error\x20Fetch\x20OmniOut\x20Content\x20List\x20'+_0x34f106);}});}function fetchOmniOutContent(_0x2676a4,_0x1088e4){const _0x161934=a26_0x2a17fa;_0x1088e4=_0x1088e4[_0x161934(0xbf)]('-','')['replace'](_0x161934(0xdd),'');const _0x52f4d2={'allOrNone':!![],'compositeRequest':[{'method':_0x161934(0xc2),'referenceId':_0x161934(0xae),'url':_0x161934(0x8e)+_0x1088e4+'\x27'},{'method':_0x161934(0xc2),'referenceId':'bundleResources','url':_0x161934(0xad)}]},_0x30339c=_0x2676a4['instanceUrl'],_0x543fe3={'method':_0x161934(0xb4),'url':_0x30339c+_0x161934(0x8f),'body':JSON[_0x161934(0xa5)](_0x52f4d2),'headers':{'Content-Type':'application/json'}};return _0x2676a4[_0x161934(0xd2)](_0x543fe3);}function createLwcFiles(_0x11bc9d,_0x451953,_0x464ca9,_0x218645){return new Promise((_0x35f591,_0x7a296e)=>{const _0x39674a=a26_0x2213;try{_0x218645[_0x39674a(0x97)](_0x39674a(0x9a));let _0x5b39ec=[],_0xc4ebf0=[],_0x22fe65=0x0,_0x5c70b5=new AdmZip();_0x451953[_0x39674a(0xca)](_0x3baa51=>{const _0x44b98a=_0x39674a;_0xc4ebf0[_0x44b98a(0x8a)]({'apiName':_0x3baa51[_0x44b98a(0xaa)],'componentType':_0x44b98a(0x90),'label':_0x44b98a(0x8d)+_0x3baa51[_0x44b98a(0xaa)]}),_0x3baa51[_0x44b98a(0x87)][_0x44b98a(0xca)](_0x402338=>{const _0x3cd744=_0x44b98a;_0x402338['Source']!==_0x3cd744(0xe8)&&(_0x22fe65+=_0x402338[_0x3cd744(0xd5)][_0x3cd744(0xa7)],_0x22fe65<constants[_0x3cd744(0xa1)]?_0x5c70b5[_0x3cd744(0xc1)](''+_0x402338[_0x3cd744(0xd3)],Buffer[_0x3cd744(0xc4)](_0x402338[_0x3cd744(0xd5)]['replace'](new RegExp(_0x3cd744(0xe4),'g'),'c'))):(_0x5b39ec[_0x3cd744(0x8a)]({'snapshotId':_0x464ca9,'typeList':[{'type':'LightningComponentBundle','zip':_0x5c70b5[_0x3cd744(0x89)]()[_0x3cd744(0xcc)](_0x3cd744(0xbe)),'componentList':_0xc4ebf0}]}),_0xc4ebf0=[],_0x22fe65=0x0,_0x5c70b5=new AdmZip()));}),delete _0x3baa51[_0x44b98a(0x87)];}),_0xc4ebf0[_0x39674a(0xa7)]&&_0x5b39ec['push']({'snapshotId':_0x464ca9,'typeList':[{'type':'LightningComponentBundle','zip':_0x5c70b5[_0x39674a(0x89)]()[_0x39674a(0xcc)](_0x39674a(0xbe)),'componentList':_0xc4ebf0}]}),_0x218645[_0x39674a(0x97)](_0x39674a(0xc7)),_0x35f591(_0x5b39ec);}catch(_0x14a910){_0x218645[_0x39674a(0x97)](_0x39674a(0x8c)+_0x14a910),_0x7a296e(_0x14a910);}});}function sendComponents(_0x5de61a,_0x36e430,_0x3ffc93,_0x3a4e1b,_0x27c284){return new Promise((_0x1f9e91,_0xaae4aa)=>{const _0x3a0409=a26_0x2213;try{_0x27c284['log'](_0x3a0409(0xc3));let _0x3670f4=Promise[_0x3a0409(0xdb)]();_0x3a4e1b[_0x3a0409(0xca)](_0x4f30d0=>{const _0x222cbf=_0x3a0409;_0x3670f4=_0x3670f4[_0x222cbf(0xbd)](()=>callSentComponents(_0x5de61a,_0x36e430,_0x3ffc93,_0x4f30d0));}),_0x3670f4[_0x3a0409(0xbd)](()=>{const _0x34a5df=_0x3a0409;_0x27c284[_0x34a5df(0x97)](_0x34a5df(0xbc)),_0x1f9e91();})['catch'](_0x3d572f=>{const _0x55b4c2=_0x3a0409;_0x27c284[_0x55b4c2(0x97)](_0x55b4c2(0x88)+_0x3d572f),_0xaae4aa(_0x3d572f);});}catch(_0x4ef4ef){_0x27c284[_0x3a0409(0x97)](_0x3a0409(0x88)+_0x4ef4ef),_0xaae4aa(_0x4ef4ef);}});}function a26_0x2213(_0x906800,_0x480e7a){const _0x336f15=a26_0x336f();return a26_0x2213=function(_0x221307,_0x5c8f7e){_0x221307=_0x221307-0x85;let _0x2ed4f7=_0x336f15[_0x221307];return _0x2ed4f7;},a26_0x2213(_0x906800,_0x480e7a);}function callSentComponents(_0x22ea46,_0x5ba38d,_0x177c14,_0x915a46){return new Promise((_0xb3b702,_0x52d077)=>{const _0x5e192a=a26_0x2213;try{const _0x59cfaa={'methodType':constants[_0x5e192a(0x9e)],'body':JSON['stringify'](_0x915a46)};_0x177c14=_0x177c14?_0x177c14[_0x5e192a(0xbf)]('__','')+'/':'';const _0x1ad8cf=_0x22ea46+_0x5e192a(0xe0)+_0x177c14[_0x5e192a(0xbf)]('__','')+_0x5e192a(0xab);http['post'](_0x1ad8cf,_0x5ba38d,_0x177c14[_0x5e192a(0xbf)]('__',''),JSON[_0x5e192a(0xa5)](_0x59cfaa))[_0x5e192a(0xbd)](()=>{_0xb3b702();})[_0x5e192a(0xb7)](_0x52d077);}catch(_0x47d682){_0x52d077(_0x47d682);}});}function completeDeployment(_0x2dc2f1,_0x345004,_0x3367c0,_0x3ddb49,_0x73ebb0,_0x358c71,_0x2c02ff,_0x316e39,_0x165877=![]){return new Promise((_0x3e856a,_0x12a5d5)=>{const _0x18d1fb=a26_0x2213;try{Promise['resolve']()[_0x18d1fb(0xbd)](()=>updateAttachmentLog(_0x2dc2f1,_0x345004,_0x358c71,_0x316e39,_0x165877,!![]))[_0x18d1fb(0xbd)](_0x4f8bfa=>{const _0x275407=_0x18d1fb;return _0x165877=_0x4f8bfa,http[_0x275407(0xd8)](_0x345004,_0x73ebb0,_0x3367c0,_0x2c02ff,_0x316e39,_0x4f8bfa);})[_0x18d1fb(0xbd)](()=>callUpdateSnapshot(_0x345004,_0x3ddb49,_0x3367c0,_0x165877,_0x316e39));}catch(_0x2ee612){_0x12a5d5(_0x2ee612);}});}function updateAttachmentLog(_0x3326a6,_0x2daee5,_0x1f2174,_0x8c46dd,_0x2ee58d,_0x30e9ea=![]){return new Promise(_0xd97aa0=>{const _0x145deb=a26_0x2213;try{_0x8c46dd[_0x145deb(0x97)](_0x145deb(0x9d)),Promise['resolve']()[_0x145deb(0xbd)](()=>http[_0x145deb(0xe3)](_0x2daee5,_0x1f2174,_0x8c46dd))[_0x145deb(0xbd)](_0x930583=>{return http['callUpdateAttachmentLog'](_0x2daee5,_0x1f2174,_0x930583,_0x8c46dd,_0x2ee58d);})['then'](()=>_0xd97aa0(_0x2ee58d))[_0x145deb(0xb7)](()=>_0xd97aa0(_0x2ee58d));}catch(_0x10b2ff){_0x8c46dd[_0x145deb(0x97)]('Error\x20Update\x20Attachment\x20Log\x20'+_0x10b2ff),_0xd97aa0(_0x2ee58d);}});}function a26_0x336f(){const _0x306ceb=['entries',',\x20retrieved\x20','(hidden)','post','type','Error\x20Extract\x20LWC\x20Dependencies\x20','1414084pVIrQZ','lwcComponentList','Error\x20Send\x20Components\x20','toBuffer','push','2056784GVNtSu','Error\x20Create\x20Lwc\x20Files\x20','lwc/','/services/data/v48.0/tooling/query?q=SELECT+Id,DeveloperName,Description+FROM+LightningComponentBundle+WHERE+DeveloperName=\x27','/services/data/v50.0/tooling/composite','LightningComponentBundle','9KzyBMv','../../../constants','10012080lXYpXC','Snapshot__c','18eDIxCs','eleArray','log','DeveloperName','propSetMap','Start\x20Create\x20Lwc\x20Files','parse','exports','Start\x20Update\x20Attachment\x20Log','METHOD_TYPE_ADD_COMPONENTS_TO_SNAPSHOT','Error\x20Get\x20Dependency\x20List\x20','fs-extra','MAX_SIZE_UNZIP_ATTACHMENT','../../../services/http','apex','Start\x20Fetch\x20OmniOut\x20Content\x20List\x20','stringify','httpStatusCode','length','Error\x20Update\x20Snapshot','1894518hSNYEL','name','unlocked-packages','End\x20Extract\x20LWC\x20Dependencies','/services/data/v48.0/tooling/query?q=SELECT+Id,FilePath,Format,Source+FROM+LightningComponentResource+WHERE+LightningComponentBundleId=\x27@{bundleInfo.records[0].Id}\x27','bundleInfo','update','query','Custom\x20Lightning\x20Web\x20Component','Vlocity\x20BuildJSONWithPrefill','sobject','POST','children','Process\x20Fetch\x20OmniOut\x20Content,\x20processed\x20','catch','Is_Completed__c','Start\x20Query','vlocity_cmt__Type__c','compositeResponse','End\x20Send\x20Components','then','base64','replace','2310436HimcRw','addFile','GET','Start\x20Send\x20Components','from','30beSdEy','vlocity_cmt__Language__c','End\x20Create\x20Lwc\x20Files','body','7363PgmgLT','forEach',',\x20all\x20','toString','Is_Error__c','lwcComponentOverride','path','Process\x20Get\x20Dependency,\x20processed\x20','Error\x20Fetch\x20OmniOut\x20Content\x20List\x20','request','FilePath','elementTypeToLwcTemplateMapping','Source','End\x20Fetch\x20OmniOut\x20Content\x20List\x20','Error\x20Query\x20','callUpdateLog','Start\x20Extract\x20LWC\x20Dependencies','lwcName','resolve','records','vlocity_cmt__','Start\x20Update\x20Snapshot','Error\x20Get\x20Prefilled\x20JSON\x20','/services/apexrest/','vlocity_cmt__SubType__c','727995lIUXdi','getAttachmentBody','vlocity_cmt','map'];a26_0x336f=function(){return _0x306ceb;};return a26_0x336f();}function callUpdateSnapshot(_0xeb17e0,_0x29784a,_0x242795,_0x2d1277,_0x27e845){return new Promise((_0x467206,_0x172eb5)=>{const _0x231bf8=a26_0x2213;try{_0x27e845[_0x231bf8(0x97)](_0x231bf8(0xde));const _0x483fd6={'Id':_0x29784a,[_0x242795+_0x231bf8(0xb8)]:!![],[_0x242795+_0x231bf8(0xcd)]:_0x2d1277};_0xeb17e0[_0x231bf8(0xb3)](_0x242795+_0x231bf8(0x94))[_0x231bf8(0xaf)](_0x483fd6)[_0x231bf8(0xbd)](()=>{const _0x2aa2ac=_0x231bf8;_0x27e845[_0x2aa2ac(0x97)]('End\x20Update\x20Snapshot'),_0x467206();})['catch'](_0x51f11b=>{const _0x11b89a=_0x231bf8;_0x27e845[_0x11b89a(0x97)](_0x11b89a(0xa8)),_0x172eb5(_0x51f11b);});}catch(_0x5b1505){_0x27e845['log'](_0x231bf8(0xa8)),_0x172eb5(_0x5b1505);}});}function getDependencyList(_0x35f6a0,_0x20b395,_0x5127a2){return new Promise((_0x102783,_0x48dac0)=>{const _0x2bf8f9=a26_0x2213;try{_0x5127a2[_0x2bf8f9(0x97)]('Start\x20Get\x20Dependency\x20List\x20');const _0x99ca16=[];let _0x4b5ebd=Promise[_0x2bf8f9(0xdb)]();_0x20b395[_0x2bf8f9(0xca)](_0xf77b99=>{const _0xf37590=_0x2bf8f9;_0x4b5ebd=_0x4b5ebd[_0xf37590(0xbd)](()=>getPrefilledJSON(_0x35f6a0,_0xf77b99,_0x5127a2))[_0xf37590(0xbd)](_0x364534=>{const _0x3df9f1=_0xf37590;_0x99ca16[_0x3df9f1(0x8a)](_0x364534),_0x5127a2['log'](_0x3df9f1(0xd0)+_0x99ca16['length']+'\x20from\x20'+_0x20b395[_0x3df9f1(0xa7)]);});}),_0x4b5ebd[_0x2bf8f9(0xbd)](()=>{_0x5127a2['log']('End\x20Get\x20Dependency\x20List\x20'),_0x102783(_0x99ca16);})[_0x2bf8f9(0xb7)](_0x402d59=>{const _0x5af330=_0x2bf8f9;_0x5127a2[_0x5af330(0x97)](_0x5af330(0x9f)+_0x402d59),_0x48dac0(_0x402d59);});}catch(_0x49d077){_0x5127a2[_0x2bf8f9(0x97)](_0x2bf8f9(0x9f)+_0x49d077),_0x48dac0(_0x49d077);}});}function getPrefilledJSON(_0x26f27b,_0x14eeda,_0x4e937e){return new Promise((_0x6b6b8b,_0x336de3)=>{const _0x5a08c2=a26_0x2213;try{const _0x1fe34d={'sClassName':_0x5a08c2(0xb2),'sType':_0x14eeda[_0x5a08c2(0xba)],'sSubType':_0x14eeda[_0x5a08c2(0xe1)],'sLang':_0x14eeda[_0x5a08c2(0xc6)]};_0x26f27b[_0x5a08c2(0xa3)][_0x5a08c2(0xe9)]('/vlocity_cmt/v1/GenericInvoke/',_0x1fe34d,(_0x4947bb,_0xb7ac8)=>{const _0x4c3418=_0x5a08c2;_0x4947bb?(_0x4e937e[_0x4c3418(0x97)]('Error\x20getPrefilledJSON\x20'+_0x4947bb),_0x336de3(_0x4947bb)):_0x6b6b8b(JSON[_0x4c3418(0x9b)](_0xb7ac8));});}catch(_0xdb085e){_0x336de3(_0xdb085e),_0x4e937e[_0x5a08c2(0x97)](_0x5a08c2(0xdf)+_0xdb085e);}});}function extractLwcDependencies(_0x1ab1d5,_0x5b0b8f){return new Promise((_0x58cb23,_0x54d9be)=>{const _0x57ba88=a26_0x2213;try{_0x5b0b8f['log'](_0x57ba88(0xd9));let _0xc5ce18=[];_0x1ab1d5[_0x57ba88(0xca)](_0x4d4c62=>{const _0x318e5e=_0x57ba88;_0x4d4c62[_0x318e5e(0xb5)]&&_0x4d4c62[_0x318e5e(0xb5)][_0x318e5e(0xa7)]>0x0&&_0x4d4c62['children'][_0x318e5e(0xca)](_0x403a76=>{const _0x8a0e14=_0x318e5e;_0x403a76[_0x8a0e14(0xb5)]&&_0x403a76[_0x8a0e14(0xb5)][_0x8a0e14(0xa7)]>0x0&&_0x403a76['children']['forEach'](_0x4f15c8=>{const _0x1fcdbd=_0x8a0e14;_0x4f15c8['eleArray'][0x0][_0x1fcdbd(0xea)]===_0x1fcdbd(0xb1)&&_0xc5ce18[_0x1fcdbd(0x8a)](_0x4f15c8[_0x1fcdbd(0x96)][0x0][_0x1fcdbd(0x99)][_0x1fcdbd(0xda)]);});});if(_0x4d4c62['propSetMap']&&_0x4d4c62[_0x318e5e(0x99)][_0x318e5e(0xd4)])for(const [_0x114ae7,_0x55c802]of Object[_0x318e5e(0xe6)](_0x4d4c62[_0x318e5e(0x99)][_0x318e5e(0xd4)])){_0xc5ce18['push'](_0x55c802);}_0x4d4c62[_0x318e5e(0xb5)]&&_0x4d4c62['children'][_0x318e5e(0xa7)]>0x0&&_0x4d4c62[_0x318e5e(0xb5)][_0x318e5e(0xca)](_0x54fdb1=>{const _0x4696fd=_0x318e5e;_0x54fdb1['propSetMap']&&_0x54fdb1[_0x4696fd(0x99)][_0x4696fd(0xce)]&&_0xc5ce18['push'](_0x54fdb1[_0x4696fd(0x99)][_0x4696fd(0xce)]),_0x54fdb1['children']&&_0x54fdb1[_0x4696fd(0xb5)][_0x4696fd(0xa7)]>0x0&&_0x54fdb1[_0x4696fd(0xb5)]['forEach'](_0x4eb73d=>{const _0xe57c6f=_0x4696fd;_0x4eb73d[_0xe57c6f(0x96)][0x0]['propSetMap']&&_0x4eb73d[_0xe57c6f(0x96)][0x0]['propSetMap'][_0xe57c6f(0xce)]&&_0xc5ce18[_0xe57c6f(0x8a)](_0x4eb73d['eleArray'][0x0][_0xe57c6f(0x99)][_0xe57c6f(0xce)]);});});}),_0x5b0b8f['log'](_0x57ba88(0xac)),_0x58cb23(_0xc5ce18);}catch(_0x46a7e4){_0x5b0b8f[_0x57ba88(0x97)](_0x57ba88(0x85)+_0x46a7e4),_0x54d9be(_0x46a7e4);}});}module[a26_0x2a17fa(0x9c)]={'query':query,'getDependencyList':getDependencyList,'extractLwcDependencies':extractLwcDependencies,'fetchOmniOutContentList':fetchOmniOutContentList,'createLwcFiles':createLwcFiles,'sendComponents':sendComponents,'completeDeployment':completeDeployment};