const a34_0xbd9b14=a34_0x3fe1;(function(_0x4ded98,_0x24fc0e){const _0x2648e7=a34_0x3fe1,_0x686dbf=_0x4ded98();while(!![]){try{const _0x4d4746=-parseInt(_0x2648e7(0xd1))/0x1+-parseInt(_0x2648e7(0xbf))/0x2+-parseInt(_0x2648e7(0x7e))/0x3*(-parseInt(_0x2648e7(0x81))/0x4)+parseInt(_0x2648e7(0x96))/0x5+parseInt(_0x2648e7(0xb3))/0x6*(-parseInt(_0x2648e7(0x99))/0x7)+parseInt(_0x2648e7(0xa6))/0x8+-parseInt(_0x2648e7(0xe2))/0x9;if(_0x4d4746===_0x24fc0e)break;else _0x686dbf['push'](_0x686dbf['shift']());}catch(_0x2d5b4f){_0x686dbf['push'](_0x686dbf['shift']());}}}(a34_0x3b06,0xcd313));function a34_0x3b06(){const _0x3bd4fd=['Start\x20Update\x20Attachment\x20Log','GET','Error\x20Get\x20Dependency\x20List\x20','vlocity_cmt__Language__c','name','type','Error\x20Update\x20Snapshot','filter','Start\x20Update\x20Snapshot','12856328jjMiWo','End\x20Extract\x20LWC\x20Dependencies','Error\x20Fetch\x20OmniOut\x20Content\x20List\x20','Source','METHOD_TYPE_ADD_COMPONENTS_TO_SNAPSHOT','\x20from\x20','End\x20Query','Process\x20Fetch\x20OmniOut\x20Content,\x20processed\x20','replace','/services/data/v48.0/tooling/query?q=SELECT+Id,DeveloperName,Description+FROM+LightningComponentBundle+WHERE+DeveloperName=\x27','base64','eleArray','Process\x20Get\x20Dependency,\x20processed\x20','5418390qwsJXs','stringify','entries','unlocked-packages','records','push','children','FilePath','Start\x20Send\x20Components','/services/data/v48.0/tooling/query?q=SELECT+Id,FilePath,Format,Source+FROM+LightningComponentResource+WHERE+LightningComponentBundleId=\x27@{bundleInfo.records[0].Id}\x27','apex','log','1193636NywKkF','map','Error\x20Query\x20','Start\x20Query','Vlocity\x20BuildJSONWithPrefill','/vlocity_cmt/v1/GenericInvoke/','Error\x20Send\x20Components\x20','lwc/','resolve','propSetMap','then','lwcComponentList','addFile','vlocity_cmt__Type__c','/services/apexrest/','End\x20Get\x20Dependency\x20List\x20','path','Is_Completed__c','678529PKejBR','post','bundleResources','../../../constants','Is_Error__c','compositeResponse','lwcComponentOverride','MAX_SIZE_UNZIP_ATTACHMENT','Error\x20Create\x20Lwc\x20Files\x20','toString','adm-zip','vlocity_cmt__SubType__c','vlocity_cmt__','application/json','forEach','sobject','lwcName','9196983eLBiHr','httpStatusCode','285kebItJ','(hidden)','from','52948vTokQJ','Start\x20Create\x20Lwc\x20Files','parse',',\x20retrieved\x20','Start\x20Extract\x20LWC\x20Dependencies','request','End\x20Send\x20Components','Start\x20Fetch\x20OmniOut\x20Content\x20List\x20','toBuffer','End\x20Fetch\x20OmniOut\x20Content\x20List\x20','Error\x20Get\x20Prefilled\x20JSON\x20','Error\x20Extract\x20LWC\x20Dependencies\x20','Error\x20getPrefilledJSON\x20','../../../services/http','body','elementTypeToLwcTemplateMapping','callUpdateAttachmentLog','Snapshot__c','catch','vlocity_cmt','LightningComponentBundle','5881050xJokMk','fs-extra','length','7tjkFXv','End\x20Create\x20Lwc\x20Files','query','/services/data/v50.0/tooling/composite'];a34_0x3b06=function(){return _0x3bd4fd;};return a34_0x3b06();}const path=require(a34_0xbd9b14(0xcf)),fs=require('fs'),fse=require(a34_0xbd9b14(0x97)),AdmZip=require(a34_0xbd9b14(0xdb)),constants=require(a34_0xbd9b14(0xd4)),http=require(a34_0xbd9b14(0x8e));function query(_0x3780ad,_0x58eee5,_0x3cfeff){return new Promise((_0x55c213,_0x347ab5)=>{const _0x4b214f=a34_0x3fe1;try{_0x3cfeff['log'](_0x4b214f(0xc2)),_0x3780ad[_0x4b214f(0x9b)](_0x58eee5,(_0x5d7b33,_0x5e9b98)=>{const _0x2e944c=_0x4b214f;_0x5d7b33?(_0x3cfeff[_0x2e944c(0xbe)](_0x2e944c(0xc1)+_0x5d7b33),_0x347ab5(_0x5d7b33)):(_0x3cfeff[_0x2e944c(0xbe)](_0x2e944c(0xac)),_0x55c213(_0x5e9b98[_0x2e944c(0xb7)][_0x2e944c(0xa4)](_0x386243=>_0x386243['vlocity_cmt__Type__c']&&_0x386243[_0x2e944c(0xdc)]&&_0x386243['vlocity_cmt__Language__c'])[_0x2e944c(0xc0)](({vlocity_cmt__Type__c:_0x2fa825,vlocity_cmt__SubType__c:_0x2fedba,vlocity_cmt__Language__c:_0x69dbfc})=>{return''+_0x2fa825+_0x2fedba+_0x69dbfc;})));});}catch(_0x14c492){_0x347ab5(_0x14c492),_0x3cfeff[_0x4b214f(0xbe)](_0x4b214f(0xc1)+_0x14c492);}});}function fetchOmniOutContentList(_0x2000da,_0x15853f,_0x4cc556){return new Promise((_0x2c09d4,_0x32fc90)=>{const _0x57f827=a34_0x3fe1;try{_0x4cc556[_0x57f827(0xbe)](_0x57f827(0x88));const _0x1b9c09=[];let _0x366174=0x1,_0x47a5d1=Promise[_0x57f827(0xc7)]();_0x15853f[_0x57f827(0xdf)](_0x3005f4=>{const _0x1f0f53=_0x57f827;_0x47a5d1=_0x47a5d1[_0x1f0f53(0xc9)](()=>fetchOmniOutContent(_0x2000da,_0x3005f4))['then'](_0x4bfdda=>{const _0x10cad4=_0x1f0f53;_0x4bfdda&&_0x4bfdda[_0x10cad4(0xd6)]&&_0x4bfdda[_0x10cad4(0xd6)][_0x10cad4(0x98)]===0x2&&(_0x4bfdda[_0x10cad4(0xd6)][0x0][_0x10cad4(0xe3)]===0xc8&&_0x1b9c09['push']({'lwcComponentList':_0x4bfdda[_0x10cad4(0xd6)][0x1]['body'][_0x10cad4(0xb7)],'name':_0x4bfdda[_0x10cad4(0xd6)][0x0][_0x10cad4(0x8f)]['records'][0x0]['DeveloperName']})),_0x4cc556[_0x10cad4(0xbe)](_0x10cad4(0xad)+_0x366174++ +_0x10cad4(0x84)+_0x1b9c09['length']+',\x20all\x20'+_0x15853f['length']);});}),_0x47a5d1[_0x57f827(0xc9)](()=>{const _0x2609e2=_0x57f827;_0x4cc556['log'](_0x2609e2(0x8a)),_0x2c09d4(_0x1b9c09);})[_0x57f827(0x93)](_0x5f240f=>{const _0x3c70ea=_0x57f827;_0x4cc556['log'](_0x3c70ea(0xa8)+_0x5f240f),_0x32fc90(_0x5f240f);});}catch(_0x3ba6d7){_0x32fc90(_0x3ba6d7),_0x4cc556['log'](_0x57f827(0xa8)+_0x3ba6d7);}});}function fetchOmniOutContent(_0x2cc890,_0x13d926){const _0x797bb7=a34_0xbd9b14;_0x13d926=_0x13d926[_0x797bb7(0xae)]('-','')[_0x797bb7(0xae)](_0x797bb7(0xdd),'');const _0x14d074={'allOrNone':!![],'compositeRequest':[{'method':_0x797bb7(0x9e),'referenceId':'bundleInfo','url':_0x797bb7(0xaf)+_0x13d926+'\x27'},{'method':_0x797bb7(0x9e),'referenceId':_0x797bb7(0xd3),'url':_0x797bb7(0xbc)}]},_0x53bce1=_0x2cc890['instanceUrl'],_0x4a428f={'method':'POST','url':_0x53bce1+_0x797bb7(0x9c),'body':JSON[_0x797bb7(0xb4)](_0x14d074),'headers':{'Content-Type':_0x797bb7(0xde)}};return _0x2cc890[_0x797bb7(0x86)](_0x4a428f);}function a34_0x3fe1(_0x24bdb4,_0x2f26df){const _0x3b06ec=a34_0x3b06();return a34_0x3fe1=function(_0x3fe1bd,_0x1e1ac9){_0x3fe1bd=_0x3fe1bd-0x7e;let _0x25508b=_0x3b06ec[_0x3fe1bd];return _0x25508b;},a34_0x3fe1(_0x24bdb4,_0x2f26df);}function createLwcFiles(_0x13dbd8,_0xd6bb89,_0x441c19,_0x377699){return new Promise((_0x5d1245,_0x502a1c)=>{const _0x2a70a3=a34_0x3fe1;try{_0x377699[_0x2a70a3(0xbe)](_0x2a70a3(0x82));let _0x5f3a56=[],_0x131f7f=[],_0x4a107e=0x0,_0x5cf757=new AdmZip();_0xd6bb89['forEach'](_0x2b2302=>{const _0x3f405d=_0x2a70a3;_0x131f7f[_0x3f405d(0xb8)]({'apiName':_0x2b2302['name'],'componentType':_0x3f405d(0x95),'label':_0x3f405d(0xc6)+_0x2b2302[_0x3f405d(0xa1)]}),_0x2b2302['lwcComponentList'][_0x3f405d(0xdf)](_0x2da916=>{const _0x46c3f2=_0x3f405d;_0x2da916[_0x46c3f2(0xa9)]!==_0x46c3f2(0x7f)&&(_0x4a107e+=_0x2da916[_0x46c3f2(0xa9)][_0x46c3f2(0x98)],_0x4a107e<constants[_0x46c3f2(0xd8)]?_0x5cf757[_0x46c3f2(0xcb)](''+_0x2da916[_0x46c3f2(0xba)],Buffer[_0x46c3f2(0x80)](_0x2da916[_0x46c3f2(0xa9)][_0x46c3f2(0xae)](new RegExp(_0x46c3f2(0x94),'g'),'c'))):(_0x5f3a56[_0x46c3f2(0xb8)]({'snapshotId':_0x441c19,'typeList':[{'type':'LightningComponentBundle','zip':_0x5cf757['toBuffer']()['toString'](_0x46c3f2(0xb0)),'componentList':_0x131f7f}]}),_0x131f7f=[],_0x4a107e=0x0,_0x5cf757=new AdmZip()));}),delete _0x2b2302[_0x3f405d(0xca)];}),_0x131f7f[_0x2a70a3(0x98)]&&_0x5f3a56['push']({'snapshotId':_0x441c19,'typeList':[{'type':_0x2a70a3(0x95),'zip':_0x5cf757[_0x2a70a3(0x89)]()[_0x2a70a3(0xda)](_0x2a70a3(0xb0)),'componentList':_0x131f7f}]}),_0x377699['log'](_0x2a70a3(0x9a)),_0x5d1245(_0x5f3a56);}catch(_0x53fc98){_0x377699['log'](_0x2a70a3(0xd9)+_0x53fc98),_0x502a1c(_0x53fc98);}});}function sendComponents(_0x4f4340,_0x277631,_0x9649b1,_0x2f9787,_0x35e84c){return new Promise((_0x38a9da,_0xf7641)=>{const _0x5c2739=a34_0x3fe1;try{_0x35e84c[_0x5c2739(0xbe)](_0x5c2739(0xbb));let _0x25b620=Promise['resolve']();_0x2f9787['forEach'](_0x127ee7=>{const _0x589f0a=_0x5c2739;_0x25b620=_0x25b620[_0x589f0a(0xc9)](()=>callSentComponents(_0x4f4340,_0x277631,_0x9649b1,_0x127ee7));}),_0x25b620[_0x5c2739(0xc9)](()=>{const _0x221e91=_0x5c2739;_0x35e84c[_0x221e91(0xbe)](_0x221e91(0x87)),_0x38a9da();})[_0x5c2739(0x93)](_0xf80add=>{_0x35e84c['log']('Error\x20Send\x20Components\x20'+_0xf80add),_0xf7641(_0xf80add);});}catch(_0x2acc6c){_0x35e84c[_0x5c2739(0xbe)](_0x5c2739(0xc5)+_0x2acc6c),_0xf7641(_0x2acc6c);}});}function callSentComponents(_0x473f52,_0x220ac7,_0x246b35,_0x2a11f5){return new Promise((_0x3ec718,_0x3194c3)=>{const _0x1426e7=a34_0x3fe1;try{const _0x4b6265={'methodType':constants[_0x1426e7(0xaa)],'body':JSON[_0x1426e7(0xb4)](_0x2a11f5)};_0x246b35=_0x246b35?_0x246b35[_0x1426e7(0xae)]('__','')+'/':'';const _0x5af236=_0x473f52+_0x1426e7(0xcd)+_0x246b35[_0x1426e7(0xae)]('__','')+_0x1426e7(0xb6);http[_0x1426e7(0xd2)](_0x5af236,_0x220ac7,_0x246b35[_0x1426e7(0xae)]('__',''),JSON[_0x1426e7(0xb4)](_0x4b6265))[_0x1426e7(0xc9)](()=>{_0x3ec718();})[_0x1426e7(0x93)](_0x3194c3);}catch(_0x35a523){_0x3194c3(_0x35a523);}});}function completeDeployment(_0x5acc76,_0x17bc24,_0x5317f0,_0xb74c7f,_0x437c39,_0x30ae42,_0x4be2e0,_0x5a522b,_0x49b791=![]){return new Promise((_0xaeade,_0x45a2ec)=>{const _0x365b6c=a34_0x3fe1;try{Promise[_0x365b6c(0xc7)]()[_0x365b6c(0xc9)](()=>updateAttachmentLog(_0x5acc76,_0x17bc24,_0x30ae42,_0x5a522b,_0x49b791,!![]))['then'](_0xf210a=>{return _0x49b791=_0xf210a,http['callUpdateLog'](_0x17bc24,_0x437c39,_0x5317f0,_0x4be2e0,_0x5a522b,_0xf210a);})[_0x365b6c(0xc9)](()=>callUpdateSnapshot(_0x17bc24,_0xb74c7f,_0x5317f0,_0x49b791,_0x5a522b));}catch(_0x308fd5){_0x45a2ec(_0x308fd5);}});}function updateAttachmentLog(_0x3649e6,_0x1eb0d5,_0x4ea873,_0x2ab7b4,_0x22ef89,_0x191059=![]){return new Promise(_0x35a7d5=>{const _0x25c36d=a34_0x3fe1;try{_0x2ab7b4[_0x25c36d(0xbe)](_0x25c36d(0x9d)),Promise['resolve']()[_0x25c36d(0xc9)](()=>http['getAttachmentBody'](_0x1eb0d5,_0x4ea873,_0x2ab7b4))['then'](_0x5cfc55=>{const _0x1fb9b6=_0x25c36d;return http[_0x1fb9b6(0x91)](_0x1eb0d5,_0x4ea873,_0x5cfc55,_0x2ab7b4,_0x22ef89);})[_0x25c36d(0xc9)](()=>_0x35a7d5(_0x22ef89))[_0x25c36d(0x93)](()=>_0x35a7d5(_0x22ef89));}catch(_0x57e044){_0x2ab7b4[_0x25c36d(0xbe)]('Error\x20Update\x20Attachment\x20Log\x20'+_0x57e044),_0x35a7d5(_0x22ef89);}});}function callUpdateSnapshot(_0x1b963d,_0x11564e,_0x6c133e,_0x396b0d,_0x3c1703){return new Promise((_0x160946,_0x34cbf0)=>{const _0xa04ce7=a34_0x3fe1;try{_0x3c1703[_0xa04ce7(0xbe)](_0xa04ce7(0xa5));const _0x12c033={'Id':_0x11564e,[_0x6c133e+_0xa04ce7(0xd0)]:!![],[_0x6c133e+_0xa04ce7(0xd5)]:_0x396b0d};_0x1b963d[_0xa04ce7(0xe0)](_0x6c133e+_0xa04ce7(0x92))['update'](_0x12c033)['then'](()=>{const _0x5a626d=_0xa04ce7;_0x3c1703[_0x5a626d(0xbe)]('End\x20Update\x20Snapshot'),_0x160946();})['catch'](_0x8b72eb=>{const _0x3dcfb6=_0xa04ce7;_0x3c1703[_0x3dcfb6(0xbe)]('Error\x20Update\x20Snapshot'),_0x34cbf0(_0x8b72eb);});}catch(_0x1659ee){_0x3c1703['log'](_0xa04ce7(0xa3)),_0x34cbf0(_0x1659ee);}});}function getDependencyList(_0x260659,_0x212586,_0x10760d){return new Promise((_0x1ae300,_0x25f80d)=>{const _0x4957ff=a34_0x3fe1;try{_0x10760d[_0x4957ff(0xbe)]('Start\x20Get\x20Dependency\x20List\x20');const _0x40687b=[];let _0x4eeaee=Promise[_0x4957ff(0xc7)]();_0x212586['forEach'](_0x48374f=>{const _0x284a86=_0x4957ff;_0x4eeaee=_0x4eeaee[_0x284a86(0xc9)](()=>getPrefilledJSON(_0x260659,_0x48374f,_0x10760d))['then'](_0x4c29b4=>{const _0x2937eb=_0x284a86;_0x40687b['push'](_0x4c29b4),_0x10760d['log'](_0x2937eb(0xb2)+_0x40687b[_0x2937eb(0x98)]+_0x2937eb(0xab)+_0x212586['length']);});}),_0x4eeaee[_0x4957ff(0xc9)](()=>{const _0x38716c=_0x4957ff;_0x10760d[_0x38716c(0xbe)](_0x38716c(0xce)),_0x1ae300(_0x40687b);})['catch'](_0xb9dee8=>{_0x10760d['log']('Error\x20Get\x20Dependency\x20List\x20'+_0xb9dee8),_0x25f80d(_0xb9dee8);});}catch(_0x1545fc){_0x10760d[_0x4957ff(0xbe)](_0x4957ff(0x9f)+_0x1545fc),_0x25f80d(_0x1545fc);}});}function getPrefilledJSON(_0x2698ca,_0x474cda,_0x1cca95){return new Promise((_0xfe7f8a,_0x5e585c)=>{const _0x5acc63=a34_0x3fe1;try{const _0x486bf1={'sClassName':_0x5acc63(0xc3),'sType':_0x474cda[_0x5acc63(0xcc)],'sSubType':_0x474cda[_0x5acc63(0xdc)],'sLang':_0x474cda[_0x5acc63(0xa0)]};_0x2698ca[_0x5acc63(0xbd)][_0x5acc63(0xd2)](_0x5acc63(0xc4),_0x486bf1,(_0x189dad,_0x517932)=>{const _0x27db99=_0x5acc63;_0x189dad?(_0x1cca95[_0x27db99(0xbe)](_0x27db99(0x8d)+_0x189dad),_0x5e585c(_0x189dad)):_0xfe7f8a(JSON[_0x27db99(0x83)](_0x517932));});}catch(_0x26126e){_0x5e585c(_0x26126e),_0x1cca95[_0x5acc63(0xbe)](_0x5acc63(0x8b)+_0x26126e);}});}function extractLwcDependencies(_0x40a8ee,_0x5c1d29){return new Promise((_0x5a4723,_0x46393b)=>{const _0x23934f=a34_0x3fe1;try{_0x5c1d29[_0x23934f(0xbe)](_0x23934f(0x85));let _0x1838ed=[];_0x40a8ee['forEach'](_0x56bb95=>{const _0xac467e=_0x23934f;_0x56bb95['children']&&_0x56bb95['children'][_0xac467e(0x98)]>0x0&&_0x56bb95['children'][_0xac467e(0xdf)](_0x28e360=>{const _0x4980a5=_0xac467e;_0x28e360[_0x4980a5(0xb9)]&&_0x28e360[_0x4980a5(0xb9)][_0x4980a5(0x98)]>0x0&&_0x28e360['children'][_0x4980a5(0xdf)](_0x2a5fa8=>{const _0x2e5139=_0x4980a5;_0x2a5fa8[_0x2e5139(0xb1)][0x0][_0x2e5139(0xa2)]==='Custom\x20Lightning\x20Web\x20Component'&&_0x1838ed['push'](_0x2a5fa8[_0x2e5139(0xb1)][0x0]['propSetMap'][_0x2e5139(0xe1)]);});});if(_0x56bb95[_0xac467e(0xc8)]&&_0x56bb95[_0xac467e(0xc8)][_0xac467e(0x90)])for(const [_0x27edf7,_0x44bbd4]of Object[_0xac467e(0xb5)](_0x56bb95['propSetMap'][_0xac467e(0x90)])){_0x1838ed['push'](_0x44bbd4);}_0x56bb95[_0xac467e(0xb9)]&&_0x56bb95[_0xac467e(0xb9)]['length']>0x0&&_0x56bb95[_0xac467e(0xb9)][_0xac467e(0xdf)](_0x4d51c4=>{const _0x39261e=_0xac467e;_0x4d51c4[_0x39261e(0xc8)]&&_0x4d51c4[_0x39261e(0xc8)][_0x39261e(0xd7)]&&_0x1838ed[_0x39261e(0xb8)](_0x4d51c4['propSetMap']['lwcComponentOverride']),_0x4d51c4[_0x39261e(0xb9)]&&_0x4d51c4[_0x39261e(0xb9)][_0x39261e(0x98)]>0x0&&_0x4d51c4[_0x39261e(0xb9)][_0x39261e(0xdf)](_0xccc53b=>{const _0x260894=_0x39261e;_0xccc53b[_0x260894(0xb1)][0x0][_0x260894(0xc8)]&&_0xccc53b[_0x260894(0xb1)][0x0][_0x260894(0xc8)][_0x260894(0xd7)]&&_0x1838ed['push'](_0xccc53b[_0x260894(0xb1)][0x0]['propSetMap'][_0x260894(0xd7)]);});});}),_0x5c1d29[_0x23934f(0xbe)](_0x23934f(0xa7)),_0x5a4723(_0x1838ed);}catch(_0x47cdac){_0x5c1d29[_0x23934f(0xbe)](_0x23934f(0x8c)+_0x47cdac),_0x46393b(_0x47cdac);}});}module['exports']={'query':query,'getDependencyList':getDependencyList,'extractLwcDependencies':extractLwcDependencies,'fetchOmniOutContentList':fetchOmniOutContentList,'createLwcFiles':createLwcFiles,'sendComponents':sendComponents,'completeDeployment':completeDeployment};