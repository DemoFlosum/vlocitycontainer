const a34_0x2e3ce4=a34_0x1845;(function(_0x3aa330,_0x40d243){const _0x6f33bd=a34_0x1845,_0x1af8cb=_0x3aa330();while(!![]){try{const _0x8b82ff=parseInt(_0x6f33bd(0x1af))/0x1*(parseInt(_0x6f33bd(0x163))/0x2)+-parseInt(_0x6f33bd(0x171))/0x3+-parseInt(_0x6f33bd(0x165))/0x4+parseInt(_0x6f33bd(0x1a6))/0x5*(parseInt(_0x6f33bd(0x152))/0x6)+-parseInt(_0x6f33bd(0x19a))/0x7+parseInt(_0x6f33bd(0x17f))/0x8*(parseInt(_0x6f33bd(0x172))/0x9)+parseInt(_0x6f33bd(0x176))/0xa;if(_0x8b82ff===_0x40d243)break;else _0x1af8cb['push'](_0x1af8cb['shift']());}catch(_0x425a79){_0x1af8cb['push'](_0x1af8cb['shift']());}}}(a34_0x9b23,0xa7d43));const path=require('path'),fs=require('fs'),fse=require(a34_0x2e3ce4(0x182)),AdmZip=require(a34_0x2e3ce4(0x15d)),constants=require(a34_0x2e3ce4(0x17b)),http=require(a34_0x2e3ce4(0x17e));function query(_0x246d4c,_0x10311c,_0x3fe822){return new Promise((_0x591f0f,_0xaee04d)=>{const _0x4b79ca=a34_0x1845;try{_0x3fe822[_0x4b79ca(0x1a8)](_0x4b79ca(0x19d)),_0x246d4c[_0x4b79ca(0x19e)](_0x10311c,(_0x12a3e1,_0x27c3a8)=>{const _0x5b4bd9=_0x4b79ca;_0x12a3e1?(_0x3fe822['log'](_0x5b4bd9(0x17a)+_0x12a3e1),_0xaee04d(_0x12a3e1)):(_0x3fe822['log'](_0x5b4bd9(0x17d)),_0x591f0f(_0x27c3a8[_0x5b4bd9(0x157)][_0x5b4bd9(0x15f)](_0x582eb9=>_0x582eb9[_0x5b4bd9(0x16d)]&&_0x582eb9[_0x5b4bd9(0x15a)]&&_0x582eb9[_0x5b4bd9(0x15e)])[_0x5b4bd9(0x19c)](({vlocity_cmt__Type__c:_0x1424fe,vlocity_cmt__SubType__c:_0x204f38,vlocity_cmt__Language__c:_0x2722ee})=>''+_0x1424fe+_0x204f38+_0x2722ee)));});}catch(_0x7928c2){_0xaee04d(_0x7928c2),_0x3fe822['log']('Error\x20Query\x20'+_0x7928c2);}});}function a34_0x1845(_0x26549f,_0x47dcd9){const _0x9b23b6=a34_0x9b23();return a34_0x1845=function(_0x184533,_0x37fe2e){_0x184533=_0x184533-0x152;let _0x5b438a=_0x9b23b6[_0x184533];return _0x5b438a;},a34_0x1845(_0x26549f,_0x47dcd9);}function fetchOmniOutContentList(_0x2c0f19,_0x396efa,_0x3388a6){return new Promise((_0x51d521,_0x3cc8f1)=>{const _0x40707f=a34_0x1845;try{_0x3388a6[_0x40707f(0x1a8)](_0x40707f(0x192));const _0x2a1d7a=[];let _0x109d7a=0x1,_0x41f088=Promise[_0x40707f(0x1ac)]();_0x396efa[_0x40707f(0x179)](_0x186b94=>{_0x41f088=_0x41f088['then'](()=>fetchOmniOutContent(_0x2c0f19,_0x186b94))['then'](_0x2eba4d=>{const _0x3cab0d=a34_0x1845;_0x2eba4d&&_0x2eba4d[_0x3cab0d(0x173)]&&_0x2eba4d[_0x3cab0d(0x173)][_0x3cab0d(0x174)]===0x2&&(_0x2eba4d['compositeResponse'][0x0][_0x3cab0d(0x155)]===0xc8&&_0x2a1d7a[_0x3cab0d(0x1ad)]({'lwcComponentList':_0x2eba4d[_0x3cab0d(0x173)][0x1][_0x3cab0d(0x154)]['records'],'name':_0x2eba4d['compositeResponse'][0x0][_0x3cab0d(0x154)][_0x3cab0d(0x157)][0x0][_0x3cab0d(0x189)]})),_0x3388a6['log'](_0x3cab0d(0x1a0)+_0x109d7a++ +_0x3cab0d(0x180)+_0x2a1d7a[_0x3cab0d(0x174)]+_0x3cab0d(0x162)+_0x396efa[_0x3cab0d(0x174)]);});}),_0x41f088[_0x40707f(0x18d)](()=>{const _0x188cbc=_0x40707f;_0x3388a6[_0x188cbc(0x1a8)](_0x188cbc(0x19f)),_0x51d521(_0x2a1d7a);})[_0x40707f(0x195)](_0x1bce9f=>{const _0x1aaff6=_0x40707f;_0x3388a6[_0x1aaff6(0x1a8)](_0x1aaff6(0x197)+_0x1bce9f),_0x3cc8f1(_0x1bce9f);});}catch(_0x22094c){_0x3cc8f1(_0x22094c),_0x3388a6[_0x40707f(0x1a8)](_0x40707f(0x197)+_0x22094c);}});}function fetchOmniOutContent(_0x840e62,_0xc5ce4f){const _0x1412cb=a34_0x2e3ce4;_0xc5ce4f=_0xc5ce4f[_0x1412cb(0x1a3)]('-','')['replace'](_0x1412cb(0x1a4),'');const _0x4d39a7={'allOrNone':!![],'compositeRequest':[{'method':_0x1412cb(0x1ae),'referenceId':'bundleInfo','url':_0x1412cb(0x196)+_0xc5ce4f+'\x27'},{'method':_0x1412cb(0x1ae),'referenceId':'bundleResources','url':_0x1412cb(0x164)}]},_0x14abcb=_0x840e62[_0x1412cb(0x153)],_0x4eb215={'method':_0x1412cb(0x18b),'url':_0x14abcb+_0x1412cb(0x1b0),'body':JSON['stringify'](_0x4d39a7),'headers':{'Content-Type':_0x1412cb(0x160)}};return _0x840e62['request'](_0x4eb215);}function createLwcFiles(_0xb9347f,_0x31b71a,_0x39b198,_0x5388f1){return new Promise((_0x574ab9,_0x354eea)=>{const _0x44c1b2=a34_0x1845;try{_0x5388f1[_0x44c1b2(0x1a8)](_0x44c1b2(0x1a7));const _0x4b73fc=[];let _0x1dc9a7=[],_0x26aff8=0x0,_0x5d5947=new AdmZip();_0x31b71a['forEach'](_0x4f2cab=>{const _0xae1289=_0x44c1b2;_0x1dc9a7[_0xae1289(0x1ad)]({'apiName':_0x4f2cab[_0xae1289(0x175)],'componentType':_0xae1289(0x16f),'label':_0xae1289(0x1b1)+_0x4f2cab[_0xae1289(0x175)]}),_0x4f2cab['lwcComponentList']['forEach'](_0x3f11db=>{const _0x257bd0=_0xae1289;_0x3f11db[_0x257bd0(0x17c)]!==_0x257bd0(0x16b)&&(_0x26aff8+=_0x3f11db[_0x257bd0(0x17c)]['length'],_0x26aff8<constants['MAX_SIZE_UNZIP_ATTACHMENT']?_0x5d5947['addFile'](''+_0x3f11db[_0x257bd0(0x184)],Buffer['from'](_0x3f11db['Source'][_0x257bd0(0x1a3)](new RegExp(_0x257bd0(0x166),'g'),'c'))):(_0x4b73fc[_0x257bd0(0x1ad)]({'snapshotId':_0x39b198,'typeList':[{'type':_0x257bd0(0x16f),'zip':_0x5d5947[_0x257bd0(0x15c)]()[_0x257bd0(0x19b)](_0x257bd0(0x1a1)),'componentList':_0x1dc9a7}]}),_0x1dc9a7=[],_0x26aff8=0x0,_0x5d5947=new AdmZip()));}),delete _0x4f2cab[_0xae1289(0x18e)];}),_0x1dc9a7[_0x44c1b2(0x174)]&&_0x4b73fc[_0x44c1b2(0x1ad)]({'snapshotId':_0x39b198,'typeList':[{'type':_0x44c1b2(0x16f),'zip':_0x5d5947['toBuffer']()['toString']('base64'),'componentList':_0x1dc9a7}]}),_0x5388f1[_0x44c1b2(0x1a8)](_0x44c1b2(0x15b)),_0x574ab9(_0x4b73fc);}catch(_0x2a2be1){_0x5388f1['log']('Error\x20Create\x20Lwc\x20Files\x20'+_0x2a2be1),_0x354eea(_0x2a2be1);}});}function sendComponents(_0xe008fd,_0x10326d,_0x89a90b,_0x18e663){return new Promise((_0xbc8f26,_0x30c2ef)=>{const _0x417b34=a34_0x1845;try{_0x18e663[_0x417b34(0x1a8)]('Start\x20Send\x20Components');let _0x21d6d7=Promise[_0x417b34(0x1ac)]();_0x89a90b['forEach'](_0x2756c7=>{const _0xb16029=_0x417b34;_0x21d6d7=_0x21d6d7[_0xb16029(0x18d)](()=>callSentComponents(_0xe008fd,_0x10326d,_0x2756c7));}),_0x21d6d7[_0x417b34(0x18d)](()=>{const _0x2c7469=_0x417b34;_0x18e663['log'](_0x2c7469(0x191)),_0xbc8f26();})['catch'](_0x178211=>{const _0x5a96f3=_0x417b34;_0x18e663[_0x5a96f3(0x1a8)](_0x5a96f3(0x169)+_0x178211),_0x30c2ef(_0x178211);});}catch(_0x12899c){_0x18e663['log']('Error\x20Send\x20Components\x20'+_0x12899c),_0x30c2ef(_0x12899c);}});}function callSentComponents(_0x2eef8c,_0x28d3ae,_0x31a607){return new Promise((_0x439bc6,_0x346bc8)=>{const _0x381a48=a34_0x1845;try{const _0x69dc00={'methodType':constants[_0x381a48(0x187)],'body':JSON[_0x381a48(0x158)](_0x31a607)};http[_0x381a48(0x16a)](_0x2eef8c,_0x28d3ae[_0x381a48(0x1a3)]('__',''),JSON[_0x381a48(0x158)](_0x69dc00))[_0x381a48(0x18d)](()=>{_0x439bc6();})[_0x381a48(0x195)](_0x346bc8);}catch(_0x2200c5){_0x346bc8(_0x2200c5);}});}function completeDeployment(_0x216977,_0x318e14,_0x42d5fa,_0x7bbd03,_0x13f640,_0x502361,_0x2af739,_0x2211db,_0x1c1f32=![]){return new Promise((_0x4ccca3,_0x3a809a)=>{const _0x3b8730=a34_0x1845;try{Promise['resolve']()[_0x3b8730(0x18d)](()=>updateAttachmentLog(_0x216977,_0x318e14,_0x502361,_0x2211db,_0x1c1f32,!![]))[_0x3b8730(0x18d)](_0x4b7126=>{return _0x1c1f32=_0x4b7126,http['callUpdateLog'](_0x318e14,_0x13f640,_0x42d5fa,_0x2af739,_0x2211db,_0x4b7126);})[_0x3b8730(0x18d)](()=>callUpdateSnapshot(_0x318e14,_0x7bbd03,_0x42d5fa,_0x1c1f32,_0x2211db));}catch(_0x4f680c){_0x3a809a(_0x4f680c);}});}function updateAttachmentLog(_0x53fe19,_0x56c5c1,_0x4cd12b,_0x261cd4,_0x5464de,_0x16b033=![]){return new Promise(_0x172a5a=>{const _0x60b0=a34_0x1845;try{_0x261cd4[_0x60b0(0x1a8)](_0x60b0(0x185)),Promise[_0x60b0(0x1ac)]()['then'](()=>http['getAttachmentBody'](_0x56c5c1,_0x4cd12b,_0x261cd4))[_0x60b0(0x18d)](_0xb931a5=>http[_0x60b0(0x18c)](_0x56c5c1,_0x4cd12b,_0xb931a5,_0x261cd4,_0x5464de))[_0x60b0(0x18d)](()=>_0x172a5a(_0x5464de))[_0x60b0(0x195)](()=>_0x172a5a(_0x5464de));}catch(_0xfd4d9d){_0x261cd4[_0x60b0(0x1a8)](_0x60b0(0x16e)+_0xfd4d9d),_0x172a5a(_0x5464de);}});}function callUpdateSnapshot(_0x4e0155,_0xea8aa2,_0x2e7575,_0x3da1a8,_0x4b6ce0){return new Promise((_0x13cc54,_0x254f3e)=>{const _0x3056d6=a34_0x1845;try{_0x4b6ce0[_0x3056d6(0x1a8)](_0x3056d6(0x156));const _0x27ccd2={'Id':_0xea8aa2,[_0x2e7575+_0x3056d6(0x168)]:!![],[_0x2e7575+_0x3056d6(0x177)]:_0x3da1a8};_0x4e0155[_0x3056d6(0x181)](_0x2e7575,_0x27ccd2)[_0x3056d6(0x18d)](()=>{const _0x433790=_0x3056d6;_0x4b6ce0[_0x433790(0x1a8)](_0x433790(0x1ab)),_0x13cc54();})[_0x3056d6(0x195)](_0x4cdb28=>{const _0x17454e=_0x3056d6;_0x4b6ce0[_0x17454e(0x1a8)](_0x17454e(0x1a2)),_0x254f3e(_0x4cdb28);});}catch(_0x3633e6){_0x4b6ce0[_0x3056d6(0x1a8)](_0x3056d6(0x1a2)),_0x254f3e(_0x3633e6);}});}function a34_0x9b23(){const _0x175800=['body','httpStatusCode','Start\x20Update\x20Snapshot','records','stringify','Error\x20getPrefilledJSON\x20','vlocity_cmt__SubType__c','End\x20Create\x20Lwc\x20Files','toBuffer','adm-zip','vlocity_cmt__Language__c','filter','application/json','Custom\x20Lightning\x20Web\x20Component',',\x20all\x20','2SGsvuZ','/services/data/v48.0/tooling/query?q=SELECT+Id,FilePath,Format,Source+FROM+LightningComponentResource+WHERE+LightningComponentBundleId=\x27@{bundleInfo.records[0].Id}\x27','1678692DTEuYt','vlocity_cmt','End\x20Extract\x20LWC\x20Dependencies','Is_Completed__c','Error\x20Send\x20Components\x20','post','(hidden)','children','vlocity_cmt__Type__c','Error\x20Update\x20Attachment\x20Log\x20','LightningComponentBundle','Start\x20Get\x20Dependency\x20List\x20','3745578fYSSOx','761004eMnTCv','compositeResponse','length','name','24169510cAWLHg','Is_Error__c','entries','forEach','Error\x20Query\x20','../../../constants','Source','End\x20Query','../../../services/http','16fDeqpJ',',\x20retrieved\x20','updateSnapshot','fs-extra','Error\x20Get\x20Dependency\x20List\x20','FilePath','Start\x20Update\x20Attachment\x20Log','apex','METHOD_TYPE_ADD_COMPONENTS_TO_SNAPSHOT','Process\x20Get\x20Dependency,\x20processed\x20','DeveloperName','exports','POST','callUpdateAttachmentLog','then','lwcComponentList','Start\x20Extract\x20LWC\x20Dependencies','Error\x20Get\x20Prefilled\x20JSON\x20','End\x20Send\x20Components','Start\x20Fetch\x20OmniOut\x20Content\x20List\x20','propSetMap','elementTypeToLwcTemplateMapping','catch','/services/data/v48.0/tooling/query?q=SELECT+Id,DeveloperName,Description+FROM+LightningComponentBundle+WHERE+DeveloperName=\x27','Error\x20Fetch\x20OmniOut\x20Content\x20List\x20','End\x20Get\x20Dependency\x20List\x20','/vlocity_cmt/v1/GenericInvoke/','5926599QtyKRW','toString','map','Start\x20Query','query','End\x20Fetch\x20OmniOut\x20Content\x20List\x20','Process\x20Fetch\x20OmniOut\x20Content,\x20processed\x20','base64','Error\x20Update\x20Snapshot','replace','vlocity_cmt__','type','21965uDsBYR','Start\x20Create\x20Lwc\x20Files','log','lwcComponentOverride','eleArray','End\x20Update\x20Snapshot','resolve','push','GET','400963ADOPQf','/services/data/v50.0/tooling/composite','lwc/','294BPCIQG','instanceUrl'];a34_0x9b23=function(){return _0x175800;};return a34_0x9b23();}function getDependencyList(_0xb7bd8d,_0x23b905,_0x46c36d){return new Promise((_0x791862,_0x16a7be)=>{const _0x55be97=a34_0x1845;try{_0x46c36d['log'](_0x55be97(0x170));const _0x178607=[];let _0x28ca5f=Promise['resolve']();_0x23b905[_0x55be97(0x179)](_0x551de7=>{const _0x3cde0c=_0x55be97;_0x28ca5f=_0x28ca5f[_0x3cde0c(0x18d)](()=>getPrefilledJSON(_0xb7bd8d,_0x551de7,_0x46c36d))[_0x3cde0c(0x18d)](_0xf1c399=>{const _0x5a1748=_0x3cde0c;_0x178607['push'](_0xf1c399),_0x46c36d[_0x5a1748(0x1a8)](_0x5a1748(0x188)+_0x178607['length']+'\x20from\x20'+_0x23b905[_0x5a1748(0x174)]);});}),_0x28ca5f[_0x55be97(0x18d)](()=>{const _0x4b20cc=_0x55be97;_0x46c36d[_0x4b20cc(0x1a8)](_0x4b20cc(0x198)),_0x791862(_0x178607);})[_0x55be97(0x195)](_0x4d7531=>{const _0x2847b2=_0x55be97;_0x46c36d[_0x2847b2(0x1a8)](_0x2847b2(0x183)+_0x4d7531),_0x16a7be(_0x4d7531);});}catch(_0x374e37){_0x46c36d[_0x55be97(0x1a8)](_0x55be97(0x183)+_0x374e37),_0x16a7be(_0x374e37);}});}function getPrefilledJSON(_0x13be89,_0x50c96d,_0x571555){return new Promise((_0x34f778,_0x1eb78b)=>{const _0x2c7703=a34_0x1845;try{const _0x52f165={'sClassName':'Vlocity\x20BuildJSONWithPrefill','sType':_0x50c96d[_0x2c7703(0x16d)],'sSubType':_0x50c96d['vlocity_cmt__SubType__c'],'sLang':_0x50c96d[_0x2c7703(0x15e)]};_0x13be89[_0x2c7703(0x186)]['post'](_0x2c7703(0x199),_0x52f165,(_0x35efec,_0x3e3ab5)=>{const _0xea6fa7=_0x2c7703;_0x35efec?(_0x571555[_0xea6fa7(0x1a8)](_0xea6fa7(0x159)+_0x35efec),_0x1eb78b(_0x35efec)):_0x34f778(JSON['parse'](_0x3e3ab5));});}catch(_0x35c77d){_0x1eb78b(_0x35c77d),_0x571555['log'](_0x2c7703(0x190)+_0x35c77d);}});}function extractLwcDependencies(_0x3e3ff5,_0x4e6b84){return new Promise((_0x408497,_0x1c4e7b)=>{const _0x2400f0=a34_0x1845;try{_0x4e6b84['log'](_0x2400f0(0x18f));const _0x3e417d=[];_0x3e3ff5['forEach'](_0x5f062f=>{const _0x7c25b1=_0x2400f0;_0x5f062f[_0x7c25b1(0x16c)]&&_0x5f062f[_0x7c25b1(0x16c)]['length']>0x0&&_0x5f062f['children'][_0x7c25b1(0x179)](_0x533d24=>{const _0x302874=_0x7c25b1;_0x533d24[_0x302874(0x16c)]&&_0x533d24[_0x302874(0x16c)][_0x302874(0x174)]>0x0&&_0x533d24[_0x302874(0x16c)][_0x302874(0x179)](_0x1ae95a=>{const _0x3358c0=_0x302874;_0x1ae95a[_0x3358c0(0x1aa)][0x0][_0x3358c0(0x1a5)]===_0x3358c0(0x161)&&_0x3e417d[_0x3358c0(0x1ad)](_0x1ae95a[_0x3358c0(0x1aa)][0x0][_0x3358c0(0x193)]['lwcName']);});});if(_0x5f062f['propSetMap']&&_0x5f062f['propSetMap'][_0x7c25b1(0x194)])for(const [_0x1a6bc5,_0x77605]of Object[_0x7c25b1(0x178)](_0x5f062f[_0x7c25b1(0x193)][_0x7c25b1(0x194)])){_0x3e417d['push'](_0x77605);}_0x5f062f[_0x7c25b1(0x16c)]&&_0x5f062f['children'][_0x7c25b1(0x174)]>0x0&&_0x5f062f[_0x7c25b1(0x16c)][_0x7c25b1(0x179)](_0xa57be5=>{const _0x2722ec=_0x7c25b1;_0xa57be5[_0x2722ec(0x193)]&&_0xa57be5[_0x2722ec(0x193)]['lwcComponentOverride']&&_0x3e417d[_0x2722ec(0x1ad)](_0xa57be5[_0x2722ec(0x193)][_0x2722ec(0x1a9)]),_0xa57be5[_0x2722ec(0x16c)]&&_0xa57be5['children'][_0x2722ec(0x174)]>0x0&&_0xa57be5[_0x2722ec(0x16c)][_0x2722ec(0x179)](_0x14d065=>{const _0xb8362f=_0x2722ec;_0x14d065['eleArray'][0x0][_0xb8362f(0x193)]&&_0x14d065['eleArray'][0x0][_0xb8362f(0x193)]['lwcComponentOverride']&&_0x3e417d[_0xb8362f(0x1ad)](_0x14d065[_0xb8362f(0x1aa)][0x0]['propSetMap'][_0xb8362f(0x1a9)]);});});}),_0x4e6b84['log'](_0x2400f0(0x167)),_0x408497(_0x3e417d);}catch(_0x4c2046){_0x4e6b84[_0x2400f0(0x1a8)]('Error\x20Extract\x20LWC\x20Dependencies\x20'+_0x4c2046),_0x1c4e7b(_0x4c2046);}});}module[a34_0x2e3ce4(0x18a)]={'query':query,'getDependencyList':getDependencyList,'extractLwcDependencies':extractLwcDependencies,'fetchOmniOutContentList':fetchOmniOutContentList,'createLwcFiles':createLwcFiles,'sendComponents':sendComponents,'completeDeployment':completeDeployment};