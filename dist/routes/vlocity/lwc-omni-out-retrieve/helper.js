const a26_0x419c00=a26_0x3bb2;function a26_0x38ce(){const _0x2ee035=['Start\x20Create\x20Lwc\x20Files','body','vlocity_cmt','/services/data/v48.0/tooling/query?q=SELECT+Id,DeveloperName,Description+FROM+LightningComponentBundle+WHERE+DeveloperName=\x27',',\x20all\x20','lwcComponentList','Error\x20Send\x20Components\x20','Start\x20Fetch\x20OmniOut\x20Content\x20List\x20','vlocity_cmt__Language__c','base64','End\x20Get\x20Dependency\x20List\x20','bundleResources','Start\x20Update\x20Attachment\x20Log','Error\x20Update\x20Snapshot','replace','callUpdateLog','Start\x20Query',',\x20retrieved\x20','End\x20Fetch\x20OmniOut\x20Content\x20List\x20','vlocity_cmt__Type__c','map','name','Is_Error__c','737944gsodQx','resolve','Process\x20Fetch\x20OmniOut\x20Content,\x20processed\x20','Error\x20Update\x20Attachment\x20Log\x20','../../../constants','elementTypeToLwcTemplateMapping','METHOD_TYPE_ADD_COMPONENTS_TO_SNAPSHOT','LightningComponentBundle','vlocity_cmt__SubType__c','forEach','type','addFile','/services/data/v48.0/tooling/query?q=SELECT+Id,FilePath,Format,Source+FROM+LightningComponentResource+WHERE+LightningComponentBundleId=\x27@{bundleInfo.records[0].Id}\x27','records','157502MSkixh','Process\x20Get\x20Dependency,\x20processed\x20','FilePath','from','End\x20Create\x20Lwc\x20Files','children','instanceUrl','length','Start\x20Send\x20Components','Error\x20Fetch\x20OmniOut\x20Content\x20List\x20','GET','post','End\x20Extract\x20LWC\x20Dependencies','../../../services/http','Error\x20Create\x20Lwc\x20Files\x20','entries','propSetMap','bundleInfo','6bCEWYN','534260bLcAjN','log','catch','33VohZnw','DeveloperName','Error\x20getPrefilledJSON\x20','fs-extra','then','apex','787310EEfkhC','stringify','Start\x20Update\x20Snapshot','lwc/','/services/data/v50.0/tooling/composite','eleArray','compositeResponse','callUpdateAttachmentLog','13629gvrPRg','Snapshot__c','vlocity_cmt__','Start\x20Extract\x20LWC\x20Dependencies','push','Error\x20Query\x20','toBuffer','Error\x20Get\x20Prefilled\x20JSON\x20','adm-zip','4336705vevhCv','POST','End\x20Update\x20Snapshot','lwcName','lwcComponentOverride','path','exports','/services/apexrest/','Vlocity\x20BuildJSONWithPrefill','5720519OYHBpo','Error\x20Get\x20Dependency\x20List\x20','27fOAYuF','toString','End\x20Query'];a26_0x38ce=function(){return _0x2ee035;};return a26_0x38ce();}(function(_0xe29860,_0x2b4bfa){const _0x79d85f=a26_0x3bb2,_0x12d148=_0xe29860();while(!![]){try{const _0x20d13b=-parseInt(_0x79d85f(0x149))/0x1+parseInt(_0x79d85f(0x185))/0x2*(parseInt(_0x79d85f(0x13b))/0x3)+parseInt(_0x79d85f(0x138))/0x4+-parseInt(_0x79d85f(0x152))/0x5+-parseInt(_0x79d85f(0x137))/0x6*(-parseInt(_0x79d85f(0x15b))/0x7)+parseInt(_0x79d85f(0x177))/0x8*(-parseInt(_0x79d85f(0x15d))/0x9)+-parseInt(_0x79d85f(0x141))/0xa;if(_0x20d13b===_0x2b4bfa)break;else _0x12d148['push'](_0x12d148['shift']());}catch(_0xce053a){_0x12d148['push'](_0x12d148['shift']());}}}(a26_0x38ce,0x8dc05));const path=require(a26_0x419c00(0x157)),fs=require('fs'),fse=require(a26_0x419c00(0x13e)),AdmZip=require(a26_0x419c00(0x151)),constants=require(a26_0x419c00(0x17b)),http=require(a26_0x419c00(0x192));function query(_0x45d89b,_0x1a94aa,_0x78751b){return new Promise((_0x532eb2,_0x51c088)=>{const _0x59d55f=a26_0x3bb2;try{_0x78751b['log'](_0x59d55f(0x170)),_0x45d89b['query'](_0x1a94aa,(_0x461584,_0x1db4d0)=>{const _0x2f1428=_0x59d55f;_0x461584?(_0x78751b[_0x2f1428(0x139)](_0x2f1428(0x14e)+_0x461584),_0x51c088(_0x461584)):(_0x78751b[_0x2f1428(0x139)](_0x2f1428(0x15f)),_0x532eb2(_0x1db4d0[_0x2f1428(0x184)]['filter'](_0x2a266a=>_0x2a266a[_0x2f1428(0x173)]&&_0x2a266a['vlocity_cmt__SubType__c']&&_0x2a266a['vlocity_cmt__Language__c'])[_0x2f1428(0x174)](({vlocity_cmt__Type__c:_0x4b463f,vlocity_cmt__SubType__c:_0x869840,vlocity_cmt__Language__c:_0x4a5370})=>{return''+_0x4b463f+_0x869840+_0x4a5370;})));});}catch(_0x4a6533){_0x51c088(_0x4a6533),_0x78751b[_0x59d55f(0x139)](_0x59d55f(0x14e)+_0x4a6533);}});}function fetchOmniOutContentList(_0x5664f9,_0x4dc762,_0x9e9352){return new Promise((_0x4cde38,_0x4f3a13)=>{const _0x49d9da=a26_0x3bb2;try{_0x9e9352[_0x49d9da(0x139)](_0x49d9da(0x167));const _0x4b2534=[];let _0x1c6820=0x1,_0x125ca2=Promise[_0x49d9da(0x178)]();_0x4dc762['forEach'](_0x4bc38d=>{const _0x4e79eb=_0x49d9da;_0x125ca2=_0x125ca2[_0x4e79eb(0x13f)](()=>fetchOmniOutContent(_0x5664f9,_0x4bc38d))[_0x4e79eb(0x13f)](_0x1b5b93=>{const _0x114f5a=_0x4e79eb;_0x1b5b93&&_0x1b5b93[_0x114f5a(0x147)]&&_0x1b5b93['compositeResponse'][_0x114f5a(0x18c)]===0x2&&(_0x1b5b93['compositeResponse'][0x0]['httpStatusCode']===0xc8&&_0x4b2534[_0x114f5a(0x14d)]({'lwcComponentList':_0x1b5b93[_0x114f5a(0x147)][0x1][_0x114f5a(0x161)][_0x114f5a(0x184)],'name':_0x1b5b93[_0x114f5a(0x147)][0x0][_0x114f5a(0x161)]['records'][0x0][_0x114f5a(0x13c)]})),_0x9e9352[_0x114f5a(0x139)](_0x114f5a(0x179)+_0x1c6820++ +_0x114f5a(0x171)+_0x4b2534[_0x114f5a(0x18c)]+_0x114f5a(0x164)+_0x4dc762[_0x114f5a(0x18c)]);});}),_0x125ca2[_0x49d9da(0x13f)](()=>{const _0x33eb56=_0x49d9da;_0x9e9352[_0x33eb56(0x139)](_0x33eb56(0x172)),_0x4cde38(_0x4b2534);})['catch'](_0x2caa4a=>{const _0x3e9b9f=_0x49d9da;_0x9e9352['log'](_0x3e9b9f(0x18e)+_0x2caa4a),_0x4f3a13(_0x2caa4a);});}catch(_0x3c28f0){_0x4f3a13(_0x3c28f0),_0x9e9352[_0x49d9da(0x139)](_0x49d9da(0x18e)+_0x3c28f0);}});}function fetchOmniOutContent(_0x53802c,_0x3f90d2){const _0x5a32af=a26_0x419c00;_0x3f90d2=_0x3f90d2['replace']('-','')[_0x5a32af(0x16e)](_0x5a32af(0x14b),'');const _0x2dc5e1={'allOrNone':!![],'compositeRequest':[{'method':'GET','referenceId':_0x5a32af(0x196),'url':_0x5a32af(0x163)+_0x3f90d2+'\x27'},{'method':_0x5a32af(0x18f),'referenceId':_0x5a32af(0x16b),'url':_0x5a32af(0x183)}]},_0x2d907b=_0x53802c[_0x5a32af(0x18b)],_0x3a1f59={'method':_0x5a32af(0x153),'url':_0x2d907b+_0x5a32af(0x145),'body':JSON[_0x5a32af(0x142)](_0x2dc5e1),'headers':{'Content-Type':'application/json'}};return _0x53802c['request'](_0x3a1f59);}function createLwcFiles(_0x28d519,_0x1d0247,_0x12d13e,_0x5986f8){return new Promise((_0x3f41e2,_0x200487)=>{const _0x48dce7=a26_0x3bb2;try{_0x5986f8[_0x48dce7(0x139)](_0x48dce7(0x160));let _0x268f3d=[],_0x338d10=[],_0x3bb902=0x0,_0x5b6c26=new AdmZip();_0x1d0247[_0x48dce7(0x180)](_0x561102=>{const _0x2c052f=_0x48dce7;_0x338d10[_0x2c052f(0x14d)]({'apiName':_0x561102[_0x2c052f(0x175)],'componentType':'LightningComponentBundle','label':_0x2c052f(0x144)+_0x561102[_0x2c052f(0x175)]}),_0x561102[_0x2c052f(0x165)][_0x2c052f(0x180)](_0x48e54f=>{const _0x41277d=_0x2c052f;_0x48e54f['Source']!=='(hidden)'&&(_0x3bb902+=_0x48e54f['Source'][_0x41277d(0x18c)],_0x3bb902<constants['MAX_SIZE_UNZIP_ATTACHMENT']?_0x5b6c26[_0x41277d(0x182)](''+_0x48e54f[_0x41277d(0x187)],Buffer[_0x41277d(0x188)](_0x48e54f['Source'][_0x41277d(0x16e)](new RegExp(_0x41277d(0x162),'g'),'c'))):(_0x268f3d[_0x41277d(0x14d)]({'snapshotId':_0x12d13e,'typeList':[{'type':'LightningComponentBundle','zip':_0x5b6c26[_0x41277d(0x14f)]()[_0x41277d(0x15e)](_0x41277d(0x169)),'componentList':_0x338d10}]}),_0x338d10=[],_0x3bb902=0x0,_0x5b6c26=new AdmZip()));}),delete _0x561102[_0x2c052f(0x165)];}),_0x338d10[_0x48dce7(0x18c)]&&_0x268f3d[_0x48dce7(0x14d)]({'snapshotId':_0x12d13e,'typeList':[{'type':_0x48dce7(0x17e),'zip':_0x5b6c26[_0x48dce7(0x14f)]()['toString'](_0x48dce7(0x169)),'componentList':_0x338d10}]}),_0x5986f8[_0x48dce7(0x139)](_0x48dce7(0x189)),_0x3f41e2(_0x268f3d);}catch(_0x15f743){_0x5986f8[_0x48dce7(0x139)](_0x48dce7(0x193)+_0x15f743),_0x200487(_0x15f743);}});}function a26_0x3bb2(_0x5d73ce,_0x424286){const _0x38ce0d=a26_0x38ce();return a26_0x3bb2=function(_0x3bb2ad,_0x115340){_0x3bb2ad=_0x3bb2ad-0x137;let _0x33b1a1=_0x38ce0d[_0x3bb2ad];return _0x33b1a1;},a26_0x3bb2(_0x5d73ce,_0x424286);}function sendComponents(_0x9e07fd,_0x2e85c4,_0x229b55,_0x30c024,_0x3667b6){return new Promise((_0x2c2038,_0x31a90d)=>{const _0x1f153c=a26_0x3bb2;try{_0x3667b6[_0x1f153c(0x139)](_0x1f153c(0x18d));let _0x4cefed=Promise[_0x1f153c(0x178)]();_0x30c024[_0x1f153c(0x180)](_0x3bef75=>{const _0x2e6e8c=_0x1f153c;_0x4cefed=_0x4cefed[_0x2e6e8c(0x13f)](()=>callSentComponents(_0x9e07fd,_0x2e85c4,_0x229b55,_0x3bef75));}),_0x4cefed[_0x1f153c(0x13f)](()=>{const _0x5783ad=_0x1f153c;_0x3667b6[_0x5783ad(0x139)]('End\x20Send\x20Components'),_0x2c2038();})['catch'](_0x21306d=>{const _0x3c5e68=_0x1f153c;_0x3667b6[_0x3c5e68(0x139)](_0x3c5e68(0x166)+_0x21306d),_0x31a90d(_0x21306d);});}catch(_0x4b95e2){_0x3667b6[_0x1f153c(0x139)]('Error\x20Send\x20Components\x20'+_0x4b95e2),_0x31a90d(_0x4b95e2);}});}function callSentComponents(_0x46b853,_0xfdafd3,_0x1d5896,_0x5b13e7){return new Promise((_0x2894c3,_0x328faa)=>{const _0x424faf=a26_0x3bb2;try{const _0x20149d={'methodType':constants[_0x424faf(0x17d)],'body':JSON[_0x424faf(0x142)](_0x5b13e7)};_0x1d5896=_0x1d5896?_0x1d5896[_0x424faf(0x16e)]('__','')+'/':'';const _0x26fdba=_0x46b853+_0x424faf(0x159)+_0x1d5896[_0x424faf(0x16e)]('__','')+'unlocked-packages';http[_0x424faf(0x190)](_0x26fdba,_0xfdafd3,_0x1d5896[_0x424faf(0x16e)]('__',''),JSON[_0x424faf(0x142)](_0x20149d))[_0x424faf(0x13f)](()=>{_0x2894c3();})[_0x424faf(0x13a)](_0x328faa);}catch(_0x2b9351){_0x328faa(_0x2b9351);}});}function completeDeployment(_0x4ed1da,_0x17d2ab,_0x13bcc3,_0x1404fc,_0x24bd86,_0x568e53,_0x2faeef,_0x4a07b5,_0x1afc1b=![]){return new Promise((_0x500c19,_0x396245)=>{const _0x262c96=a26_0x3bb2;try{Promise[_0x262c96(0x178)]()[_0x262c96(0x13f)](()=>updateAttachmentLog(_0x4ed1da,_0x17d2ab,_0x568e53,_0x4a07b5,_0x1afc1b,!![]))[_0x262c96(0x13f)](_0x4a7cde=>{const _0x12c6a5=_0x262c96;return _0x1afc1b=_0x4a7cde,http[_0x12c6a5(0x16f)](_0x17d2ab,_0x24bd86,_0x13bcc3,_0x2faeef,_0x4a07b5,_0x4a7cde);})[_0x262c96(0x13f)](()=>callUpdateSnapshot(_0x17d2ab,_0x1404fc,_0x13bcc3,_0x1afc1b,_0x4a07b5));}catch(_0xd822b){_0x396245(_0xd822b);}});}function updateAttachmentLog(_0x517415,_0xc5c606,_0x86c2f3,_0x4a6a80,_0x3ba7ab,_0x361f03=![]){return new Promise(_0x2a7297=>{const _0x2d3b7f=a26_0x3bb2;try{_0x4a6a80[_0x2d3b7f(0x139)](_0x2d3b7f(0x16c)),Promise[_0x2d3b7f(0x178)]()[_0x2d3b7f(0x13f)](()=>http['getAttachmentBody'](_0xc5c606,_0x86c2f3,_0x4a6a80))[_0x2d3b7f(0x13f)](_0x2f3884=>{const _0x30b9dd=_0x2d3b7f;return http[_0x30b9dd(0x148)](_0xc5c606,_0x86c2f3,_0x2f3884,_0x4a6a80,_0x3ba7ab);})['then'](()=>_0x2a7297(_0x3ba7ab))[_0x2d3b7f(0x13a)](()=>_0x2a7297(_0x3ba7ab));}catch(_0x31069a){_0x4a6a80[_0x2d3b7f(0x139)](_0x2d3b7f(0x17a)+_0x31069a),_0x2a7297(_0x3ba7ab);}});}function callUpdateSnapshot(_0x5b7e29,_0x46489e,_0x28eaa4,_0x5b6d8d,_0x4e211){return new Promise((_0x553d5f,_0x5949ba)=>{const _0x41fb9c=a26_0x3bb2;try{_0x4e211[_0x41fb9c(0x139)](_0x41fb9c(0x143));const _0x562898={'Id':_0x46489e,[_0x28eaa4+'Is_Completed__c']:!![],[_0x28eaa4+_0x41fb9c(0x176)]:_0x5b6d8d};_0x5b7e29['sobject'](_0x28eaa4+_0x41fb9c(0x14a))['update'](_0x562898)[_0x41fb9c(0x13f)](()=>{const _0x3c2910=_0x41fb9c;_0x4e211[_0x3c2910(0x139)](_0x3c2910(0x154)),_0x553d5f();})['catch'](_0x777d86=>{const _0x10f93e=_0x41fb9c;_0x4e211[_0x10f93e(0x139)](_0x10f93e(0x16d)),_0x5949ba(_0x777d86);});}catch(_0x1903b4){_0x4e211[_0x41fb9c(0x139)](_0x41fb9c(0x16d)),_0x5949ba(_0x1903b4);}});}function getDependencyList(_0x41e6e9,_0x26bb5e,_0x13fcbf){return new Promise((_0x14a006,_0x2171a6)=>{const _0x167302=a26_0x3bb2;try{_0x13fcbf[_0x167302(0x139)]('Start\x20Get\x20Dependency\x20List\x20');const _0x43e91f=[];let _0x3ff6dd=Promise[_0x167302(0x178)]();_0x26bb5e[_0x167302(0x180)](_0x13f460=>{const _0x3868f9=_0x167302;_0x3ff6dd=_0x3ff6dd[_0x3868f9(0x13f)](()=>getPrefilledJSON(_0x41e6e9,_0x13f460,_0x13fcbf))[_0x3868f9(0x13f)](_0x777036=>{const _0xf30136=_0x3868f9;_0x43e91f[_0xf30136(0x14d)](_0x777036),_0x13fcbf['log'](_0xf30136(0x186)+_0x43e91f[_0xf30136(0x18c)]+'\x20from\x20'+_0x26bb5e[_0xf30136(0x18c)]);});}),_0x3ff6dd[_0x167302(0x13f)](()=>{const _0x3a302b=_0x167302;_0x13fcbf[_0x3a302b(0x139)](_0x3a302b(0x16a)),_0x14a006(_0x43e91f);})[_0x167302(0x13a)](_0x5e0627=>{const _0xc62903=_0x167302;_0x13fcbf[_0xc62903(0x139)](_0xc62903(0x15c)+_0x5e0627),_0x2171a6(_0x5e0627);});}catch(_0x39605c){_0x13fcbf['log'](_0x167302(0x15c)+_0x39605c),_0x2171a6(_0x39605c);}});}function getPrefilledJSON(_0x1292fa,_0x448827,_0x29461f){return new Promise((_0x486da0,_0x5a3d03)=>{const _0x2da80c=a26_0x3bb2;try{const _0x5a8f02={'sClassName':_0x2da80c(0x15a),'sType':_0x448827['vlocity_cmt__Type__c'],'sSubType':_0x448827[_0x2da80c(0x17f)],'sLang':_0x448827[_0x2da80c(0x168)]};_0x1292fa[_0x2da80c(0x140)][_0x2da80c(0x190)]('/vlocity_cmt/v1/GenericInvoke/',_0x5a8f02,(_0x5ccd52,_0x58cdf1)=>{const _0x2d1b55=_0x2da80c;_0x5ccd52?(_0x29461f[_0x2d1b55(0x139)](_0x2d1b55(0x13d)+_0x5ccd52),_0x5a3d03(_0x5ccd52)):_0x486da0(JSON['parse'](_0x58cdf1));});}catch(_0x31f34a){_0x5a3d03(_0x31f34a),_0x29461f['log'](_0x2da80c(0x150)+_0x31f34a);}});}function extractLwcDependencies(_0x54135e,_0x447bdc){return new Promise((_0x1b4a15,_0x5491da)=>{const _0x3e2629=a26_0x3bb2;try{_0x447bdc['log'](_0x3e2629(0x14c));let _0x22401b=[];_0x54135e[_0x3e2629(0x180)](_0x479235=>{const _0x24fe5f=_0x3e2629;_0x479235[_0x24fe5f(0x18a)]&&_0x479235[_0x24fe5f(0x18a)][_0x24fe5f(0x18c)]>0x0&&_0x479235[_0x24fe5f(0x18a)][_0x24fe5f(0x180)](_0x1d6e5c=>{const _0x5d057d=_0x24fe5f;_0x1d6e5c['children']&&_0x1d6e5c[_0x5d057d(0x18a)]['length']>0x0&&_0x1d6e5c[_0x5d057d(0x18a)][_0x5d057d(0x180)](_0x3de475=>{const _0x206ca4=_0x5d057d;_0x3de475['eleArray'][0x0][_0x206ca4(0x181)]==='Custom\x20Lightning\x20Web\x20Component'&&_0x22401b[_0x206ca4(0x14d)](_0x3de475[_0x206ca4(0x146)][0x0]['propSetMap'][_0x206ca4(0x155)]);});});if(_0x479235[_0x24fe5f(0x195)]&&_0x479235[_0x24fe5f(0x195)][_0x24fe5f(0x17c)])for(const [_0x2751f7,_0xd27051]of Object[_0x24fe5f(0x194)](_0x479235['propSetMap'][_0x24fe5f(0x17c)])){_0x22401b['push'](_0xd27051);}_0x479235['children']&&_0x479235['children'][_0x24fe5f(0x18c)]>0x0&&_0x479235[_0x24fe5f(0x18a)][_0x24fe5f(0x180)](_0x5771ff=>{const _0x70edc5=_0x24fe5f;_0x5771ff[_0x70edc5(0x195)]&&_0x5771ff[_0x70edc5(0x195)][_0x70edc5(0x156)]&&_0x22401b[_0x70edc5(0x14d)](_0x5771ff[_0x70edc5(0x195)][_0x70edc5(0x156)]),_0x5771ff[_0x70edc5(0x18a)]&&_0x5771ff[_0x70edc5(0x18a)][_0x70edc5(0x18c)]>0x0&&_0x5771ff[_0x70edc5(0x18a)][_0x70edc5(0x180)](_0x4ed8c2=>{const _0xc006fa=_0x70edc5;_0x4ed8c2[_0xc006fa(0x146)][0x0]['propSetMap']&&_0x4ed8c2[_0xc006fa(0x146)][0x0][_0xc006fa(0x195)]['lwcComponentOverride']&&_0x22401b[_0xc006fa(0x14d)](_0x4ed8c2[_0xc006fa(0x146)][0x0]['propSetMap'][_0xc006fa(0x156)]);});});}),_0x447bdc[_0x3e2629(0x139)](_0x3e2629(0x191)),_0x1b4a15(_0x22401b);}catch(_0x2c9129){_0x447bdc[_0x3e2629(0x139)]('Error\x20Extract\x20LWC\x20Dependencies\x20'+_0x2c9129),_0x5491da(_0x2c9129);}});}module[a26_0x419c00(0x158)]={'query':query,'getDependencyList':getDependencyList,'extractLwcDependencies':extractLwcDependencies,'fetchOmniOutContentList':fetchOmniOutContentList,'createLwcFiles':createLwcFiles,'sendComponents':sendComponents,'completeDeployment':completeDeployment};