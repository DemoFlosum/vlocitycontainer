const a34_0x2001cc=a34_0x443e;(function(_0x1b21cc,_0x3873df){const _0x326714=a34_0x443e,_0x1b5559=_0x1b21cc();while(!![]){try{const _0x458ff9=-parseInt(_0x326714(0x1d5))/0x1+parseInt(_0x326714(0x1c6))/0x2+parseInt(_0x326714(0x209))/0x3*(parseInt(_0x326714(0x1e9))/0x4)+-parseInt(_0x326714(0x221))/0x5*(parseInt(_0x326714(0x21d))/0x6)+parseInt(_0x326714(0x215))/0x7*(parseInt(_0x326714(0x20d))/0x8)+-parseInt(_0x326714(0x1f8))/0x9*(parseInt(_0x326714(0x213))/0xa)+parseInt(_0x326714(0x1f5))/0xb;if(_0x458ff9===_0x3873df)break;else _0x1b5559['push'](_0x1b5559['shift']());}catch(_0x2c8293){_0x1b5559['push'](_0x1b5559['shift']());}}}(a34_0xb7ad,0x73083));function a34_0xb7ad(){const _0x26ee9e=['propSetMap','children','lwcComponentOverride','Error\x20Update\x20Attachment\x20Log\x20','502910pPkaZi','forEach','1400OvyIWi','GET','vlocity_cmt__Language__c','length','vlocity_cmt__','End\x20Fetch\x20OmniOut\x20Content\x20List\x20','type','push','5337966XxHZlx','End\x20Send\x20Components',',\x20retrieved\x20','Error\x20Update\x20Snapshot','5gIdQVZ','Error\x20getPrefilledJSON\x20','exports','1359262FRMNjy','instanceUrl','eleArray',',\x20all\x20','POST','Start\x20Send\x20Components','End\x20Extract\x20LWC\x20Dependencies','Error\x20Query\x20','Process\x20Get\x20Dependency,\x20processed\x20','/services/data/v48.0/tooling/query?q=SELECT+Id,FilePath,Format,Source+FROM+LightningComponentResource+WHERE+LightningComponentBundleId=\x27@{bundleInfo.records[0].Id}\x27','stringify','toString','getAttachmentBody','then','lwc/','173129AjwQxi','(hidden)','DeveloperName','/services/data/v48.0/tooling/query?q=SELECT+Id,DeveloperName,Description+FROM+LightningComponentBundle+WHERE+DeveloperName=\x27','post','End\x20Create\x20Lwc\x20Files','vlocity_cmt__Type__c','End\x20Update\x20Snapshot','filter','base64','MAX_SIZE_UNZIP_ATTACHMENT','bundleResources','resolve','Error\x20Create\x20Lwc\x20Files\x20','../../../services/http','\x20from\x20','Source','Start\x20Update\x20Attachment\x20Log','httpStatusCode','records','604EaItKN','Is_Completed__c','catch','lwcComponentList','adm-zip','FilePath','query','Start\x20Query','body','Start\x20Fetch\x20OmniOut\x20Content\x20List\x20','Error\x20Fetch\x20OmniOut\x20Content\x20List\x20','replace','8462443BRrXAh','path','/services/data/v50.0/tooling/composite','36madCkc','LightningComponentBundle','fs-extra','../../../constants','toBuffer','map','Start\x20Create\x20Lwc\x20Files','Vlocity\x20BuildJSONWithPrefill','Is_Error__c','apex','Start\x20Update\x20Snapshot','Error\x20Send\x20Components\x20','callUpdateLog','vlocity_cmt','Error\x20Get\x20Dependency\x20List\x20','/vlocity_cmt/v1/GenericInvoke/','Start\x20Get\x20Dependency\x20List\x20','3993tDJNBe','Process\x20Fetch\x20OmniOut\x20Content,\x20processed\x20','log','compositeResponse','3408UZLesG','elementTypeToLwcTemplateMapping'];a34_0xb7ad=function(){return _0x26ee9e;};return a34_0xb7ad();}const path=require(a34_0x2001cc(0x1f6)),fs=require('fs'),fse=require(a34_0x2001cc(0x1fa)),AdmZip=require(a34_0x2001cc(0x1ed)),constants=require(a34_0x2001cc(0x1fb)),http=require(a34_0x2001cc(0x1e3));function query(_0xc53c06,_0x26e6c2,_0x20409a){return new Promise((_0x5d6f5a,_0x4000f2)=>{const _0x25f01d=a34_0x443e;try{_0x20409a[_0x25f01d(0x20b)](_0x25f01d(0x1f0)),_0xc53c06[_0x25f01d(0x1ef)](_0x26e6c2,(_0x979927,_0x34bbaf)=>{const _0x4815e0=_0x25f01d;_0x979927?(_0x20409a[_0x4815e0(0x20b)](_0x4815e0(0x1cd)+_0x979927),_0x4000f2(_0x979927)):(_0x20409a[_0x4815e0(0x20b)]('End\x20Query'),_0x5d6f5a(_0x34bbaf[_0x4815e0(0x1e8)][_0x4815e0(0x1dd)](_0x51f76e=>_0x51f76e['vlocity_cmt__Type__c']&&_0x51f76e['vlocity_cmt__SubType__c']&&_0x51f76e[_0x4815e0(0x217)])[_0x4815e0(0x1fd)](({vlocity_cmt__Type__c:_0x39c196,vlocity_cmt__SubType__c:_0x353533,vlocity_cmt__Language__c:_0x640b33})=>''+_0x39c196+_0x353533+_0x640b33)));});}catch(_0x514513){_0x4000f2(_0x514513),_0x20409a[_0x25f01d(0x20b)](_0x25f01d(0x1cd)+_0x514513);}});}function fetchOmniOutContentList(_0x53be6c,_0x5f21d1,_0x2ee218){return new Promise((_0x23cdbc,_0x53578b)=>{const _0xf4da43=a34_0x443e;try{_0x2ee218[_0xf4da43(0x20b)](_0xf4da43(0x1f2));const _0x589984=[];let _0x14f1db=0x1,_0x2eccf3=Promise[_0xf4da43(0x1e1)]();_0x5f21d1['forEach'](_0x33cceb=>{const _0x5597b1=_0xf4da43;_0x2eccf3=_0x2eccf3[_0x5597b1(0x1d3)](()=>fetchOmniOutContent(_0x53be6c,_0x33cceb))[_0x5597b1(0x1d3)](_0x4e0457=>{const _0x499803=_0x5597b1;_0x4e0457&&_0x4e0457[_0x499803(0x20c)]&&_0x4e0457[_0x499803(0x20c)][_0x499803(0x218)]===0x2&&(_0x4e0457['compositeResponse'][0x0][_0x499803(0x1e7)]===0xc8&&_0x589984['push']({'lwcComponentList':_0x4e0457[_0x499803(0x20c)][0x1]['body'][_0x499803(0x1e8)],'name':_0x4e0457['compositeResponse'][0x0][_0x499803(0x1f1)][_0x499803(0x1e8)][0x0][_0x499803(0x1d7)]})),_0x2ee218['log'](_0x499803(0x20a)+_0x14f1db++ +_0x499803(0x21f)+_0x589984[_0x499803(0x218)]+_0x499803(0x1c9)+_0x5f21d1[_0x499803(0x218)]);});}),_0x2eccf3['then'](()=>{const _0x21f3b4=_0xf4da43;_0x2ee218[_0x21f3b4(0x20b)](_0x21f3b4(0x21a)),_0x23cdbc(_0x589984);})[_0xf4da43(0x1eb)](_0x5516df=>{const _0x455abe=_0xf4da43;_0x2ee218['log'](_0x455abe(0x1f3)+_0x5516df),_0x53578b(_0x5516df);});}catch(_0x573cdf){_0x53578b(_0x573cdf),_0x2ee218['log'](_0xf4da43(0x1f3)+_0x573cdf);}});}function fetchOmniOutContent(_0x33e896,_0x223f15){const _0x24d11b=a34_0x2001cc;_0x223f15=_0x223f15['replace']('-','')[_0x24d11b(0x1f4)](_0x24d11b(0x219),'');const _0x39fb25={'allOrNone':!![],'compositeRequest':[{'method':_0x24d11b(0x216),'referenceId':'bundleInfo','url':_0x24d11b(0x1d8)+_0x223f15+'\x27'},{'method':'GET','referenceId':_0x24d11b(0x1e0),'url':_0x24d11b(0x1cf)}]},_0x48f89e=_0x33e896[_0x24d11b(0x1c7)],_0xcb9163={'method':_0x24d11b(0x1ca),'url':_0x48f89e+_0x24d11b(0x1f7),'body':JSON['stringify'](_0x39fb25),'headers':{'Content-Type':'application/json'}};return _0x33e896['request'](_0xcb9163);}function createLwcFiles(_0x506b14,_0x400af9,_0xfc0478,_0xf58e90){return new Promise((_0x5428a9,_0x2baac6)=>{const _0x42efb0=a34_0x443e;try{_0xf58e90[_0x42efb0(0x20b)](_0x42efb0(0x1fe));const _0x5cfee1=[];let _0x4f0350=[],_0x21f84b=0x0,_0x380926=new AdmZip();_0x400af9[_0x42efb0(0x214)](_0x36d95a=>{const _0x2d16c6=_0x42efb0;_0x4f0350[_0x2d16c6(0x21c)]({'apiName':_0x36d95a['name'],'componentType':_0x2d16c6(0x1f9),'label':_0x2d16c6(0x1d4)+_0x36d95a['name']}),_0x36d95a[_0x2d16c6(0x1ec)][_0x2d16c6(0x214)](_0x392e1c=>{const _0x59d3c1=_0x2d16c6;_0x392e1c[_0x59d3c1(0x1e5)]!==_0x59d3c1(0x1d6)&&(_0x21f84b+=_0x392e1c[_0x59d3c1(0x1e5)][_0x59d3c1(0x218)],_0x21f84b<constants[_0x59d3c1(0x1df)]?_0x380926['addFile'](''+_0x392e1c[_0x59d3c1(0x1ee)],Buffer['from'](_0x392e1c['Source'][_0x59d3c1(0x1f4)](new RegExp(_0x59d3c1(0x205),'g'),'c'))):(_0x5cfee1['push']({'snapshotId':_0xfc0478,'typeList':[{'type':'LightningComponentBundle','zip':_0x380926[_0x59d3c1(0x1fc)]()['toString']('base64'),'componentList':_0x4f0350}]}),_0x4f0350=[],_0x21f84b=0x0,_0x380926=new AdmZip()));}),delete _0x36d95a['lwcComponentList'];}),_0x4f0350[_0x42efb0(0x218)]&&_0x5cfee1[_0x42efb0(0x21c)]({'snapshotId':_0xfc0478,'typeList':[{'type':_0x42efb0(0x1f9),'zip':_0x380926[_0x42efb0(0x1fc)]()[_0x42efb0(0x1d1)](_0x42efb0(0x1de)),'componentList':_0x4f0350}]}),_0xf58e90[_0x42efb0(0x20b)](_0x42efb0(0x1da)),_0x5428a9(_0x5cfee1);}catch(_0x1422d3){_0xf58e90['log'](_0x42efb0(0x1e2)+_0x1422d3),_0x2baac6(_0x1422d3);}});}function a34_0x443e(_0x2822f1,_0x1e9e37){const _0xb7ad98=a34_0xb7ad();return a34_0x443e=function(_0x443e47,_0x3a9d5d){_0x443e47=_0x443e47-0x1c5;let _0x478c29=_0xb7ad98[_0x443e47];return _0x478c29;},a34_0x443e(_0x2822f1,_0x1e9e37);}function sendComponents(_0x2bff40,_0x3bec5a,_0x299aee,_0x2d9428){return new Promise((_0x1ca4a2,_0x10d60f)=>{const _0x396fec=a34_0x443e;try{_0x2d9428[_0x396fec(0x20b)](_0x396fec(0x1cb));let _0x4b6249=Promise['resolve']();_0x299aee['forEach'](_0x379534=>{const _0x469525=_0x396fec;_0x4b6249=_0x4b6249[_0x469525(0x1d3)](()=>callSentComponents(_0x2bff40,_0x3bec5a,_0x379534));}),_0x4b6249[_0x396fec(0x1d3)](()=>{const _0x11b894=_0x396fec;_0x2d9428[_0x11b894(0x20b)](_0x11b894(0x21e)),_0x1ca4a2();})[_0x396fec(0x1eb)](_0x46d27b=>{const _0x4e77a1=_0x396fec;_0x2d9428[_0x4e77a1(0x20b)](_0x4e77a1(0x203)+_0x46d27b),_0x10d60f(_0x46d27b);});}catch(_0x3c2b71){_0x2d9428[_0x396fec(0x20b)](_0x396fec(0x203)+_0x3c2b71),_0x10d60f(_0x3c2b71);}});}function callSentComponents(_0x4bedc7,_0x2aaed9,_0x39c8d7){return new Promise((_0x4f9c6f,_0x29ca57)=>{const _0x43ea97=a34_0x443e;try{const _0xb47fa0={'methodType':constants['METHOD_TYPE_ADD_COMPONENTS_TO_SNAPSHOT'],'body':JSON[_0x43ea97(0x1d0)](_0x39c8d7)};http[_0x43ea97(0x1d9)](_0x4bedc7,_0x2aaed9[_0x43ea97(0x1f4)]('__',''),JSON[_0x43ea97(0x1d0)](_0xb47fa0))[_0x43ea97(0x1d3)](()=>{_0x4f9c6f();})[_0x43ea97(0x1eb)](_0x29ca57);}catch(_0x8a5d84){_0x29ca57(_0x8a5d84);}});}function completeDeployment(_0x1d9013,_0x46e523,_0x33a638,_0x3d1333,_0x4a792b,_0xc16188,_0x5a97bb,_0x1e062c,_0x1ae660=![]){return new Promise((_0x2314a7,_0x36a7d5)=>{const _0x51d700=a34_0x443e;try{Promise['resolve']()[_0x51d700(0x1d3)](()=>updateAttachmentLog(_0x1d9013,_0x46e523,_0xc16188,_0x1e062c,_0x1ae660,!![]))[_0x51d700(0x1d3)](_0x110f4d=>{const _0x3833e8=_0x51d700;return _0x1ae660=_0x110f4d,http[_0x3833e8(0x204)](_0x46e523,_0x4a792b,_0x33a638,_0x5a97bb,_0x1e062c,_0x110f4d);})[_0x51d700(0x1d3)](()=>callUpdateSnapshot(_0x46e523,_0x3d1333,_0x33a638,_0x1ae660,_0x1e062c));}catch(_0x535e6a){_0x36a7d5(_0x535e6a);}});}function updateAttachmentLog(_0x41400d,_0x1cdf53,_0x76609,_0x4252b4,_0x20e52e,_0x6e2e6=![]){return new Promise(_0x159861=>{const _0x13fe94=a34_0x443e;try{_0x4252b4[_0x13fe94(0x20b)](_0x13fe94(0x1e6)),Promise[_0x13fe94(0x1e1)]()[_0x13fe94(0x1d3)](()=>http[_0x13fe94(0x1d2)](_0x1cdf53,_0x76609,_0x4252b4))[_0x13fe94(0x1d3)](_0x9946b9=>http['callUpdateAttachmentLog'](_0x1cdf53,_0x76609,_0x9946b9,_0x4252b4,_0x20e52e))[_0x13fe94(0x1d3)](()=>_0x159861(_0x20e52e))[_0x13fe94(0x1eb)](()=>_0x159861(_0x20e52e));}catch(_0x241952){_0x4252b4[_0x13fe94(0x20b)](_0x13fe94(0x212)+_0x241952),_0x159861(_0x20e52e);}});}function callUpdateSnapshot(_0x4d3315,_0x2d659d,_0x12f922,_0x5817f9,_0x33eda5){return new Promise((_0x11d0e3,_0x4c386d)=>{const _0x1aed29=a34_0x443e;try{_0x33eda5['log'](_0x1aed29(0x202));const _0x1710ee={'Id':_0x2d659d,[_0x12f922+_0x1aed29(0x1ea)]:!![],[_0x12f922+_0x1aed29(0x200)]:_0x5817f9};_0x4d3315['updateSnapshot'](_0x12f922,_0x1710ee)[_0x1aed29(0x1d3)](()=>{const _0x278c26=_0x1aed29;_0x33eda5[_0x278c26(0x20b)](_0x278c26(0x1dc)),_0x11d0e3();})[_0x1aed29(0x1eb)](_0x3ca7b5=>{const _0x1d254b=_0x1aed29;_0x33eda5[_0x1d254b(0x20b)]('Error\x20Update\x20Snapshot'),_0x4c386d(_0x3ca7b5);});}catch(_0x359f37){_0x33eda5['log'](_0x1aed29(0x220)),_0x4c386d(_0x359f37);}});}function getDependencyList(_0x3d68c,_0x480ab7,_0x3f1128){return new Promise((_0x1cc4b8,_0x26eb54)=>{const _0x5318ac=a34_0x443e;try{_0x3f1128[_0x5318ac(0x20b)](_0x5318ac(0x208));const _0x59d422=[];let _0x6b921d=Promise['resolve']();_0x480ab7[_0x5318ac(0x214)](_0x3beb40=>{const _0x201ac5=_0x5318ac;_0x6b921d=_0x6b921d[_0x201ac5(0x1d3)](()=>getPrefilledJSON(_0x3d68c,_0x3beb40,_0x3f1128))['then'](_0x2e12e7=>{const _0x424d71=_0x201ac5;_0x59d422['push'](_0x2e12e7),_0x3f1128[_0x424d71(0x20b)](_0x424d71(0x1ce)+_0x59d422['length']+_0x424d71(0x1e4)+_0x480ab7[_0x424d71(0x218)]);});}),_0x6b921d['then'](()=>{_0x3f1128['log']('End\x20Get\x20Dependency\x20List\x20'),_0x1cc4b8(_0x59d422);})['catch'](_0x27ca49=>{const _0x1f157a=_0x5318ac;_0x3f1128[_0x1f157a(0x20b)](_0x1f157a(0x206)+_0x27ca49),_0x26eb54(_0x27ca49);});}catch(_0x2addf5){_0x3f1128[_0x5318ac(0x20b)](_0x5318ac(0x206)+_0x2addf5),_0x26eb54(_0x2addf5);}});}function getPrefilledJSON(_0x2e2483,_0x2bcdef,_0x3f6791){return new Promise((_0x53f8b1,_0x4a9451)=>{const _0x5a54f4=a34_0x443e;try{const _0x11693f={'sClassName':_0x5a54f4(0x1ff),'sType':_0x2bcdef[_0x5a54f4(0x1db)],'sSubType':_0x2bcdef['vlocity_cmt__SubType__c'],'sLang':_0x2bcdef[_0x5a54f4(0x217)]};_0x2e2483[_0x5a54f4(0x201)]['post'](_0x5a54f4(0x207),_0x11693f,(_0x233ddb,_0x5acfca)=>{const _0x3b576d=_0x5a54f4;_0x233ddb?(_0x3f6791[_0x3b576d(0x20b)](_0x3b576d(0x222)+_0x233ddb),_0x4a9451(_0x233ddb)):_0x53f8b1(JSON['parse'](_0x5acfca));});}catch(_0x392769){_0x4a9451(_0x392769),_0x3f6791[_0x5a54f4(0x20b)]('Error\x20Get\x20Prefilled\x20JSON\x20'+_0x392769);}});}function extractLwcDependencies(_0x1f2f42,_0x307443){return new Promise((_0x186ee9,_0x1f88cd)=>{const _0x3d8ee7=a34_0x443e;try{_0x307443['log']('Start\x20Extract\x20LWC\x20Dependencies');const _0x5134a7=[];_0x1f2f42[_0x3d8ee7(0x214)](_0x40525d=>{const _0x306136=_0x3d8ee7;_0x40525d['children']&&_0x40525d[_0x306136(0x210)]['length']>0x0&&_0x40525d[_0x306136(0x210)][_0x306136(0x214)](_0x3d584f=>{const _0x46c5ae=_0x306136;_0x3d584f['children']&&_0x3d584f[_0x46c5ae(0x210)][_0x46c5ae(0x218)]>0x0&&_0x3d584f[_0x46c5ae(0x210)][_0x46c5ae(0x214)](_0x39efe8=>{const _0x425860=_0x46c5ae;_0x39efe8[_0x425860(0x1c8)][0x0][_0x425860(0x21b)]==='Custom\x20Lightning\x20Web\x20Component'&&_0x5134a7[_0x425860(0x21c)](_0x39efe8[_0x425860(0x1c8)][0x0][_0x425860(0x20f)]['lwcName']);});});if(_0x40525d[_0x306136(0x20f)]&&_0x40525d[_0x306136(0x20f)][_0x306136(0x20e)])for(const [_0x398100,_0x106ec9]of Object['entries'](_0x40525d[_0x306136(0x20f)][_0x306136(0x20e)])){_0x5134a7[_0x306136(0x21c)](_0x106ec9);}_0x40525d[_0x306136(0x210)]&&_0x40525d['children'][_0x306136(0x218)]>0x0&&_0x40525d[_0x306136(0x210)][_0x306136(0x214)](_0x3ce19f=>{const _0x260ee6=_0x306136;_0x3ce19f[_0x260ee6(0x20f)]&&_0x3ce19f[_0x260ee6(0x20f)][_0x260ee6(0x211)]&&_0x5134a7[_0x260ee6(0x21c)](_0x3ce19f[_0x260ee6(0x20f)][_0x260ee6(0x211)]),_0x3ce19f[_0x260ee6(0x210)]&&_0x3ce19f[_0x260ee6(0x210)][_0x260ee6(0x218)]>0x0&&_0x3ce19f[_0x260ee6(0x210)][_0x260ee6(0x214)](_0x47a87e=>{const _0x5818d0=_0x260ee6;_0x47a87e['eleArray'][0x0]['propSetMap']&&_0x47a87e[_0x5818d0(0x1c8)][0x0][_0x5818d0(0x20f)][_0x5818d0(0x211)]&&_0x5134a7['push'](_0x47a87e[_0x5818d0(0x1c8)][0x0][_0x5818d0(0x20f)][_0x5818d0(0x211)]);});});}),_0x307443[_0x3d8ee7(0x20b)](_0x3d8ee7(0x1cc)),_0x186ee9(_0x5134a7);}catch(_0xd9de5d){_0x307443['log']('Error\x20Extract\x20LWC\x20Dependencies\x20'+_0xd9de5d),_0x1f88cd(_0xd9de5d);}});}module[a34_0x2001cc(0x1c5)]={'query':query,'getDependencyList':getDependencyList,'extractLwcDependencies':extractLwcDependencies,'fetchOmniOutContentList':fetchOmniOutContentList,'createLwcFiles':createLwcFiles,'sendComponents':sendComponents,'completeDeployment':completeDeployment};