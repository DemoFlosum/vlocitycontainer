const a34_0x14195b=a34_0x2785;(function(_0x1a83f6,_0x2b69d9){const _0x4fd8dc=a34_0x2785,_0x5422c3=_0x1a83f6();while(!![]){try{const _0x5dae93=parseInt(_0x4fd8dc(0x13a))/0x1*(parseInt(_0x4fd8dc(0x104))/0x2)+-parseInt(_0x4fd8dc(0x116))/0x3+parseInt(_0x4fd8dc(0x11d))/0x4*(parseInt(_0x4fd8dc(0x147))/0x5)+parseInt(_0x4fd8dc(0x113))/0x6+-parseInt(_0x4fd8dc(0x12f))/0x7*(-parseInt(_0x4fd8dc(0x117))/0x8)+parseInt(_0x4fd8dc(0x146))/0x9+-parseInt(_0x4fd8dc(0x118))/0xa;if(_0x5dae93===_0x2b69d9)break;else _0x5422c3['push'](_0x5422c3['shift']());}catch(_0x59e6b9){_0x5422c3['push'](_0x5422c3['shift']());}}}(a34_0x1a9d,0x9471e));const path=require(a34_0x14195b(0x13f)),fs=require('fs'),fse=require(a34_0x14195b(0xf9)),AdmZip=require(a34_0x14195b(0xf3)),constants=require(a34_0x14195b(0x144)),http=require(a34_0x14195b(0x108));function query(_0x25fa78,_0x5d73d4,_0x216994){return new Promise((_0x3691ca,_0x4bdb86)=>{const _0xea4a6=a34_0x2785;try{_0x216994[_0xea4a6(0x10e)]('Start\x20Query'),_0x25fa78[_0xea4a6(0x11c)](_0x5d73d4,(_0x4a68a4,_0x1196b7)=>{const _0x2c81ae=_0xea4a6;_0x4a68a4?(_0x216994[_0x2c81ae(0x10e)](_0x2c81ae(0x138)+_0x4a68a4),_0x4bdb86(_0x4a68a4)):(_0x216994[_0x2c81ae(0x10e)](_0x2c81ae(0xeb)),_0x3691ca(_0x1196b7['records'][_0x2c81ae(0x134)](_0x453148=>_0x453148[_0x2c81ae(0x149)]&&_0x453148['vlocity_cmt__SubType__c']&&_0x453148['vlocity_cmt__Language__c'])[_0x2c81ae(0x11f)](({vlocity_cmt__Type__c:_0x404c0f,vlocity_cmt__SubType__c:_0x4878bd,vlocity_cmt__Language__c:_0x559db2})=>{return''+_0x404c0f+_0x4878bd+_0x559db2;})));});}catch(_0x4e0f89){_0x4bdb86(_0x4e0f89),_0x216994[_0xea4a6(0x10e)](_0xea4a6(0x138)+_0x4e0f89);}});}function fetchOmniOutContentList(_0x12805a,_0x559f0e,_0x2d4467){return new Promise((_0xce4e84,_0xecbc9e)=>{const _0x5ddb47=a34_0x2785;try{_0x2d4467[_0x5ddb47(0x10e)](_0x5ddb47(0xe8));const _0x377625=[];let _0x3b6c78=0x1,_0xf33e25=Promise['resolve']();_0x559f0e['forEach'](_0x37974b=>{const _0x5ace18=_0x5ddb47;_0xf33e25=_0xf33e25[_0x5ace18(0x127)](()=>fetchOmniOutContent(_0x12805a,_0x37974b))[_0x5ace18(0x127)](_0x458b91=>{const _0x3634fa=_0x5ace18;_0x458b91&&_0x458b91[_0x3634fa(0xfa)]&&_0x458b91[_0x3634fa(0xfa)][_0x3634fa(0x148)]===0x2&&(_0x458b91[_0x3634fa(0xfa)][0x0][_0x3634fa(0xfb)]===0xc8&&_0x377625[_0x3634fa(0x10b)]({'lwcComponentList':_0x458b91['compositeResponse'][0x1][_0x3634fa(0x128)][_0x3634fa(0x135)],'name':_0x458b91[_0x3634fa(0xfa)][0x0]['body'][_0x3634fa(0x135)][0x0][_0x3634fa(0x115)]})),_0x2d4467[_0x3634fa(0x10e)](_0x3634fa(0x131)+_0x3b6c78++ +_0x3634fa(0x141)+_0x377625[_0x3634fa(0x148)]+_0x3634fa(0x143)+_0x559f0e[_0x3634fa(0x148)]);});}),_0xf33e25['then'](()=>{const _0x47e2da=_0x5ddb47;_0x2d4467[_0x47e2da(0x10e)](_0x47e2da(0x12e)),_0xce4e84(_0x377625);})[_0x5ddb47(0x109)](_0x2d9232=>{_0x2d4467['log']('Error\x20Fetch\x20OmniOut\x20Content\x20List\x20'+_0x2d9232),_0xecbc9e(_0x2d9232);});}catch(_0xc44a1a){_0xecbc9e(_0xc44a1a),_0x2d4467[_0x5ddb47(0x10e)]('Error\x20Fetch\x20OmniOut\x20Content\x20List\x20'+_0xc44a1a);}});}function fetchOmniOutContent(_0x5ab799,_0x1eddea){const _0x47ca87=a34_0x14195b;_0x1eddea=_0x1eddea['replace']('-','')[_0x47ca87(0x132)](_0x47ca87(0x129),'');const _0x2f73ad={'allOrNone':!![],'compositeRequest':[{'method':_0x47ca87(0xf1),'referenceId':'bundleInfo','url':_0x47ca87(0x13d)+_0x1eddea+'\x27'},{'method':'GET','referenceId':_0x47ca87(0x103),'url':_0x47ca87(0xfd)}]},_0x2cf5af=_0x5ab799[_0x47ca87(0x124)],_0x17f49a={'method':_0x47ca87(0x11e),'url':_0x2cf5af+_0x47ca87(0xef),'body':JSON[_0x47ca87(0x120)](_0x2f73ad),'headers':{'Content-Type':_0x47ca87(0x126)}};return _0x5ab799[_0x47ca87(0x133)](_0x17f49a);}function createLwcFiles(_0x3e4e71,_0x24d148,_0x2d41af,_0x31b063){return new Promise((_0x579c43,_0x4ae2ce)=>{const _0x421492=a34_0x2785;try{_0x31b063['log']('Start\x20Create\x20Lwc\x20Files');let _0x48973b=[],_0x2fdb01=[],_0x132658=0x0,_0x22f400=new AdmZip();_0x24d148[_0x421492(0x140)](_0x5151aa=>{const _0x5adad7=_0x421492;_0x2fdb01[_0x5adad7(0x10b)]({'apiName':_0x5151aa['name'],'componentType':'LightningComponentBundle','label':_0x5adad7(0x110)+_0x5151aa[_0x5adad7(0x10d)]}),_0x5151aa['lwcComponentList'][_0x5adad7(0x140)](_0x4dc04d=>{const _0x319b12=_0x5adad7;_0x4dc04d[_0x319b12(0xfc)]!==_0x319b12(0xea)&&(_0x132658+=_0x4dc04d['Source'][_0x319b12(0x148)],_0x132658<constants[_0x319b12(0xed)]?_0x22f400[_0x319b12(0xf2)](''+_0x4dc04d[_0x319b12(0x12a)],Buffer[_0x319b12(0x142)](_0x4dc04d[_0x319b12(0xfc)]['replace'](new RegExp(_0x319b12(0x13e),'g'),'c'))):(_0x48973b[_0x319b12(0x10b)]({'snapshotId':_0x2d41af,'typeList':[{'type':'LightningComponentBundle','zip':_0x22f400['toBuffer']()[_0x319b12(0x136)]('base64'),'componentList':_0x2fdb01}]}),_0x2fdb01=[],_0x132658=0x0,_0x22f400=new AdmZip()));}),delete _0x5151aa['lwcComponentList'];}),_0x2fdb01[_0x421492(0x148)]&&_0x48973b[_0x421492(0x10b)]({'snapshotId':_0x2d41af,'typeList':[{'type':_0x421492(0x10a),'zip':_0x22f400[_0x421492(0xf0)]()[_0x421492(0x136)](_0x421492(0x122)),'componentList':_0x2fdb01}]}),_0x31b063[_0x421492(0x10e)]('End\x20Create\x20Lwc\x20Files'),_0x579c43(_0x48973b);}catch(_0x3d4238){_0x31b063['log'](_0x421492(0x105)+_0x3d4238),_0x4ae2ce(_0x3d4238);}});}function a34_0x2785(_0x5b218a,_0x3b45ab){const _0x1a9dfb=a34_0x1a9d();return a34_0x2785=function(_0x2785bd,_0x43e78c){_0x2785bd=_0x2785bd-0xe6;let _0x16b22b=_0x1a9dfb[_0x2785bd];return _0x16b22b;},a34_0x2785(_0x5b218a,_0x3b45ab);}function sendComponents(_0x3dddc9,_0x269d39,_0x564ac3,_0x556314,_0x200d5b){return new Promise((_0x386c26,_0x5e8189)=>{const _0x4917ea=a34_0x2785;try{_0x200d5b[_0x4917ea(0x10e)](_0x4917ea(0x12b));let _0x47e074=Promise[_0x4917ea(0x100)]();_0x556314[_0x4917ea(0x140)](_0x195374=>{const _0x4bee69=_0x4917ea;_0x47e074=_0x47e074[_0x4bee69(0x127)](()=>callSentComponents(_0x3dddc9,_0x269d39,_0x564ac3,_0x195374));}),_0x47e074['then'](()=>{const _0xfe0dbb=_0x4917ea;_0x200d5b[_0xfe0dbb(0x10e)](_0xfe0dbb(0x12c)),_0x386c26();})[_0x4917ea(0x109)](_0x4f2e42=>{const _0x53eaa4=_0x4917ea;_0x200d5b['log'](_0x53eaa4(0x130)+_0x4f2e42),_0x5e8189(_0x4f2e42);});}catch(_0x31ce73){_0x200d5b[_0x4917ea(0x10e)](_0x4917ea(0x130)+_0x31ce73),_0x5e8189(_0x31ce73);}});}function callSentComponents(_0x295777,_0x32c2f5,_0x37c63d,_0x4d5786){return new Promise((_0x5b2160,_0x3923ff)=>{const _0x373de7=a34_0x2785;try{const _0x3b0eef={'methodType':constants[_0x373de7(0x121)],'body':JSON[_0x373de7(0x120)](_0x4d5786)};_0x37c63d=_0x37c63d?_0x37c63d[_0x373de7(0x132)]('__','')+'/':'';const _0x428cfa=_0x295777+_0x373de7(0x137)+_0x37c63d[_0x373de7(0x132)]('__','')+_0x373de7(0xe7);http[_0x373de7(0xf7)](_0x428cfa,_0x32c2f5,_0x37c63d[_0x373de7(0x132)]('__',''),JSON[_0x373de7(0x120)](_0x3b0eef))[_0x373de7(0x127)](()=>{_0x5b2160();})[_0x373de7(0x109)](_0x3923ff);}catch(_0x264f3f){_0x3923ff(_0x264f3f);}});}function completeDeployment(_0x28a019,_0x2ffd8c,_0x667bd2,_0x42e434,_0x339e66,_0x28a514,_0x37040b,_0x5890bc,_0x49fd51=![]){return new Promise((_0x211acb,_0x158814)=>{const _0x316300=a34_0x2785;try{Promise[_0x316300(0x100)]()[_0x316300(0x127)](()=>updateAttachmentLog(_0x28a019,_0x2ffd8c,_0x28a514,_0x5890bc,_0x49fd51,!![]))[_0x316300(0x127)](_0x393811=>{return _0x49fd51=_0x393811,http['callUpdateLog'](_0x2ffd8c,_0x339e66,_0x667bd2,_0x37040b,_0x5890bc,_0x393811);})[_0x316300(0x127)](()=>callUpdateSnapshot(_0x2ffd8c,_0x42e434,_0x667bd2,_0x49fd51,_0x5890bc));}catch(_0x5b4413){_0x158814(_0x5b4413);}});}function updateAttachmentLog(_0x9a32db,_0x34ec9d,_0x5da1e0,_0x33c26d,_0x12da67,_0x5de917=![]){return new Promise(_0x2a26af=>{const _0x28ca2e=a34_0x2785;try{_0x33c26d['log']('Start\x20Update\x20Attachment\x20Log'),Promise['resolve']()[_0x28ca2e(0x127)](()=>http['getAttachmentBody'](_0x34ec9d,_0x5da1e0,_0x33c26d))[_0x28ca2e(0x127)](_0xc9c55=>{const _0x3bfc10=_0x28ca2e;return http[_0x3bfc10(0xee)](_0x34ec9d,_0x5da1e0,_0xc9c55,_0x33c26d,_0x12da67);})['then'](()=>_0x2a26af(_0x12da67))[_0x28ca2e(0x109)](()=>_0x2a26af(_0x12da67));}catch(_0x193e3a){_0x33c26d[_0x28ca2e(0x10e)](_0x28ca2e(0xf8)+_0x193e3a),_0x2a26af(_0x12da67);}});}function callUpdateSnapshot(_0x5af6cf,_0x5eccda,_0x5860de,_0x29d2ae,_0x9de916){return new Promise((_0x485767,_0x121f75)=>{const _0x1e4382=a34_0x2785;try{_0x9de916[_0x1e4382(0x10e)](_0x1e4382(0x10c));const _0x392e60={'Id':_0x5eccda,[_0x5860de+_0x1e4382(0xf5)]:!![],[_0x5860de+'Is_Error__c']:_0x29d2ae};_0x5af6cf[_0x1e4382(0x10f)](_0x5860de+_0x1e4382(0xff))[_0x1e4382(0x111)](_0x392e60)['then'](()=>{const _0x49c917=_0x1e4382;_0x9de916[_0x49c917(0x10e)](_0x49c917(0x112)),_0x485767();})[_0x1e4382(0x109)](_0x29432=>{const _0x467939=_0x1e4382;_0x9de916[_0x467939(0x10e)](_0x467939(0x123)),_0x121f75(_0x29432);});}catch(_0x1147ce){_0x9de916['log'](_0x1e4382(0x123)),_0x121f75(_0x1147ce);}});}function getDependencyList(_0x3af5d1,_0x53a3e8,_0x893b12){return new Promise((_0x30da5a,_0x513dec)=>{const _0x158a8c=a34_0x2785;try{_0x893b12['log'](_0x158a8c(0xe9));const _0x3ec5b6=[];let _0x1143c8=Promise[_0x158a8c(0x100)]();_0x53a3e8[_0x158a8c(0x140)](_0x9e1bc0=>{const _0x171c8d=_0x158a8c;_0x1143c8=_0x1143c8[_0x171c8d(0x127)](()=>getPrefilledJSON(_0x3af5d1,_0x9e1bc0,_0x893b12))['then'](_0xa36c0a=>{const _0x48f6bf=_0x171c8d;_0x3ec5b6['push'](_0xa36c0a),_0x893b12['log'](_0x48f6bf(0x114)+_0x3ec5b6[_0x48f6bf(0x148)]+_0x48f6bf(0x11b)+_0x53a3e8[_0x48f6bf(0x148)]);});}),_0x1143c8[_0x158a8c(0x127)](()=>{const _0x2a79b4=_0x158a8c;_0x893b12[_0x2a79b4(0x10e)]('End\x20Get\x20Dependency\x20List\x20'),_0x30da5a(_0x3ec5b6);})[_0x158a8c(0x109)](_0x2e5300=>{const _0xe2cb05=_0x158a8c;_0x893b12['log'](_0xe2cb05(0x14a)+_0x2e5300),_0x513dec(_0x2e5300);});}catch(_0x567f1c){_0x893b12['log'](_0x158a8c(0x14a)+_0x567f1c),_0x513dec(_0x567f1c);}});}function getPrefilledJSON(_0x264ad6,_0x560519,_0x229b59){return new Promise((_0x3c4fbf,_0x523050)=>{const _0x5e8f52=a34_0x2785;try{const _0x1d4362={'sClassName':_0x5e8f52(0x102),'sType':_0x560519[_0x5e8f52(0x149)],'sSubType':_0x560519['vlocity_cmt__SubType__c'],'sLang':_0x560519[_0x5e8f52(0x119)]};_0x264ad6[_0x5e8f52(0x139)][_0x5e8f52(0xf7)](_0x5e8f52(0x13c),_0x1d4362,(_0x42d29d,_0x5a6c1f)=>{const _0x12ee6b=_0x5e8f52;_0x42d29d?(_0x229b59[_0x12ee6b(0x10e)](_0x12ee6b(0x13b)+_0x42d29d),_0x523050(_0x42d29d)):_0x3c4fbf(JSON['parse'](_0x5a6c1f));});}catch(_0x2888d3){_0x523050(_0x2888d3),_0x229b59[_0x5e8f52(0x10e)](_0x5e8f52(0xec)+_0x2888d3);}});}function a34_0x1a9d(){const _0x8967d0=['Start\x20Extract\x20LWC\x20Dependencies','364842rFyPGZ','1075395cgDkBS','length','vlocity_cmt__Type__c','Error\x20Get\x20Dependency\x20List\x20','Custom\x20Lightning\x20Web\x20Component','unlocked-packages','Start\x20Fetch\x20OmniOut\x20Content\x20List\x20','Start\x20Get\x20Dependency\x20List\x20','(hidden)','End\x20Query','Error\x20Get\x20Prefilled\x20JSON\x20','MAX_SIZE_UNZIP_ATTACHMENT','callUpdateAttachmentLog','/services/data/v50.0/tooling/composite','toBuffer','GET','addFile','adm-zip','propSetMap','Is_Completed__c','elementTypeToLwcTemplateMapping','post','Error\x20Update\x20Attachment\x20Log\x20','fs-extra','compositeResponse','httpStatusCode','Source','/services/data/v48.0/tooling/query?q=SELECT+Id,FilePath,Format,Source+FROM+LightningComponentResource+WHERE+LightningComponentBundleId=\x27@{bundleInfo.records[0].Id}\x27','lwcName','Snapshot__c','resolve','exports','Vlocity\x20BuildJSONWithPrefill','bundleResources','39782dwgZQU','Error\x20Create\x20Lwc\x20Files\x20','entries','eleArray','../../../services/http','catch','LightningComponentBundle','push','Start\x20Update\x20Snapshot','name','log','sobject','lwc/','update','End\x20Update\x20Snapshot','5925246rXWeej','Process\x20Get\x20Dependency,\x20processed\x20','DeveloperName','1452507UfdIRW','344tXmkOi','7874450cEvyGR','vlocity_cmt__Language__c','lwcComponentOverride','\x20from\x20','query','8UdybFQ','POST','map','stringify','METHOD_TYPE_ADD_COMPONENTS_TO_SNAPSHOT','base64','Error\x20Update\x20Snapshot','instanceUrl','children','application/json','then','body','vlocity_cmt__','FilePath','Start\x20Send\x20Components','End\x20Send\x20Components','End\x20Extract\x20LWC\x20Dependencies','End\x20Fetch\x20OmniOut\x20Content\x20List\x20','62125HADUXt','Error\x20Send\x20Components\x20','Process\x20Fetch\x20OmniOut\x20Content,\x20processed\x20','replace','request','filter','records','toString','/services/apexrest/','Error\x20Query\x20','apex','2BSSWYK','Error\x20getPrefilledJSON\x20','/vlocity_cmt/v1/GenericInvoke/','/services/data/v48.0/tooling/query?q=SELECT+Id,DeveloperName,Description+FROM+LightningComponentBundle+WHERE+DeveloperName=\x27','vlocity_cmt','path','forEach',',\x20retrieved\x20','from',',\x20all\x20','../../../constants'];a34_0x1a9d=function(){return _0x8967d0;};return a34_0x1a9d();}function extractLwcDependencies(_0x31ad59,_0x4a6238){return new Promise((_0x38b263,_0x536ac8)=>{const _0x8f2350=a34_0x2785;try{_0x4a6238[_0x8f2350(0x10e)](_0x8f2350(0x145));let _0x497023=[];_0x31ad59['forEach'](_0x574593=>{const _0x1a6851=_0x8f2350;_0x574593[_0x1a6851(0x125)]&&_0x574593[_0x1a6851(0x125)]['length']>0x0&&_0x574593['children'][_0x1a6851(0x140)](_0x221e0b=>{const _0x239320=_0x1a6851;_0x221e0b[_0x239320(0x125)]&&_0x221e0b[_0x239320(0x125)][_0x239320(0x148)]>0x0&&_0x221e0b['children'][_0x239320(0x140)](_0x16ca3e=>{const _0xcd5bca=_0x239320;_0x16ca3e[_0xcd5bca(0x107)][0x0]['type']===_0xcd5bca(0xe6)&&_0x497023['push'](_0x16ca3e['eleArray'][0x0][_0xcd5bca(0xf4)][_0xcd5bca(0xfe)]);});});if(_0x574593[_0x1a6851(0xf4)]&&_0x574593[_0x1a6851(0xf4)][_0x1a6851(0xf6)])for(const [_0x231eb5,_0x7f248]of Object[_0x1a6851(0x106)](_0x574593['propSetMap'][_0x1a6851(0xf6)])){_0x497023[_0x1a6851(0x10b)](_0x7f248);}_0x574593[_0x1a6851(0x125)]&&_0x574593[_0x1a6851(0x125)][_0x1a6851(0x148)]>0x0&&_0x574593['children'][_0x1a6851(0x140)](_0x57f51b=>{const _0x701c27=_0x1a6851;_0x57f51b[_0x701c27(0xf4)]&&_0x57f51b[_0x701c27(0xf4)][_0x701c27(0x11a)]&&_0x497023[_0x701c27(0x10b)](_0x57f51b[_0x701c27(0xf4)][_0x701c27(0x11a)]),_0x57f51b[_0x701c27(0x125)]&&_0x57f51b[_0x701c27(0x125)]['length']>0x0&&_0x57f51b[_0x701c27(0x125)]['forEach'](_0x1f8ce8=>{const _0x1ec573=_0x701c27;_0x1f8ce8[_0x1ec573(0x107)][0x0][_0x1ec573(0xf4)]&&_0x1f8ce8['eleArray'][0x0][_0x1ec573(0xf4)]['lwcComponentOverride']&&_0x497023[_0x1ec573(0x10b)](_0x1f8ce8[_0x1ec573(0x107)][0x0][_0x1ec573(0xf4)][_0x1ec573(0x11a)]);});});}),_0x4a6238[_0x8f2350(0x10e)](_0x8f2350(0x12d)),_0x38b263(_0x497023);}catch(_0x26b9c8){_0x4a6238[_0x8f2350(0x10e)]('Error\x20Extract\x20LWC\x20Dependencies\x20'+_0x26b9c8),_0x536ac8(_0x26b9c8);}});}module[a34_0x14195b(0x101)]={'query':query,'getDependencyList':getDependencyList,'extractLwcDependencies':extractLwcDependencies,'fetchOmniOutContentList':fetchOmniOutContentList,'createLwcFiles':createLwcFiles,'sendComponents':sendComponents,'completeDeployment':completeDeployment};