function _0x2044(_0x290cc5,_0x58ef23){const _0x1927b7=_0x1927();return _0x2044=function(_0x20440a,_0x293b76){_0x20440a=_0x20440a-0x77;let _0x5324a4=_0x1927b7[_0x20440a];return _0x5324a4;},_0x2044(_0x290cc5,_0x58ef23);}const _0x415b27=_0x2044;(function(_0x1d8012,_0x120998){const _0x502029=_0x2044,_0x5b654f=_0x1d8012();while(!![]){try{const _0x331d81=-parseInt(_0x502029(0xd2))/0x1+-parseInt(_0x502029(0xb8))/0x2+parseInt(_0x502029(0xcd))/0x3+parseInt(_0x502029(0xa8))/0x4*(parseInt(_0x502029(0xbc))/0x5)+-parseInt(_0x502029(0xc8))/0x6*(-parseInt(_0x502029(0xa6))/0x7)+-parseInt(_0x502029(0xb4))/0x8+parseInt(_0x502029(0x92))/0x9*(-parseInt(_0x502029(0xc2))/0xa);if(_0x331d81===_0x120998)break;else _0x5b654f['push'](_0x5b654f['shift']());}catch(_0x195603){_0x5b654f['push'](_0x5b654f['shift']());}}}(_0x1927,0x4b04b));const path=require(_0x415b27(0x84)),fs=require('fs'),fse=require('fs-extra'),AdmZip=require(_0x415b27(0xc9)),constants=require(_0x415b27(0x78)),http=require(_0x415b27(0xc0));function query(_0x176245,_0x14647e,_0x561ad9){return new Promise((_0xdbe528,_0x2d9310)=>{const _0x48b1e7=_0x2044;try{_0x561ad9[_0x48b1e7(0x95)]('Start\x20Query'),_0x176245[_0x48b1e7(0x9d)](_0x14647e,(_0x35a4d5,_0x1b2df1)=>{const _0xc54ca1=_0x48b1e7;_0x35a4d5?(_0x561ad9[_0xc54ca1(0x95)](_0xc54ca1(0xb3)+_0x35a4d5),_0x2d9310(_0x35a4d5)):(_0x561ad9['log'](_0xc54ca1(0x85)),_0xdbe528(_0x1b2df1[_0xc54ca1(0x7f)][_0xc54ca1(0x86)](_0x7b96fc=>_0x7b96fc['vlocity_cmt__Type__c']&&_0x7b96fc[_0xc54ca1(0x9f)]&&_0x7b96fc[_0xc54ca1(0xab)])[_0xc54ca1(0xd7)](({vlocity_cmt__Type__c:_0x374d87,vlocity_cmt__SubType__c:_0x50bbc3,vlocity_cmt__Language__c:_0x25540e})=>{return''+_0x374d87+_0x50bbc3+_0x25540e;})));});}catch(_0x3e168c){_0x2d9310(_0x3e168c),_0x561ad9[_0x48b1e7(0x95)](_0x48b1e7(0xb3)+_0x3e168c);}});}function fetchOmniOutContentList(_0x59af65,_0x44ab14,_0x48efad){return new Promise((_0x404130,_0x43db1b)=>{const _0x36bc60=_0x2044;try{_0x48efad[_0x36bc60(0x95)](_0x36bc60(0xdb));const _0x58698e=[];let _0xbad75e=0x1,_0xd96531=Promise[_0x36bc60(0x9c)]();_0x44ab14[_0x36bc60(0xd0)](_0x51ea38=>{const _0x2e6f69=_0x36bc60;_0xd96531=_0xd96531['then'](()=>fetchOmniOutContent(_0x59af65,_0x51ea38))[_0x2e6f69(0xaa)](_0x52bd82=>{const _0x462d1b=_0x2e6f69;_0x52bd82&&_0x52bd82['compositeResponse']&&_0x52bd82[_0x462d1b(0xca)][_0x462d1b(0xa1)]===0x2&&(_0x52bd82[_0x462d1b(0xca)][0x0][_0x462d1b(0x7b)]===0xc8&&_0x58698e[_0x462d1b(0xac)]({'lwcComponentList':_0x52bd82[_0x462d1b(0xca)][0x1][_0x462d1b(0xaf)]['records'],'name':_0x52bd82[_0x462d1b(0xca)][0x0][_0x462d1b(0xaf)]['records'][0x0][_0x462d1b(0x81)]})),_0x48efad['log'](_0x462d1b(0x8b)+_0xbad75e++ +_0x462d1b(0x9a)+_0x58698e[_0x462d1b(0xa1)]+_0x462d1b(0xb1)+_0x44ab14[_0x462d1b(0xa1)]);});}),_0xd96531[_0x36bc60(0xaa)](()=>{const _0x619e35=_0x36bc60;_0x48efad[_0x619e35(0x95)](_0x619e35(0xc5)),_0x404130(_0x58698e);})['catch'](_0x2f9aa1=>{const _0x335977=_0x36bc60;_0x48efad[_0x335977(0x95)](_0x335977(0xda)+_0x2f9aa1),_0x43db1b(_0x2f9aa1);});}catch(_0x2ed420){_0x43db1b(_0x2ed420),_0x48efad['log'](_0x36bc60(0xda)+_0x2ed420);}});}function fetchOmniOutContent(_0x143c25,_0x5cd8b7){const _0x53c640=_0x415b27;_0x5cd8b7=_0x5cd8b7[_0x53c640(0x87)]('-','')[_0x53c640(0x87)](_0x53c640(0xc7),'');const _0x3befe7={'allOrNone':!![],'compositeRequest':[{'method':'GET','referenceId':'bundleInfo','url':_0x53c640(0x80)+_0x5cd8b7+'\x27'},{'method':_0x53c640(0x8a),'referenceId':_0x53c640(0xb6),'url':'/services/data/v48.0/tooling/query?q=SELECT+Id,FilePath,Format,Source+FROM+LightningComponentResource+WHERE+LightningComponentBundleId=\x27@{bundleInfo.records[0].Id}\x27'}]},_0x48cb5f=_0x143c25[_0x53c640(0xd8)],_0x2c3f46={'method':_0x53c640(0xa2),'url':_0x48cb5f+_0x53c640(0xcf),'body':JSON[_0x53c640(0xb5)](_0x3befe7),'headers':{'Content-Type':_0x53c640(0xc3)}};return _0x143c25[_0x53c640(0xbb)](_0x2c3f46);}function createLwcFiles(_0x48e2b6,_0x51df8f,_0x5dff75,_0x1d9166){return new Promise((_0x57f5f7,_0x13b457)=>{const _0x10cc83=_0x2044;try{_0x1d9166['log'](_0x10cc83(0x94));let _0x326408=[],_0x2ff785=[],_0x2af01a=0x0,_0x315f09=new AdmZip();_0x51df8f[_0x10cc83(0xd0)](_0x127e49=>{const _0x1ad267=_0x10cc83;_0x2ff785[_0x1ad267(0xac)]({'apiName':_0x127e49['name'],'componentType':_0x1ad267(0x77),'label':_0x1ad267(0xae)+_0x127e49[_0x1ad267(0xa4)]}),_0x127e49[_0x1ad267(0xb9)]['forEach'](_0x236f7d=>{const _0x2c7bd8=_0x1ad267;_0x236f7d[_0x2c7bd8(0xcb)]!=='(hidden)'&&(_0x2af01a+=_0x236f7d['Source']['length'],_0x2af01a<constants[_0x2c7bd8(0xc6)]?_0x315f09[_0x2c7bd8(0x82)](''+_0x236f7d[_0x2c7bd8(0x7e)],Buffer[_0x2c7bd8(0x93)](_0x236f7d['Source'][_0x2c7bd8(0x87)](new RegExp(_0x2c7bd8(0x90),'g'),'c'))):(_0x326408[_0x2c7bd8(0xac)]({'snapshotId':_0x5dff75,'typeList':[{'type':'LightningComponentBundle','zip':_0x315f09[_0x2c7bd8(0x8c)]()['toString'](_0x2c7bd8(0xb0)),'componentList':_0x2ff785}]}),_0x2ff785=[],_0x2af01a=0x0,_0x315f09=new AdmZip()));}),delete _0x127e49[_0x1ad267(0xb9)];}),_0x2ff785[_0x10cc83(0xa1)]&&_0x326408[_0x10cc83(0xac)]({'snapshotId':_0x5dff75,'typeList':[{'type':_0x10cc83(0x77),'zip':_0x315f09[_0x10cc83(0x8c)]()[_0x10cc83(0x98)](_0x10cc83(0xb0)),'componentList':_0x2ff785}]}),_0x1d9166[_0x10cc83(0x95)](_0x10cc83(0xd6)),_0x57f5f7(_0x326408);}catch(_0x192ba0){_0x1d9166[_0x10cc83(0x95)](_0x10cc83(0xc1)+_0x192ba0),_0x13b457(_0x192ba0);}});}function sendComponents(_0x2ce739,_0x7922,_0xe1e1f5,_0x55bf96,_0x3d45c0){return new Promise((_0x5eee3b,_0x22a6ec)=>{const _0x1ba4e0=_0x2044;try{_0x3d45c0[_0x1ba4e0(0x95)]('Start\x20Send\x20Components');let _0x52e075=Promise[_0x1ba4e0(0x9c)]();_0x55bf96[_0x1ba4e0(0xd0)](_0x5d5aca=>{_0x52e075=_0x52e075['then'](()=>callSentComponents(_0x2ce739,_0x7922,_0xe1e1f5,_0x5d5aca));}),_0x52e075[_0x1ba4e0(0xaa)](()=>{const _0x42bf8c=_0x1ba4e0;_0x3d45c0[_0x42bf8c(0x95)]('End\x20Send\x20Components'),_0x5eee3b();})[_0x1ba4e0(0xba)](_0x59aa81=>{const _0x35bb42=_0x1ba4e0;_0x3d45c0[_0x35bb42(0x95)](_0x35bb42(0x8e)+_0x59aa81),_0x22a6ec(_0x59aa81);});}catch(_0x33d227){_0x3d45c0['log'](_0x1ba4e0(0x8e)+_0x33d227),_0x22a6ec(_0x33d227);}});}function callSentComponents(_0xf4329a,_0x2fb8d4,_0x39a84a,_0x3c7dba){return new Promise((_0x4663b9,_0x222cf1)=>{const _0x5e8dd2=_0x2044;try{const _0x2ac929={'methodType':constants[_0x5e8dd2(0x99)],'body':JSON[_0x5e8dd2(0xb5)](_0x3c7dba)};_0x39a84a=_0x39a84a?_0x39a84a[_0x5e8dd2(0x87)]('__','')+'/':'';const _0x170d73=_0xf4329a+_0x5e8dd2(0x7c)+_0x39a84a[_0x5e8dd2(0x87)]('__','')+_0x5e8dd2(0x97);http[_0x5e8dd2(0x9b)](_0x170d73,_0x2fb8d4,_0x39a84a[_0x5e8dd2(0x87)]('__',''),JSON[_0x5e8dd2(0xb5)](_0x2ac929))[_0x5e8dd2(0xaa)](()=>{_0x4663b9();})[_0x5e8dd2(0xba)](_0x222cf1);}catch(_0x53b702){_0x222cf1(_0x53b702);}});}function completeDeployment(_0x2fe3bb,_0x371730,_0x59e9f4,_0x454b51,_0x3448f0,_0x36b204,_0x11484d,_0x48ec68,_0x2307fb=![]){return new Promise((_0x16de74,_0x2ae3d3)=>{const _0x2b20f9=_0x2044;try{Promise['resolve']()[_0x2b20f9(0xaa)](()=>updateAttachmentLog(_0x2fe3bb,_0x371730,_0x36b204,_0x48ec68,_0x2307fb,!![]))[_0x2b20f9(0xaa)](_0xf985b4=>{const _0x55e2a2=_0x2b20f9;return _0x2307fb=_0xf985b4,http[_0x55e2a2(0x89)](_0x371730,_0x3448f0,_0x59e9f4,_0x11484d,_0x48ec68,_0xf985b4);})['then'](()=>callUpdateSnapshot(_0x371730,_0x454b51,_0x59e9f4,_0x2307fb,_0x48ec68));}catch(_0x33f105){_0x2ae3d3(_0x33f105);}});}function updateAttachmentLog(_0x115482,_0x86743b,_0x22f7ae,_0xe892c1,_0x26f5b4,_0x97f701=![]){return new Promise(_0x2e483a=>{const _0x2487cf=_0x2044;try{_0xe892c1[_0x2487cf(0x95)]('Start\x20Update\x20Attachment\x20Log'),Promise[_0x2487cf(0x9c)]()[_0x2487cf(0xaa)](()=>http[_0x2487cf(0xb7)](_0x86743b,_0x22f7ae,_0xe892c1))[_0x2487cf(0xaa)](_0x29f0be=>{const _0x5cfcf3=_0x2487cf;return http[_0x5cfcf3(0xd5)](_0x86743b,_0x22f7ae,_0x29f0be,_0xe892c1,_0x26f5b4);})[_0x2487cf(0xaa)](()=>_0x2e483a(_0x26f5b4))[_0x2487cf(0xba)](()=>_0x2e483a(_0x26f5b4));}catch(_0x6e5e48){_0xe892c1['log'](_0x2487cf(0xbd)+_0x6e5e48),_0x2e483a(_0x26f5b4);}});}function callUpdateSnapshot(_0x51b252,_0x302580,_0x17fa20,_0x358c83,_0x102e5d){return new Promise((_0x101a11,_0xba20b6)=>{const _0x57441b=_0x2044;try{_0x102e5d[_0x57441b(0x95)](_0x57441b(0xbe));const _0xeeebf1={'Id':_0x302580,[_0x17fa20+'Is_Completed__c']:!![],[_0x17fa20+'Is_Error__c']:_0x358c83};_0x51b252[_0x57441b(0xc4)](_0x17fa20+_0x57441b(0x7a))[_0x57441b(0xcc)](_0xeeebf1)['then'](()=>{const _0x3c58b3=_0x57441b;_0x102e5d[_0x3c58b3(0x95)](_0x3c58b3(0x91)),_0x101a11();})['catch'](_0x40710f=>{const _0x5919b6=_0x57441b;_0x102e5d[_0x5919b6(0x95)](_0x5919b6(0x8d)),_0xba20b6(_0x40710f);});}catch(_0x4271b2){_0x102e5d[_0x57441b(0x95)](_0x57441b(0x8d)),_0xba20b6(_0x4271b2);}});}function getDependencyList(_0x44da57,_0x939428,_0x1bb3cc){return new Promise((_0x22bc62,_0x2fc99d)=>{const _0xc3b73f=_0x2044;try{_0x1bb3cc[_0xc3b73f(0x95)]('Start\x20Get\x20Dependency\x20List\x20');const _0x8e4685=[];let _0x5447d0=Promise[_0xc3b73f(0x9c)]();_0x939428[_0xc3b73f(0xd0)](_0x17389a=>{const _0x3c2c23=_0xc3b73f;_0x5447d0=_0x5447d0['then'](()=>getPrefilledJSON(_0x44da57,_0x17389a,_0x1bb3cc))[_0x3c2c23(0xaa)](_0x36b8f8=>{const _0x475664=_0x3c2c23;_0x8e4685['push'](_0x36b8f8),_0x1bb3cc[_0x475664(0x95)](_0x475664(0xd9)+_0x8e4685['length']+_0x475664(0xa7)+_0x939428[_0x475664(0xa1)]);});}),_0x5447d0[_0xc3b73f(0xaa)](()=>{const _0x24f50e=_0xc3b73f;_0x1bb3cc[_0x24f50e(0x95)](_0x24f50e(0x79)),_0x22bc62(_0x8e4685);})[_0xc3b73f(0xba)](_0x269321=>{const _0x678d7c=_0xc3b73f;_0x1bb3cc[_0x678d7c(0x95)](_0x678d7c(0xce)+_0x269321),_0x2fc99d(_0x269321);});}catch(_0x169729){_0x1bb3cc['log']('Error\x20Get\x20Dependency\x20List\x20'+_0x169729),_0x2fc99d(_0x169729);}});}function getPrefilledJSON(_0x3ef768,_0x88998,_0x2ad151){return new Promise((_0x3a82c0,_0x4dac52)=>{const _0x1c098a=_0x2044;try{const _0xc72155={'sClassName':'Vlocity\x20BuildJSONWithPrefill','sType':_0x88998[_0x1c098a(0x83)],'sSubType':_0x88998['vlocity_cmt__SubType__c'],'sLang':_0x88998[_0x1c098a(0xab)]};_0x3ef768['apex'][_0x1c098a(0x9b)]('/vlocity_cmt/v1/GenericInvoke/',_0xc72155,(_0x192fd8,_0x13adcc)=>{const _0x34d969=_0x1c098a;_0x192fd8?(_0x2ad151[_0x34d969(0x95)](_0x34d969(0x8f)+_0x192fd8),_0x4dac52(_0x192fd8)):_0x3a82c0(JSON[_0x34d969(0xb2)](_0x13adcc));});}catch(_0x4fbd66){_0x4dac52(_0x4fbd66),_0x2ad151[_0x1c098a(0x95)]('Error\x20Get\x20Prefilled\x20JSON\x20'+_0x4fbd66);}});}function extractLwcDependencies(_0x225a6c,_0x3e1f91){return new Promise((_0x3a128e,_0x54d66a)=>{const _0x55dec5=_0x2044;try{_0x3e1f91[_0x55dec5(0x95)](_0x55dec5(0x9e));let _0x23d67d=[];_0x225a6c[_0x55dec5(0xd0)](_0x74a65=>{const _0x18206b=_0x55dec5;_0x74a65['children']&&_0x74a65[_0x18206b(0xd1)][_0x18206b(0xa1)]>0x0&&_0x74a65['children'][_0x18206b(0xd0)](_0x4d41de=>{const _0x12d9e2=_0x18206b;_0x4d41de[_0x12d9e2(0xd1)]&&_0x4d41de[_0x12d9e2(0xd1)][_0x12d9e2(0xa1)]>0x0&&_0x4d41de['children'][_0x12d9e2(0xd0)](_0x5bd06e=>{const _0x446f70=_0x12d9e2;_0x5bd06e['eleArray'][0x0][_0x446f70(0xd3)]===_0x446f70(0xa3)&&_0x23d67d['push'](_0x5bd06e[_0x446f70(0xa0)][0x0][_0x446f70(0xd4)][_0x446f70(0xad)]);});});if(_0x74a65[_0x18206b(0xd4)]&&_0x74a65[_0x18206b(0xd4)][_0x18206b(0x96)])for(const [_0x3478d5,_0x5361ad]of Object[_0x18206b(0xbf)](_0x74a65[_0x18206b(0xd4)][_0x18206b(0x96)])){_0x23d67d['push'](_0x5361ad);}_0x74a65[_0x18206b(0xd1)]&&_0x74a65[_0x18206b(0xd1)][_0x18206b(0xa1)]>0x0&&_0x74a65[_0x18206b(0xd1)][_0x18206b(0xd0)](_0x2158de=>{const _0x16c2a7=_0x18206b;_0x2158de[_0x16c2a7(0xd4)]&&_0x2158de['propSetMap'][_0x16c2a7(0x7d)]&&_0x23d67d['push'](_0x2158de[_0x16c2a7(0xd4)]['lwcComponentOverride']),_0x2158de['children']&&_0x2158de['children']['length']>0x0&&_0x2158de[_0x16c2a7(0xd1)][_0x16c2a7(0xd0)](_0x315b51=>{const _0x23f125=_0x16c2a7;_0x315b51[_0x23f125(0xa0)][0x0]['propSetMap']&&_0x315b51[_0x23f125(0xa0)][0x0][_0x23f125(0xd4)]['lwcComponentOverride']&&_0x23d67d[_0x23f125(0xac)](_0x315b51[_0x23f125(0xa0)][0x0][_0x23f125(0xd4)][_0x23f125(0x7d)]);});});}),_0x3e1f91[_0x55dec5(0x95)](_0x55dec5(0xa5)),_0x3a128e(_0x23d67d);}catch(_0x351645){_0x3e1f91['log'](_0x55dec5(0x88)+_0x351645),_0x54d66a(_0x351645);}});}module[_0x415b27(0xa9)]={'query':query,'getDependencyList':getDependencyList,'extractLwcDependencies':extractLwcDependencies,'fetchOmniOutContentList':fetchOmniOutContentList,'createLwcFiles':createLwcFiles,'sendComponents':sendComponents,'completeDeployment':completeDeployment};function _0x1927(){const _0x54ee6e=['filter','replace','Error\x20Extract\x20LWC\x20Dependencies\x20','callUpdateLog','GET','Process\x20Fetch\x20OmniOut\x20Content,\x20processed\x20','toBuffer','Error\x20Update\x20Snapshot','Error\x20Send\x20Components\x20','Error\x20getPrefilledJSON\x20','vlocity_cmt','End\x20Update\x20Snapshot','83115cqaBrt','from','Start\x20Create\x20Lwc\x20Files','log','elementTypeToLwcTemplateMapping','unlocked-packages','toString','METHOD_TYPE_ADD_COMPONENTS_TO_SNAPSHOT',',\x20retrieved\x20','post','resolve','query','Start\x20Extract\x20LWC\x20Dependencies','vlocity_cmt__SubType__c','eleArray','length','POST','Custom\x20Lightning\x20Web\x20Component','name','End\x20Extract\x20LWC\x20Dependencies','119nrdhhd','\x20from\x20','4rJppiS','exports','then','vlocity_cmt__Language__c','push','lwcName','lwc/','body','base64',',\x20all\x20','parse','Error\x20Query\x20','2220760VqmevM','stringify','bundleResources','getAttachmentBody','473704jEYhNU','lwcComponentList','catch','request','3003860pcqrWd','Error\x20Update\x20Attachment\x20Log\x20','Start\x20Update\x20Snapshot','entries','../../../services/http','Error\x20Create\x20Lwc\x20Files\x20','340xGiOdi','application/json','sobject','End\x20Fetch\x20OmniOut\x20Content\x20List\x20','MAX_SIZE_UNZIP_ATTACHMENT','vlocity_cmt__','208806TCkWXk','adm-zip','compositeResponse','Source','update','732027zAfKCN','Error\x20Get\x20Dependency\x20List\x20','/services/data/v50.0/tooling/composite','forEach','children','300686HIPPnv','type','propSetMap','callUpdateAttachmentLog','End\x20Create\x20Lwc\x20Files','map','instanceUrl','Process\x20Get\x20Dependency,\x20processed\x20','Error\x20Fetch\x20OmniOut\x20Content\x20List\x20','Start\x20Fetch\x20OmniOut\x20Content\x20List\x20','LightningComponentBundle','../../../constants','End\x20Get\x20Dependency\x20List\x20','Snapshot__c','httpStatusCode','/services/apexrest/','lwcComponentOverride','FilePath','records','/services/data/v48.0/tooling/query?q=SELECT+Id,DeveloperName,Description+FROM+LightningComponentBundle+WHERE+DeveloperName=\x27','DeveloperName','addFile','vlocity_cmt__Type__c','path','End\x20Query'];_0x1927=function(){return _0x54ee6e;};return _0x1927();}