const a26_0x158445=a26_0x12e2;(function(_0x1ffce7,_0x5e1cb8){const _0x2fc230=a26_0x12e2,_0x1e1e16=_0x1ffce7();while(!![]){try{const _0x262945=-parseInt(_0x2fc230(0x221))/0x1+parseInt(_0x2fc230(0x1f0))/0x2*(parseInt(_0x2fc230(0x20c))/0x3)+-parseInt(_0x2fc230(0x1e5))/0x4*(parseInt(_0x2fc230(0x1e6))/0x5)+-parseInt(_0x2fc230(0x1fd))/0x6*(-parseInt(_0x2fc230(0x1da))/0x7)+-parseInt(_0x2fc230(0x1d7))/0x8+parseInt(_0x2fc230(0x213))/0x9*(parseInt(_0x2fc230(0x22d))/0xa)+-parseInt(_0x2fc230(0x1d8))/0xb*(-parseInt(_0x2fc230(0x201))/0xc);if(_0x262945===_0x5e1cb8)break;else _0x1e1e16['push'](_0x1e1e16['shift']());}catch(_0x23298e){_0x1e1e16['push'](_0x1e1e16['shift']());}}}(a26_0x1d49,0xb1ae4));const path=require('path'),fs=require('fs'),fse=require(a26_0x158445(0x1fe)),AdmZip=require(a26_0x158445(0x1f8)),constants=require(a26_0x158445(0x22a)),http=require(a26_0x158445(0x200));function query(_0x46aadc,_0x2656e4,_0x659c9f){return new Promise((_0x4ab18c,_0x3011d0)=>{const _0x1cf622=a26_0x12e2;try{_0x659c9f[_0x1cf622(0x22e)](_0x1cf622(0x1d9)),_0x46aadc[_0x1cf622(0x1f4)](_0x2656e4,(_0x3d0d06,_0x3c713c)=>{const _0x2004c5=_0x1cf622;_0x3d0d06?(_0x659c9f[_0x2004c5(0x22e)](_0x2004c5(0x1fa)+_0x3d0d06),_0x3011d0(_0x3d0d06)):(_0x659c9f[_0x2004c5(0x22e)](_0x2004c5(0x215)),_0x4ab18c(_0x3c713c[_0x2004c5(0x22c)][_0x2004c5(0x22f)](_0x16927d=>_0x16927d[_0x2004c5(0x1f1)]&&_0x16927d['vlocity_cmt__SubType__c']&&_0x16927d[_0x2004c5(0x229)])['map'](({vlocity_cmt__Type__c:_0x3fa888,vlocity_cmt__SubType__c:_0x34c977,vlocity_cmt__Language__c:_0x48cc80})=>{return''+_0x3fa888+_0x34c977+_0x48cc80;})));});}catch(_0x3a05e5){_0x3011d0(_0x3a05e5),_0x659c9f['log'](_0x1cf622(0x1fa)+_0x3a05e5);}});}function fetchOmniOutContentList(_0x21568d,_0x2cb2cb,_0x13bcce){return new Promise((_0x3355af,_0xf8073f)=>{const _0x5d6884=a26_0x12e2;try{_0x13bcce[_0x5d6884(0x22e)]('Start\x20Fetch\x20OmniOut\x20Content\x20List\x20');const _0x1a66c0=[];let _0x4d0294=0x1,_0x4716e8=Promise['resolve']();_0x2cb2cb[_0x5d6884(0x1d6)](_0x31b3d7=>{const _0x41e3b1=_0x5d6884;_0x4716e8=_0x4716e8[_0x41e3b1(0x212)](()=>fetchOmniOutContent(_0x21568d,_0x31b3d7))[_0x41e3b1(0x212)](_0x409077=>{const _0x4b0a5b=_0x41e3b1;_0x409077&&_0x409077['compositeResponse']&&_0x409077[_0x4b0a5b(0x1f7)][_0x4b0a5b(0x1d3)]===0x2&&(_0x409077[_0x4b0a5b(0x1f7)][0x0]['httpStatusCode']===0xc8&&_0x1a66c0[_0x4b0a5b(0x1d5)]({'lwcComponentList':_0x409077[_0x4b0a5b(0x1f7)][0x1]['body'][_0x4b0a5b(0x22c)],'name':_0x409077['compositeResponse'][0x0][_0x4b0a5b(0x1db)]['records'][0x0][_0x4b0a5b(0x1fb)]})),_0x13bcce[_0x4b0a5b(0x22e)](_0x4b0a5b(0x1e1)+_0x4d0294++ +',\x20retrieved\x20'+_0x1a66c0[_0x4b0a5b(0x1d3)]+_0x4b0a5b(0x1dc)+_0x2cb2cb['length']);});}),_0x4716e8['then'](()=>{const _0x5a1154=_0x5d6884;_0x13bcce[_0x5a1154(0x22e)]('End\x20Fetch\x20OmniOut\x20Content\x20List\x20'),_0x3355af(_0x1a66c0);})[_0x5d6884(0x203)](_0x263549=>{const _0x4f2af2=_0x5d6884;_0x13bcce[_0x4f2af2(0x22e)](_0x4f2af2(0x226)+_0x263549),_0xf8073f(_0x263549);});}catch(_0x29f412){_0xf8073f(_0x29f412),_0x13bcce['log'](_0x5d6884(0x226)+_0x29f412);}});}function a26_0x12e2(_0x248fd0,_0x3a0d0e){const _0x1d4938=a26_0x1d49();return a26_0x12e2=function(_0x12e224,_0x18b575){_0x12e224=_0x12e224-0x1d1;let _0x47ec92=_0x1d4938[_0x12e224];return _0x47ec92;},a26_0x12e2(_0x248fd0,_0x3a0d0e);}function fetchOmniOutContent(_0x48979c,_0x3f08bc){const _0x57bd62=a26_0x158445;_0x3f08bc=_0x3f08bc['replace']('-','')[_0x57bd62(0x1e0)](_0x57bd62(0x1dd),'');const _0x49437a={'allOrNone':!![],'compositeRequest':[{'method':_0x57bd62(0x217),'referenceId':_0x57bd62(0x1d4),'url':_0x57bd62(0x204)+_0x3f08bc+'\x27'},{'method':_0x57bd62(0x217),'referenceId':_0x57bd62(0x21f),'url':_0x57bd62(0x20b)}]},_0x3c9fe8=_0x48979c[_0x57bd62(0x1f6)],_0x2e85e7={'method':'POST','url':_0x3c9fe8+_0x57bd62(0x208),'body':JSON['stringify'](_0x49437a),'headers':{'Content-Type':_0x57bd62(0x1f2)}};return _0x48979c[_0x57bd62(0x1de)](_0x2e85e7);}function createLwcFiles(_0x472639,_0x35a902,_0x4ae0f3,_0x7d0368){return new Promise((_0x18108a,_0x55c988)=>{const _0x43aa68=a26_0x12e2;try{_0x7d0368['log'](_0x43aa68(0x21c));let _0x2deeed=[],_0x1c328f=[],_0x333bcc=0x0,_0x50bc0a=new AdmZip();_0x35a902[_0x43aa68(0x1d6)](_0x2dbff6=>{const _0x492fe2=_0x43aa68;_0x1c328f[_0x492fe2(0x1d5)]({'apiName':_0x2dbff6[_0x492fe2(0x216)],'componentType':_0x492fe2(0x209),'label':_0x492fe2(0x1ed)+_0x2dbff6[_0x492fe2(0x216)]}),_0x2dbff6[_0x492fe2(0x228)][_0x492fe2(0x1d6)](_0x328f33=>{const _0x5d48dc=_0x492fe2;_0x328f33[_0x5d48dc(0x1e2)]!=='(hidden)'&&(_0x333bcc+=_0x328f33[_0x5d48dc(0x1e2)][_0x5d48dc(0x1d3)],_0x333bcc<constants[_0x5d48dc(0x218)]?_0x50bc0a[_0x5d48dc(0x1f5)](''+_0x328f33[_0x5d48dc(0x211)],Buffer['from'](_0x328f33[_0x5d48dc(0x1e2)][_0x5d48dc(0x1e0)](new RegExp(_0x5d48dc(0x1f3),'g'),'c'))):(_0x2deeed[_0x5d48dc(0x1d5)]({'snapshotId':_0x4ae0f3,'typeList':[{'type':_0x5d48dc(0x209),'zip':_0x50bc0a[_0x5d48dc(0x1ff)]()['toString'](_0x5d48dc(0x223)),'componentList':_0x1c328f}]}),_0x1c328f=[],_0x333bcc=0x0,_0x50bc0a=new AdmZip()));}),delete _0x2dbff6[_0x492fe2(0x228)];}),_0x1c328f[_0x43aa68(0x1d3)]&&_0x2deeed[_0x43aa68(0x1d5)]({'snapshotId':_0x4ae0f3,'typeList':[{'type':'LightningComponentBundle','zip':_0x50bc0a['toBuffer']()[_0x43aa68(0x214)](_0x43aa68(0x223)),'componentList':_0x1c328f}]}),_0x7d0368[_0x43aa68(0x22e)](_0x43aa68(0x224)),_0x18108a(_0x2deeed);}catch(_0x71c250){_0x7d0368['log']('Error\x20Create\x20Lwc\x20Files\x20'+_0x71c250),_0x55c988(_0x71c250);}});}function sendComponents(_0x38c2e5,_0x1bddc1,_0x15908b,_0x22a4dd,_0x137179){return new Promise((_0x36d5d0,_0x2122fe)=>{const _0x59ebeb=a26_0x12e2;try{_0x137179[_0x59ebeb(0x22e)](_0x59ebeb(0x1e7));let _0x535cf6=Promise[_0x59ebeb(0x227)]();_0x22a4dd[_0x59ebeb(0x1d6)](_0x38ccc1=>{const _0x5f06c9=_0x59ebeb;_0x535cf6=_0x535cf6[_0x5f06c9(0x212)](()=>callSentComponents(_0x38c2e5,_0x1bddc1,_0x15908b,_0x38ccc1));}),_0x535cf6[_0x59ebeb(0x212)](()=>{const _0x4e342c=_0x59ebeb;_0x137179[_0x4e342c(0x22e)]('End\x20Send\x20Components'),_0x36d5d0();})['catch'](_0x490da5=>{const _0x29bf4a=_0x59ebeb;_0x137179[_0x29bf4a(0x22e)](_0x29bf4a(0x1ec)+_0x490da5),_0x2122fe(_0x490da5);});}catch(_0x1bef75){_0x137179[_0x59ebeb(0x22e)](_0x59ebeb(0x1ec)+_0x1bef75),_0x2122fe(_0x1bef75);}});}function callSentComponents(_0x79388d,_0x25a75d,_0x40a548,_0x1e5273){return new Promise((_0x8f20e5,_0x35ce0e)=>{const _0x369562=a26_0x12e2;try{const _0x2d0edb={'methodType':constants[_0x369562(0x20f)],'body':JSON[_0x369562(0x1fc)](_0x1e5273)};_0x40a548=_0x40a548?_0x40a548[_0x369562(0x1e0)]('__','')+'/':'';const _0x307218=_0x79388d+_0x369562(0x1ea)+_0x40a548[_0x369562(0x1e0)]('__','')+_0x369562(0x219);http['post'](_0x307218,_0x25a75d,_0x40a548['replace']('__',''),JSON[_0x369562(0x1fc)](_0x2d0edb))[_0x369562(0x212)](()=>{_0x8f20e5();})[_0x369562(0x203)](_0x35ce0e);}catch(_0x307427){_0x35ce0e(_0x307427);}});}function completeDeployment(_0x2fe452,_0x6c0d,_0x1d1053,_0xe98e5d,_0xe303c2,_0x4d79f5,_0xc42bc3,_0x585838,_0x477f86=![]){return new Promise((_0x4807c1,_0x26463d)=>{const _0x3c1175=a26_0x12e2;try{Promise[_0x3c1175(0x227)]()[_0x3c1175(0x212)](()=>updateAttachmentLog(_0x2fe452,_0x6c0d,_0x4d79f5,_0x585838,_0x477f86,!![]))[_0x3c1175(0x212)](_0x107b17=>{return _0x477f86=_0x107b17,http['callUpdateLog'](_0x6c0d,_0xe303c2,_0x1d1053,_0xc42bc3,_0x585838,_0x107b17);})[_0x3c1175(0x212)](()=>callUpdateSnapshot(_0x6c0d,_0xe98e5d,_0x1d1053,_0x477f86,_0x585838));}catch(_0x8333ff){_0x26463d(_0x8333ff);}});}function updateAttachmentLog(_0x401c71,_0xe3fa0f,_0x17d029,_0x17a358,_0x46079b,_0x172fad=![]){return new Promise(_0x41805a=>{const _0x44c013=a26_0x12e2;try{_0x17a358[_0x44c013(0x22e)](_0x44c013(0x220)),Promise['resolve']()[_0x44c013(0x212)](()=>http['getAttachmentBody'](_0xe3fa0f,_0x17d029,_0x17a358))['then'](_0x5aae22=>{return http['callUpdateAttachmentLog'](_0xe3fa0f,_0x17d029,_0x5aae22,_0x17a358,_0x46079b);})[_0x44c013(0x212)](()=>_0x41805a(_0x46079b))[_0x44c013(0x203)](()=>_0x41805a(_0x46079b));}catch(_0x5f3b5c){_0x17a358[_0x44c013(0x22e)]('Error\x20Update\x20Attachment\x20Log\x20'+_0x5f3b5c),_0x41805a(_0x46079b);}});}function callUpdateSnapshot(_0x3c249a,_0x6f92ee,_0x5c732d,_0x2a971a,_0x2933e0){return new Promise((_0x4f3465,_0x153271)=>{const _0x15865e=a26_0x12e2;try{_0x2933e0[_0x15865e(0x22e)]('Start\x20Update\x20Snapshot');const _0x1b3ad9={'Id':_0x6f92ee,[_0x5c732d+_0x15865e(0x21e)]:!![],[_0x5c732d+'Is_Error__c']:_0x2a971a};_0x3c249a[_0x15865e(0x207)](_0x5c732d+'Snapshot__c')[_0x15865e(0x21a)](_0x1b3ad9)[_0x15865e(0x212)](()=>{const _0x5d383f=_0x15865e;_0x2933e0['log'](_0x5d383f(0x20d)),_0x4f3465();})[_0x15865e(0x203)](_0x455cbd=>{const _0x2af30c=_0x15865e;_0x2933e0[_0x2af30c(0x22e)]('Error\x20Update\x20Snapshot'),_0x153271(_0x455cbd);});}catch(_0x40392c){_0x2933e0['log'](_0x15865e(0x206)),_0x153271(_0x40392c);}});}function getDependencyList(_0x44485a,_0x45dac3,_0x53a434){return new Promise((_0x365ead,_0x2a8144)=>{const _0x52652f=a26_0x12e2;try{_0x53a434[_0x52652f(0x22e)](_0x52652f(0x20a));const _0x2915c9=[];let _0x6ead88=Promise[_0x52652f(0x227)]();_0x45dac3[_0x52652f(0x1d6)](_0x5d1a6d=>{const _0x8bf2a5=_0x52652f;_0x6ead88=_0x6ead88[_0x8bf2a5(0x212)](()=>getPrefilledJSON(_0x44485a,_0x5d1a6d,_0x53a434))[_0x8bf2a5(0x212)](_0x228214=>{const _0x127414=_0x8bf2a5;_0x2915c9[_0x127414(0x1d5)](_0x228214),_0x53a434[_0x127414(0x22e)](_0x127414(0x225)+_0x2915c9['length']+_0x127414(0x1e3)+_0x45dac3['length']);});}),_0x6ead88[_0x52652f(0x212)](()=>{const _0x308113=_0x52652f;_0x53a434[_0x308113(0x22e)](_0x308113(0x1eb)),_0x365ead(_0x2915c9);})[_0x52652f(0x203)](_0x143a81=>{const _0x5d5f5a=_0x52652f;_0x53a434[_0x5d5f5a(0x22e)]('Error\x20Get\x20Dependency\x20List\x20'+_0x143a81),_0x2a8144(_0x143a81);});}catch(_0x3888c7){_0x53a434[_0x52652f(0x22e)]('Error\x20Get\x20Dependency\x20List\x20'+_0x3888c7),_0x2a8144(_0x3888c7);}});}function getPrefilledJSON(_0x56b8e0,_0x1df824,_0x22d625){return new Promise((_0x470221,_0x242e4b)=>{const _0x4f4a8b=a26_0x12e2;try{const _0x1bed41={'sClassName':_0x4f4a8b(0x1e8),'sType':_0x1df824['vlocity_cmt__Type__c'],'sSubType':_0x1df824[_0x4f4a8b(0x1e4)],'sLang':_0x1df824[_0x4f4a8b(0x229)]};_0x56b8e0[_0x4f4a8b(0x205)][_0x4f4a8b(0x1d2)]('/vlocity_cmt/v1/GenericInvoke/',_0x1bed41,(_0x48fbd6,_0x324d2a)=>{const _0x34b23b=_0x4f4a8b;_0x48fbd6?(_0x22d625[_0x34b23b(0x22e)](_0x34b23b(0x21b)+_0x48fbd6),_0x242e4b(_0x48fbd6)):_0x470221(JSON[_0x34b23b(0x1e9)](_0x324d2a));});}catch(_0x138892){_0x242e4b(_0x138892),_0x22d625[_0x4f4a8b(0x22e)](_0x4f4a8b(0x21d)+_0x138892);}});}function extractLwcDependencies(_0xf1d143,_0x52fc13){return new Promise((_0x4c61f0,_0x5a53f1)=>{const _0xf481f5=a26_0x12e2;try{_0x52fc13[_0xf481f5(0x22e)](_0xf481f5(0x1df));let _0x20e959=[];_0xf1d143[_0xf481f5(0x1d6)](_0x3ccb73=>{const _0x46b301=_0xf481f5;_0x3ccb73[_0x46b301(0x1ee)]&&_0x3ccb73[_0x46b301(0x1ee)]['length']>0x0&&_0x3ccb73['children'][_0x46b301(0x1d6)](_0x32f78c=>{const _0x59da72=_0x46b301;_0x32f78c['children']&&_0x32f78c[_0x59da72(0x1ee)][_0x59da72(0x1d3)]>0x0&&_0x32f78c[_0x59da72(0x1ee)]['forEach'](_0x48b8fe=>{const _0x1e6ccd=_0x59da72;_0x48b8fe[_0x1e6ccd(0x1ef)][0x0]['type']===_0x1e6ccd(0x210)&&_0x20e959['push'](_0x48b8fe['eleArray'][0x0][_0x1e6ccd(0x20e)]['lwcName']);});});if(_0x3ccb73[_0x46b301(0x20e)]&&_0x3ccb73[_0x46b301(0x20e)][_0x46b301(0x22b)])for(const [_0xe08699,_0x510cf7]of Object[_0x46b301(0x202)](_0x3ccb73[_0x46b301(0x20e)][_0x46b301(0x22b)])){_0x20e959['push'](_0x510cf7);}_0x3ccb73[_0x46b301(0x1ee)]&&_0x3ccb73['children'][_0x46b301(0x1d3)]>0x0&&_0x3ccb73['children']['forEach'](_0x23a9ba=>{const _0x292e9d=_0x46b301;_0x23a9ba[_0x292e9d(0x20e)]&&_0x23a9ba[_0x292e9d(0x20e)][_0x292e9d(0x222)]&&_0x20e959[_0x292e9d(0x1d5)](_0x23a9ba[_0x292e9d(0x20e)][_0x292e9d(0x222)]),_0x23a9ba['children']&&_0x23a9ba['children'][_0x292e9d(0x1d3)]>0x0&&_0x23a9ba[_0x292e9d(0x1ee)][_0x292e9d(0x1d6)](_0x5a3180=>{const _0x411bdd=_0x292e9d;_0x5a3180[_0x411bdd(0x1ef)][0x0][_0x411bdd(0x20e)]&&_0x5a3180[_0x411bdd(0x1ef)][0x0][_0x411bdd(0x20e)][_0x411bdd(0x222)]&&_0x20e959[_0x411bdd(0x1d5)](_0x5a3180['eleArray'][0x0][_0x411bdd(0x20e)]['lwcComponentOverride']);});});}),_0x52fc13['log'](_0xf481f5(0x1d1)),_0x4c61f0(_0x20e959);}catch(_0x32d83b){_0x52fc13['log']('Error\x20Extract\x20LWC\x20Dependencies\x20'+_0x32d83b),_0x5a53f1(_0x32d83b);}});}function a26_0x1d49(){const _0x22e20a=['update','Error\x20getPrefilledJSON\x20','Start\x20Create\x20Lwc\x20Files','Error\x20Get\x20Prefilled\x20JSON\x20','Is_Completed__c','bundleResources','Start\x20Update\x20Attachment\x20Log','246455ELpoAr','lwcComponentOverride','base64','End\x20Create\x20Lwc\x20Files','Process\x20Get\x20Dependency,\x20processed\x20','Error\x20Fetch\x20OmniOut\x20Content\x20List\x20','resolve','lwcComponentList','vlocity_cmt__Language__c','../../../constants','elementTypeToLwcTemplateMapping','records','578660cyZRrA','log','filter','End\x20Extract\x20LWC\x20Dependencies','post','length','bundleInfo','push','forEach','11527384KqOopX','11pBjOrj','Start\x20Query','8155TPLWYk','body',',\x20all\x20','vlocity_cmt__','request','Start\x20Extract\x20LWC\x20Dependencies','replace','Process\x20Fetch\x20OmniOut\x20Content,\x20processed\x20','Source','\x20from\x20','vlocity_cmt__SubType__c','3764DRbhty','4605jiHUpx','Start\x20Send\x20Components','Vlocity\x20BuildJSONWithPrefill','parse','/services/apexrest/','End\x20Get\x20Dependency\x20List\x20','Error\x20Send\x20Components\x20','lwc/','children','eleArray','14LfwEYh','vlocity_cmt__Type__c','application/json','vlocity_cmt','query','addFile','instanceUrl','compositeResponse','adm-zip','exports','Error\x20Query\x20','DeveloperName','stringify','7038wAVNCG','fs-extra','toBuffer','../../../services/http','3220716DNgBQx','entries','catch','/services/data/v48.0/tooling/query?q=SELECT+Id,DeveloperName,Description+FROM+LightningComponentBundle+WHERE+DeveloperName=\x27','apex','Error\x20Update\x20Snapshot','sobject','/services/data/v50.0/tooling/composite','LightningComponentBundle','Start\x20Get\x20Dependency\x20List\x20','/services/data/v48.0/tooling/query?q=SELECT+Id,FilePath,Format,Source+FROM+LightningComponentResource+WHERE+LightningComponentBundleId=\x27@{bundleInfo.records[0].Id}\x27','457809YAyMxQ','End\x20Update\x20Snapshot','propSetMap','METHOD_TYPE_ADD_COMPONENTS_TO_SNAPSHOT','Custom\x20Lightning\x20Web\x20Component','FilePath','then','90aoRKAe','toString','End\x20Query','name','GET','MAX_SIZE_UNZIP_ATTACHMENT','unlocked-packages'];a26_0x1d49=function(){return _0x22e20a;};return a26_0x1d49();}module[a26_0x158445(0x1f9)]={'query':query,'getDependencyList':getDependencyList,'extractLwcDependencies':extractLwcDependencies,'fetchOmniOutContentList':fetchOmniOutContentList,'createLwcFiles':createLwcFiles,'sendComponents':sendComponents,'completeDeployment':completeDeployment};