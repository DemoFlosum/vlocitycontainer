const a39_0x1806e2=a39_0x28b9;(function(_0x28cc32,_0x428dda){const _0xa1618=a39_0x28b9,_0x198af7=_0x28cc32();while(!![]){try{const _0x40a76e=-parseInt(_0xa1618(0x17b))/0x1+parseInt(_0xa1618(0x18c))/0x2+-parseInt(_0xa1618(0x192))/0x3*(parseInt(_0xa1618(0x173))/0x4)+parseInt(_0xa1618(0x181))/0x5+parseInt(_0xa1618(0x1a8))/0x6+parseInt(_0xa1618(0x185))/0x7+parseInt(_0xa1618(0x17d))/0x8*(-parseInt(_0xa1618(0x165))/0x9);if(_0x40a76e===_0x428dda)break;else _0x198af7['push'](_0x198af7['shift']());}catch(_0x1fcd9c){_0x198af7['push'](_0x198af7['shift']());}}}(a39_0x94d7,0xe9426));function a39_0x28b9(_0x33fca1,_0x66f04d){const _0x94d76a=a39_0x94d7();return a39_0x28b9=function(_0x28b987,_0x3d9fa4){_0x28b987=_0x28b987-0x159;let _0x89ff4e=_0x94d76a[_0x28b987];return _0x89ff4e;},a39_0x28b9(_0x33fca1,_0x66f04d);}const axios=require('axios'),yaml=require(a39_0x1806e2(0x18d)),constants=require('../../constants'),storage=require('../../services/storage');function post(_0x4e83fe,_0x5feb17,_0x338fe6,_0x4e2fd5){return new Promise((_0x5e66ad,_0x1b819c)=>{const _0x1b62ba=a39_0x28b9;try{const _0x63959f={'Authorization':_0x1b62ba(0x197)+_0x5feb17,'Content-Type':_0x1b62ba(0x1a7)};axios[_0x1b62ba(0x16d)](_0x4e83fe,_0x4e2fd5,{'headers':_0x63959f})['then'](_0x34015=>{_0x5e66ad(_0x34015);})[_0x1b62ba(0x187)](_0x2f2dec=>{const _0x441c33=_0x1b62ba;if(_0x2f2dec&&_0x2f2dec[_0x441c33(0x193)]&&_0x2f2dec[_0x441c33(0x193)]['data'])typeof _0x2f2dec[_0x441c33(0x193)][_0x441c33(0x1a3)]!==_0x441c33(0x1a5)?_0x1b819c(JSON[_0x441c33(0x180)](_0x2f2dec[_0x441c33(0x193)][_0x441c33(0x1a3)])):_0x1b819c(_0x2f2dec['response'][_0x441c33(0x1a3)]);else _0x2f2dec[_0x441c33(0x176)]?_0x1b819c(_0x2f2dec[_0x441c33(0x176)]):_0x1b819c(_0x2f2dec[_0x441c33(0x18e)]);});}catch(_0x1c2e48){_0x1b819c(_0x1c2e48);}});}function callUpdateInfo(_0x236b31,_0x3b9340,_0x46937e,_0xf3a4e7,_0x3631b3,_0x17cc04,_0x4f7357,_0x1d1a6c,_0x2bd517=![]){return new Promise((_0x2a7a78,_0x23aaef)=>{const _0xf6eba8=a39_0x28b9;try{_0xf3a4e7=_0xf3a4e7&&_0xf3a4e7[_0xf6eba8(0x19e)]?_0xf3a4e7[_0xf6eba8(0x184)]('__','')+'/':'';try{const _0x4ae74b=yaml[_0xf6eba8(0x188)](_0x17cc04);_0x4ae74b[_0xf6eba8(0x191)]&&(_0x2bd517=_0x4ae74b[_0xf6eba8(0x191)][_0xf6eba8(0x19e)]>0x0);}catch(_0x46e796){}_0x1d1a6c[_0xf6eba8(0x1a1)]('Start\x20Update\x20Log\x20is\x20Success\x20=\x20'+_0x4f7357);const _0x2cc5f9={'logId':_0x46937e,'attachmentLogId':_0x3631b3,'isJobCompleted':!![],'status':_0xf6eba8(0x171),'isSuccess':_0x4f7357,'isError':_0x2bd517,'attachmentBody':_0x17cc04+_0xf6eba8(0x195)+_0x1d1a6c[_0xf6eba8(0x162)]['join']('\x0a')},_0x535eb5=_0x236b31+_0xf6eba8(0x160)+_0xf3a4e7+_0xf6eba8(0x182),_0x185a5d={'methodType':constants['METHOD_UPDATE_LOG'],'body':JSON[_0xf6eba8(0x180)](_0x2cc5f9)};post(_0x535eb5,_0x3b9340,_0xf3a4e7,_0x185a5d)[_0xf6eba8(0x168)](_0x3f183d=>{_0x1d1a6c['log']('End\x20Update\x20Log\x20is\x20Success\x20=\x20'+_0x4f7357),_0x2a7a78(_0x3f183d);})[_0xf6eba8(0x187)](_0x2fb502=>{const _0xc3395d=_0xf6eba8;_0x1d1a6c[_0xc3395d(0x1a1)](_0xc3395d(0x166)+_0x4f7357),_0x23aaef(_0x2fb502);});}catch(_0x2f2a25){_0x23aaef(_0x2f2a25);}});}function callUpdateAttachmentInfo(_0x1fe386,_0x4f4edf,_0x5bc6a5,_0x4b211c,_0x316595,_0x263df1){return new Promise((_0x4c748d,_0x5055a1)=>{const _0x5eab48=a39_0x28b9;try{_0x5bc6a5=_0x5bc6a5&&_0x5bc6a5[_0x5eab48(0x19e)]?_0x5bc6a5[_0x5eab48(0x184)]('__','')+'/':'',_0x263df1[_0x5eab48(0x1a1)](_0x5eab48(0x172));const _0x23a716={'attachmentLogId':_0x4b211c,'attachmentBody':_0x5eab48(0x175)+_0x316595+'\x0a\x0aFull\x20Process:\x0a\x0a'+_0x263df1['logs'][_0x5eab48(0x16b)]('\x0a')},_0x15a578=_0x1fe386+_0x5eab48(0x160)+_0x5bc6a5+'unlocked-packages',_0x566b34={'methodType':constants[_0x5eab48(0x16e)],'body':JSON[_0x5eab48(0x180)](_0x23a716)};post(_0x15a578,_0x4f4edf,_0x5bc6a5,_0x566b34)[_0x5eab48(0x168)](_0x222c67=>{const _0x494915=_0x5eab48;_0x263df1[_0x494915(0x1a1)]('End\x20Update\x20Log'),_0x4c748d(_0x222c67);})[_0x5eab48(0x187)](_0xdc6c8d=>{const _0x307763=_0x5eab48;_0x263df1[_0x307763(0x1a1)](_0x307763(0x17c)),_0x5055a1(_0xdc6c8d);});}catch(_0x4a79a6){_0x5055a1(_0x4a79a6);}});}function callNextVlocityStep(_0x32b569,_0x4aba79,_0x4a234e,_0x270f83,_0x335f02,_0x1619d8,_0x45f5b2,_0x5c7ab3,_0x2312c8){return new Promise((_0x236c01,_0x5590dc)=>{const _0x3d1aaa=a39_0x28b9;try{_0x4a234e=_0x4a234e&&_0x4a234e[_0x3d1aaa(0x19e)]?_0x4a234e[_0x3d1aaa(0x184)]('__','')+'/':'',_0x2312c8['log'](_0x3d1aaa(0x16f));const _0x12291b={'pipelineId':_0x270f83,'pipelineNumber':_0x335f02,'isPass':_0x45f5b2,'branchId':_0x5c7ab3,'pipelineKey':_0x1619d8},_0x4180e3=_0x32b569+_0x3d1aaa(0x160)+_0x4a234e+_0x3d1aaa(0x182),_0x25d95d={'methodType':constants['METHOD_NEXT_VLOCITY_STEP'],'body':JSON['stringify'](_0x12291b)};post(_0x4180e3,_0x4aba79,_0x4a234e,_0x25d95d)[_0x3d1aaa(0x168)](_0x1639a6=>{const _0x44fb64=_0x3d1aaa;_0x2312c8[_0x44fb64(0x1a1)](_0x44fb64(0x1a0)),_0x236c01(_0x1639a6);})[_0x3d1aaa(0x187)](_0x417160=>{const _0x57ddf4=_0x3d1aaa;_0x2312c8['log'](_0x57ddf4(0x194)),_0x5590dc(_0x417160);});}catch(_0x10a93c){_0x5590dc(_0x10a93c);}});}function callComponentList(_0x561c20,_0x431e82,_0x190515,_0x1f4a19,_0x280e36,_0x3c7c2f,_0x47ae54=[]){return new Promise((_0x1bdbc6,_0xddc846)=>{const _0x4d4262=a39_0x28b9;try{_0x3c7c2f['log'](_0x4d4262(0x19f));const _0x16d9cb=_0x1f4a19?_0x1f4a19[_0x4d4262(0x184)]('__','')+'/':'',_0x46c9a1=_0x561c20+_0x4d4262(0x160)+_0x16d9cb+_0x4d4262(0x182),_0x559867={'methodType':constants[_0x4d4262(0x19b)],'body':JSON[_0x4d4262(0x180)](_0x190515)};post(_0x46c9a1,_0x431e82,_0x1f4a19,_0x559867)['then'](_0x2da3a4=>{const _0x2b71d2=_0x4d4262;let {data:_0x8f098a}=_0x2da3a4;_0x8f098a=JSON[_0x2b71d2(0x189)](_0x8f098a),_0x3c7c2f[_0x2b71d2(0x1a1)](_0x2b71d2(0x186)+Number[_0x2b71d2(0x1aa)](_0x47ae54[_0x2b71d2(0x19e)]/_0x280e36*0x64)[_0x2b71d2(0x17a)](0x2)+'%'),_0x47ae54[_0x2b71d2(0x196)](..._0x8f098a['recordList']),_0x8f098a[_0x2b71d2(0x178)]&&_0x8f098a['idList']['length']?callComponentList(_0x561c20,_0x431e82,_0x8f098a[_0x2b71d2(0x178)],_0x1f4a19,_0x280e36,_0x3c7c2f,_0x47ae54)[_0x2b71d2(0x168)](_0x3b6e86=>_0x1bdbc6(_0x3b6e86))[_0x2b71d2(0x187)](_0x40abfe=>{const _0x3b1d96=_0x2b71d2;_0x3c7c2f[_0x3b1d96(0x1a1)]('Error\x20Call\x20Component\x20List'),_0xddc846(_0x40abfe);}):(_0x3c7c2f[_0x2b71d2(0x1a1)](_0x2b71d2(0x16c)),_0x1bdbc6(_0x47ae54));})[_0x4d4262(0x187)](_0x51ddca=>{const _0x46fce7=_0x4d4262;_0x3c7c2f['log'](_0x46fce7(0x174)),_0xddc846(_0x51ddca);});}catch(_0x5c3a26){_0x3c7c2f[_0x4d4262(0x1a1)]('Error\x20Call\x20Component\x20List'),_0xddc846(_0x5c3a26);}});}function getAttachmentBody(_0x156939,_0x4f99bc,_0x4edae7,_0x4b1c48=!![]){return new Promise(_0x5b05bf=>{const _0x42835e=a39_0x28b9;try{const _0x2e59f9=_0x156939[_0x42835e(0x169)](_0x42835e(0x15e))['record'](_0x4f99bc)[_0x42835e(0x15d)]('Body'),_0x485b3d=[];_0x2e59f9['on'](_0x42835e(0x1a3),(_0x19c4ce,_0x1523a6)=>{const _0x3523d9=_0x42835e;_0x485b3d[_0x3523d9(0x196)](_0x19c4ce);}),_0x2e59f9['on']('end',()=>{_0x4b1c48?_0x5b05bf(_0x485b3d['join']('')):_0x5b05bf(Buffer['concat'](_0x485b3d));}),_0x2e59f9['on'](_0x42835e(0x15a),_0xe34b5f=>{const _0x440e9c=_0x42835e;_0x4edae7[_0x440e9c(0x1a1)](_0x440e9c(0x17f)+_0xe34b5f),_0x5b05bf('');});}catch(_0x4ac4f8){_0x4edae7['log'](_0x42835e(0x17f)+_0x4ac4f8),_0x5b05bf('');}});}function getTime(){const _0x1857ca=a39_0x1806e2,_0x72a81=new Date(),_0x55b434=[_0x72a81[_0x1857ca(0x167)](),_0x72a81[_0x1857ca(0x170)]()+0x1,_0x72a81[_0x1857ca(0x16a)](),_0x72a81[_0x1857ca(0x18f)](),_0x72a81[_0x1857ca(0x15b)](),_0x72a81[_0x1857ca(0x15c)]()];return _0x55b434[_0x1857ca(0x15f)](_0x22743f=>_0x22743f=_0x22743f[_0x1857ca(0x19c)]()[_0x1857ca(0x184)](/^([0-9])$/,_0x1857ca(0x177))),_0x55b434[0x2]+'-'+_0x55b434[0x1]+'-'+_0x55b434[0x0]+'\x20'+_0x55b434[0x3]+':'+_0x55b434[0x4]+':'+_0x55b434[0x5];}function callUpdateAttachmentLog(_0x47b8cb,_0x5167bd,_0xdc1a59,_0x58c162,_0x8790fa){return new Promise(_0x2a2786=>{const _0x15e36c=a39_0x28b9;try{_0x58c162['log'](_0x15e36c(0x1a4));const _0x1714f0=_0xdc1a59+'\x0a'+_0x58c162[_0x15e36c(0x162)][_0x15e36c(0x16b)]('\x0a');_0x58c162['logs']=[];const _0x20602f={'Id':_0x5167bd,'Body':Buffer[_0x15e36c(0x163)](_0x1714f0)['toString'](_0x15e36c(0x18b)),'ContentType':_0x15e36c(0x161)};_0x47b8cb[_0x15e36c(0x169)](_0x15e36c(0x15e))[_0x15e36c(0x179)](_0x20602f)[_0x15e36c(0x168)](()=>{const _0x17a1a4=_0x15e36c;_0x58c162['log'](_0x17a1a4(0x190)),_0x2a2786(_0x8790fa);})[_0x15e36c(0x187)](_0x1a4861=>{_0x58c162['log']('Error\x20Update\x20Attachment\x20Log\x20'+_0x1a4861),_0x2a2786(_0x8790fa);});}catch(_0x5d31f5){_0x58c162[_0x15e36c(0x1a1)](_0x15e36c(0x19d)+_0x5d31f5),_0x2a2786(_0x8790fa);}});}function updateAttachmentLog(_0x30392e,_0x3cd155,_0x231787,_0xc1252d,_0x44b8a0,_0x4a337e=![]){return new Promise(_0xfe0f4f=>{const _0x42684f=a39_0x28b9;try{_0xc1252d[_0x42684f(0x1a1)](_0x42684f(0x1a4)),Promise['resolve']()[_0x42684f(0x168)](()=>getAttachmentBody(_0x3cd155,_0x231787,_0xc1252d))[_0x42684f(0x168)](_0x222606=>{const _0x410192=_0x42684f;return _0x4a337e?storage[_0x410192(0x1a6)](_0x30392e,getTime(),_0xc1252d)[_0x410192(0x168)](_0x43e9a8=>{const _0x909731=_0x410192;try{const _0x1a990e=yaml[_0x909731(0x188)](_0x43e9a8);_0x1a990e['Errors'][_0x909731(0x19e)]&&(_0x44b8a0=!![]);}catch(_0x581b55){_0x43e9a8='',_0x44b8a0=!![];}const _0x2fbba4=_0x43e9a8+'\x0a'+_0x222606;return callUpdateAttachmentLog(_0x3cd155,_0x231787,_0x2fbba4,_0xc1252d,_0x44b8a0);}):callUpdateAttachmentLog(_0x3cd155,_0x231787,_0x222606,_0xc1252d,_0x44b8a0);})['then'](()=>_0xfe0f4f(_0x44b8a0))[_0x42684f(0x187)](()=>_0xfe0f4f(_0x44b8a0));}catch(_0x2e9d8f){_0xc1252d[_0x42684f(0x1a1)](_0x42684f(0x19d)+_0x2e9d8f),_0xfe0f4f(_0x44b8a0);}});}function callUpdateLog(_0x5dc217,_0x539f5e,_0x31f116,_0x269ac7,_0x428e60,_0x5bd7cf=![]){return new Promise((_0x4b0242,_0x37e5aa)=>{const _0x45b8d4=a39_0x28b9;try{_0x428e60[_0x45b8d4(0x1a1)](_0x45b8d4(0x183)+_0x5bd7cf+_0x45b8d4(0x164)+_0x269ac7);const _0x3ef59d=_0x269ac7&&!_0x5bd7cf?_0x45b8d4(0x171):_0x269ac7&&_0x5bd7cf?_0x45b8d4(0x18a):'Exception',_0xa8f41c={'Id':_0x539f5e,[_0x31f116+_0x45b8d4(0x19a)]:_0x3ef59d,[_0x31f116+_0x45b8d4(0x198)]:_0x5bd7cf,[_0x31f116+_0x45b8d4(0x199)]:_0x269ac7,[_0x31f116+_0x45b8d4(0x17e)]:!![]};_0x5dc217[_0x45b8d4(0x169)](_0x31f116+_0x45b8d4(0x1a2))[_0x45b8d4(0x179)](_0xa8f41c)[_0x45b8d4(0x168)](()=>{const _0x4214d2=_0x45b8d4;_0x428e60[_0x4214d2(0x1a1)]('End\x20Update\x20Metadata\x20Log'),_0x4b0242(_0xa8f41c[_0x31f116+'Is_Error__c']);})['catch'](_0x5b2fc8=>{const _0x47d64f=_0x45b8d4;_0x428e60['log'](_0x47d64f(0x159)+_0x5b2fc8),_0x37e5aa(_0x5b2fc8);});}catch(_0x211ccf){_0x428e60['log']('Error\x20Update\x20Metadata\x20Log\x20'+_0x211ccf),_0x37e5aa(_0x211ccf);}});}function a39_0x94d7(){const _0x1a98ca=['Error\x20Update\x20Log\x20is\x20Success\x20=\x20','getDate','then','sobject','getFullYear','join','End\x20Call\x20Component\x20List','post','METHOD_UPDATE_ATTACHMENT_LOG','Start\x20Next\x20Vlocity\x20Step','getMonth','Completed','Start\x20Update\x20Log','2304872UNuJBh','Error\x20Call\x20Component\x20List','Vlocity\x20Log\x20File:\x0a\x0a','request','0$1','idList','update','toFixed','809535dMgaOs','Error\x20Update\x20Log','808WduJTB','Job_Completed__c','Error\x20Get\x20Attachment\x20Body\x20','stringify','196815RjgIeq','unlocked-packages','Start\x20Update\x20Metadata\x20Log\x20isError\x20','replace','10136917EtOGVK','Retrieved:\x20','catch','load','parse','Partial\x20Completed','base64','3181712EYpkuG','js-yaml','message','getHours','End\x20Update\x20Attachment\x20Log','Errors','6qaStkm','response','Error\x20Next\x20Vlocity\x20Step','Full\x20Process:\x0a\x0a','push','OAuth\x20','Is_Error__c','Succeed__c','Status__c','METHOD_TYPE_GET_ATTACHMENTS','toString','Error\x20Update\x20Attachment\x20Log\x20','length','Start\x20Call\x20Component\x20List','End\x20Next\x20Vlocity\x20Step','log','Metadata_Log__c','data','Start\x20Update\x20Attachment\x20Log','string','readLogFile','application/json','10964628cqJVnu','exports','parseFloat','Error\x20Update\x20Metadata\x20Log\x20','error','getMinutes','getSeconds','blob','Attachment','forEach','/services/apexrest/','text/plain','logs','from','\x20isSuccess\x20','177183SJdflb'];a39_0x94d7=function(){return _0x1a98ca;};return a39_0x94d7();}module[a39_0x1806e2(0x1a9)]={'getTime':getTime,'post':post,'callUpdateInfo':callUpdateInfo,'callNextVlocityStep':callNextVlocityStep,'callComponentList':callComponentList,'updateAttachmentLog':updateAttachmentLog,'getAttachmentBody':getAttachmentBody,'callUpdateAttachmentLog':callUpdateAttachmentLog,'callUpdateLog':callUpdateLog};