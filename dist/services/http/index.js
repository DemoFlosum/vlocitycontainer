const a47_0x3aa4e8=a47_0x4d9e;(function(_0x283308,_0x55ef9f){const _0x15850e=a47_0x4d9e,_0x5e0357=_0x283308();while(!![]){try{const _0x2b631e=parseInt(_0x15850e(0xf0))/0x1*(-parseInt(_0x15850e(0xc4))/0x2)+parseInt(_0x15850e(0xe4))/0x3*(-parseInt(_0x15850e(0xd5))/0x4)+parseInt(_0x15850e(0xf4))/0x5+-parseInt(_0x15850e(0xf3))/0x6+-parseInt(_0x15850e(0xde))/0x7+parseInt(_0x15850e(0xdd))/0x8*(parseInt(_0x15850e(0xfb))/0x9)+parseInt(_0x15850e(0xc9))/0xa;if(_0x2b631e===_0x55ef9f)break;else _0x5e0357['push'](_0x5e0357['shift']());}catch(_0xcf3ebd){_0x5e0357['push'](_0x5e0357['shift']());}}}(a47_0x13e4,0x33712));function a47_0x4d9e(_0x3e616e,_0x1e6a65){const _0x13e4a4=a47_0x13e4();return a47_0x4d9e=function(_0x4d9e04,_0x35d124){_0x4d9e04=_0x4d9e04-0xb5;let _0x54768a=_0x13e4a4[_0x4d9e04];return _0x54768a;},a47_0x4d9e(_0x3e616e,_0x1e6a65);}const axios=require('axios'),yaml=require(a47_0x3aa4e8(0xf2)),constants=require(a47_0x3aa4e8(0xf1)),storage=require(a47_0x3aa4e8(0xfc));function post(_0x14d401,_0x4a3306,_0x50c6c7,_0x115a57){return new Promise((_0x2b1299,_0x51defd)=>{const _0x464297=a47_0x4d9e;try{const _0x2b2fb0={'Authorization':_0x464297(0xe8)+_0x4a3306,'Content-Type':_0x464297(0xf5)};axios[_0x464297(0xeb)](_0x14d401,_0x115a57,{'headers':_0x2b2fb0})[_0x464297(0xd0)](_0x4e80a9=>{_0x2b1299(_0x4e80a9);})[_0x464297(0xf8)](_0x42236f=>{const _0x5eb203=_0x464297;if(_0x42236f&&_0x42236f[_0x5eb203(0xc2)]&&_0x42236f[_0x5eb203(0xc2)][_0x5eb203(0xb7)])typeof _0x42236f[_0x5eb203(0xc2)][_0x5eb203(0xb7)]!==_0x5eb203(0x105)?_0x51defd(JSON[_0x5eb203(0xee)](_0x42236f['response'][_0x5eb203(0xb7)])):_0x51defd(_0x42236f['response'][_0x5eb203(0xb7)]);else _0x42236f['request']?_0x51defd(_0x42236f[_0x5eb203(0xce)]):_0x51defd(_0x42236f[_0x5eb203(0xbc)]);});}catch(_0x3c7df3){_0x51defd(_0x3c7df3);}});}function callUpdateInfo(_0x2289ad,_0x11f168,_0x15ed5e,_0x2c1ff0,_0x10d7e5,_0x2fbc06,_0x384a85,_0x50c4e6,_0x5435df=![]){return new Promise((_0x58ffe2,_0x2e8493)=>{const _0x4430f3=a47_0x4d9e;try{_0x2c1ff0=_0x2c1ff0&&_0x2c1ff0[_0x4430f3(0xda)]?_0x2c1ff0['replace']('__','')+'/':'';try{const _0x4f26e3=yaml['load'](_0x2fbc06);_0x4f26e3[_0x4430f3(0xca)]&&(_0x5435df=_0x4f26e3['Errors'][_0x4430f3(0xda)]>0x0);}catch(_0x30139b){}_0x50c4e6[_0x4430f3(0xcc)](_0x4430f3(0xd7)+_0x384a85);const _0x4b80ba={'logId':_0x15ed5e,'attachmentLogId':_0x10d7e5,'isJobCompleted':!![],'status':_0x4430f3(0xd2),'isSuccess':_0x384a85,'isError':_0x5435df,'attachmentBody':_0x2fbc06+_0x4430f3(0x107)+_0x50c4e6['logs'][_0x4430f3(0xbe)]('\x0a')},_0x269788=_0x2289ad+_0x4430f3(0xed)+_0x2c1ff0+'unlocked-packages',_0x308285={'methodType':constants[_0x4430f3(0xe2)],'body':JSON[_0x4430f3(0xee)](_0x4b80ba)};post(_0x269788,_0x11f168,_0x2c1ff0,_0x308285)[_0x4430f3(0xd0)](_0x5eefa6=>{const _0x18a1fb=_0x4430f3;_0x50c4e6[_0x18a1fb(0xcc)](_0x18a1fb(0xcf)+_0x384a85),_0x58ffe2(_0x5eefa6);})[_0x4430f3(0xf8)](_0xd4d145=>{const _0x5a3526=_0x4430f3;_0x50c4e6[_0x5a3526(0xcc)]('Error\x20Update\x20Log\x20is\x20Success\x20=\x20'+_0x384a85),_0x2e8493(_0xd4d145);});}catch(_0xb1a112){_0x2e8493(_0xb1a112);}});}function callUpdateAttachmentInfo(_0x5edf06,_0x407cc0,_0x562c37,_0x560462,_0x36c6ea,_0x15f406){return new Promise((_0x50fdf3,_0x1eb812)=>{const _0x526567=a47_0x4d9e;try{_0x562c37=_0x562c37&&_0x562c37['length']?_0x562c37[_0x526567(0xe5)]('__','')+'/':'',_0x15f406[_0x526567(0xcc)](_0x526567(0x101));const _0x479984={'attachmentLogId':_0x560462,'attachmentBody':_0x526567(0xc3)+_0x36c6ea+_0x526567(0x102)+_0x15f406['logs'][_0x526567(0xbe)]('\x0a')},_0x4b5241=_0x5edf06+'/services/apexrest/'+_0x562c37+'unlocked-packages',_0x1ce602={'methodType':constants[_0x526567(0x100)],'body':JSON[_0x526567(0xee)](_0x479984)};post(_0x4b5241,_0x407cc0,_0x562c37,_0x1ce602)['then'](_0x6b2f71=>{const _0x40b04c=_0x526567;_0x15f406[_0x40b04c(0xcc)]('End\x20Update\x20Log'),_0x50fdf3(_0x6b2f71);})[_0x526567(0xf8)](_0x2c49f3=>{const _0x2a0de2=_0x526567;_0x15f406[_0x2a0de2(0xcc)](_0x2a0de2(0xb9)),_0x1eb812(_0x2c49f3);});}catch(_0x553e51){_0x1eb812(_0x553e51);}});}function callNextVlocityStep(_0x4dc2f6,_0x26d53c,_0x5e7b1c,_0xc69e5,_0x4f79b0,_0x308865,_0x47627a,_0x48e7db,_0x3e4a11){return new Promise((_0x4eb2c3,_0x2f9e7f)=>{const _0x24f80d=a47_0x4d9e;try{_0x5e7b1c=_0x5e7b1c&&_0x5e7b1c[_0x24f80d(0xda)]?_0x5e7b1c[_0x24f80d(0xe5)]('__','')+'/':'',_0x3e4a11[_0x24f80d(0xcc)]('Start\x20Next\x20Vlocity\x20Step');const _0x5ec732={'pipelineId':_0xc69e5,'pipelineNumber':_0x4f79b0,'isPass':_0x47627a,'branchId':_0x48e7db,'pipelineKey':_0x308865},_0x4108df=_0x4dc2f6+_0x24f80d(0xed)+_0x5e7b1c+_0x24f80d(0x104),_0x6d76b8={'methodType':constants[_0x24f80d(0xb5)],'body':JSON[_0x24f80d(0xee)](_0x5ec732)};post(_0x4108df,_0x26d53c,_0x5e7b1c,_0x6d76b8)[_0x24f80d(0xd0)](_0x4d76d7=>{const _0x1ea9e9=_0x24f80d;_0x3e4a11[_0x1ea9e9(0xcc)](_0x1ea9e9(0xdc)),_0x4eb2c3(_0x4d76d7);})['catch'](_0x2de600=>{const _0x1fc51c=_0x24f80d;_0x3e4a11[_0x1fc51c(0xcc)](_0x1fc51c(0xcd)),_0x2f9e7f(_0x2de600);});}catch(_0x1af007){_0x2f9e7f(_0x1af007);}});}function a47_0x13e4(){const _0x443b7c=['Start\x20Update\x20Log','\x0a\x0aFull\x20Process:\x0a\x0a','toFixed','unlocked-packages','string','toString','Full\x20Process:\x0a\x0a','METHOD_NEXT_VLOCITY_STEP','blob','data','Partial\x20Completed','Error\x20Update\x20Log','\x20isSuccess\x20','METHOD_TYPE_GET_ATTACHMENTS','message','Error\x20Call\x20Component\x20List','join','update','base64','Status__c','response','Vlocity\x20Log\x20File:\x0a\x0a','19928CSsGey','End\x20Call\x20Component\x20List','Error\x20Update\x20Metadata\x20Log\x20','concat','logs','9606600ZZYfdK','Errors','getFullYear','log','Error\x20Next\x20Vlocity\x20Step','request','End\x20Update\x20Log\x20is\x20Success\x20=\x20','then','forEach','Completed','Error\x20Update\x20Attachment\x20Log\x20','Exception','3188CJxWzL','getMonth','Start\x20Update\x20Log\x20is\x20Success\x20=\x20','End\x20Update\x20Attachment\x20Log','text/plain','length','idList','End\x20Next\x20Vlocity\x20Step','8rzulJd','1849064cTEjBM','End\x20Update\x20Metadata\x20Log','getMinutes','record','METHOD_UPDATE_LOG','error','357upibjn','replace','sobject','recordList','OAuth\x20','Start\x20Update\x20Attachment\x20Log','0$1','post','from','/services/apexrest/','stringify','Attachment','36iapztR','../../constants','js-yaml','2139282lFNukI','222625ajDTwY','application/json','Retrieved:\x20','parse','catch','push','load','2517903RKUxgX','../storage','Error\x20Get\x20Attachment\x20Body\x20','Start\x20Update\x20Metadata\x20Log\x20isError\x20','getHours','METHOD_UPDATE_ATTACHMENT_LOG'];a47_0x13e4=function(){return _0x443b7c;};return a47_0x13e4();}function callComponentList(_0xcec50f,_0xae93ca,_0x50279d,_0x53f490,_0x54c15e,_0x388670,_0xd4544b=[]){return new Promise((_0x8e62e2,_0x412309)=>{const _0x3907e5=a47_0x4d9e;try{_0x388670[_0x3907e5(0xcc)]('Start\x20Call\x20Component\x20List');const _0x232d96=_0x53f490?_0x53f490[_0x3907e5(0xe5)]('__','')+'/':'',_0x365572=_0xcec50f+'/services/apexrest/'+_0x232d96+_0x3907e5(0x104),_0x4340b1={'methodType':constants[_0x3907e5(0xbb)],'body':JSON[_0x3907e5(0xee)](_0x50279d)};post(_0x365572,_0xae93ca,_0x53f490,_0x4340b1)['then'](_0x1207fa=>{const _0x4a0b69=_0x3907e5;let {data:_0x28ece8}=_0x1207fa;_0x28ece8=JSON[_0x4a0b69(0xf7)](_0x28ece8),_0x388670[_0x4a0b69(0xcc)](_0x4a0b69(0xf6)+Number['parseFloat'](_0xd4544b[_0x4a0b69(0xda)]/_0x54c15e*0x64)[_0x4a0b69(0x103)](0x2)+'%'),_0xd4544b[_0x4a0b69(0xf9)](..._0x28ece8[_0x4a0b69(0xe7)]),_0x28ece8['idList']&&_0x28ece8[_0x4a0b69(0xdb)][_0x4a0b69(0xda)]?callComponentList(_0xcec50f,_0xae93ca,_0x28ece8['idList'],_0x53f490,_0x54c15e,_0x388670,_0xd4544b)['then'](_0x300f59=>_0x8e62e2(_0x300f59))[_0x4a0b69(0xf8)](_0x2556c8=>{const _0xb3795a=_0x4a0b69;_0x388670[_0xb3795a(0xcc)](_0xb3795a(0xbd)),_0x412309(_0x2556c8);}):(_0x388670[_0x4a0b69(0xcc)](_0x4a0b69(0xc5)),_0x8e62e2(_0xd4544b));})[_0x3907e5(0xf8)](_0x41883e=>{const _0x4a7443=_0x3907e5;_0x388670['log'](_0x4a7443(0xbd)),_0x412309(_0x41883e);});}catch(_0x4ec2ef){_0x388670[_0x3907e5(0xcc)](_0x3907e5(0xbd)),_0x412309(_0x4ec2ef);}});}function getAttachmentBody(_0x233324,_0x31b28b,_0x4b6787,_0x1c4896=!![]){return new Promise(_0x2c5b3b=>{const _0x673a0e=a47_0x4d9e;try{const _0x595769=_0x233324[_0x673a0e(0xe6)]('Attachment')[_0x673a0e(0xe1)](_0x31b28b)[_0x673a0e(0xb6)]('Body'),_0x1c249a=[];_0x595769['on']('data',(_0x111c29,_0x5331b4)=>{const _0x4e1421=_0x673a0e;_0x1c249a[_0x4e1421(0xf9)](_0x111c29);}),_0x595769['on']('end',()=>{const _0x391359=_0x673a0e;_0x1c4896?_0x2c5b3b(_0x1c249a['join']('')):_0x2c5b3b(Buffer[_0x391359(0xc7)](_0x1c249a));}),_0x595769['on'](_0x673a0e(0xe3),_0x2ddf88=>{const _0x4c1d3e=_0x673a0e;_0x4b6787[_0x4c1d3e(0xcc)](_0x4c1d3e(0xfd)+_0x2ddf88),_0x2c5b3b('');});}catch(_0x289e05){_0x4b6787[_0x673a0e(0xcc)](_0x673a0e(0xfd)+_0x289e05),_0x2c5b3b('');}});}function getTime(){const _0x4b7be6=a47_0x3aa4e8,_0x1fbd8d=new Date(),_0x85abd5=[_0x1fbd8d['getDate'](),_0x1fbd8d[_0x4b7be6(0xd6)]()+0x1,_0x1fbd8d[_0x4b7be6(0xcb)](),_0x1fbd8d[_0x4b7be6(0xff)](),_0x1fbd8d[_0x4b7be6(0xe0)](),_0x1fbd8d['getSeconds']()];return _0x85abd5[_0x4b7be6(0xd1)](_0x26afaa=>_0x26afaa=_0x26afaa['toString']()[_0x4b7be6(0xe5)](/^([0-9])$/,_0x4b7be6(0xea))),_0x85abd5[0x2]+'-'+_0x85abd5[0x1]+'-'+_0x85abd5[0x0]+'\x20'+_0x85abd5[0x3]+':'+_0x85abd5[0x4]+':'+_0x85abd5[0x5];}function callUpdateAttachmentLog(_0x285cfb,_0x247151,_0x415630,_0x50d960,_0x49cde9){return new Promise(_0x4b5f68=>{const _0x3ce231=a47_0x4d9e;try{_0x50d960['log'](_0x3ce231(0xe9));const _0x351c22=_0x415630+'\x0a'+_0x50d960[_0x3ce231(0xc8)]['join']('\x0a');_0x50d960['logs']=[];const _0x572e54={'Id':_0x247151,'Body':Buffer[_0x3ce231(0xec)](_0x351c22)[_0x3ce231(0x106)](_0x3ce231(0xc0)),'ContentType':_0x3ce231(0xd9)};_0x285cfb[_0x3ce231(0xe6)](_0x3ce231(0xef))[_0x3ce231(0xbf)](_0x572e54)['then'](()=>{const _0x1252eb=_0x3ce231;_0x50d960[_0x1252eb(0xcc)](_0x1252eb(0xd8)),_0x4b5f68(_0x49cde9);})['catch'](_0x49d243=>{const _0x67950d=_0x3ce231;_0x50d960[_0x67950d(0xcc)](_0x67950d(0xd3)+_0x49d243),_0x4b5f68(_0x49cde9);});}catch(_0x4ac4d4){_0x50d960['log'](_0x3ce231(0xd3)+_0x4ac4d4),_0x4b5f68(_0x49cde9);}});}function updateAttachmentLog(_0x57f3df,_0x268cc9,_0x1fea63,_0x43a52c,_0x2fe718,_0x46e10c=![]){return new Promise(_0x5800a6=>{const _0x5cdb98=a47_0x4d9e;try{_0x43a52c['log']('Start\x20Update\x20Attachment\x20Log'),Promise['resolve']()['then'](()=>getAttachmentBody(_0x268cc9,_0x1fea63,_0x43a52c))[_0x5cdb98(0xd0)](_0x360129=>{const _0x35317b=_0x5cdb98;if(_0x46e10c)return storage['readLogFile'](_0x57f3df,getTime(),_0x43a52c)[_0x35317b(0xd0)](_0x4abd99=>{const _0x1f604c=_0x35317b;try{const _0x2b48d8=yaml[_0x1f604c(0xfa)](_0x4abd99);_0x2b48d8['Errors']['length']&&(_0x2fe718=!![]);}catch(_0x332e3b){_0x4abd99='',_0x2fe718=!![];}const _0x53e25d=_0x4abd99+'\x0a'+_0x360129;return callUpdateAttachmentLog(_0x268cc9,_0x1fea63,_0x53e25d,_0x43a52c,_0x2fe718);});return callUpdateAttachmentLog(_0x268cc9,_0x1fea63,_0x360129,_0x43a52c,_0x2fe718);})[_0x5cdb98(0xd0)](()=>_0x5800a6(_0x2fe718))[_0x5cdb98(0xf8)](()=>_0x5800a6(_0x2fe718));}catch(_0x4ad8cf){_0x43a52c[_0x5cdb98(0xcc)](_0x5cdb98(0xd3)+_0x4ad8cf),_0x5800a6(_0x2fe718);}});}function callUpdateLog(_0x164d20,_0x149335,_0x441bf4,_0x33796e,_0x437871,_0x277c16=![]){return new Promise((_0x2acdb0,_0x583532)=>{const _0x5ed109=a47_0x4d9e;try{_0x437871[_0x5ed109(0xcc)](_0x5ed109(0xfe)+_0x277c16+_0x5ed109(0xba)+_0x33796e);const _0x293265=_0x33796e&&!_0x277c16?_0x5ed109(0xd2):_0x33796e&&_0x277c16?_0x5ed109(0xb8):_0x5ed109(0xd4),_0x1faffd={'Id':_0x149335,[_0x441bf4+_0x5ed109(0xc1)]:_0x293265,[_0x441bf4+'Is_Error__c']:_0x277c16,[_0x441bf4+'Succeed__c']:_0x33796e,[_0x441bf4+'Job_Completed__c']:!![]};_0x164d20['sobject'](_0x441bf4+'Metadata_Log__c')[_0x5ed109(0xbf)](_0x1faffd)['then'](()=>{const _0x8083c5=_0x5ed109;_0x437871['log'](_0x8083c5(0xdf)),_0x2acdb0(_0x1faffd[_0x441bf4+'Is_Error__c']);})['catch'](_0x2ed0ef=>{const _0xd3f6fb=_0x5ed109;_0x437871[_0xd3f6fb(0xcc)](_0xd3f6fb(0xc6)+_0x2ed0ef),_0x583532(_0x2ed0ef);});}catch(_0x53cf1b){_0x437871['log'](_0x5ed109(0xc6)+_0x53cf1b),_0x583532(_0x53cf1b);}});}module['exports']={'getTime':getTime,'post':post,'callUpdateInfo':callUpdateInfo,'callNextVlocityStep':callNextVlocityStep,'callComponentList':callComponentList,'updateAttachmentLog':updateAttachmentLog,'getAttachmentBody':getAttachmentBody,'callUpdateAttachmentLog':callUpdateAttachmentLog,'callUpdateLog':callUpdateLog};