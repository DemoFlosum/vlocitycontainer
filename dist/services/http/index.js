const a47_0x480b36=a47_0x4bfc;(function(_0x12f07c,_0xf59fc3){const _0x9dc66=a47_0x4bfc,_0x275d5b=_0x12f07c();while(!![]){try{const _0x46de49=-parseInt(_0x9dc66(0x188))/0x1*(parseInt(_0x9dc66(0x19a))/0x2)+parseInt(_0x9dc66(0x17f))/0x3*(-parseInt(_0x9dc66(0x184))/0x4)+parseInt(_0x9dc66(0x1c0))/0x5+parseInt(_0x9dc66(0x1a3))/0x6*(-parseInt(_0x9dc66(0x1c2))/0x7)+parseInt(_0x9dc66(0x18e))/0x8*(parseInt(_0x9dc66(0x187))/0x9)+-parseInt(_0x9dc66(0x19c))/0xa*(-parseInt(_0x9dc66(0x176))/0xb)+parseInt(_0x9dc66(0x1c1))/0xc;if(_0x46de49===_0xf59fc3)break;else _0x275d5b['push'](_0x275d5b['shift']());}catch(_0x1d2310){_0x275d5b['push'](_0x275d5b['shift']());}}}(a47_0x5bac,0xb11a4));const axios=require(a47_0x480b36(0x1c4)),yaml=require(a47_0x480b36(0x1b3)),constants=require(a47_0x480b36(0x1b0)),storage=require(a47_0x480b36(0x17a));function post(_0x3dcf41,_0x382d50,_0x3aad87,_0x29edc9){return new Promise((_0x1e4781,_0x4061b5)=>{const _0xd64c12=a47_0x4bfc;try{const _0x5b034c={'Authorization':_0xd64c12(0x1a0)+_0x382d50,'Content-Type':_0xd64c12(0x179)};axios[_0xd64c12(0x193)](_0x3dcf41,_0x29edc9,{'headers':_0x5b034c})['then'](_0xe83317=>{_0x1e4781(_0xe83317);})[_0xd64c12(0x19e)](_0x4758a2=>{const _0x4c0cbc=_0xd64c12;if(_0x4758a2&&_0x4758a2[_0x4c0cbc(0x1b8)]&&_0x4758a2[_0x4c0cbc(0x1b8)][_0x4c0cbc(0x195)])typeof _0x4758a2[_0x4c0cbc(0x1b8)]['data']!=='string'?_0x4061b5(JSON[_0x4c0cbc(0x1c9)](_0x4758a2[_0x4c0cbc(0x1b8)][_0x4c0cbc(0x195)])):_0x4061b5(_0x4758a2[_0x4c0cbc(0x1b8)]['data']);else _0x4758a2['request']?_0x4061b5(_0x4758a2[_0x4c0cbc(0x177)]):_0x4061b5(_0x4758a2[_0x4c0cbc(0x183)]);});}catch(_0x16c7f0){_0x4061b5(_0x16c7f0);}});}function a47_0x4bfc(_0x1fbb06,_0x124dba){const _0x5bacdf=a47_0x5bac();return a47_0x4bfc=function(_0x4bfc1a,_0x72d17c){_0x4bfc1a=_0x4bfc1a-0x174;let _0x3903cf=_0x5bacdf[_0x4bfc1a];return _0x3903cf;},a47_0x4bfc(_0x1fbb06,_0x124dba);}function callUpdateInfo(_0x5ee529,_0x599674,_0x399418,_0xedef11,_0x4c484c,_0x29f094,_0x5a818f,_0x572cda,_0x16dd4e=![]){return new Promise((_0xd4fdc0,_0xfd38e9)=>{const _0x1b3c7a=a47_0x4bfc;try{_0xedef11=_0xedef11&&_0xedef11['length']?_0xedef11[_0x1b3c7a(0x1ae)]('__','')+'/':'';try{const _0x2ffe1b=yaml['load'](_0x29f094);_0x2ffe1b[_0x1b3c7a(0x1a7)]&&(_0x16dd4e=_0x2ffe1b[_0x1b3c7a(0x1a7)][_0x1b3c7a(0x17b)]>0x0);}catch(_0x25b063){}_0x572cda[_0x1b3c7a(0x18f)]('Start\x20Update\x20Log\x20is\x20Success\x20=\x20'+_0x5a818f);const _0x25abf8={'logId':_0x399418,'attachmentLogId':_0x4c484c,'isJobCompleted':!![],'status':_0x1b3c7a(0x1b7),'isSuccess':_0x5a818f,'isError':_0x16dd4e,'attachmentBody':_0x29f094+'Full\x20Process:\x0a\x0a'+_0x572cda['logs'][_0x1b3c7a(0x1a9)]('\x0a')},_0x4d3195=_0x5ee529+_0x1b3c7a(0x18c)+_0xedef11+_0x1b3c7a(0x1bc),_0x47fb8e={'methodType':constants[_0x1b3c7a(0x18d)],'body':JSON[_0x1b3c7a(0x1c9)](_0x25abf8)};post(_0x4d3195,_0x599674,_0xedef11,_0x47fb8e)[_0x1b3c7a(0x1b5)](_0x56f930=>{const _0xdaf990=_0x1b3c7a;_0x572cda[_0xdaf990(0x18f)](_0xdaf990(0x190)+_0x5a818f),_0xd4fdc0(_0x56f930);})['catch'](_0x35411b=>{const _0x8a9dda=_0x1b3c7a;_0x572cda['log'](_0x8a9dda(0x192)+_0x5a818f),_0xfd38e9(_0x35411b);});}catch(_0x4d199e){_0xfd38e9(_0x4d199e);}});}function callUpdateAttachmentInfo(_0x2d67a0,_0x3d7826,_0x226c5b,_0x137429,_0x3618ad,_0x3baffb){return new Promise((_0x2163c5,_0x52ddd8)=>{const _0x579b8a=a47_0x4bfc;try{_0x226c5b=_0x226c5b&&_0x226c5b['length']?_0x226c5b[_0x579b8a(0x1ae)]('__','')+'/':'',_0x3baffb[_0x579b8a(0x18f)](_0x579b8a(0x1a2));const _0xb108b6={'attachmentLogId':_0x137429,'attachmentBody':_0x579b8a(0x180)+_0x3618ad+_0x579b8a(0x1a8)+_0x3baffb[_0x579b8a(0x17d)][_0x579b8a(0x1a9)]('\x0a')},_0x1fa41f=_0x2d67a0+_0x579b8a(0x18c)+_0x226c5b+_0x579b8a(0x1bc),_0x3b2fdf={'methodType':constants['METHOD_UPDATE_ATTACHMENT_LOG'],'body':JSON[_0x579b8a(0x1c9)](_0xb108b6)};post(_0x1fa41f,_0x3d7826,_0x226c5b,_0x3b2fdf)[_0x579b8a(0x1b5)](_0x22e793=>{const _0x90627=_0x579b8a;_0x3baffb[_0x90627(0x18f)](_0x90627(0x1c8)),_0x2163c5(_0x22e793);})['catch'](_0x57437d=>{const _0x1df7bb=_0x579b8a;_0x3baffb['log'](_0x1df7bb(0x189)),_0x52ddd8(_0x57437d);});}catch(_0x33a2a7){_0x52ddd8(_0x33a2a7);}});}function callNextVlocityStep(_0x146b98,_0x177ad1,_0xbffa11,_0x4096ea,_0x382a87,_0x40c93d,_0x23d71e,_0x4af77b,_0x1580f2){return new Promise((_0x276fc5,_0x1e3e18)=>{const _0x243623=a47_0x4bfc;try{_0xbffa11=_0xbffa11&&_0xbffa11[_0x243623(0x17b)]?_0xbffa11[_0x243623(0x1ae)]('__','')+'/':'',_0x1580f2[_0x243623(0x18f)](_0x243623(0x196));const _0x5df7ef={'pipelineId':_0x4096ea,'pipelineNumber':_0x382a87,'isPass':_0x23d71e,'branchId':_0x4af77b,'pipelineKey':_0x40c93d},_0x19b216=_0x146b98+_0x243623(0x18c)+_0xbffa11+_0x243623(0x1bc),_0x381b5a={'methodType':constants[_0x243623(0x17c)],'body':JSON['stringify'](_0x5df7ef)};post(_0x19b216,_0x177ad1,_0xbffa11,_0x381b5a)['then'](_0x1eaab2=>{const _0x42a6b8=_0x243623;_0x1580f2[_0x42a6b8(0x18f)]('End\x20Next\x20Vlocity\x20Step'),_0x276fc5(_0x1eaab2);})[_0x243623(0x19e)](_0x163ee3=>{const _0x4780c6=_0x243623;_0x1580f2[_0x4780c6(0x18f)](_0x4780c6(0x19b)),_0x1e3e18(_0x163ee3);});}catch(_0x10c737){_0x1e3e18(_0x10c737);}});}function callComponentList(_0x517c45,_0x1b7c99,_0x44bd90,_0x2efcb9,_0x505b17,_0x25a27f,_0x6a9ae2=[]){return new Promise((_0x34e7e1,_0x48ed34)=>{const _0xa08e96=a47_0x4bfc;try{_0x25a27f[_0xa08e96(0x18f)](_0xa08e96(0x1a4));const _0x44809c=_0x2efcb9?_0x2efcb9[_0xa08e96(0x1ae)]('__','')+'/':'',_0x5e9b2b=_0x517c45+'/services/apexrest/'+_0x44809c+_0xa08e96(0x1bc),_0x39eccc={'methodType':constants[_0xa08e96(0x178)],'body':JSON[_0xa08e96(0x1c9)](_0x44bd90)};post(_0x5e9b2b,_0x1b7c99,_0x2efcb9,_0x39eccc)[_0xa08e96(0x1b5)](_0x3c6de7=>{const _0x49a48a=_0xa08e96;let {data:_0x23ef3c}=_0x3c6de7;_0x23ef3c=JSON[_0x49a48a(0x1ca)](_0x23ef3c),_0x25a27f[_0x49a48a(0x18f)]('Retrieved:\x20'+Number[_0x49a48a(0x1ac)](_0x6a9ae2['length']/_0x505b17*0x64)[_0x49a48a(0x1b2)](0x2)+'%'),_0x6a9ae2[_0x49a48a(0x174)](..._0x23ef3c['recordList']),_0x23ef3c['idList']&&_0x23ef3c[_0x49a48a(0x1c6)]['length']?callComponentList(_0x517c45,_0x1b7c99,_0x23ef3c[_0x49a48a(0x1c6)],_0x2efcb9,_0x505b17,_0x25a27f,_0x6a9ae2)[_0x49a48a(0x1b5)](_0xc0986e=>_0x34e7e1(_0xc0986e))['catch'](_0x358c40=>{const _0x4da274=_0x49a48a;_0x25a27f[_0x4da274(0x18f)](_0x4da274(0x182)),_0x48ed34(_0x358c40);}):(_0x25a27f[_0x49a48a(0x18f)](_0x49a48a(0x1be)),_0x34e7e1(_0x6a9ae2));})['catch'](_0x2a275c=>{const _0x22aef5=_0xa08e96;_0x25a27f[_0x22aef5(0x18f)](_0x22aef5(0x182)),_0x48ed34(_0x2a275c);});}catch(_0x4bc780){_0x25a27f[_0xa08e96(0x18f)](_0xa08e96(0x182)),_0x48ed34(_0x4bc780);}});}function getAttachmentBody(_0x54d2fb,_0xfe15bc,_0x4a354e,_0x520778=!![]){return new Promise(_0x4c96c3=>{const _0x3e64fe=a47_0x4bfc;try{const _0x156021=_0x54d2fb[_0x3e64fe(0x1a1)]('Attachment')[_0x3e64fe(0x1b9)](_0xfe15bc)[_0x3e64fe(0x1a5)]('Body'),_0x2d6d52=[];_0x156021['on']('data',(_0x10e84c,_0x125aeb)=>{const _0x97b592=_0x3e64fe;_0x2d6d52[_0x97b592(0x174)](_0x10e84c);}),_0x156021['on']('end',()=>{const _0x4e2109=_0x3e64fe;_0x520778?_0x4c96c3(_0x2d6d52['join']('')):_0x4c96c3(Buffer[_0x4e2109(0x1bf)](_0x2d6d52));}),_0x156021['on'](_0x3e64fe(0x1ab),_0x17a489=>{const _0x137155=_0x3e64fe;_0x4a354e['log'](_0x137155(0x1ba)+_0x17a489),_0x4c96c3('');});}catch(_0xc8994d){_0x4a354e[_0x3e64fe(0x18f)](_0x3e64fe(0x1ba)+_0xc8994d),_0x4c96c3('');}});}function getTime(){const _0x2d06c8=a47_0x480b36,_0x50fa6a=new Date(),_0x23a1c7=[_0x50fa6a['getDate'](),_0x50fa6a['getMonth']()+0x1,_0x50fa6a[_0x2d06c8(0x186)](),_0x50fa6a[_0x2d06c8(0x1ad)](),_0x50fa6a[_0x2d06c8(0x191)](),_0x50fa6a[_0x2d06c8(0x1c7)]()];return _0x23a1c7['forEach'](_0x183287=>_0x183287=_0x183287['toString']()[_0x2d06c8(0x1ae)](/^([0-9])$/,_0x2d06c8(0x19f))),_0x23a1c7[0x2]+'-'+_0x23a1c7[0x1]+'-'+_0x23a1c7[0x0]+'\x20'+_0x23a1c7[0x3]+':'+_0x23a1c7[0x4]+':'+_0x23a1c7[0x5];}function callUpdateAttachmentLog(_0x363e92,_0x19709c,_0x499e4f,_0x40b8f3,_0x25487f){return new Promise(_0x21bd94=>{const _0x487211=a47_0x4bfc;try{_0x40b8f3[_0x487211(0x18f)](_0x487211(0x1a6));const _0x52b623=_0x499e4f+'\x0a'+_0x40b8f3['logs'][_0x487211(0x1a9)]('\x0a');_0x40b8f3['logs']=[];const _0x103d8c={'Id':_0x19709c,'Body':Buffer[_0x487211(0x181)](_0x52b623)[_0x487211(0x1b1)]('base64'),'ContentType':_0x487211(0x185)};_0x363e92[_0x487211(0x1a1)](_0x487211(0x1af))[_0x487211(0x197)](_0x103d8c)['then'](()=>{const _0x3f6b0b=_0x487211;_0x40b8f3[_0x3f6b0b(0x18f)](_0x3f6b0b(0x199)),_0x21bd94(_0x25487f);})['catch'](_0x24d267=>{const _0x45883f=_0x487211;_0x40b8f3[_0x45883f(0x18f)](_0x45883f(0x18b)+_0x24d267),_0x21bd94(_0x25487f);});}catch(_0x2d0882){_0x40b8f3[_0x487211(0x18f)](_0x487211(0x18b)+_0x2d0882),_0x21bd94(_0x25487f);}});}function a47_0x5bac(){const _0x205df7=['Start\x20Update\x20Attachment\x20Log','Errors','\x0a\x0aFull\x20Process:\x0a\x0a','join','Status__c','error','parseFloat','getHours','replace','Attachment','../../constants','toString','toFixed','js-yaml','Succeed__c','then','Exception','Completed','response','record','Error\x20Get\x20Attachment\x20Body\x20','Error\x20Update\x20Metadata\x20Log\x20','unlocked-packages','readLogFile','End\x20Call\x20Component\x20List','concat','1696085reAMpB','21337596tFaxLm','274631FCktVM','Metadata_Log__c','axios','Start\x20Update\x20Metadata\x20Log\x20isError\x20','idList','getSeconds','End\x20Update\x20Log','stringify','parse','push','End\x20Update\x20Metadata\x20Log','3047mAYrxz','request','METHOD_TYPE_GET_ATTACHMENTS','application/json','../storage','length','METHOD_NEXT_VLOCITY_STEP','logs','Partial\x20Completed','6feoagd','Vlocity\x20Log\x20File:\x0a\x0a','from','Error\x20Call\x20Component\x20List','message','550516vhltZK','text/plain','getFullYear','1814787FxDimu','17155Sclipf','Error\x20Update\x20Log','\x20isSuccess\x20','Error\x20Update\x20Attachment\x20Log\x20','/services/apexrest/','METHOD_UPDATE_LOG','48PSGdEU','log','End\x20Update\x20Log\x20is\x20Success\x20=\x20','getMinutes','Error\x20Update\x20Log\x20is\x20Success\x20=\x20','post','load','data','Start\x20Next\x20Vlocity\x20Step','update','exports','End\x20Update\x20Attachment\x20Log','146BnGkjI','Error\x20Next\x20Vlocity\x20Step','3710TAiwbT','Is_Error__c','catch','0$1','OAuth\x20','sobject','Start\x20Update\x20Log','180VozUzC','Start\x20Call\x20Component\x20List','blob'];a47_0x5bac=function(){return _0x205df7;};return a47_0x5bac();}function updateAttachmentLog(_0x3c956a,_0x2772d7,_0x3fe91d,_0x35d533,_0x30b90c,_0x487611=![]){return new Promise(_0x303b30=>{const _0x22a83c=a47_0x4bfc;try{_0x35d533[_0x22a83c(0x18f)](_0x22a83c(0x1a6)),Promise['resolve']()['then'](()=>getAttachmentBody(_0x2772d7,_0x3fe91d,_0x35d533))['then'](_0x481f81=>{const _0x39ab62=_0x22a83c;if(_0x487611)return storage[_0x39ab62(0x1bd)](_0x3c956a,getTime(),_0x35d533)[_0x39ab62(0x1b5)](_0x330314=>{const _0x2a8b97=_0x39ab62;try{const _0x382c66=yaml[_0x2a8b97(0x194)](_0x330314);_0x382c66[_0x2a8b97(0x1a7)][_0x2a8b97(0x17b)]&&(_0x30b90c=!![]);}catch(_0x324cc3){_0x330314='',_0x30b90c=!![];}const _0x2c9489=_0x330314+'\x0a'+_0x481f81;return callUpdateAttachmentLog(_0x2772d7,_0x3fe91d,_0x2c9489,_0x35d533,_0x30b90c);});return callUpdateAttachmentLog(_0x2772d7,_0x3fe91d,_0x481f81,_0x35d533,_0x30b90c);})[_0x22a83c(0x1b5)](()=>_0x303b30(_0x30b90c))['catch'](()=>_0x303b30(_0x30b90c));}catch(_0x4131a6){_0x35d533[_0x22a83c(0x18f)](_0x22a83c(0x18b)+_0x4131a6),_0x303b30(_0x30b90c);}});}function callUpdateLog(_0x249b66,_0x1399d8,_0xd8a209,_0x1053ad,_0x38a326,_0x56aace=![]){return new Promise((_0x1705e6,_0x101c5f)=>{const _0xa77f5c=a47_0x4bfc;try{_0x38a326[_0xa77f5c(0x18f)](_0xa77f5c(0x1c5)+_0x56aace+_0xa77f5c(0x18a)+_0x1053ad);const _0x546de3=_0x1053ad&&!_0x56aace?_0xa77f5c(0x1b7):_0x1053ad&&_0x56aace?_0xa77f5c(0x17e):_0xa77f5c(0x1b6),_0x5bf659={'Id':_0x1399d8,[_0xd8a209+_0xa77f5c(0x1aa)]:_0x546de3,[_0xd8a209+_0xa77f5c(0x19d)]:_0x56aace,[_0xd8a209+_0xa77f5c(0x1b4)]:_0x1053ad,[_0xd8a209+'Job_Completed__c']:!![]};_0x249b66[_0xa77f5c(0x1a1)](_0xd8a209+_0xa77f5c(0x1c3))['update'](_0x5bf659)[_0xa77f5c(0x1b5)](()=>{const _0x31fb49=_0xa77f5c;_0x38a326[_0x31fb49(0x18f)](_0x31fb49(0x175)),_0x1705e6(_0x5bf659[_0xd8a209+_0x31fb49(0x19d)]);})['catch'](_0x5ee5d3=>{const _0x1a3ab7=_0xa77f5c;_0x38a326[_0x1a3ab7(0x18f)](_0x1a3ab7(0x1bb)+_0x5ee5d3),_0x101c5f(_0x5ee5d3);});}catch(_0x490158){_0x38a326[_0xa77f5c(0x18f)](_0xa77f5c(0x1bb)+_0x490158),_0x101c5f(_0x490158);}});}module[a47_0x480b36(0x198)]={'getTime':getTime,'post':post,'callUpdateInfo':callUpdateInfo,'callNextVlocityStep':callNextVlocityStep,'callComponentList':callComponentList,'updateAttachmentLog':updateAttachmentLog,'getAttachmentBody':getAttachmentBody,'callUpdateAttachmentLog':callUpdateAttachmentLog,'callUpdateLog':callUpdateLog};