const a39_0x1487d2=a39_0x30d6;(function(_0xa43f09,_0x147629){const _0x30318f=a39_0x30d6,_0x9ea227=_0xa43f09();while(!![]){try{const _0x26b478=parseInt(_0x30318f(0xac))/0x1+-parseInt(_0x30318f(0x8c))/0x2+-parseInt(_0x30318f(0x8b))/0x3*(-parseInt(_0x30318f(0xae))/0x4)+parseInt(_0x30318f(0xd3))/0x5*(parseInt(_0x30318f(0x99))/0x6)+parseInt(_0x30318f(0xc3))/0x7+-parseInt(_0x30318f(0xc8))/0x8+parseInt(_0x30318f(0xb3))/0x9*(-parseInt(_0x30318f(0x94))/0xa);if(_0x26b478===_0x147629)break;else _0x9ea227['push'](_0x9ea227['shift']());}catch(_0x1de235){_0x9ea227['push'](_0x9ea227['shift']());}}}(a39_0x2207,0x3794c));const axios=require(a39_0x1487d2(0xb7)),yaml=require(a39_0x1487d2(0xcd)),constants=require(a39_0x1487d2(0xb1)),storage=require(a39_0x1487d2(0xd9));function post(_0x37cc6a,_0x3be41b,_0x29b54d,_0x4ee7b3){return new Promise((_0x1bff19,_0x8304cb)=>{const _0x36ffcc=a39_0x30d6;try{const _0x54e2b6={'Authorization':_0x36ffcc(0xbf)+_0x3be41b,'Content-Type':_0x36ffcc(0xaa)};axios[_0x36ffcc(0xc7)](_0x37cc6a,_0x4ee7b3,{'headers':_0x54e2b6})['then'](_0x548a18=>{_0x1bff19(_0x548a18);})[_0x36ffcc(0xad)](_0x4cb764=>{const _0x31af3b=_0x36ffcc;if(_0x4cb764&&_0x4cb764[_0x31af3b(0x8e)]&&_0x4cb764[_0x31af3b(0x8e)][_0x31af3b(0xb8)])typeof _0x4cb764[_0x31af3b(0x8e)][_0x31af3b(0xb8)]!==_0x31af3b(0xd8)?_0x8304cb(JSON[_0x31af3b(0x89)](_0x4cb764[_0x31af3b(0x8e)][_0x31af3b(0xb8)])):_0x8304cb(_0x4cb764[_0x31af3b(0x8e)]['data']);else _0x4cb764['request']?_0x8304cb(_0x4cb764['request']):_0x8304cb(_0x4cb764[_0x31af3b(0xb2)]);});}catch(_0x34d824){_0x8304cb(_0x34d824);}});}function a39_0x30d6(_0xcf01dd,_0x492f31){const _0x220770=a39_0x2207();return a39_0x30d6=function(_0x30d6a4,_0x8d50fa){_0x30d6a4=_0x30d6a4-0x85;let _0x2dea0f=_0x220770[_0x30d6a4];return _0x2dea0f;},a39_0x30d6(_0xcf01dd,_0x492f31);}function callUpdateInfo(_0x90d16e,_0x170bc3,_0x2b2499,_0x4d6b43,_0x8372a4,_0x440921,_0x12ffbd,_0x2c3c4f,_0x3f8614=![]){return new Promise((_0x60e9cd,_0x321872)=>{const _0x229538=a39_0x30d6;try{_0x4d6b43=_0x4d6b43&&_0x4d6b43[_0x229538(0x85)]?_0x4d6b43['replace']('__','')+'/':'';try{const _0x2e2e98=yaml[_0x229538(0xcc)](_0x440921);_0x2e2e98[_0x229538(0x88)]&&(_0x3f8614=_0x2e2e98['Errors'][_0x229538(0x85)]>0x0);}catch(_0x28842c){}_0x2c3c4f[_0x229538(0x93)]('Start\x20Update\x20Log\x20is\x20Success\x20=\x20'+_0x12ffbd);const _0x3f438f={'logId':_0x2b2499,'attachmentLogId':_0x8372a4,'isJobCompleted':!![],'status':'Completed','isSuccess':_0x12ffbd,'isError':_0x3f8614,'attachmentBody':_0x440921+'Full\x20Process:\x0a\x0a'+_0x2c3c4f[_0x229538(0x9b)][_0x229538(0x92)]('\x0a')},_0x54a4dc=_0x90d16e+'/services/apexrest/'+_0x4d6b43+_0x229538(0xca),_0x954291={'methodType':constants['METHOD_UPDATE_LOG'],'body':JSON[_0x229538(0x89)](_0x3f438f)};post(_0x54a4dc,_0x170bc3,_0x4d6b43,_0x954291)[_0x229538(0xd7)](_0x53c1e9=>{const _0xd1cc6b=_0x229538;_0x2c3c4f[_0xd1cc6b(0x93)]('End\x20Update\x20Log\x20is\x20Success\x20=\x20'+_0x12ffbd),_0x60e9cd(_0x53c1e9);})[_0x229538(0xad)](_0xe64819=>{const _0x3ba1de=_0x229538;_0x2c3c4f[_0x3ba1de(0x93)](_0x3ba1de(0x9e)+_0x12ffbd),_0x321872(_0xe64819);});}catch(_0xd544e0){_0x321872(_0xd544e0);}});}function a39_0x2207(){const _0x177ef6=['exports','\x0a\x0aFull\x20Process:\x0a\x0a','915887aptKzH','blob','getSeconds','Is_Error__c','post','1041088bOSosN','Start\x20Update\x20Metadata\x20Log\x20isError\x20','unlocked-packages','/services/apexrest/','load','js-yaml','recordList','Start\x20Update\x20Attachment\x20Log','resolve','replace','getFullYear','1334395yKgjBK','Error\x20Get\x20Attachment\x20Body\x20','Body','push','then','string','../../services/storage','Metadata_Log__c','length','\x20isSuccess\x20','toString','Errors','stringify','Attachment','169914YCWprM','508808XvMfAu','METHOD_NEXT_VLOCITY_STEP','response','getMinutes','toFixed','error','join','log','70iAFRvW','Retrieved:\x20','End\x20Next\x20Vlocity\x20Step','Error\x20Call\x20Component\x20List','update','6hOWKxF','METHOD_UPDATE_ATTACHMENT_LOG','logs','Status__c','End\x20Update\x20Log','Error\x20Update\x20Log\x20is\x20Success\x20=\x20','Start\x20Update\x20Log','concat','parse','idList','Error\x20Update\x20Attachment\x20Log\x20','getMonth','End\x20Call\x20Component\x20List','Succeed__c','forEach','Start\x20Call\x20Component\x20List','Vlocity\x20Log\x20File:\x0a\x0a','application/json','METHOD_TYPE_GET_ATTACHMENTS','47467endYKx','catch','28uhULZT','Job_Completed__c','End\x20Update\x20Attachment\x20Log','../../constants','message','295011iRAifs','readLogFile','getDate','0$1','axios','data','Start\x20Next\x20Vlocity\x20Step','end','Error\x20Update\x20Metadata\x20Log\x20','getHours','Exception','Error\x20Update\x20Log','OAuth\x20','Error\x20Next\x20Vlocity\x20Step'];a39_0x2207=function(){return _0x177ef6;};return a39_0x2207();}function callUpdateAttachmentInfo(_0x74dca3,_0x111c8f,_0x29dc7f,_0x167435,_0x1bd4e8,_0x2e8855){return new Promise((_0x549f49,_0xf9ed37)=>{const _0x5d9fc7=a39_0x30d6;try{_0x29dc7f=_0x29dc7f&&_0x29dc7f['length']?_0x29dc7f[_0x5d9fc7(0xd1)]('__','')+'/':'',_0x2e8855[_0x5d9fc7(0x93)](_0x5d9fc7(0x9f));const _0x43d182={'attachmentLogId':_0x167435,'attachmentBody':_0x5d9fc7(0xa9)+_0x1bd4e8+_0x5d9fc7(0xc2)+_0x2e8855['logs']['join']('\x0a')},_0x5ca9fd=_0x74dca3+_0x5d9fc7(0xcb)+_0x29dc7f+'unlocked-packages',_0x1fbc54={'methodType':constants[_0x5d9fc7(0x9a)],'body':JSON[_0x5d9fc7(0x89)](_0x43d182)};post(_0x5ca9fd,_0x111c8f,_0x29dc7f,_0x1fbc54)[_0x5d9fc7(0xd7)](_0xe50e45=>{const _0x49375d=_0x5d9fc7;_0x2e8855[_0x49375d(0x93)](_0x49375d(0x9d)),_0x549f49(_0xe50e45);})[_0x5d9fc7(0xad)](_0x87438c=>{const _0x575584=_0x5d9fc7;_0x2e8855[_0x575584(0x93)](_0x575584(0xbe)),_0xf9ed37(_0x87438c);});}catch(_0x5b66fb){_0xf9ed37(_0x5b66fb);}});}function callNextVlocityStep(_0x41ded4,_0x55b053,_0x6b76b7,_0x43a7de,_0x5eea7e,_0xbdd8c8,_0x2b4c8f,_0x202852,_0x2937f0){return new Promise((_0x162ace,_0x3b78fd)=>{const _0x9ba031=a39_0x30d6;try{_0x6b76b7=_0x6b76b7&&_0x6b76b7[_0x9ba031(0x85)]?_0x6b76b7[_0x9ba031(0xd1)]('__','')+'/':'',_0x2937f0[_0x9ba031(0x93)](_0x9ba031(0xb9));const _0x2a063d={'pipelineId':_0x43a7de,'pipelineNumber':_0x5eea7e,'isPass':_0x2b4c8f,'branchId':_0x202852,'pipelineKey':_0xbdd8c8},_0x439c46=_0x41ded4+_0x9ba031(0xcb)+_0x6b76b7+'unlocked-packages',_0x2ce409={'methodType':constants[_0x9ba031(0x8d)],'body':JSON[_0x9ba031(0x89)](_0x2a063d)};post(_0x439c46,_0x55b053,_0x6b76b7,_0x2ce409)[_0x9ba031(0xd7)](_0x4be2e1=>{const _0x46ba2e=_0x9ba031;_0x2937f0['log'](_0x46ba2e(0x96)),_0x162ace(_0x4be2e1);})[_0x9ba031(0xad)](_0x4cb70e=>{const _0x3a41d2=_0x9ba031;_0x2937f0[_0x3a41d2(0x93)](_0x3a41d2(0xc0)),_0x3b78fd(_0x4cb70e);});}catch(_0x36ace6){_0x3b78fd(_0x36ace6);}});}function callComponentList(_0x48d960,_0x694218,_0x28f60a,_0x364d16,_0x2978a0,_0x23b3b4,_0x47672b=[]){return new Promise((_0xb92760,_0x3472cb)=>{const _0x5bddd9=a39_0x30d6;try{_0x23b3b4[_0x5bddd9(0x93)](_0x5bddd9(0xa8));const _0x170c07=_0x364d16?_0x364d16[_0x5bddd9(0xd1)]('__','')+'/':'',_0x3f4073=_0x48d960+_0x5bddd9(0xcb)+_0x170c07+'unlocked-packages',_0x250c63={'methodType':constants[_0x5bddd9(0xab)],'body':JSON[_0x5bddd9(0x89)](_0x28f60a)};post(_0x3f4073,_0x694218,_0x364d16,_0x250c63)[_0x5bddd9(0xd7)](_0x5bdf54=>{const _0x838079=_0x5bddd9;let {data:_0x190dbc}=_0x5bdf54;_0x190dbc=JSON[_0x838079(0xa1)](_0x190dbc),_0x23b3b4[_0x838079(0x93)](_0x838079(0x95)+Number['parseFloat'](_0x47672b[_0x838079(0x85)]/_0x2978a0*0x64)[_0x838079(0x90)](0x2)+'%'),_0x47672b[_0x838079(0xd6)](..._0x190dbc[_0x838079(0xce)]),_0x190dbc[_0x838079(0xa2)]&&_0x190dbc[_0x838079(0xa2)][_0x838079(0x85)]?callComponentList(_0x48d960,_0x694218,_0x190dbc['idList'],_0x364d16,_0x2978a0,_0x23b3b4,_0x47672b)['then'](_0x35b33a=>_0xb92760(_0x35b33a))[_0x838079(0xad)](_0x59c946=>{const _0x1b05f4=_0x838079;_0x23b3b4[_0x1b05f4(0x93)](_0x1b05f4(0x97)),_0x3472cb(_0x59c946);}):(_0x23b3b4['log'](_0x838079(0xa5)),_0xb92760(_0x47672b));})['catch'](_0x26f75f=>{const _0x4abe64=_0x5bddd9;_0x23b3b4[_0x4abe64(0x93)]('Error\x20Call\x20Component\x20List'),_0x3472cb(_0x26f75f);});}catch(_0x236b45){_0x23b3b4[_0x5bddd9(0x93)](_0x5bddd9(0x97)),_0x3472cb(_0x236b45);}});}function getAttachmentBody(_0x438820,_0x45e00c,_0x4143f5,_0x990ae4=!![]){return new Promise(_0x5b3e47=>{const _0x46ef8b=a39_0x30d6;try{const _0x504188=_0x438820['sobject'](_0x46ef8b(0x8a))['record'](_0x45e00c)[_0x46ef8b(0xc4)](_0x46ef8b(0xd5)),_0x1e6d29=[];_0x504188['on'](_0x46ef8b(0xb8),(_0x9abe4d,_0x59097f)=>{const _0x18a6ca=_0x46ef8b;_0x1e6d29[_0x18a6ca(0xd6)](_0x9abe4d);}),_0x504188['on'](_0x46ef8b(0xba),()=>{const _0x5c657a=_0x46ef8b;_0x990ae4?_0x5b3e47(_0x1e6d29[_0x5c657a(0x92)]('')):_0x5b3e47(Buffer[_0x5c657a(0xa0)](_0x1e6d29));}),_0x504188['on'](_0x46ef8b(0x91),_0x473229=>{_0x4143f5['log']('Error\x20Get\x20Attachment\x20Body\x20'+_0x473229),_0x5b3e47('');});}catch(_0x50b016){_0x4143f5[_0x46ef8b(0x93)](_0x46ef8b(0xd4)+_0x50b016),_0x5b3e47('');}});}function getTime(){const _0x36e7c3=a39_0x1487d2,_0x38b330=new Date(),_0x545b06=[_0x38b330[_0x36e7c3(0xb5)](),_0x38b330[_0x36e7c3(0xa4)]()+0x1,_0x38b330[_0x36e7c3(0xd2)](),_0x38b330[_0x36e7c3(0xbc)](),_0x38b330[_0x36e7c3(0x8f)](),_0x38b330[_0x36e7c3(0xc5)]()];return _0x545b06[_0x36e7c3(0xa7)](_0x28f77d=>_0x28f77d=_0x28f77d[_0x36e7c3(0x87)]()[_0x36e7c3(0xd1)](/^([0-9])$/,_0x36e7c3(0xb6))),_0x545b06[0x2]+'-'+_0x545b06[0x1]+'-'+_0x545b06[0x0]+'\x20'+_0x545b06[0x3]+':'+_0x545b06[0x4]+':'+_0x545b06[0x5];}function callUpdateAttachmentLog(_0x43fb0a,_0x1040b7,_0x3f60e3,_0x140fb1,_0x3d1b8f){return new Promise(_0x28bc77=>{const _0xc8ff0f=a39_0x30d6;try{_0x140fb1[_0xc8ff0f(0x93)](_0xc8ff0f(0xcf));const _0x47b43c=_0x3f60e3+'\x0a'+_0x140fb1['logs']['join']('\x0a');_0x140fb1[_0xc8ff0f(0x9b)]=[];const _0x2b87bc={'Id':_0x1040b7,'Body':Buffer['from'](_0x47b43c)['toString']('base64'),'ContentType':'text/plain'};_0x43fb0a['sobject']('Attachment')[_0xc8ff0f(0x98)](_0x2b87bc)[_0xc8ff0f(0xd7)](()=>{const _0x2c359a=_0xc8ff0f;_0x140fb1[_0x2c359a(0x93)](_0x2c359a(0xb0)),_0x28bc77(_0x3d1b8f);})[_0xc8ff0f(0xad)](_0x59ba2f=>{const _0x3e548f=_0xc8ff0f;_0x140fb1[_0x3e548f(0x93)](_0x3e548f(0xa3)+_0x59ba2f),_0x28bc77(_0x3d1b8f);});}catch(_0x4d30d8){_0x140fb1[_0xc8ff0f(0x93)](_0xc8ff0f(0xa3)+_0x4d30d8),_0x28bc77(_0x3d1b8f);}});}function updateAttachmentLog(_0x3a2fcd,_0x4cda2b,_0x157473,_0x15043b,_0x4cfdaf,_0x1c4027=![]){return new Promise(_0x3eee12=>{const _0x3c4ae2=a39_0x30d6;try{_0x15043b[_0x3c4ae2(0x93)](_0x3c4ae2(0xcf)),Promise[_0x3c4ae2(0xd0)]()[_0x3c4ae2(0xd7)](()=>getAttachmentBody(_0x4cda2b,_0x157473,_0x15043b))[_0x3c4ae2(0xd7)](_0x397fda=>{const _0x374dc6=_0x3c4ae2;return _0x1c4027?storage[_0x374dc6(0xb4)](_0x3a2fcd,getTime(),_0x15043b)[_0x374dc6(0xd7)](_0x726c1d=>{const _0xc0f60=_0x374dc6;try{const _0xf8348e=yaml[_0xc0f60(0xcc)](_0x726c1d);_0xf8348e[_0xc0f60(0x88)][_0xc0f60(0x85)]&&(_0x4cfdaf=!![]);}catch(_0x41fe10){_0x726c1d='',_0x4cfdaf=!![];}const _0x35a1eb=_0x726c1d+'\x0a'+_0x397fda;return callUpdateAttachmentLog(_0x4cda2b,_0x157473,_0x35a1eb,_0x15043b,_0x4cfdaf);}):callUpdateAttachmentLog(_0x4cda2b,_0x157473,_0x397fda,_0x15043b,_0x4cfdaf);})[_0x3c4ae2(0xd7)](()=>_0x3eee12(_0x4cfdaf))['catch'](()=>_0x3eee12(_0x4cfdaf));}catch(_0x1936e1){_0x15043b[_0x3c4ae2(0x93)](_0x3c4ae2(0xa3)+_0x1936e1),_0x3eee12(_0x4cfdaf);}});}function callUpdateLog(_0x4f2499,_0x5a7ff9,_0x345cfb,_0x128134,_0x255a5b,_0x55bc76=![]){return new Promise((_0x2d0a6f,_0x7721cf)=>{const _0x2aaee1=a39_0x30d6;try{_0x255a5b['log'](_0x2aaee1(0xc9)+_0x55bc76+_0x2aaee1(0x86)+_0x128134);const _0x547096=_0x128134&&!_0x55bc76?'Completed':_0x128134&&_0x55bc76?'Partial\x20Completed':_0x2aaee1(0xbd),_0x60adb7={'Id':_0x5a7ff9,[_0x345cfb+_0x2aaee1(0x9c)]:_0x547096,[_0x345cfb+_0x2aaee1(0xc6)]:_0x55bc76,[_0x345cfb+_0x2aaee1(0xa6)]:_0x128134,[_0x345cfb+_0x2aaee1(0xaf)]:!![]};_0x4f2499['sobject'](_0x345cfb+_0x2aaee1(0xda))[_0x2aaee1(0x98)](_0x60adb7)[_0x2aaee1(0xd7)](()=>{const _0x2fc899=_0x2aaee1;_0x255a5b[_0x2fc899(0x93)]('End\x20Update\x20Metadata\x20Log'),_0x2d0a6f(_0x60adb7[_0x345cfb+'Is_Error__c']);})['catch'](_0x483c4e=>{const _0x10d660=_0x2aaee1;_0x255a5b[_0x10d660(0x93)](_0x10d660(0xbb)+_0x483c4e),_0x7721cf(_0x483c4e);});}catch(_0x66dc17){_0x255a5b['log']('Error\x20Update\x20Metadata\x20Log\x20'+_0x66dc17),_0x7721cf(_0x66dc17);}});}module[a39_0x1487d2(0xc1)]={'getTime':getTime,'post':post,'callUpdateInfo':callUpdateInfo,'callNextVlocityStep':callNextVlocityStep,'callComponentList':callComponentList,'updateAttachmentLog':updateAttachmentLog,'getAttachmentBody':getAttachmentBody,'callUpdateAttachmentLog':callUpdateAttachmentLog,'callUpdateLog':callUpdateLog};