const a46_0x4de2ff=a46_0x22c9;(function(_0x3aa8ab,_0x3b6485){const _0x5034f8=a46_0x22c9,_0x3ab207=_0x3aa8ab();while(!![]){try{const _0x57a3c2=-parseInt(_0x5034f8(0x85))/0x1*(-parseInt(_0x5034f8(0x91))/0x2)+-parseInt(_0x5034f8(0xd1))/0x3*(-parseInt(_0x5034f8(0x89))/0x4)+-parseInt(_0x5034f8(0x81))/0x5*(-parseInt(_0x5034f8(0x7f))/0x6)+parseInt(_0x5034f8(0xa8))/0x7*(-parseInt(_0x5034f8(0x98))/0x8)+-parseInt(_0x5034f8(0xd6))/0x9*(-parseInt(_0x5034f8(0x94))/0xa)+parseInt(_0x5034f8(0xad))/0xb+parseInt(_0x5034f8(0xbe))/0xc*(-parseInt(_0x5034f8(0x90))/0xd);if(_0x57a3c2===_0x3b6485)break;else _0x3ab207['push'](_0x3ab207['shift']());}catch(_0x5161a8){_0x3ab207['push'](_0x3ab207['shift']());}}}(a46_0x3239,0xa3e5a));const axios=require('axios'),yaml=require(a46_0x4de2ff(0x92)),constants=require(a46_0x4de2ff(0xcf)),storage=require(a46_0x4de2ff(0xa3));function a46_0x3239(){const _0xf8b585=['Is_Error__c','load','Errors','/services/apexrest/','toString','Start\x20Call\x20Component\x20List','end','stringify','parseFloat','application/json','sobject','0$1','Partial\x20Completed','Error\x20Update\x20Attachment\x20Log\x20','Completed','../../constants','Vlocity\x20Log\x20File:\x0a\x0a','17397dGMOLM','response','getMonth','replace','exports','55485EoRzxX','recordList','6WOdqWW','End\x20Update\x20Log','4195910BJPiOz','toFixed','error','METHOD_UPDATE_LOG','554ztoiey','getSeconds','getDate','forEach','124XaFpqx','Error\x20Call\x20Component\x20List','Full\x20Process:\x0a\x0a','Error\x20Next\x20Vlocity\x20Step','\x20isSuccess\x20','Job_Completed__c','idList','338xIEYhV','2566RiUbTa','js-yaml','record','1140JhysWc','getFullYear','text/plain','data','1453096YawlGF','Metadata_Log__c','push','unlocked-packages','End\x20Update\x20Attachment\x20Log','End\x20Call\x20Component\x20List','Error\x20Update\x20Log\x20is\x20Success\x20=\x20','Status__c','catch','base64','concat','../storage','Retrieved:\x20','\x0a\x0aFull\x20Process:\x0a\x0a','Error\x20Get\x20Attachment\x20Body\x20','End\x20Update\x20Metadata\x20Log','7BEASPy','log','join','blob','resolve','12123760EEvbxG','length','End\x20Update\x20Log\x20is\x20Success\x20=\x20','Attachment','request','METHOD_NEXT_VLOCITY_STEP','Succeed__c','then','Start\x20Update\x20Log','getMinutes','End\x20Next\x20Vlocity\x20Step','Start\x20Update\x20Log\x20is\x20Success\x20=\x20','Exception','Start\x20Update\x20Attachment\x20Log','update','logs','Error\x20Update\x20Metadata\x20Log\x20','1237728ELUaqY','OAuth\x20'];a46_0x3239=function(){return _0xf8b585;};return a46_0x3239();}function post(_0x2610d4,_0x367877,_0x27c9eb,_0x24462a){return new Promise((_0x334085,_0x55df54)=>{const _0x44d07d=a46_0x22c9;try{const _0x5ec9dc={'Authorization':_0x44d07d(0xbf)+_0x367877,'Content-Type':_0x44d07d(0xc9)};axios['post'](_0x2610d4,_0x24462a,{'headers':_0x5ec9dc})[_0x44d07d(0xb4)](_0x54e4e9=>{_0x334085(_0x54e4e9);})['catch'](_0x25bb48=>{const _0x177759=_0x44d07d;if(_0x25bb48&&_0x25bb48['response']&&_0x25bb48[_0x177759(0xd2)][_0x177759(0x97)])typeof _0x25bb48['response'][_0x177759(0x97)]!=='string'?_0x55df54(JSON[_0x177759(0xc7)](_0x25bb48[_0x177759(0xd2)][_0x177759(0x97)])):_0x55df54(_0x25bb48[_0x177759(0xd2)][_0x177759(0x97)]);else _0x25bb48['request']?_0x55df54(_0x25bb48[_0x177759(0xb1)]):_0x55df54(_0x25bb48['message']);});}catch(_0x48a880){_0x55df54(_0x48a880);}});}function callUpdateInfo(_0x26cefb,_0xb11971,_0x3ed7ed,_0x3b03a2,_0x4a8880,_0x553219,_0x44c240,_0x57b9a5,_0x352aad=![]){return new Promise((_0x7dc128,_0x50d663)=>{const _0x4eb15a=a46_0x22c9;try{_0x3b03a2=_0x3b03a2&&_0x3b03a2[_0x4eb15a(0xae)]?_0x3b03a2['replace']('__','')+'/':'';try{const _0x4f2d79=yaml[_0x4eb15a(0xc1)](_0x553219);_0x4f2d79['Errors']&&(_0x352aad=_0x4f2d79[_0x4eb15a(0xc2)][_0x4eb15a(0xae)]>0x0);}catch(_0x5cbd27){}_0x57b9a5['log'](_0x4eb15a(0xb8)+_0x44c240);const _0x224b9a={'logId':_0x3ed7ed,'attachmentLogId':_0x4a8880,'isJobCompleted':!![],'status':_0x4eb15a(0xce),'isSuccess':_0x44c240,'isError':_0x352aad,'attachmentBody':_0x553219+_0x4eb15a(0x8b)+_0x57b9a5[_0x4eb15a(0xbc)][_0x4eb15a(0xaa)]('\x0a')},_0xe00176=_0x26cefb+_0x4eb15a(0xc3)+_0x3b03a2+_0x4eb15a(0x9b),_0x4b784f={'methodType':constants[_0x4eb15a(0x84)],'body':JSON[_0x4eb15a(0xc7)](_0x224b9a)};post(_0xe00176,_0xb11971,_0x3b03a2,_0x4b784f)[_0x4eb15a(0xb4)](_0x1693ac=>{const _0x26b983=_0x4eb15a;_0x57b9a5['log'](_0x26b983(0xaf)+_0x44c240),_0x7dc128(_0x1693ac);})[_0x4eb15a(0xa0)](_0x5c1012=>{const _0x36a97b=_0x4eb15a;_0x57b9a5[_0x36a97b(0xa9)](_0x36a97b(0x9e)+_0x44c240),_0x50d663(_0x5c1012);});}catch(_0x283d1c){_0x50d663(_0x283d1c);}});}function a46_0x22c9(_0x325310,_0xdd3f2a){const _0x323900=a46_0x3239();return a46_0x22c9=function(_0x22c9b4,_0x385dad){_0x22c9b4=_0x22c9b4-0x7f;let _0x506734=_0x323900[_0x22c9b4];return _0x506734;},a46_0x22c9(_0x325310,_0xdd3f2a);}function callUpdateAttachmentInfo(_0x575cb0,_0xa719c9,_0x3bf8df,_0x2da8d7,_0x4bc680,_0x5ee3a7){return new Promise((_0x35c2b1,_0x51a9aa)=>{const _0x20e860=a46_0x22c9;try{_0x3bf8df=_0x3bf8df&&_0x3bf8df[_0x20e860(0xae)]?_0x3bf8df['replace']('__','')+'/':'',_0x5ee3a7[_0x20e860(0xa9)](_0x20e860(0xb5));const _0x181277={'attachmentLogId':_0x2da8d7,'attachmentBody':_0x20e860(0xd0)+_0x4bc680+_0x20e860(0xa5)+_0x5ee3a7[_0x20e860(0xbc)][_0x20e860(0xaa)]('\x0a')},_0x18ca27=_0x575cb0+_0x20e860(0xc3)+_0x3bf8df+_0x20e860(0x9b),_0x340b7f={'methodType':constants['METHOD_UPDATE_ATTACHMENT_LOG'],'body':JSON[_0x20e860(0xc7)](_0x181277)};post(_0x18ca27,_0xa719c9,_0x3bf8df,_0x340b7f)[_0x20e860(0xb4)](_0x40be9c=>{const _0x414863=_0x20e860;_0x5ee3a7[_0x414863(0xa9)](_0x414863(0x80)),_0x35c2b1(_0x40be9c);})[_0x20e860(0xa0)](_0x353742=>{const _0x499b0d=_0x20e860;_0x5ee3a7[_0x499b0d(0xa9)]('Error\x20Update\x20Log'),_0x51a9aa(_0x353742);});}catch(_0x58a4af){_0x51a9aa(_0x58a4af);}});}function callNextVlocityStep(_0x76dd40,_0x5030dc,_0x4e3cb2,_0x375aba,_0x911fe2,_0x35c4cd,_0x43174f,_0x40b911,_0x167c47){return new Promise((_0xf8cb28,_0xa53f36)=>{const _0x495a55=a46_0x22c9;try{_0x4e3cb2=_0x4e3cb2&&_0x4e3cb2[_0x495a55(0xae)]?_0x4e3cb2[_0x495a55(0xd4)]('__','')+'/':'',_0x167c47['log']('Start\x20Next\x20Vlocity\x20Step');const _0x449282={'pipelineId':_0x375aba,'pipelineNumber':_0x911fe2,'isPass':_0x43174f,'branchId':_0x40b911,'pipelineKey':_0x35c4cd},_0x4ca75b=_0x76dd40+_0x495a55(0xc3)+_0x4e3cb2+'unlocked-packages',_0x5c9cb8={'methodType':constants[_0x495a55(0xb2)],'body':JSON[_0x495a55(0xc7)](_0x449282)};post(_0x4ca75b,_0x5030dc,_0x4e3cb2,_0x5c9cb8)[_0x495a55(0xb4)](_0x2b21b5=>{const _0x2c633f=_0x495a55;_0x167c47[_0x2c633f(0xa9)](_0x2c633f(0xb7)),_0xf8cb28(_0x2b21b5);})['catch'](_0x19e72c=>{const _0xacbcbc=_0x495a55;_0x167c47[_0xacbcbc(0xa9)](_0xacbcbc(0x8c)),_0xa53f36(_0x19e72c);});}catch(_0x31545e){_0xa53f36(_0x31545e);}});}function callComponentList(_0x4fedca,_0x2b98fe,_0x1f0993,_0x123b79,_0x46780c,_0xfba4cb,_0x12bc2f=[]){return new Promise((_0x1e0992,_0x744188)=>{const _0x1eb8cf=a46_0x22c9;try{_0xfba4cb[_0x1eb8cf(0xa9)](_0x1eb8cf(0xc5));const _0x168306=_0x123b79?_0x123b79['replace']('__','')+'/':'',_0x53ce77=_0x4fedca+_0x1eb8cf(0xc3)+_0x168306+_0x1eb8cf(0x9b),_0x5d6a17={'methodType':constants['METHOD_TYPE_GET_ATTACHMENTS'],'body':JSON[_0x1eb8cf(0xc7)](_0x1f0993)};post(_0x53ce77,_0x2b98fe,_0x123b79,_0x5d6a17)[_0x1eb8cf(0xb4)](_0x35e09a=>{const _0x55be71=_0x1eb8cf;let {data:_0x53f20a}=_0x35e09a;_0x53f20a=JSON['parse'](_0x53f20a),_0xfba4cb[_0x55be71(0xa9)](_0x55be71(0xa4)+Number[_0x55be71(0xc8)](_0x12bc2f[_0x55be71(0xae)]/_0x46780c*0x64)[_0x55be71(0x82)](0x2)+'%'),_0x12bc2f[_0x55be71(0x9a)](..._0x53f20a[_0x55be71(0xd7)]),_0x53f20a[_0x55be71(0x8f)]&&_0x53f20a[_0x55be71(0x8f)][_0x55be71(0xae)]?callComponentList(_0x4fedca,_0x2b98fe,_0x53f20a[_0x55be71(0x8f)],_0x123b79,_0x46780c,_0xfba4cb,_0x12bc2f)[_0x55be71(0xb4)](_0x2723f7=>_0x1e0992(_0x2723f7))[_0x55be71(0xa0)](_0x4f9541=>{_0xfba4cb['log']('Error\x20Call\x20Component\x20List'),_0x744188(_0x4f9541);}):(_0xfba4cb['log'](_0x55be71(0x9d)),_0x1e0992(_0x12bc2f));})[_0x1eb8cf(0xa0)](_0xa8fbd5=>{const _0x23a572=_0x1eb8cf;_0xfba4cb['log'](_0x23a572(0x8a)),_0x744188(_0xa8fbd5);});}catch(_0xba7a36){_0xfba4cb[_0x1eb8cf(0xa9)](_0x1eb8cf(0x8a)),_0x744188(_0xba7a36);}});}function getAttachmentBody(_0x49ebe6,_0xba8a06,_0x2edcf2,_0x293699=!![]){return new Promise(_0x3d1853=>{const _0xbf9ff4=a46_0x22c9;try{const _0x3d7435=_0x49ebe6[_0xbf9ff4(0xca)](_0xbf9ff4(0xb0))[_0xbf9ff4(0x93)](_0xba8a06)[_0xbf9ff4(0xab)]('Body'),_0x291d0a=[];_0x3d7435['on'](_0xbf9ff4(0x97),(_0x46c441,_0x4f6c7d)=>{const _0x8cc9a9=_0xbf9ff4;_0x291d0a[_0x8cc9a9(0x9a)](_0x46c441);}),_0x3d7435['on'](_0xbf9ff4(0xc6),()=>{const _0x256547=_0xbf9ff4;_0x293699?_0x3d1853(_0x291d0a[_0x256547(0xaa)]('')):_0x3d1853(Buffer[_0x256547(0xa2)](_0x291d0a));}),_0x3d7435['on'](_0xbf9ff4(0x83),_0x3e2d14=>{_0x2edcf2['log']('Error\x20Get\x20Attachment\x20Body\x20'+_0x3e2d14),_0x3d1853('');});}catch(_0x5d4f88){_0x2edcf2[_0xbf9ff4(0xa9)](_0xbf9ff4(0xa6)+_0x5d4f88),_0x3d1853('');}});}function getTime(){const _0x3353b6=a46_0x4de2ff,_0x20578c=new Date(),_0x13bf3f=[_0x20578c[_0x3353b6(0x87)](),_0x20578c[_0x3353b6(0xd3)]()+0x1,_0x20578c[_0x3353b6(0x95)](),_0x20578c['getHours'](),_0x20578c[_0x3353b6(0xb6)](),_0x20578c[_0x3353b6(0x86)]()];return _0x13bf3f[_0x3353b6(0x88)](_0x42dccf=>_0x42dccf=_0x42dccf[_0x3353b6(0xc4)]()[_0x3353b6(0xd4)](/^([0-9])$/,_0x3353b6(0xcb))),_0x13bf3f[0x2]+'-'+_0x13bf3f[0x1]+'-'+_0x13bf3f[0x0]+'\x20'+_0x13bf3f[0x3]+':'+_0x13bf3f[0x4]+':'+_0x13bf3f[0x5];}function callUpdateAttachmentLog(_0xf481c5,_0x2bcb68,_0x1c94f1,_0xfcbc89,_0x326dc4){return new Promise(_0x454e18=>{const _0x539d05=a46_0x22c9;try{_0xfcbc89[_0x539d05(0xa9)](_0x539d05(0xba));const _0x5a1bfb=_0x1c94f1+'\x0a'+_0xfcbc89[_0x539d05(0xbc)]['join']('\x0a');_0xfcbc89[_0x539d05(0xbc)]=[];const _0x289b6a={'Id':_0x2bcb68,'Body':Buffer['from'](_0x5a1bfb)['toString'](_0x539d05(0xa1)),'ContentType':_0x539d05(0x96)};_0xf481c5['sobject']('Attachment')[_0x539d05(0xbb)](_0x289b6a)['then'](()=>{const _0x22af03=_0x539d05;_0xfcbc89[_0x22af03(0xa9)](_0x22af03(0x9c)),_0x454e18(_0x326dc4);})[_0x539d05(0xa0)](_0x3ebe38=>{const _0xa3f2cb=_0x539d05;_0xfcbc89[_0xa3f2cb(0xa9)](_0xa3f2cb(0xcd)+_0x3ebe38),_0x454e18(_0x326dc4);});}catch(_0x3093fb){_0xfcbc89[_0x539d05(0xa9)]('Error\x20Update\x20Attachment\x20Log\x20'+_0x3093fb),_0x454e18(_0x326dc4);}});}function updateAttachmentLog(_0x4921ba,_0xc0701,_0x19c835,_0x469cfb,_0x4dfa40,_0x10cb56=![]){return new Promise(_0x13667f=>{const _0x508e5d=a46_0x22c9;try{_0x469cfb['log'](_0x508e5d(0xba)),Promise[_0x508e5d(0xac)]()[_0x508e5d(0xb4)](()=>getAttachmentBody(_0xc0701,_0x19c835,_0x469cfb))[_0x508e5d(0xb4)](_0x200f98=>{if(_0x10cb56)return storage['readLogFile'](_0x4921ba,getTime(),_0x469cfb)['then'](_0x3389a2=>{try{const _0x2258c5=yaml['load'](_0x3389a2);_0x2258c5['Errors']['length']&&(_0x4dfa40=!![]);}catch(_0x4ee263){_0x3389a2='',_0x4dfa40=!![];}const _0x55ac05=_0x3389a2+'\x0a'+_0x200f98;return callUpdateAttachmentLog(_0xc0701,_0x19c835,_0x55ac05,_0x469cfb,_0x4dfa40);});return callUpdateAttachmentLog(_0xc0701,_0x19c835,_0x200f98,_0x469cfb,_0x4dfa40);})[_0x508e5d(0xb4)](()=>_0x13667f(_0x4dfa40))['catch'](()=>_0x13667f(_0x4dfa40));}catch(_0x53189c){_0x469cfb['log'](_0x508e5d(0xcd)+_0x53189c),_0x13667f(_0x4dfa40);}});}function callUpdateLog(_0x55778e,_0x200dba,_0x3de616,_0x23f5c6,_0x139836,_0x435cc9=![]){return new Promise((_0x23819f,_0xeb2d7f)=>{const _0x2228ad=a46_0x22c9;try{_0x139836['log']('Start\x20Update\x20Metadata\x20Log\x20isError\x20'+_0x435cc9+_0x2228ad(0x8d)+_0x23f5c6);const _0x40c5c4=_0x23f5c6&&!_0x435cc9?_0x2228ad(0xce):_0x23f5c6&&_0x435cc9?_0x2228ad(0xcc):_0x2228ad(0xb9),_0x2d06f6={'Id':_0x200dba,[_0x3de616+_0x2228ad(0x9f)]:_0x40c5c4,[_0x3de616+_0x2228ad(0xc0)]:_0x435cc9,[_0x3de616+_0x2228ad(0xb3)]:_0x23f5c6,[_0x3de616+_0x2228ad(0x8e)]:!![]};_0x55778e[_0x2228ad(0xca)](_0x3de616+_0x2228ad(0x99))[_0x2228ad(0xbb)](_0x2d06f6)[_0x2228ad(0xb4)](()=>{const _0x1a89b5=_0x2228ad;_0x139836['log'](_0x1a89b5(0xa7)),_0x23819f(_0x2d06f6[_0x3de616+_0x1a89b5(0xc0)]);})[_0x2228ad(0xa0)](_0x490ca1=>{const _0x49ab19=_0x2228ad;_0x139836[_0x49ab19(0xa9)](_0x49ab19(0xbd)+_0x490ca1),_0xeb2d7f(_0x490ca1);});}catch(_0x26f914){_0x139836[_0x2228ad(0xa9)](_0x2228ad(0xbd)+_0x26f914),_0xeb2d7f(_0x26f914);}});}module[a46_0x4de2ff(0xd5)]={'getTime':getTime,'post':post,'callUpdateInfo':callUpdateInfo,'callNextVlocityStep':callNextVlocityStep,'callComponentList':callComponentList,'updateAttachmentLog':updateAttachmentLog,'getAttachmentBody':getAttachmentBody,'callUpdateAttachmentLog':callUpdateAttachmentLog,'callUpdateLog':callUpdateLog};