const a45_0x430372=a45_0x44df;(function(_0x11718c,_0x3f66c8){const _0x5dc162=a45_0x44df,_0xfdb527=_0x11718c();while(!![]){try{const _0x58a2d4=-parseInt(_0x5dc162(0x205))/0x1+-parseInt(_0x5dc162(0x212))/0x2*(parseInt(_0x5dc162(0x220))/0x3)+parseInt(_0x5dc162(0x215))/0x4+parseInt(_0x5dc162(0x1f8))/0x5+-parseInt(_0x5dc162(0x1ff))/0x6+-parseInt(_0x5dc162(0x1fc))/0x7+parseInt(_0x5dc162(0x217))/0x8;if(_0x58a2d4===_0x3f66c8)break;else _0xfdb527['push'](_0xfdb527['shift']());}catch(_0x1b9026){_0xfdb527['push'](_0xfdb527['shift']());}}}(a45_0x633f,0x79d90));function a45_0x44df(_0x50e774,_0x37d329){const _0x633f9a=a45_0x633f();return a45_0x44df=function(_0x44df2e,_0x732443){_0x44df2e=_0x44df2e-0x1e9;let _0x373809=_0x633f9a[_0x44df2e];return _0x373809;},a45_0x44df(_0x50e774,_0x37d329);}const axios=require(a45_0x430372(0x20d)),yaml=require('js-yaml'),constants=require('../../constants'),storage=require('../storage');function a45_0x633f(){const _0x15291e=['Error\x20Update\x20Attachment\x20Log\x20','Error\x20Update\x20Metadata\x20Log\x20','Start\x20Next\x20Vlocity\x20Step','text/plain','from','readLogFile','error','Retrieved:\x20','Error\x20Get\x20Attachment\x20Body\x20','Error\x20Call\x20Component\x20List','Error\x20Next\x20Vlocity\x20Step','getMonth','Exception','End\x20Update\x20Metadata\x20Log','logs','length','getSeconds','3234115oBwkCD','Metadata_Log__c','Attachment','\x20isSuccess\x20','2003407hnJgtY','load','recordList','4315422PALyGN','OAuth\x20','\x0a\x0aFull\x20Process:\x0a\x0a','End\x20Call\x20Component\x20List','Start\x20Update\x20Metadata\x20Log\x20isError\x20','post','676434wKgxtA','toFixed','resolve','Start\x20Update\x20Log','update','end','parse','record','axios','End\x20Update\x20Log','Errors','push','getFullYear','117158rHCrWB','sobject','Partial\x20Completed','3382072lUAojR','message','5977584YvLhsy','getHours','getMinutes','End\x20Update\x20Log\x20is\x20Success\x20=\x20','response','application/json','Completed','exports','data','3Ynoury','METHOD_NEXT_VLOCITY_STEP','request','join','Start\x20Update\x20Attachment\x20Log','METHOD_UPDATE_LOG','string','replace','/services/apexrest/','stringify','log','unlocked-packages','Job_Completed__c','Is_Error__c','Vlocity\x20Log\x20File:\x0a\x0a','forEach','idList','Full\x20Process:\x0a\x0a','0$1','catch','then','End\x20Update\x20Attachment\x20Log','toString','parseFloat','Start\x20Call\x20Component\x20List'];a45_0x633f=function(){return _0x15291e;};return a45_0x633f();}function post(_0x18d8e2,_0x45807c,_0x304f19,_0x1443b3){return new Promise((_0x36ee68,_0x33c9e7)=>{const _0x5a380f=a45_0x44df;try{const _0x145beb={'Authorization':_0x5a380f(0x200)+_0x45807c,'Content-Type':_0x5a380f(0x21c)};axios[_0x5a380f(0x204)](_0x18d8e2,_0x1443b3,{'headers':_0x145beb})[_0x5a380f(0x234)](_0x4852fc=>{_0x36ee68(_0x4852fc);})[_0x5a380f(0x233)](_0xd8fbe9=>{const _0x285769=_0x5a380f;if(_0xd8fbe9&&_0xd8fbe9[_0x285769(0x21b)]&&_0xd8fbe9[_0x285769(0x21b)]['data'])typeof _0xd8fbe9[_0x285769(0x21b)][_0x285769(0x21f)]!==_0x285769(0x226)?_0x33c9e7(JSON[_0x285769(0x229)](_0xd8fbe9['response']['data'])):_0x33c9e7(_0xd8fbe9['response'][_0x285769(0x21f)]);else _0xd8fbe9[_0x285769(0x222)]?_0x33c9e7(_0xd8fbe9['request']):_0x33c9e7(_0xd8fbe9[_0x285769(0x216)]);});}catch(_0x2620d5){_0x33c9e7(_0x2620d5);}});}function callUpdateInfo(_0x4fbfc0,_0x332631,_0xa5d46f,_0x4b7744,_0x1cc32a,_0x1a888a,_0x5bd331,_0x20700a,_0x31e8f6=![]){return new Promise((_0x4a0127,_0x2823ac)=>{const _0x25f477=a45_0x44df;try{_0x4b7744=_0x4b7744&&_0x4b7744['length']?_0x4b7744[_0x25f477(0x227)]('__','')+'/':'';try{const _0x4a3ebe=yaml[_0x25f477(0x1fd)](_0x1a888a);_0x4a3ebe[_0x25f477(0x20f)]&&(_0x31e8f6=_0x4a3ebe[_0x25f477(0x20f)]['length']>0x0);}catch(_0x4459de){}_0x20700a[_0x25f477(0x22a)]('Start\x20Update\x20Log\x20is\x20Success\x20=\x20'+_0x5bd331);const _0x19fa35={'logId':_0xa5d46f,'attachmentLogId':_0x1cc32a,'isJobCompleted':!![],'status':_0x25f477(0x21d),'isSuccess':_0x5bd331,'isError':_0x31e8f6,'attachmentBody':_0x1a888a+_0x25f477(0x231)+_0x20700a[_0x25f477(0x1f5)]['join']('\x0a')},_0x445061=_0x4fbfc0+_0x25f477(0x228)+_0x4b7744+'unlocked-packages',_0x401448={'methodType':constants[_0x25f477(0x225)],'body':JSON[_0x25f477(0x229)](_0x19fa35)};post(_0x445061,_0x332631,_0x4b7744,_0x401448)['then'](_0x16f73b=>{const _0x2a957c=_0x25f477;_0x20700a['log'](_0x2a957c(0x21a)+_0x5bd331),_0x4a0127(_0x16f73b);})['catch'](_0x4d4617=>{const _0x5c9623=_0x25f477;_0x20700a[_0x5c9623(0x22a)]('Error\x20Update\x20Log\x20is\x20Success\x20=\x20'+_0x5bd331),_0x2823ac(_0x4d4617);});}catch(_0x3598e5){_0x2823ac(_0x3598e5);}});}function callUpdateAttachmentInfo(_0x18c391,_0x3f5a92,_0x4be59f,_0x4448ff,_0x39d396,_0x1a7136){return new Promise((_0x223e43,_0x373e50)=>{const _0x38af2e=a45_0x44df;try{_0x4be59f=_0x4be59f&&_0x4be59f[_0x38af2e(0x1f6)]?_0x4be59f[_0x38af2e(0x227)]('__','')+'/':'',_0x1a7136[_0x38af2e(0x22a)](_0x38af2e(0x208));const _0x2dab18={'attachmentLogId':_0x4448ff,'attachmentBody':_0x38af2e(0x22e)+_0x39d396+_0x38af2e(0x201)+_0x1a7136[_0x38af2e(0x1f5)][_0x38af2e(0x223)]('\x0a')},_0x2c4518=_0x18c391+_0x38af2e(0x228)+_0x4be59f+_0x38af2e(0x22b),_0x5570a1={'methodType':constants['METHOD_UPDATE_ATTACHMENT_LOG'],'body':JSON[_0x38af2e(0x229)](_0x2dab18)};post(_0x2c4518,_0x3f5a92,_0x4be59f,_0x5570a1)[_0x38af2e(0x234)](_0x4e349b=>{const _0x3bcc22=_0x38af2e;_0x1a7136['log'](_0x3bcc22(0x20e)),_0x223e43(_0x4e349b);})[_0x38af2e(0x233)](_0x4e5cb6=>{const _0xc46074=_0x38af2e;_0x1a7136[_0xc46074(0x22a)]('Error\x20Update\x20Log'),_0x373e50(_0x4e5cb6);});}catch(_0x56fde8){_0x373e50(_0x56fde8);}});}function callNextVlocityStep(_0x24a177,_0x29b331,_0x33af7f,_0xf948f,_0x10402d,_0x5b07dd,_0x5bed2d,_0x649968,_0x19f09f){return new Promise((_0x478d93,_0x547461)=>{const _0x918fd8=a45_0x44df;try{_0x33af7f=_0x33af7f&&_0x33af7f['length']?_0x33af7f[_0x918fd8(0x227)]('__','')+'/':'',_0x19f09f['log'](_0x918fd8(0x1e9));const _0x310a0e={'pipelineId':_0xf948f,'pipelineNumber':_0x10402d,'isPass':_0x5bed2d,'branchId':_0x649968,'pipelineKey':_0x5b07dd},_0x56981d=_0x24a177+_0x918fd8(0x228)+_0x33af7f+_0x918fd8(0x22b),_0x5244c2={'methodType':constants[_0x918fd8(0x221)],'body':JSON[_0x918fd8(0x229)](_0x310a0e)};post(_0x56981d,_0x29b331,_0x33af7f,_0x5244c2)[_0x918fd8(0x234)](_0x324c0f=>{const _0xc4d932=_0x918fd8;_0x19f09f[_0xc4d932(0x22a)]('End\x20Next\x20Vlocity\x20Step'),_0x478d93(_0x324c0f);})[_0x918fd8(0x233)](_0x578e0e=>{const _0x17bfcd=_0x918fd8;_0x19f09f[_0x17bfcd(0x22a)](_0x17bfcd(0x1f1)),_0x547461(_0x578e0e);});}catch(_0x2582b1){_0x547461(_0x2582b1);}});}function callComponentList(_0x247c3a,_0x2e6b4e,_0x2b79fd,_0xfad48,_0x111c85,_0x378a10,_0x14d6db=[]){return new Promise((_0x36f90b,_0xbf4a4d)=>{const _0x1bb4f1=a45_0x44df;try{_0x378a10['log'](_0x1bb4f1(0x238));const _0x413a33=_0xfad48?_0xfad48['replace']('__','')+'/':'',_0x5b127e=_0x247c3a+'/services/apexrest/'+_0x413a33+'unlocked-packages',_0x19f69f={'methodType':constants['METHOD_TYPE_GET_ATTACHMENTS'],'body':JSON[_0x1bb4f1(0x229)](_0x2b79fd)};post(_0x5b127e,_0x2e6b4e,_0xfad48,_0x19f69f)[_0x1bb4f1(0x234)](_0x2c9478=>{const _0x5bf4e8=_0x1bb4f1;let {data:_0xbe5674}=_0x2c9478;_0xbe5674=JSON[_0x5bf4e8(0x20b)](_0xbe5674),_0x378a10[_0x5bf4e8(0x22a)](_0x5bf4e8(0x1ee)+Number[_0x5bf4e8(0x237)](_0x14d6db[_0x5bf4e8(0x1f6)]/_0x111c85*0x64)[_0x5bf4e8(0x206)](0x2)+'%'),_0x14d6db[_0x5bf4e8(0x210)](..._0xbe5674[_0x5bf4e8(0x1fe)]),_0xbe5674[_0x5bf4e8(0x230)]&&_0xbe5674[_0x5bf4e8(0x230)][_0x5bf4e8(0x1f6)]?callComponentList(_0x247c3a,_0x2e6b4e,_0xbe5674[_0x5bf4e8(0x230)],_0xfad48,_0x111c85,_0x378a10,_0x14d6db)[_0x5bf4e8(0x234)](_0x43585b=>_0x36f90b(_0x43585b))[_0x5bf4e8(0x233)](_0x45fe6d=>{const _0x15bd34=_0x5bf4e8;_0x378a10[_0x15bd34(0x22a)](_0x15bd34(0x1f0)),_0xbf4a4d(_0x45fe6d);}):(_0x378a10[_0x5bf4e8(0x22a)](_0x5bf4e8(0x202)),_0x36f90b(_0x14d6db));})[_0x1bb4f1(0x233)](_0x3fcf73=>{const _0x4a7eb4=_0x1bb4f1;_0x378a10[_0x4a7eb4(0x22a)](_0x4a7eb4(0x1f0)),_0xbf4a4d(_0x3fcf73);});}catch(_0x2feaa2){_0x378a10[_0x1bb4f1(0x22a)]('Error\x20Call\x20Component\x20List'),_0xbf4a4d(_0x2feaa2);}});}function getAttachmentBody(_0x5ebb6a,_0x5ebb5b,_0x2525c6,_0x40f202=!![]){return new Promise(_0x38c932=>{const _0x5b9af5=a45_0x44df;try{const _0xc2ff3d=_0x5ebb6a['sobject'](_0x5b9af5(0x1fa))[_0x5b9af5(0x20c)](_0x5ebb5b)['blob']('Body'),_0xb6ffdc=[];_0xc2ff3d['on'](_0x5b9af5(0x21f),(_0x44ff57,_0x48df2b)=>{const _0x59830a=_0x5b9af5;_0xb6ffdc[_0x59830a(0x210)](_0x44ff57);}),_0xc2ff3d['on'](_0x5b9af5(0x20a),()=>{_0x40f202?_0x38c932(_0xb6ffdc['join']('')):_0x38c932(Buffer['concat'](_0xb6ffdc));}),_0xc2ff3d['on'](_0x5b9af5(0x1ed),_0x1cb7e0=>{const _0x1f9d28=_0x5b9af5;_0x2525c6[_0x1f9d28(0x22a)](_0x1f9d28(0x1ef)+_0x1cb7e0),_0x38c932('');});}catch(_0x3738ef){_0x2525c6['log'](_0x5b9af5(0x1ef)+_0x3738ef),_0x38c932('');}});}function getTime(){const _0x442c5a=a45_0x430372,_0x4b2052=new Date(),_0x50a935=[_0x4b2052['getDate'](),_0x4b2052[_0x442c5a(0x1f2)]()+0x1,_0x4b2052[_0x442c5a(0x211)](),_0x4b2052[_0x442c5a(0x218)](),_0x4b2052[_0x442c5a(0x219)](),_0x4b2052[_0x442c5a(0x1f7)]()];return _0x50a935[_0x442c5a(0x22f)](_0x366584=>_0x366584=_0x366584[_0x442c5a(0x236)]()[_0x442c5a(0x227)](/^([0-9])$/,_0x442c5a(0x232))),_0x50a935[0x2]+'-'+_0x50a935[0x1]+'-'+_0x50a935[0x0]+'\x20'+_0x50a935[0x3]+':'+_0x50a935[0x4]+':'+_0x50a935[0x5];}function callUpdateAttachmentLog(_0x433f78,_0x4a0064,_0x2e4aa3,_0x40b64c,_0x34681b){return new Promise(_0xe73427=>{const _0x54baf0=a45_0x44df;try{_0x40b64c['log'](_0x54baf0(0x224));const _0xa474db=_0x2e4aa3+'\x0a'+_0x40b64c[_0x54baf0(0x1f5)][_0x54baf0(0x223)]('\x0a');_0x40b64c['logs']=[];const _0x547e60={'Id':_0x4a0064,'Body':Buffer[_0x54baf0(0x1eb)](_0xa474db)[_0x54baf0(0x236)]('base64'),'ContentType':_0x54baf0(0x1ea)};_0x433f78['sobject'](_0x54baf0(0x1fa))['update'](_0x547e60)[_0x54baf0(0x234)](()=>{const _0x3bf2ea=_0x54baf0;_0x40b64c['log'](_0x3bf2ea(0x235)),_0xe73427(_0x34681b);})[_0x54baf0(0x233)](_0x2ab46d=>{const _0x1c9b07=_0x54baf0;_0x40b64c[_0x1c9b07(0x22a)](_0x1c9b07(0x239)+_0x2ab46d),_0xe73427(_0x34681b);});}catch(_0x358019){_0x40b64c[_0x54baf0(0x22a)](_0x54baf0(0x239)+_0x358019),_0xe73427(_0x34681b);}});}function updateAttachmentLog(_0x159a3d,_0x343b7c,_0x21f08a,_0x54ef2b,_0x27020b,_0x216091=![]){return new Promise(_0x3abd62=>{const _0x410514=a45_0x44df;try{_0x54ef2b[_0x410514(0x22a)](_0x410514(0x224)),Promise[_0x410514(0x207)]()[_0x410514(0x234)](()=>getAttachmentBody(_0x343b7c,_0x21f08a,_0x54ef2b))['then'](_0x2daa57=>{const _0x4a8489=_0x410514;if(_0x216091)return storage[_0x4a8489(0x1ec)](_0x159a3d,getTime(),_0x54ef2b)[_0x4a8489(0x234)](_0x263226=>{const _0x21eb9a=_0x4a8489;try{const _0x50c503=yaml[_0x21eb9a(0x1fd)](_0x263226);_0x50c503['Errors'][_0x21eb9a(0x1f6)]&&(_0x27020b=!![]);}catch(_0x360687){_0x263226='',_0x27020b=!![];}const _0x4e7457=_0x263226+'\x0a'+_0x2daa57;return callUpdateAttachmentLog(_0x343b7c,_0x21f08a,_0x4e7457,_0x54ef2b,_0x27020b);});return callUpdateAttachmentLog(_0x343b7c,_0x21f08a,_0x2daa57,_0x54ef2b,_0x27020b);})['then'](()=>_0x3abd62(_0x27020b))[_0x410514(0x233)](()=>_0x3abd62(_0x27020b));}catch(_0x1f51af){_0x54ef2b[_0x410514(0x22a)](_0x410514(0x239)+_0x1f51af),_0x3abd62(_0x27020b);}});}function callUpdateLog(_0x322534,_0x238e1e,_0x13c975,_0x4304cd,_0x1f43ac,_0x57339d=![]){return new Promise((_0xd71ea0,_0x1e8fb0)=>{const _0x20f8ff=a45_0x44df;try{_0x1f43ac[_0x20f8ff(0x22a)](_0x20f8ff(0x203)+_0x57339d+_0x20f8ff(0x1fb)+_0x4304cd);const _0x1ca257=_0x4304cd&&!_0x57339d?_0x20f8ff(0x21d):_0x4304cd&&_0x57339d?_0x20f8ff(0x214):_0x20f8ff(0x1f3),_0xa75d90={'Id':_0x238e1e,[_0x13c975+'Status__c']:_0x1ca257,[_0x13c975+_0x20f8ff(0x22d)]:_0x57339d,[_0x13c975+'Succeed__c']:_0x4304cd,[_0x13c975+_0x20f8ff(0x22c)]:!![]};_0x322534[_0x20f8ff(0x213)](_0x13c975+_0x20f8ff(0x1f9))[_0x20f8ff(0x209)](_0xa75d90)['then'](()=>{const _0x564dd4=_0x20f8ff;_0x1f43ac[_0x564dd4(0x22a)](_0x564dd4(0x1f4)),_0xd71ea0(_0xa75d90[_0x13c975+'Is_Error__c']);})[_0x20f8ff(0x233)](_0x2d96c3=>{const _0x348bc9=_0x20f8ff;_0x1f43ac[_0x348bc9(0x22a)]('Error\x20Update\x20Metadata\x20Log\x20'+_0x2d96c3),_0x1e8fb0(_0x2d96c3);});}catch(_0x344386){_0x1f43ac[_0x20f8ff(0x22a)](_0x20f8ff(0x23a)+_0x344386),_0x1e8fb0(_0x344386);}});}module[a45_0x430372(0x21e)]={'getTime':getTime,'post':post,'callUpdateInfo':callUpdateInfo,'callNextVlocityStep':callNextVlocityStep,'callComponentList':callComponentList,'updateAttachmentLog':updateAttachmentLog,'getAttachmentBody':getAttachmentBody,'callUpdateAttachmentLog':callUpdateAttachmentLog,'callUpdateLog':callUpdateLog};