function a39_0x25f5(_0x568b41,_0x1eaba3){const _0x300758=a39_0x3007();return a39_0x25f5=function(_0x25f52c,_0x42972b){_0x25f52c=_0x25f52c-0xd7;let _0x2bba63=_0x300758[_0x25f52c];return _0x2bba63;},a39_0x25f5(_0x568b41,_0x1eaba3);}const a39_0x24164d=a39_0x25f5;(function(_0x338555,_0x4d8b4c){const _0xc81cf8=a39_0x25f5,_0x401821=_0x338555();while(!![]){try{const _0x4029a0=-parseInt(_0xc81cf8(0x10c))/0x1+parseInt(_0xc81cf8(0xe6))/0x2*(-parseInt(_0xc81cf8(0xe7))/0x3)+parseInt(_0xc81cf8(0x116))/0x4+-parseInt(_0xc81cf8(0xeb))/0x5+parseInt(_0xc81cf8(0xed))/0x6*(-parseInt(_0xc81cf8(0x10d))/0x7)+parseInt(_0xc81cf8(0x114))/0x8+-parseInt(_0xc81cf8(0x11f))/0x9*(-parseInt(_0xc81cf8(0x100))/0xa);if(_0x4029a0===_0x4d8b4c)break;else _0x401821['push'](_0x401821['shift']());}catch(_0x58c39b){_0x401821['push'](_0x401821['shift']());}}}(a39_0x3007,0xdae3e));const axios=require(a39_0x24164d(0x129)),yaml=require('js-yaml'),constants=require(a39_0x24164d(0xf0)),storage=require('../../services/storage');function post(_0x4d33eb,_0x5641bc,_0x3fa15f,_0x578eb2){return new Promise((_0x7ba9f7,_0x5e3eab)=>{const _0x2b7f93=a39_0x25f5;try{const _0xeaa467={'Authorization':_0x2b7f93(0x109)+_0x5641bc,'Content-Type':_0x2b7f93(0x11e)};axios[_0x2b7f93(0xe1)](_0x4d33eb,_0x578eb2,{'headers':_0xeaa467})[_0x2b7f93(0xf1)](_0x461a0a=>{_0x7ba9f7(_0x461a0a);})[_0x2b7f93(0x105)](_0x31997d=>{const _0xcab1bd=_0x2b7f93;if(_0x31997d&&_0x31997d[_0xcab1bd(0x10e)]&&_0x31997d[_0xcab1bd(0x10e)][_0xcab1bd(0xd7)])typeof _0x31997d['response'][_0xcab1bd(0xd7)]!==_0xcab1bd(0x107)?_0x5e3eab(JSON[_0xcab1bd(0x106)](_0x31997d[_0xcab1bd(0x10e)][_0xcab1bd(0xd7)])):_0x5e3eab(_0x31997d['response']['data']);else _0x31997d[_0xcab1bd(0x112)]?_0x5e3eab(_0x31997d['request']):_0x5e3eab(_0x31997d[_0xcab1bd(0xea)]);});}catch(_0x50895e){_0x5e3eab(_0x50895e);}});}function callUpdateInfo(_0x1eb6b5,_0x18b0f2,_0x5f22b9,_0x49531d,_0x36aea9,_0x42e8f4,_0x3cff74,_0x571058,_0xf99593=![]){return new Promise((_0x4146e1,_0x193353)=>{const _0x17ca00=a39_0x25f5;try{_0x49531d=_0x49531d&&_0x49531d[_0x17ca00(0x123)]?_0x49531d['replace']('__','')+'/':'';try{const _0x58b315=yaml[_0x17ca00(0x113)](_0x42e8f4);_0x58b315[_0x17ca00(0xe5)]&&(_0xf99593=_0x58b315['Errors'][_0x17ca00(0x123)]>0x0);}catch(_0x59f2d8){}_0x571058['log'](_0x17ca00(0xf2)+_0x3cff74);const _0x20a133={'logId':_0x5f22b9,'attachmentLogId':_0x36aea9,'isJobCompleted':!![],'status':_0x17ca00(0xde),'isSuccess':_0x3cff74,'isError':_0xf99593,'attachmentBody':_0x42e8f4+_0x17ca00(0xe2)+_0x571058['logs'][_0x17ca00(0x12a)]('\x0a')},_0x86e710=_0x1eb6b5+_0x17ca00(0xfc)+_0x49531d+_0x17ca00(0x111),_0x511f1e={'methodType':constants[_0x17ca00(0x11d)],'body':JSON[_0x17ca00(0x106)](_0x20a133)};post(_0x86e710,_0x18b0f2,_0x49531d,_0x511f1e)[_0x17ca00(0xf1)](_0xcbbaa3=>{const _0x5cf735=_0x17ca00;_0x571058[_0x5cf735(0x124)]('End\x20Update\x20Log\x20is\x20Success\x20=\x20'+_0x3cff74),_0x4146e1(_0xcbbaa3);})[_0x17ca00(0x105)](_0x3938aa=>{const _0x414d57=_0x17ca00;_0x571058[_0x414d57(0x124)](_0x414d57(0x10f)+_0x3cff74),_0x193353(_0x3938aa);});}catch(_0x19de15){_0x193353(_0x19de15);}});}function a39_0x3007(){const _0x4eac1a=['getDate','\x0a\x0aFull\x20Process:\x0a\x0a','error','axios','join','Job_Completed__c','Is_Error__c','data','forEach','getSeconds','Start\x20Call\x20Component\x20List','METHOD_TYPE_GET_ATTACHMENTS','getMinutes','base64','Completed','idList','End\x20Update\x20Log','post','Full\x20Process:\x0a\x0a','End\x20Update\x20Attachment\x20Log','Start\x20Update\x20Attachment\x20Log','Errors','2326tHzPJW','591gkftiq','Attachment','recordList','message','7394255adqdrS','update','186114kgYnyd','End\x20Call\x20Component\x20List','end','../../constants','then','Start\x20Update\x20Log\x20is\x20Success\x20=\x20','Error\x20Update\x20Attachment\x20Log\x20','replace','Succeed__c','toString','getMonth','Metadata_Log__c','toFixed','getHours','Error\x20Get\x20Attachment\x20Body\x20','/services/apexrest/','sobject','readLogFile','Error\x20Next\x20Vlocity\x20Step','7450090LKTaaQ','End\x20Update\x20Metadata\x20Log','push','Error\x20Update\x20Metadata\x20Log\x20','resolve','catch','stringify','string','Status__c','OAuth\x20','Body','blob','1408892DXHsKu','371ifFmDz','response','Error\x20Update\x20Log\x20is\x20Success\x20=\x20','parse','unlocked-packages','request','load','3096800VmbsTt','Retrieved:\x20','6181160zbTnMl','End\x20Next\x20Vlocity\x20Step','parseFloat','Exception','Partial\x20Completed','Error\x20Call\x20Component\x20List','logs','METHOD_UPDATE_LOG','application/json','45ClPrxR','text/plain','Vlocity\x20Log\x20File:\x0a\x0a','from','length','log','0$1'];a39_0x3007=function(){return _0x4eac1a;};return a39_0x3007();}function callUpdateAttachmentInfo(_0x1d1318,_0xb8f2a6,_0x140c00,_0x3445c7,_0x660396,_0x547e4f){return new Promise((_0x4eda35,_0x39b0d5)=>{const _0x13429d=a39_0x25f5;try{_0x140c00=_0x140c00&&_0x140c00[_0x13429d(0x123)]?_0x140c00['replace']('__','')+'/':'',_0x547e4f[_0x13429d(0x124)]('Start\x20Update\x20Log');const _0x552a63={'attachmentLogId':_0x3445c7,'attachmentBody':_0x13429d(0x121)+_0x660396+_0x13429d(0x127)+_0x547e4f[_0x13429d(0x11c)]['join']('\x0a')},_0x2c0d32=_0x1d1318+_0x13429d(0xfc)+_0x140c00+_0x13429d(0x111),_0x5ba994={'methodType':constants['METHOD_UPDATE_ATTACHMENT_LOG'],'body':JSON['stringify'](_0x552a63)};post(_0x2c0d32,_0xb8f2a6,_0x140c00,_0x5ba994)[_0x13429d(0xf1)](_0x5e1700=>{const _0x2c60f9=_0x13429d;_0x547e4f[_0x2c60f9(0x124)](_0x2c60f9(0xe0)),_0x4eda35(_0x5e1700);})[_0x13429d(0x105)](_0x4a1ec5=>{const _0xd90b06=_0x13429d;_0x547e4f[_0xd90b06(0x124)]('Error\x20Update\x20Log'),_0x39b0d5(_0x4a1ec5);});}catch(_0x251179){_0x39b0d5(_0x251179);}});}function callNextVlocityStep(_0x5445ad,_0x34d8db,_0x172df3,_0x3edb0b,_0x325dad,_0x4750e3,_0x4eb959,_0x34e834,_0x2e16ff){return new Promise((_0x24427c,_0x4b5df0)=>{const _0x248d1c=a39_0x25f5;try{_0x172df3=_0x172df3&&_0x172df3[_0x248d1c(0x123)]?_0x172df3['replace']('__','')+'/':'',_0x2e16ff[_0x248d1c(0x124)]('Start\x20Next\x20Vlocity\x20Step');const _0x3fca6a={'pipelineId':_0x3edb0b,'pipelineNumber':_0x325dad,'isPass':_0x4eb959,'branchId':_0x34e834,'pipelineKey':_0x4750e3},_0x752b11=_0x5445ad+_0x248d1c(0xfc)+_0x172df3+'unlocked-packages',_0x4235ab={'methodType':constants['METHOD_NEXT_VLOCITY_STEP'],'body':JSON[_0x248d1c(0x106)](_0x3fca6a)};post(_0x752b11,_0x34d8db,_0x172df3,_0x4235ab)[_0x248d1c(0xf1)](_0x56c4f4=>{const _0x3159df=_0x248d1c;_0x2e16ff[_0x3159df(0x124)](_0x3159df(0x117)),_0x24427c(_0x56c4f4);})[_0x248d1c(0x105)](_0x281b66=>{const _0x1af3f4=_0x248d1c;_0x2e16ff[_0x1af3f4(0x124)](_0x1af3f4(0xff)),_0x4b5df0(_0x281b66);});}catch(_0x1bdaf0){_0x4b5df0(_0x1bdaf0);}});}function callComponentList(_0x15ac26,_0x5ea5fc,_0x521e8c,_0x1cbc3a,_0x487224,_0x22da6d,_0x2109f2=[]){return new Promise((_0x575825,_0x18eb83)=>{const _0x40bbe7=a39_0x25f5;try{_0x22da6d[_0x40bbe7(0x124)](_0x40bbe7(0xda));const _0x55890c=_0x1cbc3a?_0x1cbc3a[_0x40bbe7(0xf4)]('__','')+'/':'',_0x56f892=_0x15ac26+'/services/apexrest/'+_0x55890c+_0x40bbe7(0x111),_0x31a262={'methodType':constants[_0x40bbe7(0xdb)],'body':JSON[_0x40bbe7(0x106)](_0x521e8c)};post(_0x56f892,_0x5ea5fc,_0x1cbc3a,_0x31a262)[_0x40bbe7(0xf1)](_0x3e0f8b=>{const _0x5699a1=_0x40bbe7;let {data:_0x45bcd7}=_0x3e0f8b;_0x45bcd7=JSON[_0x5699a1(0x110)](_0x45bcd7),_0x22da6d[_0x5699a1(0x124)](_0x5699a1(0x115)+Number[_0x5699a1(0x118)](_0x2109f2[_0x5699a1(0x123)]/_0x487224*0x64)[_0x5699a1(0xf9)](0x2)+'%'),_0x2109f2[_0x5699a1(0x102)](..._0x45bcd7[_0x5699a1(0xe9)]),_0x45bcd7[_0x5699a1(0xdf)]&&_0x45bcd7[_0x5699a1(0xdf)][_0x5699a1(0x123)]?callComponentList(_0x15ac26,_0x5ea5fc,_0x45bcd7[_0x5699a1(0xdf)],_0x1cbc3a,_0x487224,_0x22da6d,_0x2109f2)[_0x5699a1(0xf1)](_0x4d5b99=>_0x575825(_0x4d5b99))[_0x5699a1(0x105)](_0xdbf945=>{const _0x417256=_0x5699a1;_0x22da6d['log'](_0x417256(0x11b)),_0x18eb83(_0xdbf945);}):(_0x22da6d['log'](_0x5699a1(0xee)),_0x575825(_0x2109f2));})[_0x40bbe7(0x105)](_0x534874=>{const _0x1a3b0c=_0x40bbe7;_0x22da6d[_0x1a3b0c(0x124)](_0x1a3b0c(0x11b)),_0x18eb83(_0x534874);});}catch(_0x16e536){_0x22da6d[_0x40bbe7(0x124)](_0x40bbe7(0x11b)),_0x18eb83(_0x16e536);}});}function getAttachmentBody(_0x1dff2d,_0x7ae42,_0x37ed65,_0x5be5b5=!![]){return new Promise(_0x3f878b=>{const _0x34522a=a39_0x25f5;try{const _0x28202d=_0x1dff2d[_0x34522a(0xfd)](_0x34522a(0xe8))['record'](_0x7ae42)[_0x34522a(0x10b)](_0x34522a(0x10a)),_0x423ca2=[];_0x28202d['on'](_0x34522a(0xd7),(_0x167969,_0x1a538e)=>{_0x423ca2['push'](_0x167969);}),_0x28202d['on'](_0x34522a(0xef),()=>{const _0x1d0c4e=_0x34522a;_0x5be5b5?_0x3f878b(_0x423ca2[_0x1d0c4e(0x12a)]('')):_0x3f878b(Buffer['concat'](_0x423ca2));}),_0x28202d['on'](_0x34522a(0x128),_0x2f1846=>{const _0x250cc0=_0x34522a;_0x37ed65[_0x250cc0(0x124)]('Error\x20Get\x20Attachment\x20Body\x20'+_0x2f1846),_0x3f878b('');});}catch(_0x1ad96c){_0x37ed65[_0x34522a(0x124)](_0x34522a(0xfb)+_0x1ad96c),_0x3f878b('');}});}function getTime(){const _0x560266=a39_0x24164d,_0x28351a=new Date(),_0x2f506d=[_0x28351a[_0x560266(0x126)](),_0x28351a[_0x560266(0xf7)]()+0x1,_0x28351a['getFullYear'](),_0x28351a[_0x560266(0xfa)](),_0x28351a[_0x560266(0xdc)](),_0x28351a[_0x560266(0xd9)]()];return _0x2f506d[_0x560266(0xd8)](_0x5cf9bc=>_0x5cf9bc=_0x5cf9bc[_0x560266(0xf6)]()[_0x560266(0xf4)](/^([0-9])$/,_0x560266(0x125))),_0x2f506d[0x2]+'-'+_0x2f506d[0x1]+'-'+_0x2f506d[0x0]+'\x20'+_0x2f506d[0x3]+':'+_0x2f506d[0x4]+':'+_0x2f506d[0x5];}function callUpdateAttachmentLog(_0x3c314a,_0x59716c,_0x3cf3be,_0x51748d,_0x3d2134){return new Promise(_0x29af61=>{const _0xf121b1=a39_0x25f5;try{_0x51748d[_0xf121b1(0x124)](_0xf121b1(0xe4));const _0x39656b=_0x3cf3be+'\x0a'+_0x51748d['logs'][_0xf121b1(0x12a)]('\x0a');_0x51748d['logs']=[];const _0x12d61f={'Id':_0x59716c,'Body':Buffer[_0xf121b1(0x122)](_0x39656b)[_0xf121b1(0xf6)](_0xf121b1(0xdd)),'ContentType':_0xf121b1(0x120)};_0x3c314a[_0xf121b1(0xfd)](_0xf121b1(0xe8))[_0xf121b1(0xec)](_0x12d61f)[_0xf121b1(0xf1)](()=>{const _0x232f05=_0xf121b1;_0x51748d[_0x232f05(0x124)](_0x232f05(0xe3)),_0x29af61(_0x3d2134);})['catch'](_0x245092=>{const _0x27cea9=_0xf121b1;_0x51748d[_0x27cea9(0x124)](_0x27cea9(0xf3)+_0x245092),_0x29af61(_0x3d2134);});}catch(_0x33b122){_0x51748d[_0xf121b1(0x124)](_0xf121b1(0xf3)+_0x33b122),_0x29af61(_0x3d2134);}});}function updateAttachmentLog(_0x314b68,_0x34e7fa,_0x1b46c3,_0x9eae13,_0x3769ae,_0x448ecd=![]){return new Promise(_0x59a08b=>{const _0x6aeb37=a39_0x25f5;try{_0x9eae13[_0x6aeb37(0x124)](_0x6aeb37(0xe4)),Promise[_0x6aeb37(0x104)]()['then'](()=>getAttachmentBody(_0x34e7fa,_0x1b46c3,_0x9eae13))[_0x6aeb37(0xf1)](_0x37a5e6=>{const _0x40863b=_0x6aeb37;return _0x448ecd?storage[_0x40863b(0xfe)](_0x314b68,getTime(),_0x9eae13)['then'](_0x385a76=>{const _0x5ef973=_0x40863b;try{const _0x24453c=yaml[_0x5ef973(0x113)](_0x385a76);_0x24453c[_0x5ef973(0xe5)][_0x5ef973(0x123)]&&(_0x3769ae=!![]);}catch(_0x520427){_0x385a76='',_0x3769ae=!![];}const _0x2784f2=_0x385a76+'\x0a'+_0x37a5e6;return callUpdateAttachmentLog(_0x34e7fa,_0x1b46c3,_0x2784f2,_0x9eae13,_0x3769ae);}):callUpdateAttachmentLog(_0x34e7fa,_0x1b46c3,_0x37a5e6,_0x9eae13,_0x3769ae);})[_0x6aeb37(0xf1)](()=>_0x59a08b(_0x3769ae))[_0x6aeb37(0x105)](()=>_0x59a08b(_0x3769ae));}catch(_0x467ca9){_0x9eae13['log']('Error\x20Update\x20Attachment\x20Log\x20'+_0x467ca9),_0x59a08b(_0x3769ae);}});}function callUpdateLog(_0x1bd8de,_0x2acc94,_0x2fe4b0,_0x2b2923,_0x353e17,_0x3400ca=![]){return new Promise((_0x3eb21c,_0x1c75ab)=>{const _0x4cf344=a39_0x25f5;try{_0x353e17[_0x4cf344(0x124)]('Start\x20Update\x20Metadata\x20Log\x20isError\x20'+_0x3400ca+'\x20isSuccess\x20'+_0x2b2923);const _0x35813c=_0x2b2923&&!_0x3400ca?_0x4cf344(0xde):_0x2b2923&&_0x3400ca?_0x4cf344(0x11a):_0x4cf344(0x119),_0x4c978b={'Id':_0x2acc94,[_0x2fe4b0+_0x4cf344(0x108)]:_0x35813c,[_0x2fe4b0+_0x4cf344(0x12c)]:_0x3400ca,[_0x2fe4b0+_0x4cf344(0xf5)]:_0x2b2923,[_0x2fe4b0+_0x4cf344(0x12b)]:!![]};_0x1bd8de[_0x4cf344(0xfd)](_0x2fe4b0+_0x4cf344(0xf8))[_0x4cf344(0xec)](_0x4c978b)[_0x4cf344(0xf1)](()=>{const _0x33e19e=_0x4cf344;_0x353e17[_0x33e19e(0x124)](_0x33e19e(0x101)),_0x3eb21c(_0x4c978b[_0x2fe4b0+_0x33e19e(0x12c)]);})[_0x4cf344(0x105)](_0x3ab24c=>{const _0x2a2e39=_0x4cf344;_0x353e17[_0x2a2e39(0x124)](_0x2a2e39(0x103)+_0x3ab24c),_0x1c75ab(_0x3ab24c);});}catch(_0x289793){_0x353e17['log'](_0x4cf344(0x103)+_0x289793),_0x1c75ab(_0x289793);}});}module['exports']={'getTime':getTime,'post':post,'callUpdateInfo':callUpdateInfo,'callNextVlocityStep':callNextVlocityStep,'callComponentList':callComponentList,'updateAttachmentLog':updateAttachmentLog,'getAttachmentBody':getAttachmentBody,'callUpdateAttachmentLog':callUpdateAttachmentLog,'callUpdateLog':callUpdateLog};