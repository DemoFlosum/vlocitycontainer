const a41_0x560885=a41_0x4f44;(function(_0x2e54a3,_0x51c6f3){const _0x3f03a0=a41_0x4f44,_0x188792=_0x2e54a3();while(!![]){try{const _0x4dafff=parseInt(_0x3f03a0(0x18a))/0x1*(parseInt(_0x3f03a0(0x175))/0x2)+-parseInt(_0x3f03a0(0x19c))/0x3+parseInt(_0x3f03a0(0x16b))/0x4+-parseInt(_0x3f03a0(0x168))/0x5+-parseInt(_0x3f03a0(0x176))/0x6+-parseInt(_0x3f03a0(0x166))/0x7+parseInt(_0x3f03a0(0x186))/0x8*(parseInt(_0x3f03a0(0x177))/0x9);if(_0x4dafff===_0x51c6f3)break;else _0x188792['push'](_0x188792['shift']());}catch(_0xdbd373){_0x188792['push'](_0x188792['shift']());}}}(a41_0x9ecf,0xb32f1));const axios=require(a41_0x560885(0x16e)),yaml=require(a41_0x560885(0x179)),constants=require(a41_0x560885(0x194)),storage=require('../storage');function post(_0x5a9740,_0x196c41,_0x1f8105,_0x2afdaa){return new Promise((_0x39007e,_0x51bd6b)=>{const _0x378add=a41_0x4f44;try{const _0x146bdf={'Authorization':_0x378add(0x18d)+_0x196c41,'Content-Type':'application/json'};axios[_0x378add(0x19d)](_0x5a9740,_0x2afdaa,{'headers':_0x146bdf})[_0x378add(0x15d)](_0x5ea611=>{_0x39007e(_0x5ea611);})[_0x378add(0x1a1)](_0x3dbba6=>{const _0x1476f2=_0x378add;if(_0x3dbba6&&_0x3dbba6[_0x1476f2(0x178)]&&_0x3dbba6[_0x1476f2(0x178)][_0x1476f2(0x1a8)])typeof _0x3dbba6[_0x1476f2(0x178)][_0x1476f2(0x1a8)]!==_0x1476f2(0x17a)?_0x51bd6b(JSON['stringify'](_0x3dbba6[_0x1476f2(0x178)][_0x1476f2(0x1a8)])):_0x51bd6b(_0x3dbba6['response'][_0x1476f2(0x1a8)]);else _0x3dbba6['request']?_0x51bd6b(_0x3dbba6[_0x1476f2(0x193)]):_0x51bd6b(_0x3dbba6[_0x1476f2(0x180)]);});}catch(_0x272e01){_0x51bd6b(_0x272e01);}});}function callUpdateInfo(_0x2ab634,_0x4c0024,_0xe767a2,_0x688bf9,_0x30b011,_0x27dd61,_0x3723b2,_0x54d7bb,_0x4f2aa7=![]){return new Promise((_0x149adf,_0x4e288a)=>{const _0x4c170f=a41_0x4f44;try{_0x688bf9=_0x688bf9&&_0x688bf9['length']?_0x688bf9[_0x4c170f(0x169)]('__','')+'/':'';try{const _0x5e7206=yaml[_0x4c170f(0x184)](_0x27dd61);_0x5e7206[_0x4c170f(0x185)]&&(_0x4f2aa7=_0x5e7206[_0x4c170f(0x185)][_0x4c170f(0x18e)]>0x0);}catch(_0x5ec14e){}_0x54d7bb['log'](_0x4c170f(0x189)+_0x3723b2);const _0x461bbc={'logId':_0xe767a2,'attachmentLogId':_0x30b011,'isJobCompleted':!![],'status':_0x4c170f(0x1aa),'isSuccess':_0x3723b2,'isError':_0x4f2aa7,'attachmentBody':_0x27dd61+'Full\x20Process:\x0a\x0a'+_0x54d7bb['logs'][_0x4c170f(0x19a)]('\x0a')},_0x419502=_0x2ab634+_0x4c170f(0x1a3)+_0x688bf9+_0x4c170f(0x190),_0x4c85d9={'methodType':constants[_0x4c170f(0x16a)],'body':JSON['stringify'](_0x461bbc)};post(_0x419502,_0x4c0024,_0x688bf9,_0x4c85d9)['then'](_0x113b3a=>{const _0x1ed8e8=_0x4c170f;_0x54d7bb[_0x1ed8e8(0x1a4)](_0x1ed8e8(0x181)+_0x3723b2),_0x149adf(_0x113b3a);})[_0x4c170f(0x1a1)](_0x498e10=>{const _0x50372f=_0x4c170f;_0x54d7bb[_0x50372f(0x1a4)](_0x50372f(0x15e)+_0x3723b2),_0x4e288a(_0x498e10);});}catch(_0x1227c1){_0x4e288a(_0x1227c1);}});}function callUpdateAttachmentInfo(_0x4be703,_0x164b3d,_0xd20e63,_0x174f05,_0x549e37,_0x93d392){return new Promise((_0x490db4,_0x144d7c)=>{const _0x24dbb2=a41_0x4f44;try{_0xd20e63=_0xd20e63&&_0xd20e63[_0x24dbb2(0x18e)]?_0xd20e63[_0x24dbb2(0x169)]('__','')+'/':'',_0x93d392[_0x24dbb2(0x1a4)](_0x24dbb2(0x17c));const _0x17faae={'attachmentLogId':_0x174f05,'attachmentBody':_0x24dbb2(0x18f)+_0x549e37+_0x24dbb2(0x1a0)+_0x93d392[_0x24dbb2(0x19e)][_0x24dbb2(0x19a)]('\x0a')},_0x365aa0=_0x4be703+_0x24dbb2(0x1a3)+_0xd20e63+'unlocked-packages',_0x2a5ed3={'methodType':constants[_0x24dbb2(0x18c)],'body':JSON[_0x24dbb2(0x163)](_0x17faae)};post(_0x365aa0,_0x164b3d,_0xd20e63,_0x2a5ed3)[_0x24dbb2(0x15d)](_0x52dcfe=>{const _0x127b16=_0x24dbb2;_0x93d392[_0x127b16(0x1a4)](_0x127b16(0x18b)),_0x490db4(_0x52dcfe);})[_0x24dbb2(0x1a1)](_0x3e4c52=>{const _0x1d67a5=_0x24dbb2;_0x93d392['log'](_0x1d67a5(0x182)),_0x144d7c(_0x3e4c52);});}catch(_0x43eadf){_0x144d7c(_0x43eadf);}});}function callNextVlocityStep(_0x423fd9,_0x407cb3,_0x2fcff4,_0x19d039,_0x59bfcf,_0x170a59,_0xe1562f,_0x3df0fd,_0x2e291f){return new Promise((_0x2d0788,_0x382df7)=>{const _0x386117=a41_0x4f44;try{_0x2fcff4=_0x2fcff4&&_0x2fcff4['length']?_0x2fcff4[_0x386117(0x169)]('__','')+'/':'',_0x2e291f[_0x386117(0x1a4)](_0x386117(0x165));const _0x2da28a={'pipelineId':_0x19d039,'pipelineNumber':_0x59bfcf,'isPass':_0xe1562f,'branchId':_0x3df0fd,'pipelineKey':_0x170a59},_0x10c2b9=_0x423fd9+_0x386117(0x1a3)+_0x2fcff4+_0x386117(0x190),_0x3b3d3f={'methodType':constants['METHOD_NEXT_VLOCITY_STEP'],'body':JSON[_0x386117(0x163)](_0x2da28a)};post(_0x10c2b9,_0x407cb3,_0x2fcff4,_0x3b3d3f)[_0x386117(0x15d)](_0xe01717=>{const _0x9846e9=_0x386117;_0x2e291f[_0x9846e9(0x1a4)]('End\x20Next\x20Vlocity\x20Step'),_0x2d0788(_0xe01717);})[_0x386117(0x1a1)](_0x336519=>{_0x2e291f['log']('Error\x20Next\x20Vlocity\x20Step'),_0x382df7(_0x336519);});}catch(_0x2b643b){_0x382df7(_0x2b643b);}});}function callComponentList(_0x49b61f,_0x1b7907,_0x39ceac,_0x1d5726,_0x23bcb3,_0x4523f5,_0x5a5222=[]){return new Promise((_0x21eb61,_0x3fa09d)=>{const _0x5765c6=a41_0x4f44;try{_0x4523f5[_0x5765c6(0x1a4)](_0x5765c6(0x174));const _0x2ba1b6=_0x1d5726?_0x1d5726[_0x5765c6(0x169)]('__','')+'/':'',_0x44bbb6=_0x49b61f+_0x5765c6(0x1a3)+_0x2ba1b6+_0x5765c6(0x190),_0x27dba1={'methodType':constants[_0x5765c6(0x191)],'body':JSON[_0x5765c6(0x163)](_0x39ceac)};post(_0x44bbb6,_0x1b7907,_0x1d5726,_0x27dba1)['then'](_0x38271a=>{const _0x58189f=_0x5765c6;let {data:_0x289c4b}=_0x38271a;_0x289c4b=JSON[_0x58189f(0x15f)](_0x289c4b),_0x4523f5[_0x58189f(0x1a4)](_0x58189f(0x172)+Number[_0x58189f(0x192)](_0x5a5222[_0x58189f(0x18e)]/_0x23bcb3*0x64)[_0x58189f(0x1a5)](0x2)+'%'),_0x5a5222['push'](..._0x289c4b[_0x58189f(0x161)]),_0x289c4b[_0x58189f(0x197)]&&_0x289c4b[_0x58189f(0x197)][_0x58189f(0x18e)]?callComponentList(_0x49b61f,_0x1b7907,_0x289c4b[_0x58189f(0x197)],_0x1d5726,_0x23bcb3,_0x4523f5,_0x5a5222)[_0x58189f(0x15d)](_0xe23044=>_0x21eb61(_0xe23044))[_0x58189f(0x1a1)](_0x1d9c29=>{const _0x357f25=_0x58189f;_0x4523f5[_0x357f25(0x1a4)](_0x357f25(0x173)),_0x3fa09d(_0x1d9c29);}):(_0x4523f5['log'](_0x58189f(0x199)),_0x21eb61(_0x5a5222));})[_0x5765c6(0x1a1)](_0x1184d1=>{const _0x54f5e3=_0x5765c6;_0x4523f5[_0x54f5e3(0x1a4)](_0x54f5e3(0x173)),_0x3fa09d(_0x1184d1);});}catch(_0x562a8){_0x4523f5[_0x5765c6(0x1a4)](_0x5765c6(0x173)),_0x3fa09d(_0x562a8);}});}function a41_0x9ecf(){const _0x624956=['METHOD_UPDATE_LOG','2539868PStAod','record','Error\x20Get\x20Attachment\x20Body\x20','axios','\x20isSuccess\x20','getMonth','end','Retrieved:\x20','Error\x20Call\x20Component\x20List','Start\x20Call\x20Component\x20List','506722GEYbHa','6965622IRbFWJ','62973VnJYqv','response','js-yaml','string','Succeed__c','Start\x20Update\x20Log','error','Error\x20Update\x20Attachment\x20Log\x20','push','message','End\x20Update\x20Log\x20is\x20Success\x20=\x20','Error\x20Update\x20Log','Start\x20Update\x20Attachment\x20Log','load','Errors','2968HDxsaJ','Is_Error__c','from','Start\x20Update\x20Log\x20is\x20Success\x20=\x20','4LrIuJG','End\x20Update\x20Log','METHOD_UPDATE_ATTACHMENT_LOG','OAuth\x20','length','Vlocity\x20Log\x20File:\x0a\x0a','unlocked-packages','METHOD_TYPE_GET_ATTACHMENTS','parseFloat','request','../../constants','getHours','getFullYear','idList','sobject','End\x20Call\x20Component\x20List','join','resolve','2067153kDWAAO','post','logs','Partial\x20Completed','\x0a\x0aFull\x20Process:\x0a\x0a','catch','getDate','/services/apexrest/','log','toFixed','forEach','blob','data','0$1','Completed','Job_Completed__c','Error\x20Update\x20Metadata\x20Log\x20','toString','Attachment','End\x20Update\x20Attachment\x20Log','End\x20Update\x20Metadata\x20Log','concat','then','Error\x20Update\x20Log\x20is\x20Success\x20=\x20','parse','Start\x20Update\x20Metadata\x20Log\x20isError\x20','recordList','Body','stringify','base64','Start\x20Next\x20Vlocity\x20Step','1406398oiCBbM','exports','7297295aOnVlx','replace'];a41_0x9ecf=function(){return _0x624956;};return a41_0x9ecf();}function a41_0x4f44(_0x4a2ee3,_0x1378ea){const _0x9ecf48=a41_0x9ecf();return a41_0x4f44=function(_0x4f4464,_0xe1fa6f){_0x4f4464=_0x4f4464-0x15b;let _0x20b9af=_0x9ecf48[_0x4f4464];return _0x20b9af;},a41_0x4f44(_0x4a2ee3,_0x1378ea);}function getAttachmentBody(_0x4268c1,_0x39277f,_0x558802,_0x4ffedf=!![]){return new Promise(_0x16622a=>{const _0x24c641=a41_0x4f44;try{const _0x310d92=_0x4268c1[_0x24c641(0x198)](_0x24c641(0x1ae))[_0x24c641(0x16c)](_0x39277f)[_0x24c641(0x1a7)](_0x24c641(0x162)),_0x2cb586=[];_0x310d92['on']('data',(_0x9b4102,_0x5d532c)=>{const _0xfba7bf=_0x24c641;_0x2cb586[_0xfba7bf(0x17f)](_0x9b4102);}),_0x310d92['on'](_0x24c641(0x171),()=>{const _0x2a085f=_0x24c641;_0x4ffedf?_0x16622a(_0x2cb586[_0x2a085f(0x19a)]('')):_0x16622a(Buffer[_0x2a085f(0x15c)](_0x2cb586));}),_0x310d92['on'](_0x24c641(0x17d),_0x598e56=>{const _0x321fee=_0x24c641;_0x558802['log'](_0x321fee(0x16d)+_0x598e56),_0x16622a('');});}catch(_0x3b5934){_0x558802[_0x24c641(0x1a4)]('Error\x20Get\x20Attachment\x20Body\x20'+_0x3b5934),_0x16622a('');}});}function getTime(){const _0x317469=a41_0x560885,_0xfeee65=new Date(),_0x1e86dd=[_0xfeee65[_0x317469(0x1a2)](),_0xfeee65[_0x317469(0x170)]()+0x1,_0xfeee65[_0x317469(0x196)](),_0xfeee65[_0x317469(0x195)](),_0xfeee65['getMinutes'](),_0xfeee65['getSeconds']()];return _0x1e86dd[_0x317469(0x1a6)](_0x46c780=>_0x46c780=_0x46c780[_0x317469(0x1ad)]()[_0x317469(0x169)](/^([0-9])$/,_0x317469(0x1a9))),_0x1e86dd[0x2]+'-'+_0x1e86dd[0x1]+'-'+_0x1e86dd[0x0]+'\x20'+_0x1e86dd[0x3]+':'+_0x1e86dd[0x4]+':'+_0x1e86dd[0x5];}function callUpdateAttachmentLog(_0x3f0db3,_0x1ff50a,_0x40377,_0x48cd18,_0x45d5ca){return new Promise(_0x2ce1fa=>{const _0x26f2aa=a41_0x4f44;try{_0x48cd18[_0x26f2aa(0x1a4)](_0x26f2aa(0x183));const _0x581345=_0x40377+'\x0a'+_0x48cd18[_0x26f2aa(0x19e)][_0x26f2aa(0x19a)]('\x0a');_0x48cd18['logs']=[];const _0x4d7cdf={'Id':_0x1ff50a,'Body':Buffer[_0x26f2aa(0x188)](_0x581345)[_0x26f2aa(0x1ad)](_0x26f2aa(0x164)),'ContentType':'text/plain'};_0x3f0db3['sobject'](_0x26f2aa(0x1ae))['update'](_0x4d7cdf)[_0x26f2aa(0x15d)](()=>{const _0x1d8376=_0x26f2aa;_0x48cd18[_0x1d8376(0x1a4)](_0x1d8376(0x1af)),_0x2ce1fa(_0x45d5ca);})['catch'](_0x3e1514=>{const _0x14fbae=_0x26f2aa;_0x48cd18[_0x14fbae(0x1a4)]('Error\x20Update\x20Attachment\x20Log\x20'+_0x3e1514),_0x2ce1fa(_0x45d5ca);});}catch(_0x4d7872){_0x48cd18[_0x26f2aa(0x1a4)](_0x26f2aa(0x17e)+_0x4d7872),_0x2ce1fa(_0x45d5ca);}});}function updateAttachmentLog(_0x5d56ba,_0x5beb6d,_0x4802d0,_0x4e6540,_0x16106a,_0x225dae=![]){return new Promise(_0x34922b=>{const _0x2f6c5e=a41_0x4f44;try{_0x4e6540[_0x2f6c5e(0x1a4)](_0x2f6c5e(0x183)),Promise[_0x2f6c5e(0x19b)]()[_0x2f6c5e(0x15d)](()=>getAttachmentBody(_0x5beb6d,_0x4802d0,_0x4e6540))[_0x2f6c5e(0x15d)](_0xfbfc81=>{const _0x5e341a=_0x2f6c5e;if(_0x225dae)return storage['readLogFile'](_0x5d56ba,getTime(),_0x4e6540)[_0x5e341a(0x15d)](_0x5dbbfb=>{const _0x257315=_0x5e341a;try{const _0x40635b=yaml[_0x257315(0x184)](_0x5dbbfb);_0x40635b[_0x257315(0x185)][_0x257315(0x18e)]&&(_0x16106a=!![]);}catch(_0x40f3b0){_0x5dbbfb='',_0x16106a=!![];}const _0x39ed5b=_0x5dbbfb+'\x0a'+_0xfbfc81;return callUpdateAttachmentLog(_0x5beb6d,_0x4802d0,_0x39ed5b,_0x4e6540,_0x16106a);});return callUpdateAttachmentLog(_0x5beb6d,_0x4802d0,_0xfbfc81,_0x4e6540,_0x16106a);})[_0x2f6c5e(0x15d)](()=>_0x34922b(_0x16106a))[_0x2f6c5e(0x1a1)](()=>_0x34922b(_0x16106a));}catch(_0x30fce2){_0x4e6540['log'](_0x2f6c5e(0x17e)+_0x30fce2),_0x34922b(_0x16106a);}});}function callUpdateLog(_0x487873,_0x4e227f,_0x6b4eb6,_0x4a0570,_0x4a7f1c,_0x178c2e=![]){return new Promise((_0x41b059,_0x7c324f)=>{const _0x2527f5=a41_0x4f44;try{_0x4a7f1c[_0x2527f5(0x1a4)](_0x2527f5(0x160)+_0x178c2e+_0x2527f5(0x16f)+_0x4a0570);const _0x2b0284=_0x4a0570&&!_0x178c2e?_0x2527f5(0x1aa):_0x4a0570&&_0x178c2e?_0x2527f5(0x19f):'Exception',_0x24417b={'Id':_0x4e227f,[_0x6b4eb6+'Status__c']:_0x2b0284,[_0x6b4eb6+_0x2527f5(0x187)]:_0x178c2e,[_0x6b4eb6+_0x2527f5(0x17b)]:_0x4a0570,[_0x6b4eb6+_0x2527f5(0x1ab)]:!![]};_0x487873[_0x2527f5(0x198)](_0x6b4eb6+'Metadata_Log__c')['update'](_0x24417b)[_0x2527f5(0x15d)](()=>{const _0xabb71b=_0x2527f5;_0x4a7f1c[_0xabb71b(0x1a4)](_0xabb71b(0x15b)),_0x41b059(_0x24417b[_0x6b4eb6+_0xabb71b(0x187)]);})['catch'](_0x5568bc=>{const _0x6d188b=_0x2527f5;_0x4a7f1c[_0x6d188b(0x1a4)](_0x6d188b(0x1ac)+_0x5568bc),_0x7c324f(_0x5568bc);});}catch(_0x49dee8){_0x4a7f1c[_0x2527f5(0x1a4)](_0x2527f5(0x1ac)+_0x49dee8),_0x7c324f(_0x49dee8);}});}module[a41_0x560885(0x167)]={'getTime':getTime,'post':post,'callUpdateInfo':callUpdateInfo,'callNextVlocityStep':callNextVlocityStep,'callComponentList':callComponentList,'updateAttachmentLog':updateAttachmentLog,'getAttachmentBody':getAttachmentBody,'callUpdateAttachmentLog':callUpdateAttachmentLog,'callUpdateLog':callUpdateLog};